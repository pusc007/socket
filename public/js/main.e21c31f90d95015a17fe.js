!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=75)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=s,e.default=o,t.exports=e.default},function(t,e,i){var n=i(38),r=i(39),s=i(40),a=i(41);t.exports=function(t){return n(t)||r(t)||s(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){const n=i(58),r=i(59),s=String.fromCharCode(30);t.exports={protocol:4,encodePacket:n,encodePayload:(t,e)=>{const i=t.length,r=new Array(i);let a=0;t.forEach((t,o)=>{n(t,!1,t=>{r[o]=t,++a===i&&e(r.join(s))})})},decodePacket:r,decodePayload:(t,e)=>{const i=t.split(s),n=[];for(let t=0;t<i.length;t++){const s=r(i[t],e);if(n.push(s),"error"===s.type)break}return n}}},function(t,e,i){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){(function(n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))}),e.splice(r,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(61)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,i(8))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,l=[],c=!1,u=-1;function d(){c&&h&&(c=!1,h.length?l=h.concat(l):u=-1,l.length&&p())}function p(){if(!c){var t=o(d);c=!0;for(var e=l.length;e;){for(h=l,l=[];++u<e;)h&&h[u].run();u=-1,e=l.length}h=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||c||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){(function(n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))}),e.splice(r,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(52)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,i(8))},function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(t,e,i){"use strict";var n=i(45),r=i(47);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=x,e.resolve=function(t,e){return x(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?x(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=x(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(48);function x(t,e,i){if(t&&r.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,i),n}s.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),o=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(o);l[0]=l[0].replace(/\\/g,"/");var x=t=l.join(o);if(x=x.trim(),!i&&1===t.split("#").length){var v=h.exec(x);if(v)return this.path=x,this.href=x,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=a.exec(x);if(b){var E=(b=b[0]).toLowerCase();this.protocol=E,x=x.substr(b.length)}if(i||b||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===x.substr(0,2);!S||b&&_[b]||(x=x.substr(2),this.slashes=!0)}if(!_[b]&&(S||b&&!g[b])){for(var T,w,A=-1,R=0;R<d.length;R++){-1!==(C=x.indexOf(d[R]))&&(-1===A||C<A)&&(A=C)}-1!==(w=-1===A?x.lastIndexOf("@"):x.lastIndexOf("@",A))&&(T=x.slice(0,w),x=x.slice(w+1),this.auth=decodeURIComponent(T)),A=-1;for(R=0;R<u.length;R++){var C;-1!==(C=x.indexOf(u[R]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=x.length),this.host=x.slice(0,A),x=x.slice(A),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var M=this.hostname.split(/\./),P=(R=0,M.length);R<P;R++){var O=M[R];if(O&&!O.match(p)){for(var D="",F=0,k=O.length;F<k;F++)O.charCodeAt(F)>127?D+="x":D+=O[F];if(!D.match(p)){var N=M.slice(0,R),L=M.slice(R+1),B=O.match(f);B&&(N.push(B[1]),L.unshift(B[2])),L.length&&(x="/"+L.join(".")+x),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var X=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+X,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!m[E])for(R=0,P=c.length;R<P;R++){var Y=c[R];if(-1!==x.indexOf(Y)){var V=encodeURIComponent(Y);V===Y&&(V=escape(Y)),x=x.split(Y).join(V)}}var G=x.indexOf("#");-1!==G&&(this.hash=x.substr(G),x=x.slice(0,G));var j=x.indexOf("?");if(-1!==j?(this.search=x.substr(j),this.query=x.substr(j+1),e&&(this.query=y.parse(this.query)),x=x.slice(0,j)):e&&(this.search="",this.query={}),x&&(this.pathname=x),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var W=this.search||"";this.path=X+W}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(x(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];"protocol"!==c&&(i[c]=t[c])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!g[t.protocol]){for(var u=Object.keys(t),d=0;d<u.length;d++){var p=u[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||_[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",y=i.search||"";i.path=m+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var x=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||x||i.host&&t.pathname,E=b,S=i.pathname&&i.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===S[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=S.shift(),(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=S.slice(-1)[0],A=(i.host||t.host||S.length>1)&&("."===w||".."===w)||""===w,R=0,C=S.length;C>=0;C--)"."===(w=S[C])?S.splice(C,1):".."===w?(S.splice(C,1),R++):R&&(S.splice(C,1),R--);if(!b&&!E)for(;R--;R)S.unshift("..");!b||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var I,M=""===S[0]||S[0]&&"/"===S[0].charAt(0);T&&(i.hostname=i.host=M?"":S.length?S.shift():"",(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift()));return(b=b||i.host&&S.length)&&!M&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){const n=i(4),r=i(5),s=i(6)("engine.io-client:transport");t.exports=class extends r{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const i=new Error(t);return i.type="TransportError",i.description=e,this.emit("error",i),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):s("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}}},function(t,e){e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},i=t.split("&"),n=0,r=i.length;n<r;n++){var s=i[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=i(5),r=i(70),s=i(28),a=i(71)("socket.io-parser");var o;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(o=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return a("encoding packet %j",t),t.type!==o.EVENT&&t.type!==o.ACK||!s.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==o.BINARY_EVENT&&t.type!==o.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),a("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=r.deconstructPacket(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}};class h extends n{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===o.BINARY_EVENT||e.type===o.BINARY_ACK?(this.reconstructor=new l(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!s.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===o[i.type])throw new Error("unknown packet type "+i.type);if(i.type===o.BINARY_EVENT||i.type===o.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(n,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(r)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}i.nsp=t.substring(n,e)}else i.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!h.isPayloadValid(i.type,n))throw new Error("invalid payload");i.data=n}return a("decoded %s as %j",t,i),i}static isPayloadValid(t,e){switch(t){case o.CONNECT:return"object"==typeof e;case o.DISCONNECT:return void 0===e;case o.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case o.EVENT:case o.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case o.ACK:case o.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=h;class l{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},function(t,e,i){"use strict";t.exports=function(t,e){if(t){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),l.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},l.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,n,s,a){var o=r?r+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,s),!0;case 6:return c.fn.call(c.context,e,i,n,s,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},l.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||h(this,s);else{for(var o=0,l=[],c=a.length;o<c;o++)(a[o].fn!==e||n&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[s]=1===l.length?l[0]:l:h(this,s)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,o,h,l,c,p,f,_=e&&e.length,g=_?e[0]*i:t.length,y=r(t,0,g,i,!0),x=[];if(!y||y.next===y.prev)return x;if(_&&(y=function(t,e,i,n){var a,o,h,l,c,p=[];for(a=0,o=e.length;a<o;a++)h=e[a]*n,l=a<o-1?e[a+1]*n:t.length,(c=r(t,h,l,n,!1))===c.next&&(c.steiner=!0),p.push(m(c));for(p.sort(u),a=0;a<p.length;a++)i=s(i=d(p[a],i),i.next);return i}(t,e,y,i)),t.length>80*i){n=h=t[0],o=l=t[1];for(var v=i;v<g;v+=i)(c=t[v])<n&&(n=c),(p=t[v+1])<o&&(o=p),c>h&&(h=c),p>l&&(l=p);f=0!==(f=Math.max(h-n,l-o))?1/f:0}return a(y,x,i,n,o,f),x}function r(t,e,i,n,r){var s,a;if(r===C(t,e,i,n)>0)for(s=e;s<i;s+=n)a=w(s,t[s],t[s+1],a);else for(s=i-n;s>=e;s-=n)a=w(s,t[s],t[s+1],a);return a&&x(a,a.next)&&(A(a),a=a.next),a}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!x(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(A(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function a(t,e,i,n,r,u,d){if(t){!d&&u&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,a,o,h,l=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,n=i,o=0,e=0;e<l&&(o++,n=n.nextZ);e++);for(h=l;o>0||h>0&&n;)0!==o&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(a>1)}(r)}(t,n,r,u);for(var p,m,_=t;t.prev!==t.next;)if(p=t.prev,m=t.next,u?h(t,n,r,u):o(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),A(t),t=m.next,_=m.next;else if((t=m)===_){d?1===d?a(t=l(s(t),e,i),e,i,n,r,u,2):2===d&&c(t,e,i,n,r,u):a(s(t),e,i,n,r,u,1);break}}}function o(t){var e=t.prev,i=t,n=t.next;if(y(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,a=t.next;if(y(r,s,a)>=0)return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,h=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,l=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,c=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,u=f(o,h,e,i,n),d=f(l,c,e,i,n),p=t.prevZ,m=t.nextZ;p&&p.z>=u&&m&&m.z<=d;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,a=n.next.next;!x(r,a)&&v(r,n,n.next,a)&&S(r,a)&&S(a,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(a.i/i),A(n),A(n.next),n=t=a),n=n.next}while(n!==t);return s(n)}function c(t,e,i,n,r,o){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&g(h,l)){var c=T(h,l);return h=s(h,h.next),c=s(c,c.next),a(h,e,i,n,r,o),void a(c,e,i,n,r,o)}l=l.next}h=h.next}while(h!==t)}function u(t,e){return t.x-e.x}function d(t,e){var i=function(t,e){var i,n=e,r=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>a){if(a=o,o===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i;var h,l=i,c=i.x,u=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=c&&r!==n.x&&_(s<u?r:a,s,c,u,s<u?a:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),S(n,t)&&(h<d||h===d&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,d=h)),n=n.next}while(n!==l);return i}(t,e);if(!i)return e;var n=T(i,t),r=s(i,i.next);return s(n,n.next),e===i?r:e}function p(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,r,s,a,o){return(r-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(n-o)-(i-a)*(e-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(S(t,e)&&S(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||x(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,n){var r=E(y(t,e,i)),s=E(y(t,e,n)),a=E(y(i,n,t)),o=E(y(i,n,e));return r!==s&&a!==o||(!(0!==r||!b(t,i,e))||(!(0!==s||!b(t,n,e))||(!(0!==a||!b(i,t,n))||!(0!==o||!b(i,e,n)))))}function b(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function E(t){return t>0?1:t<0?-1:0}function S(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function T(t,e){var i=new R(t.i,t.x,t.y),n=new R(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function w(t,e,i,n){var r=new R(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,n){for(var r=0,s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,a=Math.abs(C(t,0,s,i));if(r)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,c=o<h-1?e[o+1]*i:t.length;a-=Math.abs(C(t,l,c,i))}var u=0;for(o=0;o<n.length;o+=3){var d=n[o]*i,p=n[o+1]*i,f=n[o+2]*i;u+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var a=0;a<e;a++)i.vertices.push(t[r][s][a]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),s=t.indexOf("]");-1!=r&&-1!=s&&(t=t.substring(0,r)+t.substring(r,s).replace(/:/g,";")+t.substring(s,t.length));for(var a,o,h=i.exec(t||""),l={},c=14;c--;)l[n[c]]=h[c]||"";return-1!=r&&-1!=s&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(t,e){var i=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1);"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1);return i}(0,l.path),l.queryKey=(a=l.query,o={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(o[e]=i)})),o),l}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const n=i(54),r=i(27),s=i(14),a=i(29),o=i(74),h=i(30),l=i(9)("socket.io-client:manager");class c extends h.StrictEventEmitter{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new o({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||s;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(l("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=n(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=a.on(e,"open",(function(){i.onopen(),t&&t()})),s=a.on(e,"error",e=>{l("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()});if(!1!==this._timeout){const t=this._timeout;l("connect attempt will timeout after %d",t),0===t&&r();const i=setTimeout(()=>{l("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))},t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(r),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){l("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(a.on(t,"ping",this.onping.bind(this)),a.on(t,"data",this.ondata.bind(this)),a.on(t,"error",this.onerror.bind(this)),a.on(t,"close",this.onclose.bind(this)),a.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){l("error",t),this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new r.Socket(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void l("socket %s is still active, skipping close",t)}this._close()}_packet(t){l("writing packet %j",t);const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){l("cleanup"),this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){l("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){l("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const i=setTimeout(()=>{t.skipReconnect||(l("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(l("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(l("reconnect success"),t.onreconnect())}))},e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=c},function(t,e,i){const n=i(22),r=i(57),s=i(63),a=i(64);e.polling=function(t){let e,i=!1,a=!1;const o=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),i=t.hostname!==location.hostname||n!==t.port,a=t.secure!==e}if(t.xdomain=i,t.xscheme=a,e=new n(t),"open"in e&&!t.forceJSONP)return new r(t);if(!o)throw new Error("JSONP disabled");return new s(t)},e.websocket=a},function(t,e,i){const n=i(56),r=i(10);t.exports=function(t){const e=t.xdomain,i=t.xscheme,s=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&s)return new XDomainRequest}catch(t){}if(!e)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},function(t,e,i){const n=i(12),r=i(13),s=i(4),a=i(25),o=i(6)("engine.io-client:polling");t.exports=class extends n{get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{o("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(o("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){o("pre-pause polling complete"),--t||e()}))),this.writable||(o("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){o("pre-pause writing complete"),--t||e()})))}else e()}poll(){o("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){o("polling got data %s",t);s.decodePayload(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():o('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{o("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(o("transport open - closing"),t()):(o("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,s.encodePayload(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+t}}},function(t,e){const i=Object.create(null);i.open="0",i.close="1",i.ping="2",i.pong="3",i.message="4",i.upgrade="5",i.noop="6";const n=Object.create(null);Object.keys(i).forEach(t=>{n[i[t]]=t});t.exports={PACKET_TYPES:i,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},function(t,e,i){"use strict";var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={},a=0,o=0;function h(t){var e="";do{e=r[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function l(){var t=h(+new Date);return t!==n?(a=0,n=t):t+"."+h(a++)}for(;o<64;o++)s[r[o]]=o;l.encode=h,l.decode=function(t){var e=0;for(o=0;o<t.length;o++)e=64*e+s[t.charAt(o)];return e},t.exports=l},function(t,e){t.exports.pick=(t,...e)=>e.reduce((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e),{})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i(14),r=i(29),s=i(30),a=i(9)("socket.io-client:socket"),o=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class h extends s.StrictEventEmitter{constructor(t,e,i){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[r.on(t,"open",this.onopen.bind(this)),r.on(t,"packet",this.onpacket.bind(this)),r.on(t,"error",this.onerror.bind(this)),r.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(o.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:n.PacketType.EVENT,data:e,options:{}};i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++);const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?a("discard packet as the transport is not currently writable"):this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth(t=>{this.packet({type:n.PacketType.CONNECT,data:t})}):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case n.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(t);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(t);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,a("sending ack %j",r),e.packet({type:n.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(t){return n&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||s&&t instanceof Blob||a&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,i){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let i=0,n=e.length;i<n;i++)if(t(e[i]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,i){return t.on(e,i),function(){t.off(e,i)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrictEventEmitter=void 0;const n=i(5);e.StrictEventEmitter=class extends n{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e),this}emitReserved(t,...e){return super.emit(t,...e),this}listeners(t){return super.listeners(t)}}},function(t){t.exports=JSON.parse('{"alpha":{"start":1,"end":0},"scale":{"start":0.3,"end":0.01,"minimumScaleMultiplier":1},"color":{"start":"#ecf71e","end":"#f20909"},"speed":{"start":200,"end":50,"minimumSpeedMultiplier":1},"acceleration":{"x":0,"y":300},"maxSpeed":0,"startRotation":{"min":0,"max":360},"noRotation":false,"rotationSpeed":{"min":0,"max":0},"lifetime":{"min":0.2,"max":0.8},"blendMode":"normal","frequency":0.002,"emitterLifetime":0.1,"maxParticles":50,"pos":{"x":0,"y":0},"addAtBack":false,"spawnType":"circle","spawnCircle":{"x":0,"y":0,"r":0}}')},function(t){t.exports=JSON.parse('{"skeleton":{"width":630.41,"height":661.62,"hash":" ","name":"armatureName"},"bones":[{"name":"root"},{"x":144.22,"y":158.18,"name":"IK_Lhand","parent":"root"},{"x":-13.64,"y":169.81,"name":"IK_Rhand","parent":"root"},{"x":45.23,"y":95.63,"name":"bone","parent":"root"},{"length":45,"x":42.81,"y":49.74,"rotation":-73.82,"name":"jiaoL","parent":"root"},{"length":63,"x":-53.15,"y":75.74,"rotation":-101.43,"name":"jiaoR","parent":"root"},{"length":209,"y":4.69,"rotation":106.65,"name":"shenti","parent":"bone"},{"length":76,"x":-40.02,"y":16.48,"rotation":-104.57,"name":"datuiR","parent":"bone"},{"length":137,"x":-2.34,"y":1.16,"rotation":-165.01,"name":"weiba1","parent":"bone"},{"length":65,"x":3.53,"y":-3.53,"rotation":-41.71,"name":"datuiL","parent":"bone"},{"length":76,"x":166.51,"y":34.93,"rotation":93.15,"name":"chibangR1","parent":"shenti"},{"length":25,"x":140.03,"y":-0.14,"rotation":112.65,"name":"jianbang","parent":"shenti"},{"length":32,"x":100.31,"y":-46.38,"rotation":-52.31,"name":"bone12","parent":"weiba1"},{"length":26,"x":128.5,"y":-45.26,"rotation":-62.99,"name":"bone13","parent":"weiba1"},{"length":52,"x":75.98,"y":-1.61,"rotation":-119.99,"name":"xiaotuiR","parent":"datuiR"},{"length":60,"x":116.89,"y":-56.72,"rotation":54.67,"name":"chibangL1","parent":"shenti"},{"length":47,"x":51.86,"y":-57.38,"rotation":-24.37,"name":"bone11","parent":"weiba1"},{"length":96,"x":203.63,"y":2.93,"rotation":-54.16,"name":"bozixia","parent":"shenti"},{"length":53,"x":65.75,"y":-1.86,"rotation":-141.04,"name":"xiaotuiL","parent":"datuiL"},{"length":66,"x":141.22,"y":-0.91,"rotation":-27.7,"name":"weiba2","parent":"weiba1"},{"length":41,"x":103.87,"y":-47.07,"rotation":-165.85,"name":"dabiL","parent":"shenti"},{"length":21,"x":37.58,"y":-33.74,"rotation":-52.56,"name":"bone14","parent":"weiba2"},{"length":62,"x":67.21,"rotation":-22.66,"name":"bone26","parent":"weiba2"},{"length":62,"x":86.13,"y":3.76,"rotation":-35.23,"name":"bozishang","parent":"bozixia"},{"length":62,"x":46.85,"y":-1.88,"rotation":46.38,"name":"xiaobiL","parent":"dabiL"},{"length":74,"x":24.35,"y":7.44,"rotation":-15.05,"name":"dabiR","parent":"jianbang"},{"length":270,"x":56.91,"y":0.22,"rotation":-43.37,"name":"chibangL3","parent":"chibangL1"},{"length":148,"x":58.47,"y":-8.06,"rotation":-85.15,"name":"bone2","parent":"chibangR1"},{"length":14,"x":19.07,"y":-26.6,"rotation":-64.01,"name":"bone15","parent":"bone26"},{"length":44,"x":61.41,"y":0.67,"rotation":15.4,"name":"shouL","parent":"xiaobiL"},{"length":95,"x":148.48,"y":0.57,"rotation":-26.5,"name":"bone3","parent":"bone2"},{"length":110,"x":46.71,"y":-8.35,"rotation":109.1,"name":"er","parent":"bozishang"},{"length":160,"x":57.56,"y":-28.97,"rotation":-66.19,"name":"zui","parent":"bozishang"},{"length":84,"x":55.05,"y":2.61,"rotation":-17.89,"name":"tou","parent":"bozishang"},{"length":56,"x":63.75,"y":-1.25,"rotation":-81.13,"name":"weiba3","parent":"bone26"},{"length":17,"x":42.55,"y":-24.63,"rotation":-111.95,"name":"bone16","parent":"bone26"},{"length":86,"x":25.11,"y":-26.29,"rotation":130.37,"name":"chujiao","parent":"bozishang"},{"length":62,"x":70.15,"y":-1.98,"rotation":140.33,"name":"xiaobiR","parent":"dabiR"},{"length":64,"x":14.79,"y":36.22,"rotation":162.1,"name":"tou1","parent":"tou"},{"length":14,"x":48.15,"y":-18.65,"rotation":-48.63,"name":"bone18","parent":"weiba3"},{"length":129,"x":70.29,"y":32.52,"rotation":124.1,"name":"toujiaoL","parent":"tou"},{"length":205,"x":41.95,"y":40.46,"rotation":131.51,"name":"toujiaoR","parent":"tou"},{"length":62,"x":54.96,"y":14.64,"rotation":147.55,"name":"bone8","parent":"bone3"},{"length":79,"x":75.77,"y":20.28,"rotation":127.12,"name":"bone6","parent":"bone3"},{"length":123,"x":95.08,"y":1.15,"rotation":74.86,"name":"bone4","parent":"bone3"},{"length":12,"x":32.65,"y":-18.49,"rotation":-60.23,"name":"bone17","parent":"weiba3"},{"length":52,"x":50.54,"y":-0.9,"rotation":65.44,"name":"weiba4","parent":"weiba3"},{"length":83,"x":61.96,"y":0.1,"rotation":-35,"name":"shouR","parent":"xiaobiR"},{"length":9,"x":14.2,"y":-26.57,"rotation":-88.32,"name":"bone20","parent":"weiba4"},{"length":11,"x":-5.44,"y":-20.7,"rotation":-97.79,"name":"bone19","parent":"weiba4"},{"length":50,"x":54.11,"y":2.34,"rotation":65.02,"name":"weiba5","parent":"weiba4"},{"length":93,"x":79.56,"y":-0.34,"rotation":35.04,"name":"bone7","parent":"bone6"},{"length":60,"x":62.03,"y":0.29,"rotation":31.02,"name":"bone9","parent":"bone8"},{"length":142,"x":123,"y":0.09,"rotation":50.1,"name":"bone5","parent":"bone4"},{"length":10,"x":40.58,"y":-18.03,"rotation":-1.16,"name":"bone21","parent":"weiba4"},{"length":24,"x":71.69,"y":8.06,"rotation":31.92,"name":"bone23","parent":"weiba5"},{"length":36,"x":41.93,"y":15.26,"rotation":46.24,"name":"bone22","parent":"weiba5"},{"length":35,"x":78.32,"y":-6.5,"rotation":-7.73,"name":"bone25","parent":"weiba5"},{"length":82,"x":60.68,"y":-0.28,"rotation":22.38,"name":"bone10","parent":"bone9"},{"length":34,"x":25.26,"y":0.07,"rotation":33.88,"name":"bone24","parent":"bone23"}],"slots":[{"name":"tail","bone":"weiba1","attachment":"tail"},{"name":"chibangL2","bone":"chibangL3","attachment":"chibangL2"},{"name":"chibangL1","bone":"chibangL1","attachment":"chibangL1"},{"name":"dabiL","bone":"dabiL","attachment":"dabiL"},{"name":"xiaobiL","bone":"xiaobiL","attachment":"xiaobiL"},{"name":"shouL","bone":"shouL","attachment":"shouL"},{"name":"jiaoL","bone":"jiaoL","attachment":"jiaoL"},{"name":"xiaotuiL","bone":"xiaotuiL","attachment":"xiaotuiL"},{"name":"datuiL","bone":"datuiL","attachment":"datuiL"},{"name":"shenti","bone":"shenti","attachment":"shenti"},{"name":"bozixia","bone":"bozixia","attachment":"bozixia"},{"name":"bozishang","bone":"bozishang","attachment":"bozishang"},{"name":"toujiaoL","bone":"toujiaoL","attachment":"toujiaoL"},{"name":"tou1","bone":"tou1","attachment":"tou1"},{"name":"chujiao","bone":"chujiao","attachment":"chujiao"},{"name":"er","bone":"er","attachment":"er"},{"name":"zui","bone":"zui","attachment":"zui"},{"name":"toujiaoR","bone":"toujiaoR","attachment":"toujiaoR"},{"name":"tou","bone":"tou","attachment":"tou"},{"name":"jiaoR","bone":"jiaoR","attachment":"jiaoR"},{"name":"xiaotuiR","bone":"xiaotuiR","attachment":"xiaotuiR"},{"name":"datuiR","bone":"datuiR","attachment":"datuiR"},{"name":"chibangR2","bone":"bone2","attachment":"chibangR2"},{"name":"chibangR1","bone":"chibangR1","attachment":"chibangR1"},{"name":"jianbang","bone":"jianbang","attachment":"jianbang"},{"name":"dabiR","bone":"dabiR","attachment":"dabiR"},{"name":"xiaobiR","bone":"xiaobiR","attachment":"xiaobiR"},{"name":"shouR","bone":"shouR","attachment":"shouR"},{"name":"author","bone":"root","attachment":"author"}],"ik":[{"mix":0,"name":"IK_L","target":"IK_Lhand","bones":["dabiL","xiaobiL"]},{"mix":0,"name":"IK_R","target":"IK_Rhand","bones":["dabiR","xiaobiR"]}],"skins":{"default":{"xiaobiR":{"xiaobiR":{"name":"xiaobiR","width":122,"height":61,"x":19.01,"y":-3.84,"rotation":15.26}},"xiaobiL":{"xiaobiL":{"name":"xiaobiL","width":104,"height":45,"x":26.27,"y":-3.85,"rotation":12.81}},"datuiL":{"datuiL":{"name":"datuiL","width":85,"height":68,"x":39.21,"y":-0.64,"rotation":42.65}},"er":{"er":{"name":"er","width":118,"height":122,"x":44.31,"y":-0.49,"rotation":-126.36}},"jiaoR":{"jiaoR":{"name":"jiaoR","width":91,"height":105,"x":49.85,"y":-10.76,"rotation":95.27}},"chibangR1":{"chibangR1":{"name":"chibangR1","width":109,"height":73,"x":36.43,"y":-7.51,"rotation":160.17}},"datuiR":{"datuiR":{"name":"datuiR","width":86,"height":113,"x":40.73,"y":-3.12,"rotation":104.98}},"bozishang":{"bozishang":{"name":"bozishang","width":301,"height":230,"hull":44,"triangles":[36,41,37,37,41,38,41,39,38,42,41,36,46,42,36,35,46,36,44,42,46,41,40,39,50,46,35,34,50,35,33,31,34,31,50,34,44,0,42,31,49,50,49,46,50,30,49,31,24,49,30,49,48,46,48,44,46,0,43,42,48,47,44,29,24,30,29,25,24,24,48,49,24,45,48,45,47,48,47,0,44,47,1,0,28,26,25,28,25,29,45,11,47,11,2,1,23,17,45,17,11,45,11,1,47,10,3,2,22,18,17,10,2,11,17,12,11,16,12,17,19,18,22,21,19,22,4,3,10,16,13,12,9,4,10,15,13,16,21,20,19,15,14,13,8,5,9,9,5,4,7,6,5,7,5,8,33,32,31,27,26,28,23,45,24,22,17,23],"uvs":[0.48093,0.53756,0.40112,0.5215,0.32131,0.48936,0.23024,0.42642,0.15861,0.3983,0.05731,0.37553,0,0.37955,0,0.35678,0.05628,0.32464,0.14838,0.30723,0.26298,0.30188,0.36326,0.31527,0.26503,0.26304,0.17396,0.22287,0.10244,0.2058,0.12893,0.17466,0.24047,0.15457,0.33768,0.1452,0.27117,0.0903,0.19545,0.03807,0.17498,0.022,0.18624,0.00325,0.308,0.00861,0.40112,0.0461,0.52084,0.14118,0.47966,0.09482,0.42635,0.04892,0.35347,0.0021,0.43965,0,0.50889,0.01844,0.57927,0.0456,0.64568,0.10503,0.59247,0.02334,0.61128,0.01626,0.75836,0.11461,0.85,0.19883,0.92963,0.31161,1,0.47063,1,0.81729,0.84241,1,0.79396,1,0.80641,0.80932,0.58408,0.6915,0.43385,0.59966,0.53881,0.40723,0.45097,0.17942,0.61547,0.28392,0.45539,0.36353,0.53383,0.23206,0.56338,0.20534,0.70018,0.17506],"edges":[0,2,2,4,4,6,6,8,8,10,10,12,12,14,14,16,16,18,18,20,20,22,22,24,24,26,26,28,28,30,30,32,32,34,34,36,36,38,38,40,40,42,42,44,44,46,46,48,48,50,50,52,52,54,54,56,56,58,58,60,60,62,62,64,64,66,66,68,68,70,70,72,72,74,74,76,76,78,78,80,80,82,82,84,84,86,86,0,88,0,34,90,88,92,22,94,94,88,2,94,90,96,96,92,94,96,48,98,98,92,96,98,62,100,22,4,20,6,18,8,16,10,32,26,34,24,90,22,44,36,46,34,56,52,60,48,62,98,100,92,68,100,50,58],"vertices":[-32.76,58.56,-54.61,69.21,-75.36,83.39,-97.25,105.33,-115.93,117.9,-143.5,131.94,-160.25,136.17,-158.69,141.17,-140.32,143.21,-112.66,138.82,-79.35,129.77,-51.43,117.89,-76.11,138.12,-99.56,155.07,-116.33,165.43,-109.21,169.67,-75.78,164.14,-47.2,157.53,-62.58,175.52,-80.78,193.75,-85.57,199.1,-81.06,202.22,-46.42,190.18,-22.2,173.64,5.72,142.07,-2.56,154.61,-13.58,171.28,-29.06,184.79,-6.71,179.93,10.25,169.43,28.18,158.32,44.08,138.88,34.35,161.57,40.24,161.45,74.86,125.72,94.14,96.86,105.48,71.38,121.02,26.96,98.03,-47.12,84.94,-89.31,25.71,-70.94,6.35,-40.46,-24.82,8.64,-50.52,49.12,-7.23,82.02,-16.96,139.9,23.2,102.28,-28.24,99.07,3.26,120.95,13.58,124.18,54.97,118.63],"type":"mesh"}},"author":{"author":{"name":"author","width":359,"height":47,"x":3.27,"y":-61.59}},"dabiL":{"dabiL":{"name":"dabiL","width":62,"height":68,"x":20.03,"y":-0.15,"rotation":59.19}},"xiaotuiL":{"xiaotuiL":{"name":"xiaotuiL","width":67,"height":31,"x":19.79,"y":1.04,"rotation":-170.08}},"chujiao":{"chujiao":{"name":"chujiao","width":106,"height":112,"x":47,"y":-3.97,"rotation":-147.63}},"dabiR":{"dabiR":{"name":"dabiR","width":87,"height":55,"x":22.26,"y":-1.51,"rotation":155.67}},"bozixia":{"bozixia":{"name":"bozixia","width":263,"height":194,"hull":51,"triangles":[48,47,49,47,0,49,0,50,49,45,0,46,46,0,47,44,0,45,34,25,17,34,17,44,10,0,44,17,10,44,43,34,44,10,1,0,42,34,43,9,2,1,10,9,1,7,3,2,8,7,2,9,8,2,17,16,10,33,25,34,41,34,42,6,4,3,7,6,3,25,24,17,6,5,4,24,18,17,16,15,11,15,12,11,24,23,18,33,32,25,40,35,41,14,13,12,15,14,12,32,31,26,23,22,18,22,19,18,21,20,19,40,36,35,39,36,40,31,27,26,22,21,19,31,30,27,30,28,27,38,37,36,39,38,36,30,29,28,32,26,25,16,11,10,41,35,34],"uvs":[0.43834,0.72029,0.38736,0.79202,0.31233,0.84027,0.26327,0.90026,0.22575,0.99938,0.20747,0.99677,0.2017,0.93939,0.21228,0.82593,0.23922,0.73334,0.27,0.67335,0.30271,0.63422,0.23825,0.68508,0.18727,0.75159,0.14302,0.86114,0.1257,0.85592,0.14206,0.70986,0.18631,0.57815,0.23248,0.51164,0.17476,0.54685,0.10839,0.63813,0.07087,0.74507,0.05644,0.72029,0.07472,0.54815,0.1132,0.45165,0.14783,0.39035,0.18535,0.35514,0.11608,0.40209,0.06895,0.44512,0.0093,0.54293,0,0.54163,0.00546,0.41904,0.05163,0.3121,0.09973,0.23647,0.16514,0.18561,0.20939,0.16474,0.13821,0.17517,0.07087,0.20647,0.00065,0.25342,0.00065,0.21299,0.04297,0.13866,0.10165,0.08649,0.16611,0.04346,0.24884,0.01607,0.31329,0,0.523,0,0.64806,0.03824,0.76926,0.10475,0.82217,0.15561,1,0.26907,1,0.85462,0.43738,0.77507],"edges":[0,2,2,4,4,6,6,8,8,10,10,12,12,14,14,16,16,18,18,20,20,22,22,24,24,26,26,28,28,30,30,32,32,34,34,36,36,38,38,40,40,42,42,44,44,46,46,48,48,50,50,52,52,54,54,56,56,58,58,60,60,62,62,64,64,66,66,68,68,70,70,72,72,74,74,76,76,78,78,80,80,82,82,84,84,86,86,88,88,90,90,92,92,94,94,96,96,98,98,100,100,0],"vertices":[-37.2,33.3,-56.4,35.46,-75.84,45.41,-92.93,48.56,-114.19,44.68,-116.72,48.8,-108.81,56.78,-89.66,67.98,-71.1,73.3,-56.94,73.97,-45.68,71.76,-63.83,79.2,-82.23,81.98,-106.17,78.27,-108.14,82.49,-83.05,96.34,-55.69,102.67,-38.06,100.9,-52.73,108.78,-77.4,111.84,-99.87,107.03,-98.37,112.97,-68.95,129.49,-47.94,132.87,-32.96,132.89,-21.53,129.22,-39.85,138.12,-54.02,142.87,-78.63,143.75,-79.92,145.85,-60.18,159.19,-36.33,162.2,-16.98,161.1,1.31,153.46,11.61,146.7,-1.39,160.32,-16.99,170.66,-35.46,179.77,-29.24,184.54,-11.03,184.5,6.39,178.42,23.34,170.06,40.8,156.04,53.6,144.49,87.19,100.74,101.33,70.14,110.51,37,111.16,19.95,122.18,-30.54,32.08,-99.72,-45.78,27.03],"type":"mesh"}},"tou":{"tou":{"name":"tou","width":176,"height":213,"hull":4,"triangles":[10,11,0,11,1,0,5,6,3,2,5,3,6,7,3,7,8,3,9,10,3,8,9,3,10,0,3,12,1,11,7,18,8,19,9,8,21,11,10,9,20,10,20,21,10,19,20,9,18,19,8,6,17,7,12,11,19,11,21,20,19,11,20,18,12,19,2,4,5,17,13,18,13,12,18,17,18,7,16,14,17,14,13,17,6,16,17,13,1,12,5,16,6,5,15,16,15,14,16,4,15,5,14,15,13,15,2,13,2,1,13,4,2,15],"uvs":[1,1,0,1,0,0,1,0,0.30764,0.29612,0.37783,0.28012,0.47868,0.29745,0.53596,0.36345,0.58357,0.42145,0.58921,0.48945,0.60616,0.55745,0.51499,0.56812,0.40445,0.52745,0.34717,0.47879,0.33587,0.38612,0.31369,0.31542,0.41575,0.33012,0.49724,0.35812,0.54161,0.39145,0.57227,0.44812,0.57711,0.52745,0.57066,0.55079],"edges":[0,2,2,4,4,6,6,0,8,10,10,12,12,14,14,16,16,18,18,20,20,22,22,24,24,26,26,28,8,30,30,28,30,32,32,34,34,36,36,38,38,40,40,42],"vertices":[168.1,-156.16,-7.88,-158.1,-10.22,54.88,165.76,56.82,44.6,-7.58,56.92,-4.04,74.71,-7.54,84.95,-21.48,93.46,-33.74,94.61,-48.22,97.75,-62.67,81.73,-65.11,62.19,-56.67,51.99,-46.41,49.78,-26.7,45.72,-11.68,63.71,-14.62,78.12,-20.42,86,-27.44,91.53,-39.45,92.57,-56.33,91.49,-61.32],"type":"mesh"}},"toujiaoR":{"toujiaoR":{"name":"toujiaoR","width":200,"height":156,"x":101.02,"y":9.72,"rotation":-140.32}},"jianbang":{"jianbang":{"name":"jianbang","width":119,"height":100,"x":12.5,"y":-0.58,"rotation":140.69}},"shouR":{"shouR":{"name":"shouR","width":94,"height":103,"x":54.61,"y":0.78,"rotation":50.26}},"chibangL1":{"chibangL1":{"name":"chibangL1","width":95,"height":62,"x":31.02,"y":1.53,"rotation":-161.33}},"tou1":{"tou1":{"name":"tou1","width":71,"height":46,"x":26.8,"y":-0.45,"rotation":-161.47}},"chibangR2":{"chibangR2":{"name":"chibangR2","width":323,"height":339,"hull":52,"triangles":[21,25,24,21,24,23,22,21,23,84,85,26,84,26,21,21,26,25,9,15,14,13,9,14,55,68,16,12,9,13,20,84,21,8,55,9,10,9,12,83,84,20,85,27,26,85,28,27,19,81,20,81,83,20,68,17,16,81,82,83,80,87,18,79,18,17,68,79,17,18,87,19,87,81,19,11,10,12,77,80,78,83,28,85,83,85,84,82,74,28,82,28,83,56,55,8,74,29,28,55,67,68,69,79,68,87,75,81,81,75,82,75,74,82,7,56,8,80,75,87,69,78,79,67,69,68,77,76,80,70,78,69,76,75,80,66,70,67,55,86,67,86,66,67,70,69,67,30,32,31,56,86,55,70,71,78,71,77,78,57,56,7,34,33,29,29,33,30,33,32,30,6,57,7,74,35,29,71,76,77,6,58,57,75,73,74,71,72,76,57,86,56,35,34,29,97,72,71,98,99,72,86,65,66,65,97,66,63,99,98,57,90,86,90,54,86,54,65,86,98,72,97,65,98,97,64,63,98,58,90,57,88,90,58,65,64,98,59,58,6,5,59,6,99,36,73,54,64,65,52,63,64,90,96,54,53,64,54,59,88,58,93,88,59,96,53,54,37,36,99,63,37,99,60,59,5,96,91,53,4,60,5,95,96,90,88,95,90,91,45,53,44,37,63,60,93,59,52,44,63,95,91,96,95,89,91,93,94,88,94,95,88,44,38,37,44,43,38,46,45,91,89,46,91,60,94,93,61,94,60,45,44,52,42,39,38,43,42,38,41,40,39,94,89,95,4,61,60,3,61,4,94,92,89,42,41,39,92,46,89,92,47,46,61,92,94,62,92,61,3,62,61,2,62,3,62,47,92,62,48,47,1,48,62,2,1,62,1,49,48,1,0,49,0,51,50,0,50,49,64,52,53,45,52,53,99,72,73,73,75,76,72,73,76,36,73,35,73,35,74,78,79,80,80,79,18,55,9,16,9,16,15,66,70,97,97,71,70],"uvs":[0,0.40391,0,0.30686,0.08034,0.13778,0.19389,0.08185,0.29847,0.03034,0.43156,0.01273,0.53323,0.08318,0.61885,0.10006,0.69406,0.11488,0.74951,0.09198,0.74397,0.04267,0.72918,0,0.80682,0,0.89185,0.06556,0.91958,0.18357,0.89555,0.24874,0.83187,0.32677,0.7935,0.37379,0.78348,0.49741,0.80703,0.60679,0.83548,0.68339,0.87978,0.71579,0.94623,0.71645,1,0.76561,1,0.85227,0.91325,0.90881,0.84786,0.89993,0.79599,0.92257,0.74027,0.84934,0.62566,0.86343,0.63675,0.94445,0.66448,1,0.60717,1,0.53878,0.93564,0.53844,0.87724,0.53809,0.81754,0.45312,0.68447,0.38621,0.63988,0.36388,0.66957,0.33729,0.70491,0.30217,0.79122,0.2652,0.77889,0.24856,0.69082,0.26704,0.58867,0.33938,0.56399,0.34243,0.44449,0.28362,0.36141,0.19261,0.32872,0.10278,0.32911,0.0489,0.4074,0.03043,0.4918,0,0.49708,0.36241,0.52773,0.433,0.39962,0.47496,0.35601,0.66949,0.25607,0.61799,0.22518,0.54838,0.21519,0.48926,0.15977,0.42633,0.11888,0.34909,0.11525,0.23848,0.16885,0.1641,0.22246,0.41554,0.55583,0.47253,0.42184,0.50378,0.38506,0.59017,0.33427,0.68301,0.30449,0.70415,0.30975,0.68301,0.32814,0.63797,0.34741,0.59845,0.41221,0.55341,0.45162,0.51297,0.63553,0.59891,0.7905,0.57481,0.6385,0.61728,0.47885,0.63334,0.43073,0.66892,0.38262,0.7045,0.36293,0.66663,0.50618,0.72172,0.67896,0.72172,0.7227,0.75615,0.74676,0.7814,0.78175,0.77566,0.81893,0.5719,0.30621,0.70483,0.626,0.40205,0.21656,0.31258,0.32028,0.4397,0.28856,0.37562,0.36182,0.22996,0.26585,0.37465,0.16413,0.29613,0.21933,0.352,0.27459,0.40862,0.32409,0.55931,0.40099,0.51935,0.43908,0.47455,0.6041],"edges":[0,2,2,4,4,6,6,8,8,10,10,12,12,14,14,16,16,18,18,20,20,22,22,24,24,26,26,28,28,30,30,32,32,34,34,36,36,38,38,40,40,42,42,44,44,46,46,48,48,50,50,52,52,54,54,56,56,58,58,60,60,62,62,64,64,66,66,68,68,70,70,72,72,74,74,76,76,78,78,80,80,82,82,84,84,86,86,88,88,90,90,92,92,94,94,96,96,98,98,100,100,102,102,0,88,104,104,106,106,108,110,112,112,114,114,116,116,118,118,120,120,122,122,124,74,126,126,128,128,130,130,132,132,134,134,136,136,138,138,140,140,142,142,144,144,146,146,70,58,148,148,150,150,152,152,154,154,156,156,158,158,160,162,164,164,166,166,168,168,170,170,56,106,128,108,130,144,152,142,154,140,156,138,158,146,150,70,148,108,172,172,110,132,172,152,160,160,174,174,162,150,174,174,38,124,96,98,0,96,2,124,4,122,6,120,8,118,10,116,12,114,14,112,16,20,24,18,26,104,126,88,74,84,78,86,76,160,36,158,34,110,134,162,40,66,60,58,68,132,140,166,40,168,42,136,32,18,110,18,32,116,176,178,92,108,180,180,176,114,180,106,182,182,178,182,90,124,184,184,178,94,184,120,186,186,176,186,118,184,188,188,186,122,188,176,190,190,178,188,190,180,192,192,182,190,192,192,106,104,90,130,194,194,142,140,194,128,196,196,144,194,196,126,198,198,146,196,198,198,72],"vertices":[1,53,174.14,48.06,1,1,53,160.71,18.02,1,1,53,113.63,-23.71,1,1,53,72.41,-26.05,1,1,53,34.45,-28.21,1,1,53,-7.22,-16.12,1,2,27,300.91,21.19,0.00799,44,90.75,-8.74,0.992,3,27,287.96,-3.9,0.00374,30,126.82,58.23,0.00425,44,63.39,-15.73,0.992,2,30,126.47,33.43,0.00799,44,39.35,-21.87,0.992,1,30,137.48,17.32,1,1,30,153.56,22.24,1,1,30,166.86,29.67,1,1,30,171.6,5.04,1,1,30,154.97,-26.12,1,1,30,117.38,-42.48,1,1,30,94.22,-39.03,1,1,30,65.35,-29.03,1,1,30,47.96,-23.01,1,1,30,1.78,-29.47,1,1,27,106.6,-27.34,1,1,27,83.89,-27.9,1,1,27,70.94,-39.78,1,1,27,60.57,-49.29,1,1,27,48.2,-64.74,1,1,27,-0.09,-51.26,1,1,27,-7.16,-21.08,1,1,27,-5.88,10.16,1,1,27,7.1,30.08,1,1,27,32.8,26.63,1,1,58,79.25,14.9,1,1,58,106.92,13.63,1,1,58,127.03,19.15,1,1,58,123.79,0.93,1,1,58,98.44,-17,1,1,58,75.37,-13.01,1,1,58,51.79,-8.94,1,2,51,105.6,44.04,0.51049,58,17.06,-33.17,0.4895,1,51,98.14,18.55,1,1,51,108.85,16.02,1,1,51,121.6,13.02,1,1,51,152.7,17.14,1,1,51,154.78,4.66,1,1,51,131.19,-14.39,1,1,51,97.96,-25.82,1,1,51,75.82,-12.75,1,1,51,58.86,-32.11,1,2,53,102.05,79.35,0.51199,51,45.96,-63.1,0.488,1,53,124.63,54.31,1,1,53,142.15,45.94,1,1,53,163.15,60.74,1,1,53,177.32,79.27,1,1,53,187.02,76.89,1,1,51,64.88,-8.45,1,1,51,16,-9.62,1,1,43,79.5,-6.31,1,1,43,8.16,-8.94,1,2,44,45.03,22.51,0.992,43,18.45,-25.68,0.00799,4,44,66.72,29.32,0.992,53,-13.67,61.93,0.00039,51,-56.75,-7.01,0.00042,43,37.12,-38.67,0.00718,4,44,92.11,20.82,0.992,53,-3.91,36.99,0.00051,51,-64.05,-32.78,0.00047,43,45.94,-63.95,0.007,1,53,9,16.03,1,1,53,31.27,4.73,1,1,53,71.3,6.74,1,1,53,100.65,13.53,1,1,51,65.14,10.88,1,1,51,16.46,5.18,1,1,43,75.51,6.62,1,1,43,42.84,3.51,1,1,43,11.5,7.7,1,1,42,-4.45,-6.52,1,1,42,4.76,-7.2,1,1,42,19.49,-13.3,1,1,42,44.23,-7.51,1,1,52,-3.12,-8.88,1,1,58,-3.17,-7.41,1,1,58,53.4,10.72,1,1,58,1.3,12.07,1,1,52,1.49,13.24,1,1,42,41.06,4.99,1,1,42,21.31,2.15,1,1,42,8.57,5.93,1,1,30,-5.45,17.06,1,1,27,90.03,16.88,1,1,27,75.75,20.86,1,1,27,64.91,12.36,1,1,27,51.29,7.68,1,1,27,39.65,12.84,1,1,43,43.95,-7.62,1,1,27,108.78,17.31,1,2,53,29.67,43.08,0.51199,51,-33.62,-48.23,0.488,2,53,70.39,63.41,0.51199,51,11.1,-56.66,0.488,2,51,-18.05,-25.83,0.48,43,79.61,-31.85,0.51999,1,51,13.67,-32.04,1,1,53,87.23,35.64,1,1,53,30.49,23.23,1,1,53,61.29,29.96,1,2,53,52.46,54.46,0.51199,51,-8.59,-52.94,0.488,1,51,-2.66,-28.84,1,2,43,61.79,19.4,0.50399,42,50.14,-19.31,0.496,2,51,14.32,21.26,0.54103,52,-4.92,-20.53,0.45896,2,51,70.32,35.45,0.53831,58,-15.82,-17.76,0.46168],"type":"mesh"}},"tail":{"tail":{"name":"tail","width":447,"height":191,"hull":80,"triangles":[29,28,30,28,83,30,83,31,30,83,32,31,27,83,28,82,33,32,83,82,32,96,83,27,26,96,27,95,82,83,82,34,33,81,34,82,96,95,83,26,23,96,23,95,96,25,23,26,95,94,82,94,81,82,80,35,81,81,35,34,21,19,22,94,97,81,97,80,81,80,36,35,17,15,18,14,12,15,17,16,15,84,36,80,15,12,97,13,12,14,11,98,12,37,36,84,85,37,84,9,98,11,10,9,11,99,84,98,9,99,98,99,85,84,79,112,0,0,112,1,112,2,1,77,79,78,77,107,79,107,104,79,104,112,79,112,3,2,108,77,76,105,8,7,6,105,7,5,105,6,107,106,104,75,74,76,74,108,76,104,113,112,113,3,112,106,88,104,108,107,77,74,109,108,108,89,107,89,106,107,100,99,9,113,103,3,100,9,8,88,113,104,103,5,3,105,100,8,86,37,85,114,113,88,110,103,114,101,100,105,114,103,113,106,43,88,109,89,108,103,102,5,44,43,106,100,85,99,38,37,86,100,86,85,89,44,106,110,102,103,5,102,105,102,101,105,101,86,100,111,102,110,42,110,114,87,38,86,90,109,74,73,90,74,101,87,86,42,41,110,41,111,110,111,87,101,111,101,102,45,44,90,39,38,87,40,87,111,41,40,111,40,39,87,70,90,73,72,70,73,70,45,90,72,71,70,46,45,69,69,45,70,68,46,69,68,67,46,93,47,46,67,93,46,93,48,47,92,93,67,66,92,67,93,52,48,52,49,48,92,52,93,91,52,92,52,51,49,51,50,49,66,91,92,63,91,66,65,63,66,58,54,53,59,58,53,63,59,91,58,57,54,62,59,63,64,63,65,56,55,54,57,56,54,62,60,59,61,60,62,24,25,23,21,20,19,3,5,4,114,42,88,42,43,88,109,89,90,90,44,89,53,59,52,91,59,52,22,23,19,19,94,23,23,94,95,18,19,15,19,15,94,15,97,94,12,97,98,97,98,80,98,84,80],"uvs":[0.43539,0.33299,0.43522,0.3471,0.4213,0.39349,0.39882,0.41862,0.41694,0.43746,0.38942,0.4728,0.4166,0.45945,0.41703,0.47413,0.4005,0.52621,0.40251,0.54034,0.42969,0.49008,0.45689,0.57742,0.47432,0.57647,0.47947,0.50202,0.48459,0.49678,0.54054,0.54915,0.52338,0.47222,0.52858,0.46292,0.56841,0.5017,0.59526,0.52553,0.56554,0.43593,0.57797,0.41652,0.6303,0.46773,0.68056,0.46622,0.61975,0.3858,0.62545,0.36614,0.72072,0.33266,0.83533,0.17391,0.88595,0.20616,0.95813,0.25213,0.99027,0.49033,0.97526,0.71846,0.89142,0.89232,0.78614,0.96143,0.63256,0.98798,0.53772,0.97332,0.41793,0.91358,0.33172,0.77172,0.30164,0.72222,0.25737,0.58129,0.28533,0.42438,0.30898,0.34513,0.31877,0.31231,0.31899,0.28185,0.31919,0.25456,0.30332,0.20368,0.27631,0.18235,0.24022,0.26417,0.20599,0.31054,0.18139,0.36444,0.15605,0.42458,0.15408,0.35797,0.1572,0.29262,0.12609,0.34472,0.09616,0.4578,0.07752,0.5715,0.06497,0.56479,0.06636,0.44341,0.06488,0.30863,0.07912,0.23668,0.04888,0.21829,0.00791,0.19157,0.05127,0.16139,0.10835,0.09246,0.09703,0.05932,0.10924,0.05193,0.15055,0.06843,0.20215,0.03444,0.27482,0.03871,0.30202,0.05475,0.32498,0.08432,0.31017,0.03019,0.31644,0.02207,0.34738,0.07369,0.38485,0.13341,0.41115,0.13059,0.41056,0.16676,0.41023,0.21993,0.43351,0.24353,0.41838,0.30444,0.53966,0.68156,0.60656,0.66559,0.70628,0.58685,0.77236,0.41092,0.44944,0.64165,0.38786,0.58822,0.37811,0.57059,0.35845,0.52574,0.39259,0.30939,0.38471,0.19457,0.33571,0.10632,0.12584,0.19016,0.173,0.159,0.19242,0.19536,0.59887,0.57023,0.68725,0.49763,0.73088,0.34806,0.54028,0.58806,0.45324,0.6089,0.39449,0.56657,0.38757,0.55183,0.37112,0.5174,0.3721,0.48119,0.38482,0.40768,0.40232,0.30752,0.3929,0.49539,0.39343,0.24347,0.39978,0.23942,0.39544,0.18303,0.38089,0.16245,0.37796,0.4021,0.36319,0.4812,0.40946,0.35652,0.39355,0.35769,0.38542,0.35479],"edges":[0,2,2,4,4,6,6,8,8,10,10,12,12,14,14,16,16,18,18,20,20,22,22,24,24,26,26,28,28,30,30,32,32,34,34,36,36,38,38,40,40,42,42,44,44,46,46,48,48,50,50,52,52,54,54,56,56,58,58,60,60,62,62,64,64,66,66,68,68,70,70,72,72,74,74,76,76,78,78,80,80,82,82,84,84,86,86,88,88,90,90,92,92,94,94,96,96,98,98,100,100,102,102,104,104,106,106,108,108,110,110,112,112,114,114,116,116,118,118,120,120,122,122,124,124,126,126,128,128,130,130,132,132,134,134,136,136,138,138,140,140,142,142,144,144,146,146,148,148,150,150,152,152,154,154,156,156,158,158,0,92,136,114,108,116,106,104,96,160,70,162,68,160,162,164,66,162,164,166,62,164,166,166,56,168,72,160,168,170,74,168,170,172,76,170,172,174,78,172,174,84,176,88,178,90,180,180,146,178,180,180,140,124,120,98,102,118,104,126,132,126,118,118,182,182,184,184,186,186,104,186,94,184,132,186,134,186,92,38,188,188,162,46,190,190,164,188,190,52,192,192,166,190,192,52,46,46,38,38,30,30,24,30,194,194,160,188,194,22,196,196,168,194,196,18,198,198,170,196,198,16,200,200,172,198,200,202,174,200,202,202,204,204,206,158,208,208,176,10,204,6,206,22,18,14,210,210,202,16,210,210,10,6,10,176,212,212,178,212,86,154,214,214,212,208,214,152,216,216,178,214,216,216,218,218,180,148,218,218,178,206,220,220,82,174,222,222,220,204,222,222,80,6,224,224,158,2,224,206,226,226,208,224,226,176,228,228,220,226,228],"vertices":[1,39,18.9,2.07,1,1,39,18.13,-0.5,1,2,39,9.82,-7.46,0.86422,45,18.96,8.04,0.13576,2,39,-1.13,-9.5,0.19289,45,8.64,3.84,0.8071,1,45,16.52,-0.22,1,2,45,3.85,-6.25,0.18894,35,8.18,4.44,0.81105,1,35,19.78,-0.01,1,3,45,16.15,-7.22,0.01096,35,18.43,-2.45,0.98779,28,19.04,6.65,0.00124,3,22,33.68,-28.41,0.0211,35,6.82,-6.82,0.73113,28,8.03,12.34,0.24775,3,22,31.38,-26.71,0.05835,35,6.11,-9.58,0.50368,28,5.5,11.02,0.43796,1,28,16.94,0.56,1,3,19,60.61,-35.13,0.02092,28,2.42,-14.12,0.78367,21,15.1,17.43,0.19539,3,19,53.04,-37.01,0.03313,28,3.86,-21.78,0.30362,21,12,10.29,0.66323,2,21,23.95,2.23,0.98965,13,39.97,20.66,0.01034,1,21,23.91,-0.26,0.99999,2,21,4.33,-18.76,0.21424,13,14.99,6.45,0.78575,4,8,144.63,-71.87,0.00001,19,36.01,-61.25,0.00016,13,31.04,2.28,0.99845,12,47.27,19.49,0.00136,2,19,34.14,-63.47,0.00002,13,30.8,-0.61,0.99996,2,13,13.36,-8.87,0.93322,12,27.83,11.8,0.06677,3,8,116.26,-53.68,0.00016,13,1.94,-14.73,0.28786,12,15.53,8.16,0.71197,2,8,124.64,-73.66,0.0001,12,36.46,2.57,0.99989,2,8,118.31,-75.8,0.00001,12,34.29,-3.74,0.99998,2,12,9.73,-10.1,0.98468,16,43.46,16.53,0.01531,3,8,76.5,-54.72,0.03447,12,-7.96,-23.94,0.29275,16,21.35,12.59,0.67277,3,8,98.77,-76.62,0.00001,12,22.99,-19.71,0.00013,16,50.67,1.83,0.99985,1,16,48.76,-2.29,1,1,16,7.76,-15.48,1,2,8,-4.81,-90.65,0.25929,16,-37.89,-53.69,0.7407,2,8,-25.06,-78.82,0.38649,16,-61.22,-51.27,0.6135,2,8,-53.93,-61.95,0.56992,16,-94.48,-47.81,0.43007,2,8,-55.97,-14.29,0.84896,16,-116,-5.24,0.15103,2,8,-38.17,26.03,0.99936,16,-116.42,38.83,0.00063,1,8,6.64,48.35,0.99999,1,8,55.51,48.88,0.99999,2,8,123.12,35.93,0.83565,19,-33.15,24.2,0.16434,1,19,8.83,30.75,1,1,19,63.59,31.31,1,3,8,242.24,-38.94,0.00006,19,107.12,13.29,0.02908,22,31.71,27.64,0.97085,3,8,252.76,-51.57,0.00002,22,48.15,27.68,0.93617,34,-30.99,-10.95,0.0638,1,22,79.86,17.12,1,1,34,16.73,20.88,1,2,34,35,18.13,0.74658,46,10.85,22.04,0.25341,2,34,42.56,16.99,0.50258,46,12.96,14.7,0.49741,2,34,47.82,19.49,0.33702,46,17.41,10.95,0.66297,2,34,52.52,21.73,0.21685,46,21.4,7.6,0.78314,3,46,33.43,6.99,0.86154,50,-4.52,20.71,0.12647,56,-28.19,37.32,0.01198,3,46,44.2,13.8,0.4182,50,6.2,13.82,0.48472,56,-25.75,24.81,0.09707,3,46,42.24,36.17,0.02573,50,25.65,25.05,0.3134,56,-4.19,18.52,0.66085,1,56,11.08,9.61,1,2,50,55.81,37.23,0.00004,56,25.47,5.17,0.99995,1,56,41.08,1,1,4,56,30.45,-6.04,0.98231,55,9.54,23.52,0.01748,59,0.03,28.23,0.00005,57,-16.19,37.74,0.00014,3,56,18.91,-11.02,0.50422,55,-0.4,15.84,0.48779,59,-12.51,27.4,0.00796,3,56,34.45,-18.19,0.06208,55,16.42,12.74,0.7257,59,-0.27,15.45,0.21221,1,59,23.34,6.07,1,1,59,46.19,1.69,1,3,56,84.5,-21.1,0.00001,55,65.64,22.3,0.00005,59,45.92,-4.05,0.99993,1,59,22.98,-7.52,1,3,55,30.47,-11.73,0.34676,59,-2.25,-12.7,0.5478,57,22.42,23.95,0.10542,3,55,16.17,-16.69,0.29248,59,-16.89,-8.85,0.05717,57,14.57,11,0.65033,3,50,106.5,-4.25,0.0002,55,23.04,-28.86,0.00206,57,27.63,6.02,0.99773,2,59,-19.77,-41.71,0.00014,57,45.27,-1.08,0.99985,1,57,25.36,-4.67,1,4,50,74.87,-21.1,0.13544,56,-3.48,-48.93,0.00137,57,-1.46,-14.93,0.86317,48,-85.17,93.19,0.00001,4,50,78.22,-28.47,0.14617,56,-6.49,-56.46,0.00151,57,2.85,-21.79,0.85229,48,-84.85,101.28,0.00001,4,50,72.59,-28.52,0.15994,56,-10.41,-52.42,0.00145,57,-2.72,-22.59,0.83858,48,-79.8,98.8,0.00001,4,50,55.44,-20.96,0.63112,55,-29.14,-16.04,0.06527,57,-20.73,-17.4,0.30352,48,-67.87,84.34,0.00005,3,50,31.49,-21.66,0.99317,57,-44.37,-21.32,0.00639,48,-46.15,74.23,0.00043,2,46,65.93,-2.99,0.28793,50,0.16,-12.97,0.71206,2,46,55.67,-9.47,0.69421,50,-10.05,-6.4,0.30578,1,46,47.95,-14.35,1,1,54,16.62,2.07,1,1,54,16.12,-1.07,1,1,54,-0.15,-5.93,1,1,48,3.4,6.59,1,2,34,92.01,-4.57,0.00024,48,12.66,-0.67,0.99975,2,48,7.95,-5.73,0.87183,49,11.94,15.91,0.12816,3,34,76.54,-11.79,0.01222,48,1.21,-13.34,0.04525,49,6.55,7.3,0.94252,1,49,13.09,-1.95,0.99999,3,46,-13.92,-20.82,0.0009,49,1.27,-8.39,0.60508,39,12.95,9.31,0.39401,1,19,20.16,-23.8,1,1,8,118.34,-26.54,1,1,8,71.39,-29.48,1,2,8,34.14,-54.25,0.08198,16,-17.43,-4.46,0.91801,1,19,61.19,-22.45,1,1,22,31.45,-15.47,1,1,22,36.96,-15.7,1,1,34,13.92,-17.02,1,4,34,57.73,-12.31,0.16985,46,-7.39,-11.28,0.09623,49,-9.07,-3.21,0.32506,39,1.57,11.38,0.40884,1,46,11.86,-22.37,1,1,46,39.04,-16.25,1,3,50,71.82,-1.09,0.36321,55,-4.73,-7.84,0.37803,57,-7.17,4.48,0.25874,1,50,49.92,-1.75,1,3,50,43.17,7.1,0.69398,56,-5.03,-6.54,0.30598,48,-69.5,53.77,0.00002,3,8,116.93,-45.01,0.00016,13,-5.47,-10.2,0.28786,12,9.08,13.98,0.71197,3,8,75.17,-48.15,0.03447,12,-13.97,-20.97,0.29275,16,17.43,18.03,0.67277,1,16,2.8,-13.31,1,2,21,-2.38,-15.53,0.21424,13,9.55,11.52,0.78575,3,19,60.89,-28.92,0.02092,28,-3.76,-13.48,0.78367,21,10.34,21.43,0.19539,1,22,31.42,-20.56,1,1,22,35.57,-21.07,1,1,35,-3.3,1.71,1,1,35,0.79,7.29,1,2,39,-6.64,-5.87,0.19289,45,2.51,6.29,0.8071,4,34,59.98,-16.06,0.16985,46,-9.87,-14.88,0.09623,49,-5.16,-5.17,0.32506,39,5.87,10.59,0.40884,1,35,7.15,-0.02,1,3,34,69.18,-7.06,0.57899,48,-7.41,-11.84,0.17047,49,-2.21,7.35,0.25053,3,34,71.12,-9.25,0.01222,48,-4.77,-13.11,0.04525,49,0.61,6.54,0.94252,1,48,0.8,-3.68,1,1,46,17.7,-24.91,1,1,34,38.95,-14.33,1,1,34,22.48,-15.13,1,1,39,6.53,0.72,1,1,39,-0.39,2.35,1,1,34,48.54,-13.3,1],"type":"mesh"}},"jiaoL":{"jiaoL":{"name":"jiaoL","width":97,"height":69,"x":34.66,"y":23.29,"rotation":70.67}},"shenti":{"shenti":{"name":"shenti","width":239,"height":267,"x":104.83,"y":-6.26,"rotation":-106.65}},"zui":{"zui":{"name":"zui","width":186,"height":140,"x":69.9,"y":-4.34,"rotation":48.94}},"xiaotuiR":{"xiaotuiR":{"name":"xiaotuiR","width":61,"height":65,"x":16.5,"y":-0.4,"rotation":-132.48}},"chibangL2":{"chibangL2":{"name":"chibangL2","width":270,"height":273,"x":130.75,"y":-1.03,"rotation":-117.95}},"toujiaoL":{"toujiaoL":{"name":"toujiaoL","width":107,"height":153,"x":57.58,"y":2.34,"rotation":-134.25}},"shouL":{"shouL":{"name":"shouL","width":75,"height":76,"x":19.15,"y":-2,"rotation":-2.59}}}},"animations":{"stand":{"bones":{"bone":{"translate":[{"time":0},{"time":0.2667,"x":7.11,"y":10.67},{"time":0.5,"y":20.01},{"time":0.7667,"x":-8.54,"y":9.33},{"time":1}],"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":0},{"time":0.5,"angle":-1.73},{"time":0.7667,"angle":-1.73},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"datuiL":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-7.4},{"time":0.5,"angle":-0.78},{"time":0.7667,"angle":9.84},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"datuiR":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":1.61},{"time":0.5,"angle":10.44},{"time":0.7667,"angle":11.68},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"weiba1":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":-1.36},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":1}]},"bozixia":{"rotate":[{"time":0,"angle":0},{"time":0.2333,"angle":-0.58},{"time":0.5,"angle":3.22},{"time":0.7333,"angle":3.12},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2333},{"time":0.5},{"time":0.7333},{"time":1}]},"chibangR1":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":-8.28},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":1}]},"dabiL":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-9.16},{"time":0.5,"angle":-0.28},{"time":0.7667,"angle":5.24},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"weiba2":{"rotate":[{"time":0,"angle":0.09},{"time":0.0667,"angle":1.97},{"time":0.5667,"angle":-2.22},{"time":1,"angle":0.09}],"shear":[{"time":0},{"time":0.0667},{"time":0.5667},{"time":1}]},"xiaotuiL":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":12.32},{"time":0.5,"angle":21.51},{"time":0.7667,"angle":9.22},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"xiaotuiR":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":14.51},{"time":0.5,"angle":15.92},{"time":0.7667,"angle":-0.55},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"bozishang":{"rotate":[{"time":0,"angle":0},{"time":0.2333,"angle":-1.16},{"time":0.5,"angle":1.98},{"time":0.7333,"angle":2.46},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2333},{"time":0.5},{"time":0.7333},{"time":1}]},"dabiR":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":13.11},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":1}]},"weiba3":{"rotate":[{"time":0,"angle":0.6},{"time":0.2,"angle":3.95},{"time":0.7,"angle":0.03},{"time":1,"angle":0.6}],"shear":[{"time":0},{"time":0.2},{"time":0.7},{"time":1}]},"xiaobiL":{"rotate":[{"time":0,"angle":0},{"time":0.2333,"angle":-0.38},{"time":0.5,"angle":-6.49},{"time":0.7667,"angle":-2.52},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2333},{"time":0.5},{"time":0.7667},{"time":1}]},"shouL":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":5.73},{"time":0.5,"angle":-4.28},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":1}]},"weiba4":{"rotate":[{"time":0,"angle":-1.6},{"time":0.2667,"angle":5.94},{"time":0.7667,"angle":-8.21},{"time":1,"angle":-1.6}],"shear":[{"time":0},{"time":0.2667},{"time":0.7667},{"time":1}]},"xiaobiR":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-14.43},{"time":0.5,"angle":-13.08},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":1}]},"zui":{"rotate":[{"time":0,"curve":"stepped","angle":0},{"time":0.1667,"angle":0},{"time":0.5,"angle":-5.24},{"time":0.8333,"angle":0}],"shear":[{"time":0,"curve":"stepped"},{"time":0.1667},{"time":0.5},{"time":0.8333}]},"shouR":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":3.32},{"time":0.5,"angle":-3.46},{"time":0.7333,"angle":6.13},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7333},{"time":1}]},"toujiaoL":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":3.57},{"time":0.5,"angle":0},{"time":0.7667,"angle":-2.7},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"toujiaoR":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":3.48},{"time":0.5,"angle":0},{"time":0.7667,"angle":-0.5},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"weiba5":{"rotate":[{"time":0,"angle":-1.51},{"time":0.3333,"angle":7.93},{"time":0.8333,"angle":-6.23},{"time":1,"angle":-1.51}],"shear":[{"time":0},{"time":0.3333},{"time":0.8333},{"time":1}]},"bone4":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":20.19},{"time":0.7667,"angle":12.57},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":0.7667},{"time":1}]},"bone5":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-11.08},{"time":0.5,"angle":-5.23},{"time":0.7667,"angle":6.26},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"bone6":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":18.2},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":1}]},"bone7":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-6.66},{"time":0.5,"angle":0},{"time":0.7667,"angle":6.77},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"bone8":{"rotate":[{"time":0,"angle":0},{"time":0.5,"angle":9.19},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.5},{"time":1}]},"bone9":{"rotate":[{"time":0,"angle":0},{"time":0.2667,"angle":-7.35},{"time":0.5,"angle":0},{"time":0.7667,"angle":3.63},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2667},{"time":0.5},{"time":0.7667},{"time":1}]},"bone10":{"rotate":[{"time":0,"angle":0},{"time":0.1667,"angle":-2.78},{"time":0.3334,"angle":-7.66},{"time":0.5001,"angle":-6.46},{"time":0.7001,"angle":1.1},{"time":0.8334,"angle":1.23},{"time":1.0001,"angle":0}],"shear":[{"time":0},{"time":0.1667},{"time":0.3334},{"time":0.5001},{"time":0.7001},{"time":0.8334},{"time":1.0001}]},"bone23":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":7.19},{"time":0.7333,"angle":1.21},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.7333},{"time":1}]},"bone24":{"rotate":[{"time":0,"angle":0},{"time":0.2,"angle":9},{"time":0.4667,"angle":3.11},{"time":0.7667,"angle":-21.64},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2},{"time":0.4667},{"time":0.7667},{"time":1}]},"bone25":{"rotate":[{"time":0,"angle":0},{"time":0.2333,"angle":18.5},{"time":0.4333,"angle":12.09},{"time":0.8333,"angle":0.1},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.2333},{"time":0.4333},{"time":0.8333},{"time":1}]},"bone22":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":3.46},{"time":0.8333,"angle":-12.88},{"time":1,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.8333},{"time":1}]},"bone21":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":-21.8},{"time":0.6666,"angle":18.27},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone20":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":-14.4},{"time":0.6666,"angle":31.8},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone19":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":17.43},{"time":0.6666,"angle":-38.51},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone18":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":24.63},{"time":0.6666,"angle":-19.23},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone17":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":39.99},{"time":0.6666,"angle":-16.69},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone16":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":17.8},{"time":0.6666,"angle":-32.46},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone15":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":12.56},{"time":0.6666,"angle":-22.2},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone14":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":-5.93},{"time":0.6666,"angle":-11.63},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone13":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":5.76},{"time":0.6666,"angle":-4.04},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone12":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":9.53},{"time":0.6666,"angle":-1.93},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone11":{"rotate":[{"time":0,"angle":0},{"time":0.3333,"angle":3.7},{"time":0.6666,"angle":-3.62},{"time":0.9999,"angle":0}],"shear":[{"time":0},{"time":0.3333},{"time":0.6666},{"time":0.9999}]},"bone26":{"rotate":[{"time":0,"angle":4.79},{"time":0.1333,"angle":0},{"time":0.6333,"angle":-4.37},{"time":1,"angle":4.79}],"shear":[{"time":0},{"time":0.1333},{"time":0.6333},{"time":1}]}},"deform":{"default":{"bozishang":{"bozishang":[{"time":0,"offset":6,"vertices":[-0.55,0.17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.67,2.19,0,0,0,0,0,0,1.67,2.19]},{"time":0.5,"offset":2,"vertices":[0.4,-0.15,-0.76,-2.81,-4.77,-10.08,-11.68,-16.11,-12.87,-24.64,-26.08,-27.19,-11.7,-23.19,-7.11,-15.59,-5.63,-11.07,-1.18,-9.17,1.39,-5.6,-3.24,-4.04,-8.67,-12.97,-16.85,-21.14,-6.58,-14.39,-4.03,-7.4,1.97,-7.57,-9,-9.37,-15.72,-15.72,-25.49,-21.1,-23.44,-15.57,-19.7,-9.46,-9.14,-7.02,2.99,0.4,0,0,-5.63,-6.27,-16.12,-9.16,-7.77,-4.34,0,0,-4.96,0.92,0,0,-6.26,-1.55,-2.99,-2.14,0,0,4.43,-0.43,10.55,1.42,8.32,-2.14,0,0,0,0,0,0,0,0,0,0,-0.34,0.85]},{"time":1,"offset":6,"vertices":[-0.55,0.17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.67,2.19,0,0,0,0,0,0,1.67,2.19]}]},"bozixia":{"bozixia":[{"time":0,"offset":8,"vertices":[1.1,0.21]},{"time":0.5,"vertices":[-8.59,-11.88,-8.59,-11.88,-8.59,-11.88,-8.59,-11.88,-7.48,-11.67,4.07,-6.14,4.89,-6.73,3.24,-9.91,2.02,-10.4,2.56,-12.78,9.22,-8.28,7.43,-1.43,1.39,-1.91,1.39,-1.91,-3.32,-3.87,-0.8,-4.72,-2.83,-7.51,3.98,-9.41,2.54,-10.17,1.27,-8.66,-3.54,-3.97,-0.52,-0.38,-2.72,-6.76,-4.04,-8.26,-0.49,-12.25,4.31,-13.04,1.78,-9.2,-4.57,-7.17,3.4,-12.21,15.45,-4.95,7.51,-11.24,-0.38,-14.17,-6.63,-16,-7.31,-12.94,-2.38,-11.18,-2.18,-12.08,-6.7,-12.1,-8.03,-13.57,-4.74,-12.76,-10.1,-10.12,-12.88,-6.92,-11.56,-4.36,-2.78,-3.66,0.2,-5]},{"time":1,"offset":8,"vertices":[1.1,0.21]}]},"tou":{"tou":[{"time":0,"curve":"stepped","offset":43,"vertices":[0]},{"time":0.6667,"offset":24,"vertices":[0.01,0.2]},{"time":0.7334,"offset":24,"vertices":[0.01,0.2,0,0,0,0,0,0,-12.79,-11.96,-25.18,-25.46,-23.15,-28.24,-14.57,-22.87,-10.99,-7.93]},{"time":0.8001,"offset":24,"vertices":[0.01,0.2]}]}}}}}}')},function(t,e,i){"use strict";(function(t){var n=i(34),r=i(35),s=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}function o(){}function h(t){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,h._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void u(e.promise,t)}c(e.promise,n)}else(1===t._state?c:u)(e.promise,t._value)}))):t._deferreds.push(e)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof h)return t._state=3,t._value=e,void d(t);if("function"==typeof i)return void f((n=i,r=e,function(){n.apply(r,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){u(t,e)}var n,r}function u(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&h._immediateFn((function(){t._handled||h._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)l(t,t._deferreds[e]);t._deferreds=null}function p(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function f(t,e){var i=!1;try{t((function(t){i||(i=!0,c(e,t))}),(function(t){i||(i=!0,u(e,t))}))}catch(t){if(i)return;i=!0,u(e,t)}}h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){var i=new this.constructor(o);return l(this,new p(t,e,i)),i},h.prototype.finally=n.a,h.all=function(t){return new h((function(e,i){if(!a(t))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function s(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var o=a.then;if("function"==typeof o)return void o.call(a,(function(e){s(t,e)}),i)}n[t]=a,0==--r&&e(n)}catch(t){i(t)}}for(var o=0;o<n.length;o++)s(o,n[o])}))},h.allSettled=r.a,h.resolve=function(t){return t&&"object"==typeof t&&t.constructor===h?t:new h((function(e){e(t)}))},h.reject=function(t){return new h((function(e,i){i(t)}))},h.race=function(t){return new h((function(e,i){if(!a(t))return i(new TypeError("Promise.race accepts an array"));for(var n=0,r=t.length;n<r;n++)h.resolve(t[n]).then(e,i)}))},h._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){s(t,0)},h._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=h}).call(this,i(43).setImmediate)},function(t,e,i){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))}},function(t,e,i){"use strict";e.a=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function s(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,(function(e){s(t,e)}),(function(i){n[t]={status:"rejected",reason:i},0==--r&&e(n)}))}n[t]={status:"fulfilled",value:i},0==--r&&e(n)}for(var a=0;a<n.length;a++)s(a,n[a])}))}},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,o,h=a(t),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))r.call(i,c)&&(h[c]=i[c]);if(n){o=n(i);for(var u=0;u<o.length;u++)s.call(i,o[u])&&(h[o[u]]=i[o[u]])}}return h}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Socket=e.Manager=e.protocol=void 0;const n=i(51),r=i(20),s=i(9)("socket.io-client");t.exports=e=o;const a=e.managers={};function o(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const i=n.url(t,e.path||"/socket.io"),o=i.source,h=i.id,l=i.path,c=a[h]&&l in a[h].nsps;let u;return e.forceNew||e["force new connection"]||!1===e.multiplex||c?(s("ignoring socket cache for %s",o),u=new r.Manager(o,e)):(a[h]||(s("new io instance for %s",o),a[h]=new r.Manager(o,e)),u=a[h]),i.query&&!e.query&&(e.query=i.queryKey),u.socket(i.path,e)}e.io=o;var h=i(14);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return h.protocol}}),e.connect=o;var l=i(20);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return l.Manager}});var c=i(27);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return c.Socket}}),e.default=o},function(t,e,i){var n=i(16);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){var n=i(16);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new s(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(44),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(7))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,s,a,o,h=1,l={},c=!1,u=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){s.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(f,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return l[h]=r,n(h),h++},d.clearImmediate=p}function p(t){delete l[t]}function f(t){if(c)setTimeout(f,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(7),i(8))},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var o,h=2147483647,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(d[t])}function _(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function g(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+_((t=t.replace(u,".")).split("."),e).join(".")}function y(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function x(t){return _(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function v(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,i){var n=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;n+=36)t=p(t/35);return p(n+36*t/(t+38))}function E(t){var e,i,n,r,s,a,o,l,c,u,d,f=[],_=t.length,g=0,y=128,v=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&m("not-basic"),f.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<_;){for(s=g,a=1,o=36;r>=_&&m("invalid-input"),((l=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>p((h-g)/a))&&m("overflow"),g+=l*a,!(l<(c=o<=v?1:o>=v+26?26:o-v));o+=36)a>p(h/(u=36-c))&&m("overflow"),a*=u;v=b(g-s,e=f.length+1,0==s),p(g/e)>h-y&&m("overflow"),y+=p(g/e),g%=e,f.splice(g++,0,y)}return x(f)}function S(t){var e,i,n,r,s,a,o,l,c,u,d,_,g,x,E,S=[];for(_=(t=y(t)).length,e=128,i=0,s=72,a=0;a<_;++a)(d=t[a])<128&&S.push(f(d));for(n=r=S.length,r&&S.push("-");n<_;){for(o=h,a=0;a<_;++a)(d=t[a])>=e&&d<o&&(o=d);for(o-e>p((h-i)/(g=n+1))&&m("overflow"),i+=(o-e)*g,e=o,a=0;a<_;++a)if((d=t[a])<e&&++i>h&&m("overflow"),d==e){for(l=i,c=36;!(l<(u=c<=s?1:c>=s+26?26:c-s));c+=36)E=l-u,x=36-u,S.push(f(v(u+E%x,0))),l=p(E/x);S.push(f(v(l,0))),s=b(i,g,n==r),i=0,++n}++i,++e}return S.join("")}o={version:"1.4.1",ucs2:{decode:y,encode:x},decode:E,encode:S,toASCII:function(t){return g(t,(function(t){return c.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return g(t,(function(t){return l.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(46)(t),i(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(49),e.encode=e.stringify=i(50)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var u,d,p,f,m=t[c].replace(o,"%20"),_=m.indexOf(i);_>=0?(u=m.substr(0,_),d=m.substr(_+1)):(u=m,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),n(a,p)?r(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(a(t),(function(a){var o=encodeURIComponent(n(a))+i;return r(t[a])?s(t[a],(function(t){return o+encodeURIComponent(n(t))})).join(e):o+encodeURIComponent(n(t[a]))})).join(e):o?encodeURIComponent(n(o))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=i(19),r=i(9)("socket.io-client:url");e.url=function(t,e="",i){let s=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==i?i.protocol+"//"+t:"https://"+t),r("parse %s",t),s=n(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+e,s.href=s.protocol+"://"+a+(i&&i.port===s.port?"":":"+s.port),s}},function(t,e,i){t.exports=function(t){function e(t){let i,r,s,a=null;function o(...t){if(!o.enabled)return;const n=o,r=Number(new Date),s=r-(i||r);n.diff=s,n.prev=i,n.curr=r,i=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(i,r)=>{if("%%"===i)return"%";a++;const s=e.formatters[r];if("function"==typeof s){const e=t[a];i=s.call(n,e),t.splice(a,1),a--}return i}),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==e.namespaces&&(r=e.namespaces,s=e.enabled(t)),s),set:t=>{a=t}}),"function"==typeof e.init&&e.init(o),o}function n(t,i){const n=e(this.namespace+(void 0===i?":":i)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(53),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(i=>{e[i]=t[i]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var i=1e3,n=6e4,r=60*n,s=24*r;function a(t,e,i,n){var r=e>=1.5*i;return Math.round(t/i)+" "+n+(r?"s":"")}t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===o&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=s)return a(t,e,s,"day");if(e>=r)return a(t,e,r,"hour");if(e>=n)return a(t,e,n,"minute");if(e>=i)return a(t,e,i,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=s)return Math.round(t/s)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=i)return Math.round(t/i)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){const n=i(55);t.exports=(t,e)=>new n(t,e),t.exports.Socket=n,t.exports.protocol=n.protocol,t.exports.Transport=i(12),t.exports.transports=i(21),t.exports.parser=i(4)},function(t,e,i){const n=i(21),r=i(5),s=i(6)("engine.io-client:socket"),a=i(4),o=i(19),h=i(13);class l extends r{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=o(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=o(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=h.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){s('creating transport "%s"',t);const e=function(t){const e={};for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(this.opts.query);e.EIO=a.protocol,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return s("options: %j",i),new n[t](i)}open(){let t;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void setTimeout(()=>{this.emit("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return s("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){s("setting transport %s",t.name),this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(t){s('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),i=!1;l.priorWebsocketSuccess=!1;const n=()=>{i||(s('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",n=>{if(!i)if("pong"===n.type&&"probe"===n.data){if(s('probe transport "%s" pong',t),this.upgrading=!0,this.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,s('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||"closed"!==this.readyState&&(s("changing transport and sending upgrade packet"),u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emit("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{s('probe transport "%s" failed',t);const i=new Error("probe error");i.transport=e.name,this.emit("upgradeError",i)}}))};function r(){i||(i=!0,u(),e.close(),e=null)}const a=i=>{const n=new Error("probe error: "+i);n.transport=e.name,r(),s('probe transport "%s" failed because of error: %s',t,i),this.emit("upgradeError",n)};function o(){a("transport closed")}function h(){a("socket closed")}function c(t){e&&t.name!==e.name&&(s('"%s" works - aborting "%s"',t.name,e.name),r())}const u=()=>{e.removeListener("open",n),e.removeListener("error",a),e.removeListener("close",o),this.removeListener("close",h),this.removeListener("upgrading",c)};e.once("open",n),e.once("error",a),e.once("close",o),this.once("close",h),this.once("upgrading",c),e.open()}onOpen(){if(s("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){s("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else s('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof i&&(n=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const r={type:t,data:e,options:i};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),s("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.removeListener("upgrade",e),this.removeListener("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){s("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(s('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}l.priorWebsocketSuccess=!1,l.protocol=a.protocol,t.exports=l},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,i){const n=i(22),r=i(23),s=i(5),{pick:a}=i(26),o=i(10),h=i(6)("engine.io-client:polling-xhr");function l(){}const c=null!=new n({xdomain:!1}).responseType;class u extends s{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=a(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new n(t);try{h("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=()=>{this.onLoad()},e.onerror=()=>{this.onError(e.responseText)}):e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():setTimeout(()=>{this.onError("number"==typeof e.status?e.status:0)},0))},h("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(()=>{this.onError(t)},0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(u.requestsCount=0,u.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){addEventListener("onpagehide"in o?"pagehide":"unload",d,!1)}function d(){for(let t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}t.exports=class extends r{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=c&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new u(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",t=>{this.onError("xhr post error",t)})}doPoll(){h("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",t=>{this.onError("xhr poll error",t)}),this.pollXhr=t}},t.exports.Request=u},function(t,e,i){const{PACKET_TYPES:n}=i(24),r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,a=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};t.exports=({type:t,data:e},i,o)=>{return r&&e instanceof Blob?i?o(e):a(e,o):s&&(e instanceof ArrayBuffer||(h=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer instanceof ArrayBuffer))?i?o(e instanceof ArrayBuffer?e:e.buffer):a(new Blob([e]),o):o(n[t]+(e||""));var h}},function(t,e,i){const{PACKET_TYPES_REVERSE:n,ERROR_PACKET:r}=i(24);let s;"function"==typeof ArrayBuffer&&(s=i(60));const a=(t,e)=>{if(s){const i=s.decode(t);return o(i,e)}return{base64:!0,data:t}},o=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};t.exports=(t,e)=>{if("string"!=typeof t)return{type:"message",data:o(t,e)};const i=t.charAt(0);if("b"===i)return{type:"message",data:a(t.substring(1),e)};return n[i]?t.length>1?{type:n[i],data:t.substring(1)}:{type:n[i]}:r}},function(t,e){!function(t){"use strict";e.encode=function(e){var i,n=new Uint8Array(e),r=n.length,s="";for(i=0;i<r;i+=3)s+=t[n[i]>>2],s+=t[(3&n[i])<<4|n[i+1]>>4],s+=t[(15&n[i+1])<<2|n[i+2]>>6],s+=t[63&n[i+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s},e.decode=function(e){var i,n,r,s,a,o=.75*e.length,h=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(i=0;i<h;i+=4)n=t.indexOf(e[i]),r=t.indexOf(e[i+1]),s=t.indexOf(e[i+2]),a=t.indexOf(e[i+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|s>>2,u[l++]=(3&s)<<6|63&a;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e,i){t.exports=function(t){function e(t){let i,r,s,a=null;function o(...t){if(!o.enabled)return;const n=o,r=Number(new Date),s=r-(i||r);n.diff=s,n.prev=i,n.curr=r,i=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(i,r)=>{if("%%"===i)return"%";a++;const s=e.formatters[r];if("function"==typeof s){const e=t[a];i=s.call(n,e),t.splice(a,1),a--}return i}),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==e.namespaces&&(r=e.namespaces,s=e.enabled(t)),s),set:t=>{a=t}}),"function"==typeof e.init&&e.init(o),o}function n(t,i){const n=e(this.namespace+(void 0===i?":":i)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(62),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(i=>{e[i]=t[i]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var i=1e3,n=6e4,r=60*n,s=24*r;function a(t,e,i,n){var r=e>=1.5*i;return Math.round(t/i)+" "+n+(r?"s":"")}t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===o&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=s)return a(t,e,s,"day");if(e>=r)return a(t,e,r,"hour");if(e>=n)return a(t,e,n,"minute");if(e>=i)return a(t,e,i,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=s)return Math.round(t/s)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=i)return Math.round(t/i)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){const n=i(23),r=i(10),s=/\n/g,a=/\\n/g;let o;t.exports=class extends n{constructor(t){super(t),this.query=this.query||{},o||(o=r.___eio=r.___eio||[]),this.index=o.length,o.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=t=>{this.onError("jsonp poll error",t)};const e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(t,e):(document.head||document.body).appendChild(t),this.script=t;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}doWrite(t,e){let i;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=i,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function n(){r(),e()}this.form.action=this.uri();const r=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(t){this.onError("jsonp polling iframe removal error",t)}try{const t='<iframe src="javascript:0" name="'+this.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=this.iframeId,i.src="javascript:0"}i.id=this.iframeId,this.form.appendChild(i),this.iframe=i};r(),t=t.replace(a,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&n()}:this.iframe.onload=n}}},function(t,e,i){(function(e){const n=i(12),r=i(4),s=i(13),a=i(25),{pick:o}=i(26),{WebSocket:h,usingBrowserWebSocket:l,defaultBinaryType:c,nextTick:u}=i(69),d=i(6)("engine.io-client:websocket"),p="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends n{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=p?{}:o(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=l&&!p?e?new h(t,e):new h(t):new h(t,e,i)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||c,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const n=t[i],s=i===t.length-1;r.encodePacket(n,this.supportsBinary,t=>{const i={};if(!l&&(n.options&&(i.compress=n.options.compress),this.opts.perMessageDeflate)){("string"==typeof t?e.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(i.compress=!1)}try{l?this.ws.send(t):this.ws.send(t,i)}catch(t){d("websocket closed before onclose event")}s&&u(()=>{this.writable=!0,this.emit("drain")})})}}onClose(){n.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+t}check(){return!(!h||"__initialize"in h&&this.name===f.prototype.name)}}t.exports=f}).call(this,i(65).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i(66),r=i(67),s=i(68);function a(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,i)}function l(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=d(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,i),r=(t=o(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|p(e.length);return 0===(t=o(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?o(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=o(t,e<0?0:0|p(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|p(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return U(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return R(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return w(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var s,a=1,o=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,h/=2,i/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(s=i;s<o;s++)if(l(t,s)===l(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===h)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(i+h>o&&(i=o-h),s=i;s>=0;s--){for(var u=!0,d=0;d<h;d++)if(l(t,s+d)!==l(e,d)){u=!1;break}if(u)return s}return-1}function x(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[i+a]=o}return a}function v(t,e,i,n){return V(U(e,t.length-i),t,i,n)}function b(t,e,i,n){return V(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function E(t,e,i,n){return b(t,e,i,n)}function S(t,e,i,n){return V(Y(e),t,i,n)}function T(t,e,i,n){return V(function(t,e){for(var i,n,r,s=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,s.push(r),s.push(n);return s}(e,t.length-i),t,i,n)}function w(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var s,a,o,h,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u<=i)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)>127&&(c=h);break;case 3:s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&(h=(15&l)<<12|(63&s)<<6|63&a)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(h=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&h<1114112&&(c=h)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return i}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return function(t,e,i,n){return c(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}(null,t,e,i)},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=h.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var a=t[i];if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,n,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),o=Math.min(s,a),l=this.slice(n,r),c=t.slice(e,i),u=0;u<o;++u)if(l[u]!==c[u]){s=l[u],a=c[u];break}return s<a?-1:a<s?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},h.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return x(this,t,e,i);case"utf8":case"utf-8":return v(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return E(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function I(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=e;s<i;++s)r+=X(t[s]);return r}function M(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,n,r,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function D(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);r<s;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function F(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);r<s;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function k(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(t,e,i,n,s){return s||k(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function L(t,e,i,n,s){return s||k(t,0,i,8),r.write(t,e,i,n,52,8),i+8}h.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var r=e-t;i=new h(r,void 0);for(var s=0;s<r;++s)i[s]=this[s+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},h.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||O(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[e]=255&t;++s<i&&(r*=256);)this[e+s]=t/r&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||O(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var s=0,a=1,o=0;for(this[e]=255&t;++s<i&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var s=i-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return N(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return N(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return L(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return L(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&i<e&&e<n)for(r=s-1;r>=0;--r)t[r+e]=this[r+i];else if(s<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},h.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var a=h.isBuffer(t)?t:U(new h(t,n).toString()),o=a.length;for(s=0;s<i-e;++s)this[s+e]=a[s%o]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var i;e=e||1/0;for(var n=t.length,r=null,s=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function Y(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(7))},function(t,e,i){"use strict";e.byteLength=function(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=l(t),a=n[0],o=n[1],h=new s(function(t,e,i){return 3*(e+i)/4-i}(0,a,o)),c=0,u=o>0?a-4:a;for(i=0;i<u;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],h[c++]=e>>16&255,h[c++]=e>>8&255,h[c++]=255&e;2===o&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,h[c++]=255&e);1===o&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,h[c++]=e>>8&255,h[c++]=255&e);return h},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],a=0,o=i-r;a<o;a+=16383)s.push(c(t,a,a+16383>o?o:a+16383));1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=a.length;o<h;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){for(var r,s,a=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,n,r){var s,a,o=8*r-n-1,h=(1<<o)-1,l=h>>1,c=-7,u=i?r-1:0,d=i?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-c)-1,p>>=-c,c+=o;c>0;s=256*s+t[e+u],u+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+t[e+u],u+=d,c-=8);if(0===s)s=1-l;else{if(s===h)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),s-=l}return(p?-1:1)*a*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var a,o,h,l=8*s-r-1,c=(1<<l)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),(e+=a+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(a++,h/=2),a+u>=c?(o=0,a=c):a+u>=1?(o=(e*h-1)*Math.pow(2,r),a+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&o,p+=f,o/=256,r-=8);for(a=a<<r|o,l+=r;l>0;t[i+p]=255&a,p+=f,a/=256,l-=8);t[i+p-f]|=128*m}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){const n=i(10),r="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):t=>setTimeout(t,0);t.exports={WebSocket:n.WebSocket||n.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const n=i(28);e.deconstructPacket=function(t){const e=[],i=t.data,r=t;return r.data=function t(e,i){if(!e)return e;if(n.isBinary(e)){const t={_placeholder:!0,num:i.length};return i.push(e),t}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t(e[r],i);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],i));return n}return e}(i,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,i){if(!e)return e;if(e&&e._placeholder)return i[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=t(e[n],i);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=t(e[n],i));return e}(t.data,e),t.attachments=void 0,t}},function(t,e,i){(function(n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))}),e.splice(r,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(72)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,i(8))},function(t,e,i){t.exports=function(t){function e(t){let i,r,s,a=null;function o(...t){if(!o.enabled)return;const n=o,r=Number(new Date),s=r-(i||r);n.diff=s,n.prev=i,n.curr=r,i=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(i,r)=>{if("%%"===i)return"%";a++;const s=e.formatters[r];if("function"==typeof s){const e=t[a];i=s.call(n,e),t.splice(a,1),a--}return i}),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==e.namespaces&&(r=e.namespaces,s=e.enabled(t)),s),set:t=>{a=t}}),"function"==typeof e.init&&e.init(o),o}function n(t,i){const n=e(this.namespace+(void 0===i?":":i)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(73),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(i=>{e[i]=t[i]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var i=1e3,n=6e4,r=60*n,s=24*r;function a(t,e,i,n){var r=e>=1.5*i;return Math.round(t/i)+" "+n+(r?"s":"")}t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===o&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=s)return a(t,e,s,"day");if(e>=r)return a(t,e,r,"hour");if(e>=n)return a(t,e,n,"minute");if(e>=i)return a(t,e,i,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=s)return Math.round(t/s)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=i)return Math.round(t/i)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){function i(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(t){this.ms=t},i.prototype.setMax=function(t){this.max=t},i.prototype.setJitter=function(t){this.jitter=t}},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"isMobile",(function(){return ct})),i.d(n,"EventEmitter",(function(){return Pt.a})),i.d(n,"earcut",(function(){return Dt.a})),i.d(n,"BaseTextureCache",(function(){return de})),i.d(n,"CanvasRenderTarget",(function(){return me})),i.d(n,"DATA_URI",(function(){return ye})),i.d(n,"ProgramCache",(function(){return ce})),i.d(n,"TextureCache",(function(){return ue})),i.d(n,"clearTextureCache",(function(){return fe})),i.d(n,"correctBlendMode",(function(){return zt})),i.d(n,"createIndicesForQuads",(function(){return Jt})),i.d(n,"decomposeDataUri",(function(){return xe})),i.d(n,"deprecation",(function(){return le})),i.d(n,"destroyTextureCache",(function(){return pe})),i.d(n,"determineCrossOrigin",(function(){return ve})),i.d(n,"getBufferType",(function(){return $t})),i.d(n,"getResolutionOfUrl",(function(){return be})),i.d(n,"hex2rgb",(function(){return Vt})),i.d(n,"hex2string",(function(){return Gt})),i.d(n,"interleaveTypedArrays",(function(){return te})),i.d(n,"isPow2",(function(){return ie})),i.d(n,"isWebGLSupported",(function(){return Ut})),i.d(n,"log2",(function(){return ne})),i.d(n,"nextPow2",(function(){return ee})),i.d(n,"premultiplyBlendMode",(function(){return Ht})),i.d(n,"premultiplyRgba",(function(){return qt})),i.d(n,"premultiplyTint",(function(){return Zt})),i.d(n,"premultiplyTintToRgba",(function(){return Kt})),i.d(n,"removeItems",(function(){return re})),i.d(n,"rgb2hex",(function(){return Wt})),i.d(n,"sayHello",(function(){return Xt})),i.d(n,"sign",(function(){return se})),i.d(n,"skipHello",(function(){return Bt})),i.d(n,"string2hex",(function(){return jt})),i.d(n,"trimCanvas",(function(){return _e})),i.d(n,"uid",(function(){return oe})),i.d(n,"url",(function(){return kt}));var r={};i.r(r),i.d(r,"utils",(function(){return n})),i.d(r,"AccessibilityManager",(function(){return $e})),i.d(r,"accessibleTarget",(function(){return Ke})),i.d(r,"InteractionData",(function(){return ii})),i.d(r,"InteractionEvent",(function(){return ri})),i.d(r,"InteractionManager",(function(){return li})),i.d(r,"InteractionTrackingData",(function(){return si})),i.d(r,"interactiveTarget",(function(){return oi})),i.d(r,"Application",(function(){return Ir})),i.d(r,"AbstractBatchRenderer",(function(){return gr})),i.d(r,"AbstractMultiResource",(function(){return xi})),i.d(r,"AbstractRenderer",(function(){return lr})),i.d(r,"ArrayResource",(function(){return vi})),i.d(r,"Attribute",(function(){return Xi})),i.d(r,"BaseImageResource",(function(){return bi})),i.d(r,"BaseRenderTexture",(function(){return Oi})),i.d(r,"BaseTexture",(function(){return yi})),i.d(r,"BatchDrawCall",(function(){return fr})),i.d(r,"BatchGeometry",(function(){return xr})),i.d(r,"BatchPluginFactory",(function(){return Er})),i.d(r,"BatchRenderer",(function(){return Sr})),i.d(r,"BatchShaderGenerator",(function(){return yr})),i.d(r,"BatchSystem",(function(){return rn})),i.d(r,"BatchTextureArray",(function(){return mr})),i.d(r,"Buffer",(function(){return Yi})),i.d(r,"BufferResource",(function(){return _i})),i.d(r,"CanvasResource",(function(){return Ei})),i.d(r,"ContextSystem",(function(){return an})),i.d(r,"CubeResource",(function(){return Si})),i.d(r,"Filter",(function(){return Un})),i.d(r,"FilterState",(function(){return $i})),i.d(r,"FilterSystem",(function(){return en})),i.d(r,"Framebuffer",(function(){return Pi})),i.d(r,"FramebufferSystem",(function(){return ln})),i.d(r,"GLFramebuffer",(function(){return on})),i.d(r,"GLProgram",(function(){return Qn})),i.d(r,"GLTexture",(function(){return sr})),i.d(r,"Geometry",(function(){return zi})),i.d(r,"GeometrySystem",(function(){return dn})),i.d(r,"IGLUniformData",(function(){return $n})),i.d(r,"INSTALLED",(function(){return ui})),i.d(r,"ImageBitmapResource",(function(){return Ri})),i.d(r,"ImageResource",(function(){return Ti})),i.d(r,"MaskData",(function(){return pn})),i.d(r,"MaskSystem",(function(){return jn})),i.d(r,"ObjectRenderer",(function(){return nn})),i.d(r,"Program",(function(){return Ln})),i.d(r,"ProjectionSystem",(function(){return qn})),i.d(r,"Quad",(function(){return qi})),i.d(r,"QuadUv",(function(){return Zi})),i.d(r,"RenderTexture",(function(){return Li})),i.d(r,"RenderTexturePool",(function(){return Bi})),i.d(r,"RenderTextureSystem",(function(){return Jn})),i.d(r,"Renderer",(function(){return cr})),i.d(r,"Resource",(function(){return mi})),i.d(r,"SVGResource",(function(){return wi})),i.d(r,"ScissorSystem",(function(){return Hn})),i.d(r,"Shader",(function(){return Bn})),i.d(r,"ShaderSystem",(function(){return ir})),i.d(r,"SpriteMaskFilter",(function(){return Gn})),i.d(r,"State",(function(){return Xn})),i.d(r,"StateSystem",(function(){return nr})),i.d(r,"StencilSystem",(function(){return zn})),i.d(r,"System",(function(){return Ii})),i.d(r,"Texture",(function(){return ki})),i.d(r,"TextureGCSystem",(function(){return rr})),i.d(r,"TextureMatrix",(function(){return Vn})),i.d(r,"TextureSystem",(function(){return ar})),i.d(r,"TextureUvs",(function(){return Di})),i.d(r,"UniformGroup",(function(){return Ji})),i.d(r,"VideoResource",(function(){return Ai})),i.d(r,"ViewableBuffer",(function(){return _r})),i.d(r,"autoDetectRenderer",(function(){return ur})),i.d(r,"autoDetectResource",(function(){return di})),i.d(r,"checkMaxIfStatementsInShader",(function(){return Fn})),i.d(r,"defaultFilterVertex",(function(){return pr})),i.d(r,"defaultVertex",(function(){return dr})),i.d(r,"resources",(function(){return Tr})),i.d(r,"systems",(function(){return Rr})),i.d(r,"uniformParsers",(function(){return Cn})),i.d(r,"Extract",(function(){return Or})),i.d(r,"AppLoaderPlugin",(function(){return ss})),i.d(r,"Loader",(function(){return is})),i.d(r,"LoaderResource",(function(){return as})),i.d(r,"TextureLoader",(function(){return es})),i.d(r,"BlobResource",(function(){return ps})),i.d(r,"CompressedTextureLoader",(function(){return ms})),i.d(r,"CompressedTextureResource",(function(){return fs})),i.d(r,"DDSLoader",(function(){return Ds})),i.d(r,"FORMATS_TO_COMPONENTS",(function(){return zs})),i.d(r,"INTERNAL_FORMATS",(function(){return rs})),i.d(r,"INTERNAL_FORMAT_TO_BYTES_PER_PIXEL",(function(){return os})),i.d(r,"KTXLoader",(function(){return Zs})),i.d(r,"TYPES_TO_BYTES_PER_COMPONENT",(function(){return Hs})),i.d(r,"TYPES_TO_BYTES_PER_PIXEL",(function(){return qs})),i.d(r,"ParticleContainer",(function(){return ta})),i.d(r,"ParticleRenderer",(function(){return ia})),i.d(r,"BasePrepare",(function(){return ro})),i.d(r,"CountLimiter",(function(){return Ka})),i.d(r,"Prepare",(function(){return ho})),i.d(r,"TimeLimiter",(function(){return lo})),i.d(r,"Spritesheet",(function(){return co})),i.d(r,"SpritesheetLoader",(function(){return uo})),i.d(r,"TilingSprite",(function(){return _o})),i.d(r,"TilingSpriteRenderer",(function(){return xo})),i.d(r,"BitmapFont",(function(){return Lo})),i.d(r,"BitmapFontData",(function(){return Io})),i.d(r,"BitmapFontLoader",(function(){return Yo})),i.d(r,"BitmapText",(function(){return Uo})),i.d(r,"Ticker",(function(){return ti})),i.d(r,"TickerPlugin",(function(){return ei})),i.d(r,"UPDATE_PRIORITY",(function(){return Je})),i.d(r,"ALPHA_MODES",(function(){return St})),i.d(r,"BLEND_MODES",(function(){return ft})),i.d(r,"BUFFER_BITS",(function(){return pt})),i.d(r,"CLEAR_MODES",(function(){return Tt})),i.d(r,"DRAW_MODES",(function(){return mt})),i.d(r,"ENV",(function(){return ut})),i.d(r,"FORMATS",(function(){return _t})),i.d(r,"GC_MODES",(function(){return wt})),i.d(r,"MASK_TYPES",(function(){return Rt})),i.d(r,"MIPMAP_MODES",(function(){return Et})),i.d(r,"MSAA_QUALITY",(function(){return Ct})),i.d(r,"PRECISION",(function(){return At})),i.d(r,"RENDERER_TYPE",(function(){return dt})),i.d(r,"SAMPLER_TYPES",(function(){return xt})),i.d(r,"SCALE_MODES",(function(){return vt})),i.d(r,"TARGETS",(function(){return gt})),i.d(r,"TYPES",(function(){return yt})),i.d(r,"WRAP_MODES",(function(){return bt})),i.d(r,"Bounds",(function(){return Ge})),i.d(r,"Container",(function(){return Ze})),i.d(r,"DisplayObject",(function(){return He})),i.d(r,"TemporaryDisplayObject",(function(){return ze})),i.d(r,"FillStyle",(function(){return ra})),i.d(r,"GRAPHICS_CURVES",(function(){return na})),i.d(r,"Graphics",(function(){return Pa})),i.d(r,"GraphicsData",(function(){return Ta})),i.d(r,"GraphicsGeometry",(function(){return Ra})),i.d(r,"LINE_CAP",(function(){return Qs})),i.d(r,"LINE_JOIN",(function(){return $s})),i.d(r,"LineStyle",(function(){return Ca})),i.d(r,"graphicsUtils",(function(){return Oa})),i.d(r,"Circle",(function(){return Re})),i.d(r,"DEG_TO_RAD",(function(){return we})),i.d(r,"Ellipse",(function(){return Ce})),i.d(r,"Matrix",(function(){return De})),i.d(r,"ObservablePoint",(function(){return Oe})),i.d(r,"PI_2",(function(){return Se})),i.d(r,"Point",(function(){return Pe})),i.d(r,"Polygon",(function(){return Ie})),i.d(r,"RAD_TO_DEG",(function(){return Te})),i.d(r,"Rectangle",(function(){return Ae})),i.d(r,"RoundedRectangle",(function(){return Me})),i.d(r,"SHAPES",(function(){return Ee})),i.d(r,"Transform",(function(){return Ve})),i.d(r,"groupD8",(function(){return Ye})),i.d(r,"Mesh",(function(){return wo})),i.d(r,"MeshBatchUvs",(function(){return Eo})),i.d(r,"MeshGeometry",(function(){return Ro})),i.d(r,"MeshMaterial",(function(){return Ao})),i.d(r,"NineSlicePlane",(function(){return Ph})),i.d(r,"PlaneGeometry",(function(){return Ah})),i.d(r,"RopeGeometry",(function(){return Rh})),i.d(r,"SimpleMesh",(function(){return Mh})),i.d(r,"SimplePlane",(function(){return Ih})),i.d(r,"SimpleRope",(function(){return Ch})),i.d(r,"Runner",(function(){return ci})),i.d(r,"Sprite",(function(){return La})),i.d(r,"AnimatedSprite",(function(){return Dh})),i.d(r,"TEXT_GRADIENT",(function(){return Fa})),i.d(r,"Text",(function(){return qa})),i.d(r,"TextMetrics",(function(){return Wa})),i.d(r,"TextStyle",(function(){return Ya})),i.d(r,"isMobile",(function(){return ct})),i.d(r,"settings",(function(){return It})),i.d(r,"VERSION",(function(){return Lh})),i.d(r,"filters",(function(){return Bh}));var s={};i.r(s),i.d(s,"Animation",(function(){return $l})),i.d(s,"AnimationState",(function(){return xc})),i.d(s,"AnimationStateAdapter",(function(){return Mc})),i.d(s,"AnimationStateData",(function(){return Pc})),i.d(s,"AtlasAttachmentLoader",(function(){return Oc})),i.d(s,"Attachment",(function(){return Vl})),i.d(s,"AttachmentTimeline",(function(){return lc})),i.d(s,"Bone",(function(){return Fc})),i.d(s,"BoneData",(function(){return Dc})),i.d(s,"BoundingBoxAttachment",(function(){return jl})),i.d(s,"ClippingAttachment",(function(){return Wl})),i.d(s,"ColorTimeline",(function(){return oc})),i.d(s,"ConstraintData",(function(){return kc})),i.d(s,"CurveTimeline",(function(){return ic})),i.d(s,"DeformTimeline",(function(){return uc})),i.d(s,"DrawOrderTimeline",(function(){return pc})),i.d(s,"Event",(function(){return Nc})),i.d(s,"EventData",(function(){return Lc})),i.d(s,"EventQueue",(function(){return bc})),i.d(s,"EventTimeline",(function(){return dc})),i.d(s,"EventType",(function(){return Ec})),i.d(s,"IkConstraint",(function(){return Bc})),i.d(s,"IkConstraintData",(function(){return Xc})),i.d(s,"IkConstraintTimeline",(function(){return fc})),i.d(s,"JitterEffect",(function(){return Kl})),i.d(s,"MeshAttachment",(function(){return Hl})),i.d(s,"MixBlend",(function(){return Ql})),i.d(s,"MixDirection",(function(){return tc})),i.d(s,"PathAttachment",(function(){return zl})),i.d(s,"PathConstraint",(function(){return Yc})),i.d(s,"PathConstraintData",(function(){return Uc})),i.d(s,"PathConstraintMixTimeline",(function(){return yc})),i.d(s,"PathConstraintPositionTimeline",(function(){return _c})),i.d(s,"PathConstraintSpacingTimeline",(function(){return gc})),i.d(s,"PointAttachment",(function(){return ql})),i.d(s,"PositionMode",(function(){return Tc})),i.d(s,"RegionAttachment",(function(){return Zl})),i.d(s,"RotateMode",(function(){return Ac})),i.d(s,"RotateTimeline",(function(){return nc})),i.d(s,"ScaleTimeline",(function(){return sc})),i.d(s,"ShearTimeline",(function(){return ac})),i.d(s,"Skeleton",(function(){return jc})),i.d(s,"SkeletonBinary",(function(){return Kc})),i.d(s,"SkeletonBounds",(function(){return Qc})),i.d(s,"SkeletonData",(function(){return Wc})),i.d(s,"SkeletonJson",(function(){return tu})),i.d(s,"Skin",(function(){return Zc})),i.d(s,"SkinEntry",(function(){return qc})),i.d(s,"Slot",(function(){return Vc})),i.d(s,"SlotData",(function(){return Hc})),i.d(s,"SpacingMode",(function(){return wc})),i.d(s,"Spine",(function(){return iu})),i.d(s,"SwirlEffect",(function(){return Jl})),i.d(s,"TimelineType",(function(){return ec})),i.d(s,"TrackEntry",(function(){return vc})),i.d(s,"TransformConstraint",(function(){return Gc})),i.d(s,"TransformConstraintData",(function(){return zc})),i.d(s,"TransformConstraintTimeline",(function(){return mc})),i.d(s,"TransformMode",(function(){return Sc})),i.d(s,"TranslateTimeline",(function(){return rc})),i.d(s,"TwoColorTimeline",(function(){return hc})),i.d(s,"VertexAttachment",(function(){return Gl}));var a={};i.r(a),i.d(a,"Animation",(function(){return pu})),i.d(a,"AnimationState",(function(){return Pu})),i.d(a,"AnimationStateAdapter2",(function(){return Yu})),i.d(a,"AnimationStateData",(function(){return Vu})),i.d(a,"AtlasAttachmentLoader",(function(){return Gu})),i.d(a,"Attachment",(function(){return nu})),i.d(a,"AttachmentTimeline",(function(){return bu})),i.d(a,"Bone",(function(){return Wu})),i.d(a,"BoneData",(function(){return ju})),i.d(a,"BoundingBoxAttachment",(function(){return su})),i.d(a,"ClippingAttachment",(function(){return au})),i.d(a,"ColorTimeline",(function(){return xu})),i.d(a,"CurveTimeline",(function(){return fu})),i.d(a,"DeformTimeline",(function(){return Su})),i.d(a,"DrawOrderTimeline",(function(){return wu})),i.d(a,"Event",(function(){return Hu})),i.d(a,"EventData",(function(){return zu})),i.d(a,"EventQueue",(function(){return Du})),i.d(a,"EventTimeline",(function(){return Tu})),i.d(a,"EventType",(function(){return Fu})),i.d(a,"IkConstraint",(function(){return qu})),i.d(a,"IkConstraintData",(function(){return Zu})),i.d(a,"IkConstraintTimeline",(function(){return Au})),i.d(a,"JitterEffect",(function(){return uu})),i.d(a,"MeshAttachment",(function(){return ou})),i.d(a,"MixBlend",(function(){return Rc})),i.d(a,"MixDirection",(function(){return Cc})),i.d(a,"PathAttachment",(function(){return hu})),i.d(a,"PathConstraint",(function(){return Ju})),i.d(a,"PathConstraintData",(function(){return Ku})),i.d(a,"PathConstraintMixTimeline",(function(){return Mu})),i.d(a,"PathConstraintPositionTimeline",(function(){return Cu})),i.d(a,"PathConstraintSpacingTimeline",(function(){return Iu})),i.d(a,"PointAttachment",(function(){return lu})),i.d(a,"PositionMode",(function(){return Nu})),i.d(a,"RegionAttachment",(function(){return cu})),i.d(a,"RotateMode",(function(){return Bu})),i.d(a,"RotateTimeline",(function(){return mu})),i.d(a,"ScaleTimeline",(function(){return gu})),i.d(a,"ShearTimeline",(function(){return yu})),i.d(a,"Skeleton",(function(){return td})),i.d(a,"SkeletonBounds",(function(){return ed})),i.d(a,"SkeletonData",(function(){return id})),i.d(a,"SkeletonJson",(function(){return ad})),i.d(a,"Skin",(function(){return sd})),i.d(a,"Slot",(function(){return $u})),i.d(a,"SlotData",(function(){return nd})),i.d(a,"SpacingMode",(function(){return Lu})),i.d(a,"Spine",(function(){return hd})),i.d(a,"SwirlEffect",(function(){return du})),i.d(a,"TimelineType",(function(){return Ic})),i.d(a,"TrackEntry",(function(){return Ou})),i.d(a,"TransformConstraint",(function(){return Qu})),i.d(a,"TransformConstraintData",(function(){return rd})),i.d(a,"TransformConstraintTimeline",(function(){return Ru})),i.d(a,"TransformMode",(function(){return ku})),i.d(a,"TranslateTimeline",(function(){return _u})),i.d(a,"TwoColorTimeline",(function(){return vu})),i.d(a,"VertexAttachment",(function(){return ru}));var o={};i.r(o),i.d(o,"AlphaTimeline",(function(){return ep})),i.d(o,"Animation",(function(){return xd})),i.d(o,"AnimationState",(function(){return pp})),i.d(o,"AnimationStateAdapter",(function(){return gp})),i.d(o,"AnimationStateData",(function(){return Ap})),i.d(o,"AtlasAttachmentLoader",(function(){return Rp})),i.d(o,"Attachment",(function(){return ld})),i.d(o,"AttachmentTimeline",(function(){return rp})),i.d(o,"Bone",(function(){return Dp})),i.d(o,"BoneData",(function(){return Cp})),i.d(o,"BoundingBoxAttachment",(function(){return ud})),i.d(o,"ClippingAttachment",(function(){return dd})),i.d(o,"ConstraintData",(function(){return Fp})),i.d(o,"CurveTimeline",(function(){return Ud})),i.d(o,"CurveTimeline1",(function(){return Yd})),i.d(o,"CurveTimeline2",(function(){return Vd})),i.d(o,"DeformTimeline",(function(){return sp})),i.d(o,"DrawOrderTimeline",(function(){return op})),i.d(o,"Event",(function(){return kp})),i.d(o,"EventData",(function(){return Np})),i.d(o,"EventQueue",(function(){return mp})),i.d(o,"EventTimeline",(function(){return ap})),i.d(o,"EventType",(function(){return _p})),i.d(o,"IkConstraint",(function(){return Lp})),i.d(o,"IkConstraintData",(function(){return Bp})),i.d(o,"IkConstraintTimeline",(function(){return hp})),i.d(o,"JitterEffect",(function(){return gd})),i.d(o,"MeshAttachment",(function(){return pd})),i.d(o,"MixBlend",(function(){return Xu})),i.d(o,"MixDirection",(function(){return Uu})),i.d(o,"PathAttachment",(function(){return fd})),i.d(o,"PathConstraint",(function(){return Up})),i.d(o,"PathConstraintData",(function(){return Xp})),i.d(o,"PathConstraintMixTimeline",(function(){return dp})),i.d(o,"PathConstraintPositionTimeline",(function(){return cp})),i.d(o,"PathConstraintSpacingTimeline",(function(){return up})),i.d(o,"PointAttachment",(function(){return md})),i.d(o,"PositionMode",(function(){return Mp})),i.d(o,"RGB2Timeline",(function(){return np})),i.d(o,"RGBA2Timeline",(function(){return ip})),i.d(o,"RGBATimeline",(function(){return Qd})),i.d(o,"RGBTimeline",(function(){return tp})),i.d(o,"RegionAttachment",(function(){return _d})),i.d(o,"RotateMode",(function(){return Op})),i.d(o,"RotateTimeline",(function(){return Gd})),i.d(o,"ScaleTimeline",(function(){return zd})),i.d(o,"ScaleXTimeline",(function(){return qd})),i.d(o,"ScaleYTimeline",(function(){return Zd})),i.d(o,"ShearTimeline",(function(){return Kd})),i.d(o,"ShearXTimeline",(function(){return Jd})),i.d(o,"ShearYTimeline",(function(){return $d})),i.d(o,"Skeleton",(function(){return Gp})),i.d(o,"SkeletonBinary",(function(){return Zp})),i.d(o,"SkeletonBounds",(function(){return Sf})),i.d(o,"SkeletonData",(function(){return jp})),i.d(o,"SkeletonJson",(function(){return Tf})),i.d(o,"Skin",(function(){return qp})),i.d(o,"SkinEntry",(function(){return zp})),i.d(o,"Slot",(function(){return Yp})),i.d(o,"SlotData",(function(){return Wp})),i.d(o,"SpacingMode",(function(){return Pp})),i.d(o,"Spine",(function(){return Mf})),i.d(o,"SwirlEffect",(function(){return yd})),i.d(o,"Timeline",(function(){return Xd})),i.d(o,"TrackEntry",(function(){return fp})),i.d(o,"TransformConstraint",(function(){return Vp})),i.d(o,"TransformConstraintData",(function(){return Hp})),i.d(o,"TransformConstraintTimeline",(function(){return lp})),i.d(o,"TransformMode",(function(){return Ip})),i.d(o,"TranslateTimeline",(function(){return jd})),i.d(o,"TranslateXTimeline",(function(){return Wd})),i.d(o,"TranslateYTimeline",(function(){return Hd})),i.d(o,"VertexAttachment",(function(){return cd}));var h=i(3),l=i.n(h),c=(i(42),i.p+"img/arrow.5a1d21a6ef7989f4bb2d32f44641e758.png"),u=i.p+"img/bullet.be09e911b8eb06657568ab13b9248d47.png",d=i.p+"img/role.b5dcdfdde208f132a0e75b5ed086ed3d.png",p=i.p+"img/circle01.619519fc2519d28206aa562dd51cdf13.png",f=i(31),m=i(32),_=i(0),g=i.n(_),y=i(1),x=i.n(y),v=function(){function t(){g()(this,t)}return x()(t,null,[{key:"mix",value:function(t,e,i){return t*(1-i)+e*i}},{key:"angleMix",value:function(e,i,n){return i-e>Math.PI?t.mix(e+2*Math.PI,i,n):i-e<-Math.PI?t.mix(e-2*Math.PI,i,n):t.mix(e,i,n)}},{key:"fract",value:function(t){return(t%=1)<0?t+1:t}},{key:"inverseMix",value:function(t,e,i){return(i-t)/(e-t)}},{key:"clamp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<=e?e:t>=i?i:t}},{key:"smoothstep",value:function(t,e,i){return(i=clamp(inverseMix(t,e,i)))*i*(3-2*i)}}]),t}(),b=function(){function t(){g()(this,t)}return x()(t,null,[{key:"normalize",value:function(e){return t.length(e)?t.scale(e,1/t.length(e)):e}},{key:"rotate",value:function(t,e){var i=Math.cos(e),n=Math.sin(e);return[t[0]*i-t[1]*n,t[1]*i+t[0]*n]}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"cross",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"projection",value:function(e,i){var n=t.dot(e,i)/t.dot(i,i);return[i[0]*n,i[1]*n]}},{key:"length",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"mul",value:function(t,e){return[t[0]*e[0],t[1]*e[1]]}},{key:"div",value:function(t,e){return[t[0]/e[0],t[1]/e[1]]}},{key:"scale",value:function(t,e){return[t[0]*e,t[1]*e]}},{key:"collisionCalc",value:function(e,i,n,r){return t.scale(t.add(t.scale(e,n-r),t.scale(i,2*r)),1/(n+r))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}},{key:"floor",value:function(t){return[Math.floor(t[0]),Math.floor(t[1])]}},{key:"fract",value:function(t){return[v.fract(t[0]),v.fract(t[1])]}},{key:"sin",value:function(t){return[Math.sin(t[0]),Math.sin(t[1])]}},{key:"cos",value:function(t){return[Math.cos(t[0]),Math.cos(t[1])]}},{key:"distance",value:function(e,i){return t.length(t.sub(i,e))}},{key:"mix",value:function(t,e,i){return[v.mix(t[0],e[0],i),v.mix(t[1],e[1],i)]}},{key:"abs",value:function(t){return[Math.abs(t[0]),Math.abs(t[1])]}},{key:"getLine",value:function(e,i){return{pos:e,dir:t.sub(i,e)}}}]),t}(),E=i(33),S=i(36),T=i.n(S);
/*!
 * @pixi/polyfill - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
self.Promise||(self.Promise=E.a),Object.assign||(Object.assign=T.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var w=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-w}}for(var A=Date.now(),R=["ms","moz","webkit","o"],C=0;C<R.length&&!self.requestAnimationFrame;++C){var I=R[C];self.requestAnimationFrame=self[I+"RequestAnimationFrame"],self.cancelAnimationFrame=self[I+"CancelAnimationFrame"]||self[I+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+A-e;return i<0&&(i=0),A=e,self.setTimeout((function(){A=Date.now(),t(performance.now())}),i)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var M=/iPhone/i,P=/iPod/i,O=/iPad/i,D=/\biOS-universal(?:.+)Mac\b/i,F=/\bAndroid(?:.+)Mobile\b/i,k=/Android/i,N=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,L=/Silk/i,B=/Windows Phone/i,X=/\bWindows(?:.+)ARM\b/i,U=/BlackBerry/i,Y=/BB10/i,V=/Opera Mini/i,G=/\b(CriOS|Chrome)(?:.+)Mobile/i,j=/Mobile(?:.+)Firefox\b/i,W=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var H,z,q,Z,K,J,$,Q,tt,et,it,nt,rt,st,at,ot,ht,lt,ct=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var r=function(t){return function(e){return e.test(t)}}(i),s={apple:{phone:r(M)&&!r(B),ipod:r(P),tablet:!r(M)&&(r(O)||W(e))&&!r(B),universal:r(D),device:(r(M)||r(P)||r(O)||r(D)||W(e))&&!r(B)},amazon:{phone:r(N),tablet:!r(N)&&r(L),device:r(N)||r(L)},android:{phone:!r(B)&&r(N)||!r(B)&&r(F),tablet:!r(B)&&!r(N)&&!r(F)&&(r(L)||r(k)),device:!r(B)&&(r(N)||r(L)||r(F)||r(k))||r(/\bokhttp\b/i)},windows:{phone:r(B),tablet:r(X),device:r(B)||r(X)},other:{blackberry:r(U),blackberry10:r(Y),opera:r(V),firefox:r(j),chrome:r(G),device:r(U)||r(Y)||r(V)||r(j)||r(G)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(H||(H={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(z||(z={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(q||(q={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Z||(Z={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(K||(K={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(J||(J={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}($||($={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Q||(Q={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(tt||(tt={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(et||(et={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(it||(it={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(nt||(nt={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(rt||(rt={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(st||(st={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(at||(at={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ot||(ot={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(ht||(ht={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(lt||(lt={}));var ut,dt,pt,ft,mt,_t,gt,yt,xt,vt,bt,Et,St,Tt,wt,At,Rt,Ct,It={MIPMAP_TEXTURES:nt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(ct.tablet||ct.phone){var i;if(ct.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(e=!1);if(ct.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:at.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:it.CLAMP,SCALE_MODE:et.LINEAR,PRECISION_VERTEX:ot.HIGH,PRECISION_FRAGMENT:ct.apple.device?ot.HIGH:ot.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!ct.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Mt=i(17),Pt=i.n(Mt),Ot=i(18),Dt=i.n(Ot),Ft=i(11);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(ut||(ut={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(dt||(dt={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(pt||(pt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(ft||(ft={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(mt||(mt={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(_t||(_t={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(gt||(gt={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(yt||(yt={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(xt||(xt={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(vt||(vt={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(bt||(bt={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Et||(Et={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(St||(St={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Tt||(Tt={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(wt||(wt={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(At||(At={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Rt||(Rt={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Ct||(Ct={}));
/*!
 * @pixi/utils - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var kt={parse:Ft.parse,format:Ft.format,resolve:Ft.resolve};It.RETINA_PREFIX=/@([0-9\.]+)x/,It.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Nt,Lt=!1;function Bt(){Lt=!0}function Xt(t){var e;if(!Lt){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.0.4 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,i)}else self.console&&self.console.log("PixiJS 6.0.4 - "+t+" - http://www.pixijs.com/");Lt=!0}}function Ut(){return void 0===Nt&&(Nt=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:It.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}()),Nt}var Yt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Vt(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function Gt(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function jt(t){return"string"==typeof t&&"#"===(t=Yt[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function Wt(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var Ht=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[ft.NORMAL_NPM]=ft.NORMAL,t[ft.ADD_NPM]=ft.ADD,t[ft.SCREEN_NPM]=ft.SCREEN,e[ft.NORMAL]=ft.NORMAL_NPM,e[ft.ADD]=ft.ADD_NPM,e[ft.SCREEN]=ft.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function zt(t,e){return Ht[e?1:0][t]}function qt(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function Zt(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function Kt(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function Jt(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function $t(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Qt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function te(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;var a=new ArrayBuffer(4*i),o=null,h=0;for(s=0;s<t.length;s++){var l=e[s],c=t[s],u=$t(c);r[u]||(r[u]=new Qt[u](a)),o=r[u];for(var d=0;d<c.length;d++){o[(d/l|0)*n+h+d%l]=c[d]}h+=l}return new Float32Array(a)}function ee(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function ie(t){return!(t&t-1||!t)}function ne(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function re(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var s=r-(i=e+i>r?r-e:i);for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}function se(t){return 0===t?0:t<0?-1:1}var ae=0;function oe(){return++ae}var he={};function le(t,e,i){if(void 0===i&&(i=3),!he[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),he[e]=!0}}var ce={},ue=Object.create(null),de=Object.create(null);function pe(){var t;for(t in ue)ue[t].destroy();for(t in de)de[t].destroy()}function fe(){var t;for(t in ue)delete ue[t];for(t in de)delete de[t]}var me=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||It.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function _e(t){var e,i,n,r=t.width,s=t.height,a=t.getContext("2d"),o=a.getImageData(0,0,r,s).data,h=o.length,l={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<h;e+=4)0!==o[e+3]&&(i=e/4%r,n=~~(e/4/r),null===l.top&&(l.top=n),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<n)&&(l.bottom=n));return null!==l.top&&(r=l.right-l.left,s=l.bottom-l.top+1,c=a.getImageData(l.left,l.top,r,s)),{height:s,width:r,data:c}}var ge,ye=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function xe(t){var e=ye.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function ve(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,ge||(ge=document.createElement("a")),ge.href=t;var i=kt.parse(ge.href),n=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&n&&i.protocol===e.protocol?"":"anonymous"}function be(t,e){var i=It.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}
/*!
 * @pixi/math - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ee,Se=2*Math.PI,Te=180/Math.PI,we=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Ee||(Ee={}));var Ae=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Ee.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=r-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Re=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Ee.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new Ae(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),Ce=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=Ee.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new Ae(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Ie=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var r=[],s=0,a=n.length;s<a;s++)r.push(n[s].x,n[s].y);n=r}this.points=n,this.type=Ee.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var a=this.points[2*r],o=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];o>e!=l>e&&t<(e-o)/(l-o)*(h-a)+a&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),Me=function(){function t(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=r,this.type=Ee.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),Pe=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),Oe=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),De=function(){function t(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new Pe;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Pe;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,a,o,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-o)*s,this.d=Math.cos(a-o)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=t.pivot,a=-Math.atan2(-n,r),o=Math.atan2(i,e),h=Math.abs(a+o);return h<1e-5||Math.abs(Se-h)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(s.x*e+s.y*n),t.position.y=this.ty+(s.x*i+s.y*r),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Fe=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ke=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ne=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Le=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Be=[],Xe=[],Ue=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Be.push(e);for(var i=0;i<16;i++)for(var n=Ue(Fe[t]*Fe[i]+Ne[t]*ke[i]),r=Ue(ke[t]*Fe[i]+Le[t]*ke[i]),s=Ue(Fe[t]*Ne[i]+Ne[t]*Le[i]),a=Ue(ke[t]*Ne[i]+Le[t]*Le[i]),o=0;o<16;o++)if(Fe[o]===n&&ke[o]===r&&Ne[o]===s&&Le[o]===a){e.push(o);break}}for(t=0;t<16;t++){var h=new De;h.set(Fe[t],ke[t],Ne[t],Le[t],0,0),Xe.push(h)}}();var Ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Fe[t]},uY:function(t){return ke[t]},vX:function(t){return Ne[t]},vY:function(t){return Le[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Be[t][e]},sub:function(t,e){return Be[t][Ye.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Ye.S:Ye.N:2*Math.abs(e)<=Math.abs(t)?t>0?Ye.E:Ye.W:e>0?t>0?Ye.SE:Ye.SW:t>0?Ye.NE:Ye.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=Xe[Ye.inv(e)];r.tx=i,r.ty=n,t.append(r)}},Ve=function(){function t(){this.worldTransform=new De,this.localTransform=new De,this.position=new Oe(this.onChange,this,0,0),this.scale=new Oe(this.onChange,this,1,1),this.pivot=new Oe(this.onChange,this,0,0),this.skew=new Oe(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();
/*!
 * @pixi/display - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
It.SORTABLE_CHILDREN=!1;var Ge=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Ae.EMPTY:((t=t||new Ae(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,r=t.c,s=t.d,a=t.tx,o=t.ty,h=i*e.x+r*e.y+a,l=n*e.x+s*e.y+o;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],a=t[1];e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,r=a>r?a:r,e=(s=t[2])<e?s:e,i=(a=t[3])<i?a:i,n=s>n?s:n,r=a>r?a:r,e=(s=t[4])<e?s:e,i=(a=t[5])<i?a:i,n=s>n?s:n,r=a>r?a:r,e=(s=t[6])<e?s:e,i=(a=t[7])<i?a:i,n=s>n?s:n,r=a>r?a:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},t.prototype.addFrameMatrix=function(t,e,i,n,r){var s=t.a,a=t.b,o=t.c,h=t.d,l=t.tx,c=t.ty,u=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*e+o*i+l,_=a*e+h*i+c;u=m<u?m:u,d=_<d?_:d,p=m>p?m:p,f=_>f?_:f,u=(m=s*n+o*i+l)<u?m:u,d=(_=a*n+h*i+c)<d?_:d,p=m>p?m:p,f=_>f?_:f,u=(m=s*e+o*r+l)<u?m:u,d=(_=a*e+h*r+c)<d?_:d,p=m>p?m:p,f=_>f?_:f,u=(m=s*n+o*r+l)<u?m:u,d=(_=a*n+h*r+c)<d?_:d,p=m>p?m:p,f=_>f?_:f,this.minX=u,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,s=this.maxX,a=this.maxY,o=e;o<i;o+=2){var h=t[o],l=t[o+1];n=h<n?h:n,r=l<r?l:r,s=h>s?h:s,a=l>a?l:a}this.minX=n,this.minY=r,this.maxX=s,this.maxY=a},t.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},t.prototype.addVerticesMatrix=function(t,e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=r);for(var a=t.a,o=t.b,h=t.c,l=t.d,c=t.tx,u=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,_=i;_<n;_+=2){var g=e[_],y=e[_+1],x=a*g+h*y+c,v=l*y+o*g+u;d=Math.min(d,x-r),f=Math.max(f,x+r),p=Math.min(p,v-s),m=Math.max(m,v+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var a=this.minX,o=this.minY,h=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=n<o?n:o,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var a=this.minX,o=this.minY,h=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=n<o?n:o,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,n,r,s){t-=r,e-=s,i+=r,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}(),je=function(t,e){return(je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function We(t,e){function i(){this.constructor=t}je(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var He=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Ve,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Ge,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return We(e,t),e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ae),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ae),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ge);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-r,s},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,r,s,a,o,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=a,this.pivot.x=o,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new ze),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Te},set:function(t){this.transform.rotation=t*we},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(Pt.a),ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return We(e,t),e}(He);function qe(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}He.prototype.displayObjectUpdateTransform=He.prototype.updateTransform;var Ze=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=It.SORTABLE_CHILDREN,e.sortDirty=!1,e}return We(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.addChild(e[n]);else{var r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);re(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.removeChild(e[n]);else{var r=e[0],s=this.children.indexOf(r);if(-1===s)return null;r.parent=null,r.transform._parentID=-1,re(this.children,s,1),this._boundsID++,this.onChildrenChange(s),r.emit("removed",this),this.emit("childRemoved",r,this,s)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,re(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,n=t,r=e-n;if(r>0&&r<=e){i=this.children.splice(n,r);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(qe),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var n=t.prototype.getLocalBounds.call(this,e);if(!i)for(var r=0,s=this.children.length;r<s;++r){var a=this.children[r];a.visible&&a.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);n=0;for(var r=this.children.length;n<r;n++)this.children[n].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(He);Ze.prototype.containerUpdateTransform=Ze.prototype.updateTransform;
/*!
 * @pixi/accessibility - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ke={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};He.mixin(Ke);var Je,$e=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ct.tablet||ct.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(ct.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,n=e.top,r=e.width,s=e.height,a=this.renderer,o=a.width,h=a.height,l=a.resolution,c=r/o*l,u=s/h*l,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=o+"px",d.style.height=h+"px";for(var p=0;p<this.children.length;p++){var f=this.children[p];if(f.renderId!==this.renderId)f._accessibleActive=!1,re(this.children,p,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,p--;else{d=f._accessibleDiv;var m=f.hitArea,_=f.worldTransform;f.hitArea?(d.style.left=(_.tx+m.x*_.a)*c+"px",d.style.top=(_.ty+m.y*_.d)*u+"px",d.style.width=m.width*_.a*c+"px",d.style.height=m.height*_.d*u+"px"):(m=f.getBounds(),this.capHitArea(m),d.style.left=m.x*c+"px",d.style.top=m.y*u+"px",d.style.width=m.width*c+"px",d.style.height=m.height*u+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,n=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"click",n),e.dispatchEvent(i,"pointertap",n),e.dispatchEvent(i,"tap",n)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseover",n)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseout",n)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();
/*!
 * @pixi/ticker - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
It.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(Je||(Je={}));var Qe=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),ti=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Qe(null,null,1/0),this.deltaMS=1/It.TARGET_FPMS,this.elapsedMS=1/It.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=Je.NORMAL),this._addListener(new Qe(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=Je.NORMAL),this._addListener(new Qe(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*It.TARGET_FPMS;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,It.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),ei=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Je.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ti.shared:new ti,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),ii=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Pe,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),ni=function(t,e){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var ri=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),si=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),ai=function(){function t(){this._tempPoint=new Pe}return t.prototype.recursiveFindHit=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global,a=!1,o=r=e.interactive||r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,h=!1)),o=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(n=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;c>=0;c--){var u=l[c],d=this.recursiveFindHit(t,u,i,n,o);if(d){if(!u.parent)continue;o=!1,d&&(t.target&&(n=!1),a=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),i&&i(t,e,!!a))),a},t.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},t}(),oi={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};He.mixin(oi);var hi={target:null,data:{global:null}},li=function(t){function e(e,i){var n=t.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new ii,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new ri,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in self),n.supportsTouchEvents="ontouchstart"in self,n.supportsPointerEvents=!!self.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new ai,n._tempDisplayObject=new ze,n._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(t,e){function i(){this.constructor=t}ni(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return hi.target=null,hi.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(hi,e,null,!0),hi.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(ti.system.add(this.tickerUpdate,this,Je.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(ti.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),self.addEventListener("pointercancel",this.onPointerCancel,!0),self.addEventListener("pointerup",this.onPointerUp,!0)):(self.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),self.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),self.removeEventListener("pointercancel",this.onPointerCancel,!0),self.removeEventListener("pointerup",this.onPointerUp,!0)):(self.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),self.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n){var r=this.search.findHit(t,e,i,n),s=this.delayedEvents;if(!s.length)return r;t.stopPropagationHint=!1;var a=s.length;this.delayedEvents=[];for(var o=0;o<a;o++){var h=s[o],l=h.displayObject,c=h.eventString,u=h.eventData;u.stopsPropagatingAt===l&&(u.stopPropagationHint=!0),this.dispatchEvent(l,c,u)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===r.pointerType)this.emit("touchstart",a);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;this.emit(o?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new si(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",a=0;a<r;a++){var o=n[a],h=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===o.pointerType||"pen"===o.pointerType){var c=2===o.button;this.emit(c?"rightup"+s:"mouseup"+s,l)}else"touch"===o.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(o.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],a="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(o){var l=2===n.button,c=si.FLAGS,u=l?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==s&&s.flags&u;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),s&&(l?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),s&&(o&&!h||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,s);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===r.pointerType&&this.emit("touchmove",a),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,a=e.trackedPointers[r];i&&!a&&(a=e.trackedPointers[r]=new si(r)),void 0!==a&&(i&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new ii).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(self.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof self.PointerEvent))e.push(t);else{var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(Pt.a),ci=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,r,s,a,o){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,c=h.items;this._aliasCount++;for(var u=0,d=c.length;u<d;u++)c[u][l](t,e,i,n,r,s,a,o);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(ci.prototype,{dispatch:{value:ci.prototype.emit},run:{value:ci.prototype.emit}}),
/*!
 * @pixi/core - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
It.PREFER_ENV=ct.any?ut.WEBGL:ut.WEBGL2,It.STRICT_TEXTURE_CACHE=!1;var ui=[];function di(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var r=ui.length-1;r>=0;--r){var s=ui[r];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pi=function(t,e){return(pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function fi(t,e){function i(){this.constructor=t}pi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var mi=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new ci("setRealSize"),this.onUpdate=new ci("update"),this.onError=new ci("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),_i=function(t){function e(e,i){var n=this,r=i||{},s=r.width,a=r.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return(n=t.call(this,s,a)||this).data=e,n}return fi(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===St.UNPACK);var r=e.realWidth,s=e.realHeight;return i.width===r&&i.height===s?n.texSubImage2D(e.target,0,0,0,r,s,e.format,e.type,this.data):(i.width=r,i.height=s,n.texImage2D(e.target,0,i.internalFormat,r,s,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(mi),gi={scaleMode:vt.NEAREST,format:_t.RGBA,alphaMode:St.NPM},yi=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this,r=(i=i||{}).alphaMode,s=i.mipmap,a=i.anisotropicLevel,o=i.scaleMode,h=i.width,l=i.height,c=i.wrapMode,u=i.format,d=i.type,p=i.target,f=i.resolution,m=i.resourceOptions;return!e||e instanceof mi||((e=di(e,m)).internal=!0),n.width=h||0,n.height=l||0,n.resolution=f||It.RESOLUTION,n.mipmap=void 0!==s?s:It.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==a?a:It.ANISOTROPIC_LEVEL,n.wrapMode=c||It.WRAP_MODE,n.scaleMode=void 0!==o?o:It.SCALE_MODE,n.format=u||_t.RGBA,n.type=d||yt.UNSIGNED_BYTE,n.target=p||gt.TEXTURE_2D,n.alphaMode=void 0!==r?r:St.UNPACK,n.uid=oe(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=h>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return fi(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=ie(this.realWidth)&&ie(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete de[this.cacheId],delete ue[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=It.STRICT_TEXTURE_CACHE);var r="string"==typeof t,s=null;if(r)s=t;else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+oe()}s=t._pixiId}var o=de[s];if(r&&n&&!o)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return o||((o=new e(t,i)).cacheId=s,e.addToCache(o,s)),o},e.fromBuffer=function(t,i,n,r){t=t||new Float32Array(i*n*4);var s=new _i(t,{width:i,height:n}),a=t instanceof Float32Array?yt.FLOAT:yt.UNSIGNED_BYTE;return new e(s,Object.assign(gi,r||{width:i,height:n,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),de[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),de[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=de[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete de[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete de[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Pt.a),xi=function(t){function e(e,i){var n=this,r=i||{},s=r.width,a=r.height;(n=t.call(this,s,a)||this).items=[],n.itemDirtyIds=[];for(var o=0;o<e;o++){var h=new yi;n.items.push(h),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return fi(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof mi?this.addResourceAt(t[i],i):this.addResourceAt(di(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,n=e.realHeight;return t.resize(i,n),Promise.resolve(t)})),this._load},e}(mi),vi=function(t){function e(e,i){var n,r,s=this,a=i||{},o=a.width,h=a.height;return Array.isArray(e)?(n=e,r=e.length):r=e,s=t.call(this,r,{width:o,height:h})||this,n&&s.initFromArray(n,i),s}return fi(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=gt.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var n=this.length,r=this.itemDirtyIds,s=this.items,a=t.gl;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var o=0;o<n;o++){var h=s[o];r[o]<h.dirtyId&&(r[o]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,o,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(xi),bi=function(t){function e(e){var i=this,n=e,r=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return(i=t.call(this,r,s)||this).source=e,i.noSubImage=!1,i}return fi(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=ve(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var r=t.gl,s=e.realWidth,a=e.realHeight;return n=n||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===St.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==s||i.height!==a?(i.width=s,i.height=a,r.texImage2D(e.target,0,e.format,e.format,e.type,n)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(mi),Ei=function(t){function e(e){return t.call(this,e)||this}return fi(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(bi),Si=function(t){function e(i,n){var r=this,s=n||{},a=s.width,o=s.height,h=s.autoLoad,l=s.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");r=t.call(this,6,{width:a,height:o})||this;for(var c=0;c<e.SIDES;c++)r.items[c].target=gt.TEXTURE_CUBE_MAP_POSITIVE_X+c;return r.linkBaseTexture=!1!==l,i&&r.initFromArray(i,n),!1!==h&&r.load(),r}return fi(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=gt.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=gt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,n){for(var r=this.itemDirtyIds,s=0;s<e.SIDES;s++){var a=this.items[s];r[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,n),r[s]=a.dirtyId):r[s]<-1&&(t.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),r[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(xi),Ti=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var r=new Image;bi.crossOrigin(r,e,i.crossorigin),r.src=e,e=r}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:It.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return fi(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var n=e.source;e.url=n.src;var r=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?r():(n.onload=r,n.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===St.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var r=!0,s=i._glTextures;for(var a in s){var o=s[a];if(o!==n&&o.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(bi),wi=function(t){function e(e,i){var n=this;return i=i||{},(n=t.call(this,document.createElement("canvas"))||this)._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,!1!==i.autoLoad&&n.load(),n}return fi(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;bi.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=i*t.scale,s=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/n*i,s=t._overrideHeight||t._overrideWidth/i*n),r=Math.round(r),s=Math.round(s);var a=t.source;a.width=r,a.height=s,a._pixiId="canvas_"+oe(),a.getContext("2d").drawImage(e,0,0,i,n,0,0,r,s),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(bi),Ai=function(t){function e(i,n){var r=this;if(n=n||{},!(i instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var a=i[0].src||i[0];bi.crossOrigin(s,a,n.crossorigin);for(var o=0;o<i.length;++o){var h=document.createElement("source"),l=i[o],c=l.src,u=l.mime,d=(c=c||i[o]).split("?").shift().toLowerCase(),p=d.substr(d.lastIndexOf(".")+1);u=u||e.MIME_TYPES[p]||"video/"+p,h.src=c,h.type=u,s.appendChild(h)}i=s}return(r=t.call(this,i)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=n.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==n.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==n.autoLoad&&r.load(),r}return fi(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=ti.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ti.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ti.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&ti.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ti.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ti.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(bi),Ri=function(t){function e(e){return t.call(this,e)||this}return fi(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(bi);ui.push(Ti,Ri,Ei,Ai,wi,_i,Si,vi);var Ci={__proto__:null,Resource:mi,BaseImageResource:bi,INSTALLED:ui,autoDetectResource:di,AbstractMultiResource:xi,ArrayResource:vi,BufferResource:_i,CanvasResource:Ei,CubeResource:Si,ImageResource:Ti,SVGResource:wi,VideoResource:Ai,ImageBitmapResource:Ri},Ii=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),Mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===St.UNPACK);var r=e.realWidth,s=e.realHeight;return i.width===r&&i.height===s?n.texSubImage2D(e.target,0,0,0,r,s,e.format,e.type,this.data):(i.width=r,i.height=s,n.texImage2D(e.target,0,1===t.context.webGLVersion?n.DEPTH_COMPONENT:n.DEPTH_COMPONENT16,r,s,0,e.format,e.type,this.data)),!0},e}(_i),Pi=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ci("disposeFramebuffer"),this.multisample=Ct.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new yi(null,{scaleMode:vt.NEAREST,resolution:1,mipmap:Et.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new yi(new Mi(null,{width:this.width,height:this.height}),{scaleMode:vt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Et.OFF,format:_t.DEPTH_COMPONENT,type:yt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Oi=function(t){function e(e){var i=this;if("number"==typeof e){var n=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];e={width:n,height:r,scaleMode:s,resolution:a}}i=t.call(this,null,e)||this;var o=e||{},h=o.width,l=o.height;return i.mipmap=Et.OFF,i.width=Math.ceil(h)||100,i.height=Math.ceil(l)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Pi(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return fi(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(yi),Di=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var s=t.width/2/n,a=t.height/2/r,o=t.x/n+s,h=t.y/r+a;i=Ye.add(i,Ye.NW),this.x0=o+s*Ye.uX(i),this.y0=h+a*Ye.uY(i),i=Ye.add(i,2),this.x1=o+s*Ye.uX(i),this.y1=h+a*Ye.uY(i),i=Ye.add(i,2),this.x2=o+s*Ye.uX(i),this.y2=h+a*Ye.uY(i),i=Ye.add(i,2),this.x3=o+s*Ye.uX(i),this.y3=h+a*Ye.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Fi=new Di,ki=function(t){function e(i,n,r,s,a,o){var h=t.call(this)||this;if(h.noFrame=!1,n||(h.noFrame=!0,n=new Ae(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=n,h.trim=s,h.valid=!1,h._uvs=Fi,h.uvMatrix=null,h.orig=r||n,h._rotate=Number(a||0),!0===a)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Pe(o.x,o.y):new Pe(0,0),h._updateID=0,h.textureCacheIds=[],i.valid?h.noFrame?i.valid&&h.onBaseTextureUpdated(i):h.frame=n:i.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&i.on("update",h.onBaseTextureUpdated,h),h}return fi(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&ue[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===Fi&&(this._uvs=new Di),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=It.STRICT_TEXTURE_CACHE);var r="string"==typeof t,s=null;if(r)s=t;else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+oe()}s=t._pixiId}var o=ue[s];if(r&&n&&!o)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return o||(i.resolution||(i.resolution=be(t)),(o=new e(new yi(t,i))).baseTexture.cacheId=s,yi.addToCache(o.baseTexture,s),e.addToCache(o,s)),o},e.fromURL=function(t,i){var n=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),r=e.from(t,Object.assign({resourceOptions:n},i),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then((function(){return Promise.resolve(r)}))},e.fromBuffer=function(t,i,n,r){return new e(yi.fromBuffer(t,i,n,r))},e.fromLoader=function(t,i,n,r){var s=new yi(t,Object.assign({scaleMode:It.SCALE_MODE,resolution:be(i)},r)),a=s.resource;a instanceof Ti&&(a.url=i);var o=new e(s);return n||(n=i),yi.addToCache(o.baseTexture,n),e.addToCache(o,n),n!==i&&(yi.addToCache(o.baseTexture,i),e.addToCache(o,i)),o.baseTexture.valid?Promise.resolve(o):new Promise((function(t){o.baseTexture.once("loaded",(function(){return t(o)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),ue[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),ue[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=ue[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ue[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)ue[t.textureCacheIds[n]]===t&&delete ue[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,a=i+r>this.baseTexture.height;if(s||a){var o=s&&a?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+o+" "+l)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(Pt.a);function Ni(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}ki.EMPTY=new ki(new yi),Ni(ki.EMPTY),Ni(ki.EMPTY.baseTexture),ki.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new ki(new yi(new Ei(t)))}(),Ni(ki.WHITE),Ni(ki.WHITE.baseTexture);var Li=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return fi(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,n=[],r=1;r<arguments.length;r++)n[r-1]=i[r];return"number"==typeof t&&(le("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new Oi(t))},e}(ki),Bi=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var i=new Oi(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Li(i)},t.prototype.getOptimalTexture=function(e,i,n){void 0===n&&(n=1);var r=t.SCREEN_KEY;e*=n,i*=n,this.enableFullScreen&&e===this._pixelsWidth&&i===this._pixelsHeight||(r=(65535&(e=ee(e)))<<16|65535&(i=ee(i))),this.texturePool[r]||(this.texturePool[r]=[]);var s=this.texturePool[r].pop();return s||(s=this.createTexture(e,i)),s.filterPoolKey=r,s.setResolution(n),s},t.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var i=t.SCREEN_KEY,n=this.texturePool[i];if(this.enableFullScreen=e.width>0&&e.height>0,n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[i]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),Xi=function(){function t(t,e,i,n,r,s,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=yt.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=r,this.start=s,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,n,r,s){return new t(e,i,n,r,s)},t}(),Ui=0,Yi=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Ui++,this.disposeRunner=new ci("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function Vi(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Gi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var ji={5126:4,5123:2,5121:1},Wi=0,Hi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},zi=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Wi++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ci("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,n,r,s,a,o){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===o&&(o=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Yi||(e instanceof Array&&(e=new Float32Array(e)),e=new Yi(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,n,r);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Xi(c,i,n,r,s,a,o),this.instanced=this.instanced||o,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Yi||(t instanceof Array&&(t=new Uint16Array(t)),t=new Yi(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new Yi;for(t in this.attributes){var r=this.attributes[t],s=this.buffers[r.buffer];e.push(s.data),i.push(r.size*ji[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;var a=new ArrayBuffer(4*i),o=null,h=0;for(s=0;s<t.length;s++){var l=e[s],c=t[s],u=Vi(c);r[u]||(r[u]=new Gi[u](a)),o=r[u];for(var d=0;d<c.length;d++){o[(d/l|0)*n+h+d%l]=c[d]}h+=l}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new Yi(this.buffers[i].data.slice(0));for(var i in this.attributes){var n=this.attributes[i];e.attributes[i]=new Xi(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var i,n=new t,r=[],s=[],a=[],o=0;o<e.length;o++){i=e[o];for(var h=0;h<i.buffers.length;h++)s[h]=s[h]||0,s[h]+=i.buffers[h].data.length,a[h]=0}for(o=0;o<i.buffers.length;o++)r[o]=new(Hi[Vi(i.buffers[o].data)])(s[o]),n.buffers[o]=new Yi(r[o]);for(o=0;o<e.length;o++){i=e[o];for(h=0;h<i.buffers.length;h++)r[h].set(i.buffers[h].data,a[h]),a[h]+=i.buffers[h].data.length}if(n.attributes=i.attributes,i.indexBuffer){n.indexBuffer=n.buffers[i.buffers.indexOf(i.indexBuffer)],n.indexBuffer.index=!0;var l=0,c=0,u=0,d=0;for(o=0;o<i.buffers.length;o++)if(i.buffers[o]!==i.indexBuffer){d=o;break}for(var o in i.attributes){var p=i.attributes[o];(0|p.buffer)===d&&(c+=p.size*ji[p.type]/4)}for(o=0;o<e.length;o++){var f=e[o].indexBuffer.data;for(h=0;h<f.length;h++)n.indexBuffer.data[h+u]+=l;l+=i.buffers[d].data.length/c,u+=f.length}}return n},t}(),qi=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return fi(e,t),e}(zi),Zi=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Yi(e.vertices),e.uvBuffer=new Yi(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return fi(e,t),e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(zi),Ki=0,Ji=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ki++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,i,n){this.uniforms[e]=new t(i,n)},t.from=function(e,i){return new t(e,i)},t}(),$i=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Ae,this.destinationFrame=new Ae,this.bindingSourceFrame=new Ae,this.bindingDestinationFrame=new Ae,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Qi=[new Pe,new Pe,new Pe,new Pe],tn=new De,en=function(t){function e(e){var i=t.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new Bi,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new qi,i.quadUv=new Zi,i.tempRect=new Ae,i.activeState={},i.globalUniforms=new Ji({outputFrame:new Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return fi(e,t),e.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new $i,s=this.renderer.renderTexture,a=e[0].resolution,o=e[0].padding,h=e[0].autoFit,l=e[0].legacy,c=1;c<e.length;c++){var u=e[c];a=Math.min(a,u.resolution),o=this.useMaxPadding?Math.max(o,u.padding):o+u.padding,h=h&&u.autoFit,l=l||u.legacy}if(1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(r),r.resolution=a,r.legacy=l,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(o),h){var d=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(tn.copyFrom(i.projection.transform).invert(),d),r.sourceFrame.fit(d)}this.roundFrame(r.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,a),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var p=this.tempRect;p.x=0,p.y=0,p.width=r.sourceFrame.width,p.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(s.sourceFrame),r.bindingDestinationFrame.copyFrom(s.destinationFrame),r.transform=i.projection.transform,i.projection.transform=null,s.bind(r.renderTexture,r.sourceFrame,p),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var r=n.inputSize,s=n.inputPixel,a=n.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],s[0]=r[0]*e.resolution,s[1]=r[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=e.sourceFrame.width*r[2]-.5*s[2],a[3]=e.sourceFrame.height*r[3]-.5*s[3],e.legacy){var o=n.filterArea;o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=e.sourceFrame.x,o[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,h.renderTexture,Tt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,e.resolution);c.filterFrame=l.filterFrame;var u=0;for(u=0;u<i.length-1;++u){i[u].apply(this,l,c,Tt.CLEAR,e);var d=l;l=c,c=d}i[u].apply(this,l,h.renderTexture,Tt.BLEND,e),this.returnFilterTexture(l),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){void 0===e&&(e=Tt.CLEAR);var i=this.renderer,n=i.renderTexture,r=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,n.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&r.stateId||this.forceClear;(e===Tt.CLEAR||e===Tt.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer;r.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(mt.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(mt.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,s=e._texture.orig,a=t.set(r.width,0,0,r.height,n.x,n.y),o=e.worldTransform.copyTo(De.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/s.width,1/s.height),a.translate(e.anchor.x,e.anchor.y),a},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,e){var i=Qi[0],n=Qi[1],r=Qi[2],s=Qi[3];i.set(e.left,e.top),n.set(e.left,e.bottom),r.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(r,r),t.apply(s,s);var a=Math.min(i.x,n.x,r.x,s.x),o=Math.min(i.y,n.y,r.y,s.y),h=Math.max(i.x,n.x,r.x,s.x),l=Math.max(i.y,n.y,r.y,s.y);e.x=a,e.y=o,e.width=h-a,e.height=l-o},e.prototype.roundFrame=function(t,e,i,n,r){if(r){var s=r.a,a=r.b,o=r.c,h=r.d;if(!(0===a&&0===o||0===s&&0===h))return}(r=r?tn.copyFrom(r):tn.identity()).translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(r,t),t.ceil(e),this.transformAABB(r.invert(),t)},e}(Ii),nn=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),rn=function(t){function e(e){var i=t.call(this,e)||this;return i.emptyRenderer=new nn(e),i.currentRenderer=i.emptyRenderer,i}return fi(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,s=t.ids,a=t.count,o=0,h=0;h<a;h++){var l=r[h],c=l._batchLocation;if(c>=0&&c<n&&e[c]===l)s[h]=c;else for(;o<n;){var u=e[o];if(!u||u._batchEnabled!==i||u._batchLocation!==o){s[h]=o,l._batchLocation=o,e[o]=l;break}o++}}},e}(Ii),sn=0,an=function(t){function e(e){var i=t.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return fi(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=sn++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=sn++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(It.PREFER_ENV>=ut.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(Ii),on=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Ct.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},hn=new Ae,ln=function(t){function e(e){var i=t.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new Pi(10,10),i.msaaSamples=null,i}return fi(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;It.PREFER_ENV===ut.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++){var s=t.colorTextures[r];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,n){var r=this.viewport;r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,i,n,r){void 0===r&&(r=pt.COLOR|pt.DEPTH);var s=this.gl;s.clearColor(t,e,i,n),s.clear(r)},e.prototype.initFramebuffer=function(t){var e=this.gl,i=new on(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,r=0;r<n.length;r++)this.renderer.texture.bind(n[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1)),i.multisample>1&&(i.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,i.msaaBuffer));for(var r=[],s=0;s<n;s++)if(!(0===s&&i.multisample>1)){var a=t.colorTextures[s],o=a.parentTextureArray||a;this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,a.target,o._glTextures[this.CONTEXT_UID].texture,0),r.push(e.COLOR_ATTACHMENT0+s)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,i=Ct.NONE;if(t<=1||null===e)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return 1===i&&(i=Ct.NONE),i},e.prototype.blit=function(t,e,i){var n=this.current,r=this.renderer,s=this.gl,a=this.CONTEXT_UID;if(2===r.context.webGLVersion&&n){var o=n.glFramebuffers[a];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new Pi(n.width,n.height),o.blitFramebuffer.addColorTexture(0,n.colorTextures[0])),(t=o.blitFramebuffer).width=n.width,t.height=n.height}e||((e=hn).width=n.width,e.height=n.height),i||(i=e);var h=e.width===i.width&&e.height===i.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,n=t.height,r=this.gl,s=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,n),e.stencil=s,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ae},e}(Ii),cn=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},un={5126:4,5123:2,5121:1},dn=function(t){function e(e){var i=t.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return fi(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;It.PREFER_ENV===ut.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,s){return n.drawElementsInstancedANGLE(t,e,i,r,s)},t.drawArraysInstanced=function(t,e,i,r){return n.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);var s=n[e.program.id]||this.initGeometryVao(t,e.program,r);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n=t.buffers[i],r=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==r.updateID){r.updateID=n._updateID;var s=n.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(s,r.buffer),this._boundBuffer=r,r.byteLength>=n.data.byteLength)e.bufferSubData(s,0,n.data);else{var a=n.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=n.data.byteLength,e.bufferData(s,n.data,a)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var r in n)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,r=["g",t.id];for(var s in i)n[s]&&r.push(s);return r.join("-")},e.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var n=this.gl,r=this.CONTEXT_UID,s=this.getSignature(t,e),a=t.glVertexArrayObjects[this.CONTEXT_UID],o=a[s];if(o)return a[e.id]=o,o;var h=t.buffers,l=t.attributes,c={},u={};for(var d in h)c[d]=0,u[d]=0;for(var d in l)!l[d].size&&e.attributeData[d]?l[d].size=e.attributeData[d].size:l[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[d].buffer]+=l[d].size*un[l[d].type];for(var d in l){var p=l[d],f=p.size;void 0===p.stride&&(c[p.buffer]===f*un[p.type]?p.stride=0:p.stride=c[p.buffer]),void 0===p.start&&(p.start=u[p.buffer],u[p.buffer]+=f*un[p.type])}o=n.createVertexArray(),n.bindVertexArray(o);for(var m=0;m<h.length;m++){var _=h[m];_._glBuffers[r]||(_._glBuffers[r]=new cn(n.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this)),i&&_._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=o,a[e.id]=o,a[s]=o,o},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var s=0;s<r.length;s++){var a=r[s]._glBuffers[this.CONTEXT_UID];a.refCount--,0!==a.refCount||e||this.disposeBuffer(r[s],e)}if(!e)for(var o in i)if("g"===o[0]){var h=i[o];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=t.buffers,s=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var a=null;for(var o in s){var h=s[o],l=r[h.buffer]._glBuffers[n];if(e.attributeData[o]){a!==l&&(i.bindBuffer(i.ARRAY_BUFFER,l.buffer),a=l);var c=e.attributeData[o].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(c,1)}}}},e.prototype.draw=function(t,e,i,n){var r=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,o=2===a?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?s.instanced?r.drawElementsInstanced(t,e||s.indexBuffer.data.length,o,(i||0)*a,n||1):r.drawElements(t,e||s.indexBuffer.data.length,o,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?r.drawArraysInstanced(t,i,e||s.getSize(),n||1):r.drawArrays(t,i,e||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(Ii),pn=function(){function t(t){void 0===t&&(t=null),this.type=Rt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Rt.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function fn(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function mn(t,e,i,n){var r=fn(t,t.VERTEX_SHADER,e),s=fn(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,s),n)for(var o in n)t.bindAttribLocation(a,n[o],o);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(r),t.deleteShader(s),a}function _n(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function gn(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return _n(2*e);case"bvec3":return _n(3*e);case"bvec4":return _n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var yn,xn={},vn=xn;function bn(){if(vn===xn||vn&&vn.isContextLost()){var t=document.createElement("canvas"),e=void 0;It.PREFER_ENV>=ut.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),vn=e}return vn}function En(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===At.HIGH&&i!==At.HIGH&&(n=At.MEDIUM),"precision "+n+" float;\n"+t}return i!==At.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Sn={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Tn(t){return Sn[t]}var wn=null,An={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Rn(t,e){if(!wn){var i=Object.keys(An);wn={};for(var n=0;n<i.length;++n){var r=i[n];wn[t[r]]=An[r]}}return wn[e]}var Cn=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],In={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Mn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Pn,On=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Dn(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Fn(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=On.replace(/%forloop%/gi,Dn(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var kn=0,Nn={},Ln=function(){function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=kn++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Nn[n]?(Nn[n]++,n+="-"+Nn[n]):Nn[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=En(this.vertexSrc,It.PRECISION_VERTEX,At.HIGH),this.fragmentSrc=En(this.fragmentSrc,It.PRECISION_FRAGMENT,function(){if(!yn){yn=At.MEDIUM;var t=bn();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);yn=e.precision?At.HIGH:At.MEDIUM}}return yn}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var i=bn();if(i){var n=mn(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var i={},n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var a=e.getActiveAttrib(t,s),o=Rn(e,a.type),h={type:o,name:a.name,size:Tn(o),location:0};i[a.name]=h,n.push(h)}n.sort((function(t,e){return t.name>e.name?1:-1}));for(s=0;s<n.length;s++)n[s].location=s;return i},t.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var s=e.getActiveUniform(t,r),a=s.name.replace(/\[.*?\]$/,""),o=s.name.match(/\[.*?\]$/),h=Rn(e,s.type);i[a]={type:h,size:s.size,isArray:o,value:gn(h,s.size)}}return i},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,n){var r=e+i,s=ce[r];return s||(ce[r]=s=new t(e,i,n)),s},t}(),Bn=function(){function t(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof Ji?e:new Ji(e):new Ji({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,n){return new t(Ln.from(e,i),n)},t}(),Xn=function(){function t(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ft.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Un=function(t){function e(i,n,r){var s=this,a=Ln.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(s=t.call(this,a,r)||this).padding=0,s.resolution=It.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new Xn,s}return fi(e,t),e.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Bn),Yn=new De,Vn=function(){function t(t,e){this._texture=t,this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(Yn.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Yn));var s=e.baseTexture,a=this.uClampFrame,o=this.clampMargin/s.resolution,h=this.clampOffset;return a[0]=(e._frame.x+o+h)/s.width,a[1]=(e._frame.y+o+h)/s.height,a[2]=(e._frame.x+e._frame.width-o+h)/s.width,a[3]=(e._frame.y+e._frame.height-o+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),Gn=function(t){function e(e){var i=this,n=new De;return i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return fi(e,t),e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=r._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Vn(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))},e}(Un),jn=function(t){function e(e){var i=t.call(this,e)||this;return i.enableScissor=!0,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return fi(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new pn;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Rt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Rt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Rt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Rt.SCISSOR:this.renderer.scissor.pop();break;case Rt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Rt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=Rt.SPRITE;else if(t.type=Rt.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),r=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0===(n=(n%9e3+9e3)%9e3)&&9e3===r&&(t.type=Rt.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Gn(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var r=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(Ii),Wn=function(t){function e(e){var i=t.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return fi(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(Ii),Hn=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return fi(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?n.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,r=i.sourceFrame,s=i.destinationFrame,a=e?e.resolution:this.renderer.resolution,o=s.width/r.width,h=s.height/r.height,l=((t.x-r.x)*o+s.x)*a,c=((t.y-r.y)*h+s.y)*a,u=t.width*o*a,d=t.height*h*a;n&&(l+=n.tx*a,c+=n.ty*a),e||(c=this.renderer.height-d-c),this.renderer.gl.scissor(l,c,u,d)},e}(Wn),zn=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return fi(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Wn),qn=function(t){function e(e){var i=t.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new De,i.transform=null,i}return fi(e,t),e.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix,s=n?-1:1;r.identity(),r.a=1/e.width*2,r.d=s*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-s-e.y*r.d},e.prototype.setTransform=function(t){},e}(Ii),Zn=new Ae,Kn=new Ae,Jn=function(t){function e(e){var i=t.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Ae,i.destinationFrame=new Ae,i.viewportFrame=new Ae,i}return fi(e,t),e.prototype.bind=function(t,e,i){void 0===t&&(t=null);var n,r,s,a=this.renderer;this.current=t,t?(s=(n=t.baseTexture).resolution,e||(Zn.width=t.frame.width,Zn.height=t.frame.height,e=Zn),i||(Kn.x=t.frame.x,Kn.y=t.frame.y,Kn.width=e.width,Kn.height=e.height,i=Kn),r=n.framebuffer):(s=a.resolution,e||(Zn.width=a.screen.width,Zn.height=a.screen.height,e=Zn),i||((i=Zn).width=e.width,i.height=e.height));var o=this.viewportFrame;o.x=i.x*s,o.y=i.y*s,o.width=i.width*s,o.height=i.height*s,t||(o.y=a.view.height-(o.y+o.height)),this.renderer.framebuffer.bind(r,o),this.renderer.projection.update(i,e,s,!r),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,r=i.width!==n.width||i.height!==n.height;if(r){var s=this.viewportFrame,a=s.x,o=s.y,h=s.width,l=s.height;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,o,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),r&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Ii),$n=function(){},Qn=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),tr=0,er={textureCount:0},ir=function(t){function e(e){var i=t.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=tr++,i}return fi(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Pn)return Pn;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Pn=!0===t({a:"b"},"a","b")}catch(t){Pn=!1}return Pn}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(er.textureCount=0,this.syncUniformGroup(t.uniformGroup,er)),n},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var n in t.uniforms){var r=e[n];if(r){for(var s=t.uniforms[n],a=!1,o=0;o<Cn.length;o++)if(Cn[o].test(r,s)){i.push(Cn[o].code(n,s)),a=!0;break}if(!a){var h=(1===r.size?In:Mn)[r.type].replace("location",'ud["'+n+'"].location');i.push('\n            cv = ud["'+n+'"].value;\n            v = uv["'+n+'"];\n            '+h+";")}}else t.uniforms[n].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+n+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,n=[];for(var r in i)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,n={};for(var r in i.attributeData)n[r]=i.attributeData[r].location;var s=mn(e,i.vertexSrc,i.fragmentSrc,n),a={};for(var r in i.uniformData){var o=i.uniformData[r];a[r]={location:e.getUniformLocation(s,r),value:gn(o.type,o.size)}}var h=new Qn(s,a);return i.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Ii);var nr=function(t){function e(e){var i=t.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=ft.NONE,i._blendEq=!1,i.map=[],i.map[0]=i.setBlend,i.map[1]=i.setOffset,i.map[2]=i.setCullFace,i.map[3]=i.setDepthTest,i.map[4]=i.setFrontFace,i.map[5]=i.setDepthMask,i.checks=[],i.defaultState=new Xn,i.defaultState.blend=!0,i}return fi(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[ft.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.ADD]=[t.ONE,t.ONE],e[ft.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.NONE]=[0,0],e[ft.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ft.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ft.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ft.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ft.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ft.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ft.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ft.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ft.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ft.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ft.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(Ii),rr=function(t){function e(e){var i=t.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=It.GC_MAX_IDLE,i.checkCountMax=It.GC_MAX_CHECK_COUNT,i.mode=It.GC_MODE,i}return fi(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==wt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){var s=0;for(n=0;n<e.length;n++)null!==e[n]&&(e[s++]=e[n]);e.length=s}},e.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e}(Ii),sr=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},ar=function(t){function e(e){var i=t.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new yi,i.hasIntegerTextures=!1,i}return fi(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new sr(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new sr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)},e.prototype.ensureSamplerType=function(t){var e=this.boundTextures,i=this.hasIntegerTextures,n=this.CONTEXT_UID;if(i)for(var r=t-1;r>=0;--r){var s=e[r];if(s)s._glTextures[n].samplerType!==xt.FLOAT&&this.renderer.texture.unbind(s)}},e.prototype.initTexture=function(t){var e=new sr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===yt.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==xt.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,r=t.realHeight,s=i.gl;(e.width!==n||e.height!==r||e.dirtyId<0)&&(e.width=n,e.height=r,s.texImage2D(t.target,0,e.internalFormat,n,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&re(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==Et.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=bt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Et.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===vt.LINEAR){var r=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR:i.NEAREST)},e}(Ii),or={__proto__:null,FilterSystem:en,BatchSystem:rn,ContextSystem:an,FramebufferSystem:ln,GeometrySystem:dn,MaskSystem:jn,ScissorSystem:Hn,StencilSystem:zn,ProjectionSystem:qn,RenderTextureSystem:Jn,ShaderSystem:ir,StateSystem:nr,TextureGCSystem:rr,TextureSystem:ar},hr=new De,lr=function(t){function e(e,i){void 0===e&&(e=dt.UNKNOWN);var n=t.call(this)||this;return i=Object.assign({},It.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new Ae(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||It.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&(le("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return fi(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var r=Li.create({width:0|n.width,height:0|n.height,scaleMode:e,resolution:i});return hr.tx=-n.x,hr.ty=-n.y,this.render(t,{renderTexture:r,clear:!1,transform:hr,skipUpdateTransform:!!t.parent}),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=dt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Gt(t),Vt(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(Pt.a),cr=function(t){function e(i){var n=t.call(this,dt.WEBGL,i)||this;return i=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new ci("destroy"),contextChange:new ci("contextChange"),reset:new ci("reset"),update:new ci("update"),postrender:new ci("postrender"),prerender:new ci("prerender"),resize:new ci("resize")},n.globalUniforms=new Ji({projectionMatrix:new De},!0),n.addSystem(jn,"mask").addSystem(an,"context").addSystem(nr,"state").addSystem(ir,"shader").addSystem(ar,"texture").addSystem(dn,"geometry").addSystem(ln,"framebuffer").addSystem(Hn,"scissor").addSystem(zn,"stencil").addSystem(qn,"projection").addSystem(rr,"textureGC").addSystem(en,"filter").addSystem(Jn,"renderTexture").addSystem(rn,"batch"),n.initPlugins(e.__plugins),i.context?n.context.initFromContext(i.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:i.antialias,premultipliedAlpha:n.useContextAlpha&&"notMultiplied"!==n.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,Xt(2===n.context.webGLVersion?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return fi(e,t),e.create=function(t){if(Ut())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e){var i,n,r,s;if(e&&(e instanceof Li?(le("6.0.0","Renderer#render arguments changed, use options instead."),i=e,n=arguments[2],r=arguments[3],s=arguments[4]):(i=e.renderTexture,n=e.clear,r=e.transform,s=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(i||(this._lastObjectRendered=t),!s){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return le("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(lr);function ur(t){return cr.create(t)}var dr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",pr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",fr=function(){this.texArray=null,this.blend=0,this.type=mt.TRIANGLES,this.start=0,this.size=0,this.data=null},mr=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),_r=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),gr=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Xn.for2d(),i.size=4*It.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return fi(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;It.PREFER_ENV===ut.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),It.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Fn(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,r=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new fr);for(;i.length<r;)i.push(new mr);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,a=this.renderer.textureGC.count,o=++yi._globalBatch,h=0,l=n[0],c=0;r.copyBoundTextures(s,i);for(var u=0;u<this._bufferSize;++u){var d=t[u];t[u]=null,d._batchEnabled!==o&&(l.count>=i&&(r.boundArray(l,s,o,i),this.buildDrawCalls(l,c,u),c=u,l=n[++h],++o),d._batchEnabled=o,d.touched=a,l.elements[l.count++]=d)}l.count>0&&(r.boundArray(l,s,o,i),this.buildDrawCalls(l,c,this._bufferSize),++h,++o);for(u=0;u<s.length;u++)s[u]=null;yi._globalBatch=o},e.prototype.buildDrawCalls=function(t,i,n){var r=this._bufferedElements,s=this._attributeBuffer,a=this._indexBuffer,o=this.vertexSize,h=e._drawCallPool,l=this._dcIndex,c=this._aIndex,u=this._iIndex,d=h[l];d.start=this._iIndex,d.texArray=t;for(var p=i;p<n;++p){var f=r[p],m=f._texture.baseTexture,_=Ht[m.alphaMode?1:0][f.blendMode];r[p]=null,i<p&&d.blend!==_&&(d.size=u-d.start,i=p,(d=h[++l]).texArray=t,d.start=u),this.packInterleavedGeometry(f,s,a,c,u),c+=f.vertexData.length/2*o,u+=f.indices.length,d.blend=_}i<n&&(d.size=u-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=u},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;It.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,r=i.state,s=e._drawCallPool,a=null,o=0;o<t;o++){var h=s[o],l=h.texArray,c=h.type,u=h.size,d=h.start,p=h.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,r.set(this.state),n.drawElements(c,u,n.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),It.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=ee(Math.ceil(t/8)),i=ne(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._aBuffers[n];return r||(this._aBuffers[n]=r=new _r(n*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=ee(Math.ceil(t/12)),i=ne(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._iBuffers[i];return r||(this._iBuffers[i]=r=new Uint16Array(n)),r},e.prototype.packInterleavedGeometry=function(t,e,i,n,r){for(var s=e.uint32View,a=e.float32View,o=n/this.vertexSize,h=t.uvs,l=t.indices,c=t.vertexData,u=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?Zt(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<c.length;f+=2)a[n++]=c[f],a[n++]=c[f+1],a[n++]=h[f],a[n++]=h[f+1],s[n++]=p,a[n++]=u;for(f=0;f<l.length;f++)i[r++]=o+l[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(nn),yr=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Ji.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ln(this.vertexSrc,n)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new De,default:this.defaultGroupCache[t]};return new Bn(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),xr=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new Yi(null,e,!1),i._indexBuffer=new Yi(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,yt.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,yt.FLOAT).addAttribute("aColor",i._buffer,4,!0,yt.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,yt.FLOAT).addIndex(i._indexBuffer),i}return fi(e,t),e}(zi),vr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",br="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Er=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:vr,fragment:br,geometryClass:xr,vertexSize:6},t),i=e.vertex,n=e.fragment,r=e.vertexSize,s=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new yr(i,n),a.geometryClass=s,a.vertexSize=r,a}return fi(e,t),e}(gr)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return vr},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return br},enumerable:!1,configurable:!0}),t}(),Sr=Er.create(),Tr={},wr=function(t){Object.defineProperty(Tr,t,{get:function(){return le("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Ci[t]}})};for(var Ar in Ci)wr(Ar);var Rr={},Cr=function(t){Object.defineProperty(Rr,t,{get:function(){return le("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),or[t]}})};for(var Ar in or)Cr(Ar);
/*!
 * @pixi/app - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ir=function(){function t(e){var i=this;this.stage=new Ze,e=Object.assign({forceCanvas:!1},e),this.renderer=ur(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var n=this,r=t._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(n)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),Mr=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,i=self.innerHeight;else{var n=e._resizeTo;t=n.clientWidth,i=n.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();Ir.registerPlugin(Mr);
/*!
 * @pixi/extract - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Pr=new Ae,Or=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,n,r,s=this.renderer,a=!1,o=!1;e&&(e instanceof Li?r=e:(r=this.renderer.generateTexture(e),o=!0)),r?(i=r.baseTexture.resolution,n=r.frame,a=!1,s.renderTexture.bind(r)):(i=this.renderer.resolution,a=!0,(n=Pr).width=this.renderer.width,n.height=this.renderer.height,s.renderTexture.bind(null));var h=Math.floor(n.width*i+1e-4),l=Math.floor(n.height*i+1e-4),c=new me(h,l,1),u=new Uint8Array(4*h*l),d=s.gl;d.readPixels(n.x*i,n.y*i,h,l,d.RGBA,d.UNSIGNED_BYTE,u);var p=c.context.getImageData(0,0,h,l);if(t.arrayPostDivide(u,p.data),c.context.putImageData(p,0,0),a){var f=new me(c.width,c.height,1);f.context.scale(1,-1),f.context.drawImage(c.canvas,0,-l),c.destroy(),c=f}return o&&r.destroy(!0),c.canvas},t.prototype.pixels=function(e){var i,n,r,s=this.renderer,a=!1;e&&(e instanceof Li?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(i=r.baseTexture.resolution,n=r.frame,s.renderTexture.bind(r)):(i=s.resolution,(n=Pr).width=s.width,n.height=s.height,s.renderTexture.bind(null));var o=n.width*i,h=n.height*i,l=new Uint8Array(4*o*h),c=s.gl;return c.readPixels(n.x*i,n.y*i,o,h,c.RGBA,c.UNSIGNED_BYTE,l),a&&r.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}(),Dr=i(15),Fr=i.n(Dr),kr=i(2),Nr=i.n(kr);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function Lr(){}function Br(t,e,i,n){var r=0,s=t.length;!function a(o){o||r===s?i&&i(o):n?setTimeout((function(){e(t[r++],a)}),1):e(t[r++],a)}()}function Xr(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function Ur(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:Lr,unsaturated:Lr,buffer:e/4,empty:Lr,drain:Lr,error:Lr,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=Lr,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,Xr(s(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:Lr};e?n._tasks.unshift(r):n._tasks.push(r),setTimeout((function(){return n.process()}),1)}}function s(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var Yr={};function Vr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gr(t,e,i){return e&&Vr(t.prototype,e),i&&Vr(t,i),t}var jr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Wr=null;function Hr(){}var zr=function(){function t(e,i,n){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Hr,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Nr.a,this.onProgress=new Nr.a,this.onComplete=new Nr.a,this.onAfterMiddleware=new Nr.a}t.setExtensionLoadType=function(e,i){qr(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){qr(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:jr&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Zr(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(Zr(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(Zr(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,Wr||(Wr=document.createElement("a")),Wr.href=t;var i=!(t=Fr()(Wr.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Gr(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function qr(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function Zr(t){return t.toString().replace("object ","")}zr.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},zr.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},zr.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},zr.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},zr._loadTypeMap={gif:zr.LOAD_TYPE.IMAGE,png:zr.LOAD_TYPE.IMAGE,bmp:zr.LOAD_TYPE.IMAGE,jpg:zr.LOAD_TYPE.IMAGE,jpeg:zr.LOAD_TYPE.IMAGE,tif:zr.LOAD_TYPE.IMAGE,tiff:zr.LOAD_TYPE.IMAGE,webp:zr.LOAD_TYPE.IMAGE,tga:zr.LOAD_TYPE.IMAGE,svg:zr.LOAD_TYPE.IMAGE,"svg+xml":zr.LOAD_TYPE.IMAGE,mp3:zr.LOAD_TYPE.AUDIO,ogg:zr.LOAD_TYPE.AUDIO,wav:zr.LOAD_TYPE.AUDIO,mp4:zr.LOAD_TYPE.VIDEO,webm:zr.LOAD_TYPE.VIDEO},zr._xhrTypeMap={xhtml:zr.XHR_RESPONSE_TYPE.DOCUMENT,html:zr.XHR_RESPONSE_TYPE.DOCUMENT,htm:zr.XHR_RESPONSE_TYPE.DOCUMENT,xml:zr.XHR_RESPONSE_TYPE.DOCUMENT,tmx:zr.XHR_RESPONSE_TYPE.DOCUMENT,svg:zr.XHR_RESPONSE_TYPE.DOCUMENT,tsx:zr.XHR_RESPONSE_TYPE.DOCUMENT,gif:zr.XHR_RESPONSE_TYPE.BLOB,png:zr.XHR_RESPONSE_TYPE.BLOB,bmp:zr.XHR_RESPONSE_TYPE.BLOB,jpg:zr.XHR_RESPONSE_TYPE.BLOB,jpeg:zr.XHR_RESPONSE_TYPE.BLOB,tif:zr.XHR_RESPONSE_TYPE.BLOB,tiff:zr.XHR_RESPONSE_TYPE.BLOB,webp:zr.XHR_RESPONSE_TYPE.BLOB,tga:zr.XHR_RESPONSE_TYPE.BLOB,json:zr.XHR_RESPONSE_TYPE.JSON,text:zr.XHR_RESPONSE_TYPE.TEXT,txt:zr.XHR_RESPONSE_TYPE.TEXT,ttf:zr.XHR_RESPONSE_TYPE.BUFFER,otf:zr.XHR_RESPONSE_TYPE.BUFFER},zr.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Kr=window.URL||window.webkitURL;var Jr={caching:function(t,e){var i=this;Yr[t.url]?(t.data=Yr[t.url],t.complete()):t.onComplete.once((function(){return Yr[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===zr.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=Kr.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=zr.TYPE.IMAGE,void(t.data.onload=function(){Kr.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var a=0;a<r.length;++a)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[a])}return e}(t.xhr.responseText),t.type=zr.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},$r=/(#[\w-]+)?$/,Qr=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=Ur(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Nr.a,this.onError=new Nr.a,this.onLoad=new Nr.a,this.onStart=new Nr.a,this.onComplete=new Nr.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new zr(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var h=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var l=0;l<a.length;++l)a[l].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=Fr()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=$r.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,Br(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Br(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},Gr(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();Qr._defaultBeforeMiddleware=[],Qr._defaultAfterMiddleware=[],Qr.pre=function(t){return Qr._defaultBeforeMiddleware.push(t),Qr},Qr.use=function(t){return Qr._defaultAfterMiddleware.push(t),Qr};
/*!
 * @pixi/loaders - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ts=function(t,e){return(ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var es=function(){function t(){}return t.add=function(){zr.setExtensionLoadType("svg",zr.LOAD_TYPE.XHR),zr.setExtensionXhrType("svg",zr.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==zr.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,n=t.url,r=t.name,s=t.metadata;ki.fromLoader(i,n,r,s).then((function(i){t.texture=i,e()})).catch(e)}},t}(),is=function(t){function e(i,n){for(var r=t.call(this,i,n)||this,s=0;s<e._plugins.length;++s){var a=e._plugins[s],o=a.pre,h=a.use;o&&r.pre(o),h&&r.use(h)}return r._protected=!1,r}return function(t,e){function i(){this.constructor=t}ts(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(Qr);is.registerPlugin({use:Jr.parsing}),is.registerPlugin(es);var ns,rs,ss=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?is.shared:new is},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),as=zr;!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(rs||(rs={}));var os=((ns={})[rs.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ns[rs.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ns[rs.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ns[rs.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ns[rs.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ns[rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ns[rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ns[rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ns[rs.COMPRESSED_R11_EAC]=.5,ns[rs.COMPRESSED_SIGNED_R11_EAC]=.5,ns[rs.COMPRESSED_RG11_EAC]=1,ns[rs.COMPRESSED_SIGNED_RG11_EAC]=1,ns[rs.COMPRESSED_RGB8_ETC2]=.5,ns[rs.COMPRESSED_RGBA8_ETC2_EAC]=1,ns[rs.COMPRESSED_SRGB8_ETC2]=.5,ns[rs.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ns[rs.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ns[rs.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ns[rs.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ns[rs.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ns[rs.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ns[rs.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ns[rs.COMPRESSED_RGB_ETC1_WEBGL]=.5,ns[rs.COMPRESSED_RGB_ATC_WEBGL]=.5,ns[rs.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ns[rs.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ns),hs=function(t,e){return(hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ls(t,e){function i(){this.constructor=t}hs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function cs(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}var us,ds,ps=function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var n,r,s=this;return"string"==typeof e?(n=e,r=new Uint8Array):(n=null,r=e),(s=t.call(this,r,i)||this).origin=n,s.buffer=r?new _r(r):null,s.origin&&!1!==i.autoLoad&&s.load(),r&&r.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return ls(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,n=function(){var t;return cs(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new _r(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((i=Promise)||(i=Promise))((function(r,s){function a(t){try{h(n.next(t))}catch(t){s(t)}}function o(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new i((function(e){e(t.value)})).then(a,o)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n},e}(_i),fs=function(t){function e(i,n){var r=t.call(this,i,n)||this;return r.format=n.format,r.levels=n.levels||1,r._width=n.width,r._height=n.height,r._extension=e._formatToExtension(r.format),(n.levelBuffers||r.buffer)&&(r._levelBuffers=n.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}return ls(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var r=0,s=this.levels;r<s;r++){var a=this._levelBuffers[r],o=a.levelID,h=a.levelWidth,l=a.levelHeight,c=a.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,o,this.format,h,l,0,c)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,n,r,s,a){for(var o=new Array(i),h=t.byteOffset,l=s,c=a,u=l+n-1&~(n-1),d=c+r-1&~(r-1),p=u*d*os[e],f=0;f<i;f++)o[f]={levelID:f,levelWidth:i>1?l:u,levelHeight:i>1?c:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(u=(l=l>>1||1)+n-1&~(n-1))*(d=(c=c>>1||1)+r-1&~(r-1))*os[e];return o},e}(ps),ms=function(){function t(){}return t.use=function(e,i){var n=e.data;if(e.type===as.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var r=n.textures,s=void 0,a=void 0,o=0,h=r.length;o<h;o++){var l=r[o],c=l.src,u=l.format;if(u||(a=c),t.textureFormats[u]){s=c;break}}if(!(s=s||a))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=kt.resolve(e.url.replace(this.baseUrl,""),s),f=n.cacheID;this.add(f,p,d,(function(t){if(t.error)i(t.error);else{var n=t.texture,r=void 0===n?null:n,s=t.textures,a=void 0===s?{}:s;Object.assign(e,{texture:r,textures:a}),i()}}))}else i()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var n in t.textureExtensions=i,t.textureFormats={},i){var r=i[n];r&&Object.assign(t.textureFormats,Object.getPrototypeOf(r))}}else console.error("WebGL not available for compressed textures. Silently failing.")},t}();function _s(t,e,i){var n={textures:{},texture:null};return e?(e.map((function(t){return new ki(new yi(t,Object.assign({mipmap:Et.OFF,alphaMode:St.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var r=e.baseTexture,s=t+"-"+(i+1);yi.addToCache(r,s),ki.addToCache(e,s),0===i&&(yi.addToCache(r,t),ki.addToCache(e,t),n.texture=e),n.textures[s]=e})),n):n}as.setExtensionXhrType("dds",as.XHR_RESPONSE_TYPE.BUFFER);var gs,ys,xs=3,vs=4,bs=7,Es=19,Ss=2,Ts=0,ws=1,As=2,Rs=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(gs||(gs={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(ys||(ys={}));var Cs,Is,Ms,Ps=((us={})[827611204]=rs.COMPRESSED_RGBA_S3TC_DXT1_EXT,us[861165636]=rs.COMPRESSED_RGBA_S3TC_DXT3_EXT,us[894720068]=rs.COMPRESSED_RGBA_S3TC_DXT5_EXT,us),Os=((ds={})[gs.DXGI_FORMAT_BC1_TYPELESS]=rs.COMPRESSED_RGBA_S3TC_DXT1_EXT,ds[gs.DXGI_FORMAT_BC1_UNORM]=rs.COMPRESSED_RGBA_S3TC_DXT1_EXT,ds[gs.DXGI_FORMAT_BC2_TYPELESS]=rs.COMPRESSED_RGBA_S3TC_DXT3_EXT,ds[gs.DXGI_FORMAT_BC2_UNORM]=rs.COMPRESSED_RGBA_S3TC_DXT3_EXT,ds[gs.DXGI_FORMAT_BC3_TYPELESS]=rs.COMPRESSED_RGBA_S3TC_DXT5_EXT,ds[gs.DXGI_FORMAT_BC3_UNORM]=rs.COMPRESSED_RGBA_S3TC_DXT5_EXT,ds[gs.DXGI_FORMAT_BC1_UNORM_SRGB]=rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,ds[gs.DXGI_FORMAT_BC2_UNORM_SRGB]=rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,ds[gs.DXGI_FORMAT_BC3_UNORM_SRGB]=rs.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,ds),Ds=function(){function t(){}return t.use=function(e,i){if("dds"===e.extension&&e.data)try{Object.assign(e,_s(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),n=i[xs],r=i[vs],s=i[bs],a=new Uint32Array(t,Es*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),o=a[1];if(4&o){var h=a[Ss];if(808540228!==h){var l=Ps[h],c=new Uint8Array(t,128);return[new fs(c,{format:l,width:r,height:n,levels:s})]}var u=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=u[Ts],p=u[ws],f=u[As],m=u[Rs],_=Os[d];if(void 0===_)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===f)throw new Error("DDSLoader does not support cubemap textures");if(p===ys.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var g=new Array;if(1===m)g.push(new Uint8Array(t,148));else{for(var y=os[_],x=0,v=r,b=n,E=0;E<s;E++){x+=Math.max(1,v+3&-4)*Math.max(1,b+3&-4)*y,v>>>=1,b>>>=1}var S=148;for(E=0;E<m;E++)g.push(new Uint8Array(t,S,x)),S+=x}return g.map((function(t){return new fs(t,{format:_,width:r,height:n,levels:s})}))}if(64&o)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&o)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&o)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&o)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();as.setExtensionXhrType("ktx",as.XHR_RESPONSE_TYPE.BUFFER);var Fs=[171,75,84,88,32,49,49,187,13,10,26,10],ks=12,Ns=16,Ls=24,Bs=28,Xs=36,Us=40,Ys=44,Vs=48,Gs=52,js=56,Ws=60,Hs=((Cs={})[yt.UNSIGNED_BYTE]=1,Cs[yt.UNSIGNED_SHORT]=2,Cs[yt.FLOAT]=4,Cs[yt.HALF_FLOAT]=8,Cs),zs=((Is={})[_t.RGBA]=4,Is[_t.RGB]=3,Is[_t.LUMINANCE]=1,Is[_t.LUMINANCE_ALPHA]=2,Is[_t.ALPHA]=1,Is),qs=((Ms={})[yt.UNSIGNED_SHORT_4_4_4_4]=2,Ms[yt.UNSIGNED_SHORT_5_5_5_1]=2,Ms[yt.UNSIGNED_SHORT_5_6_5]=2,Ms),Zs=function(){function t(){}return t.use=function(e,i){if("ktx"===e.extension&&e.data)try{var n=e.name||e.url;Object.assign(e,_s(n,t.parse(n,e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(e,i){var n=new DataView(i);if(!t.validate(e,n))return null;var r=67305985===n.getUint32(ks,!0),s=n.getUint32(Ns,r),a=n.getUint32(Ls,r),o=n.getUint32(Bs,r),h=n.getUint32(Xs,r),l=n.getUint32(Us,r)||1,c=n.getUint32(Ys,r)||1,u=n.getUint32(Vs,r)||1,d=n.getUint32(Gs,r),p=n.getUint32(js,r),f=n.getUint32(Ws,r);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==u)throw new Error("WebGL does not support array textures");var m,_=h+3&-4,g=l+3&-4,y=new Array(u),x=h*l;if(0===s&&(x=_*g),void 0===(m=0!==s?Hs[s]?Hs[s]*zs[a]:qs[s]:os[o]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var v=x*m,b=h,E=l,S=_,T=g,w=64+f,A=0;A<p;A++){for(var R=n.getUint32(w,r),C=w+4,I=0;I<u;I++){var M=y[I];M||(M=y[I]=new Array(p)),M[A]={levelID:A,levelWidth:p>1?b:S,levelHeight:p>1?E:T,levelBuffer:new Uint8Array(i,C,v)},C+=v}w=(w+=R+4)%4!=0?w+4-w%4:w,v=(S=(b=b>>1||1)+4-1&-4)*(T=(E=E>>1||1)+4-1&-4)*m}if(0!==s)throw new Error("TODO: Uncompressed");return y.map((function(t){return new fs(null,{format:o,width:h,height:l,levels:p,levelBuffers:t})}))},t.validate=function(t,e){for(var i=0;i<Fs.length;i++)if(e.getUint8(i)!==Fs[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}(),Ks=function(t,e){return(Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Js(t,e){function i(){this.constructor=t}Ks(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var $s,Qs,ta=function(t){function e(e,i,n,r){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===r&&(r=!1);var s=t.call(this)||this;return n>16384&&(n=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ft.NORMAL,s.autoResize=r,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return Js(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Vt(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Ze),ea=function(){function t(t,e,i){this.geometry=new zi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||yt.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Yi(Jt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(a=this.dynamicProperties[i]).offset=e,e+=a.size,this.dynamicStride+=a.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Yi(this.dynamicData,!1,!1);var r=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(a=this.staticProperties[i]).offset=r,r+=a.size,this.staticStride+=a.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Yi(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var a=this.dynamicProperties[i];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===yt.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(i=0;i<this.staticProperties.length;++i){a=this.staticProperties[i];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===yt.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===yt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===yt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),ia=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new De,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:yt.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=Bn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=Xn.for2d(),i}return Js(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,s=e.length;if(0!==s){s>i&&!t.autoResize&&(s=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var o=e[0]._texture.baseTexture;this.state.blendMode=zt(t.blendMode,o.alphaMode),r.state.set(this.state);var h=r.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=qt(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,o.alphaMode),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);for(var c=!1,u=0,d=0;u<s;u+=n,d+=1){var p=s-u;p>n&&(p=n),d>=a.length&&a.push(this._generateOneMoreBuffer(t));var f=a[d];f.uploadDynamic(e,u,p);var m=t._bufferUpdateIDs[d]||0;(c=c||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,u,p)),r.geometry.bind(f.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,s=0;s<i;s+=n)e.push(new ea(this.properties,r,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new ea(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var a=0,o=0,h=0,l=0,c=0;c<i;++c){var u=t[e+c],d=u._texture,p=u.scale.x,f=u.scale.y,m=d.trim,_=d.orig;m?(a=(o=m.x-u.anchor.x*_.width)+m.width,h=(l=m.y-u.anchor.y*_.height)+m.height):(a=_.width*(1-u.anchor.x),o=_.width*-u.anchor.x,h=_.height*(1-u.anchor.y),l=_.height*-u.anchor.y),n[s]=o*p,n[s+1]=l*f,n[s+r]=a*p,n[s+r+1]=l*f,n[s+2*r]=a*p,n[s+2*r+1]=h*f,n[s+3*r]=o*p,n[s+3*r+1]=h*f,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var a=0;a<i;a++){var o=t[e+a].position;n[s]=o.x,n[s+1]=o.y,n[s+r]=o.x,n[s+r+1]=o.y,n[s+2*r]=o.x,n[s+2*r+1]=o.y,n[s+3*r]=o.x,n[s+3*r+1]=o.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var a=0;a<i;a++){var o=t[e+a].rotation;n[s]=o,n[s+r]=o,n[s+2*r]=o,n[s+3*r]=o,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var a=0;a<i;++a){var o=t[e+a]._texture._uvs;o?(n[s]=o.x0,n[s+1]=o.y0,n[s+r]=o.x1,n[s+r+1]=o.y1,n[s+2*r]=o.x2,n[s+2*r+1]=o.y2,n[s+3*r]=o.x3,n[s+3*r+1]=o.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,s){for(var a=0;a<i;++a){var o=t[e+a],h=o._texture.baseTexture.alphaMode>0,l=o.alpha,c=l<1&&h?Zt(o._tintRGB,l):o._tintRGB+(255*l<<24);n[s]=c,n[s+r]=c,n[s+2*r]=c,n[s+3*r]=c,s+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(nn);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}($s||($s={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Qs||(Qs={}));var na={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},ra=function(){function t(){this.color=16777215,this.alpha=1,this.texture=ki.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ki.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),sa=function(t,e){return(sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function aa(t,e){function i(){this.constructor=t}sa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var oa={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,r=e.points,s=e.indices;if(i.length>=6){for(var a=[],o=0;o<n.length;o++){var h=n[o];a.push(i.length/2),i=i.concat(h.points)}var l=Dt()(i,a,2);if(!l)return;var c=r.length/2;for(o=0;o<l.length;o+=3)s.push(l[o]+c),s.push(l[o+1]+c),s.push(l[o+2]+c);for(o=0;o<i.length;o++)r.push(i[o])}}},ha={build:function(t){var e,i,n=t.shape,r=t.points,s=n.x,a=n.y;if(r.length=0,t.type===Ee.CIRC)e=n.radius,i=n.radius;else{var o=t.shape;e=o.width,i=o.height}if(0!==e&&0!==i){var h=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(e+i));h/=2.3;for(var l=2*Math.PI/h,c=0;c<h-.5;c++)r.push(s+Math.sin(-l*c)*e,a+Math.cos(-l*c)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices,s=n.length/2,a=s,o=t.shape,h=t.matrix,l=o.x,c=o.y;n.push(t.matrix?h.a*l+h.c*c+h.tx:l,t.matrix?h.b*l+h.d*c+h.ty:c);for(var u=0;u<i.length;u+=2)n.push(i[u],i[u+1]),r.push(s++,a,s)}},la={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,s=e.height,a=t.points;a.length=0,a.push(i,n,i+r,n,i+r,n+s,i,n+s)},triangulate:function(t,e){var i=t.points,n=e.points,r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function ca(t,e,i){return t+(e-t)*i}function ua(t,e,i,n,r,s,a){void 0===a&&(a=[]);for(var o=a,h=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0;f<=20;++f)h=ca(t,i,m=f/20),l=ca(e,n,m),c=ca(i,r,m),u=ca(n,s,m),d=ca(h,c,m),p=ca(l,u,m),o.push(d,p);return o}var da={build:function(t){var e=t.shape,i=t.points,n=e.x,r=e.y,s=e.width,a=e.height,o=Math.max(0,Math.min(e.radius,Math.min(s,a)/2));i.length=0,o?(ua(n,r+o,n,r,n+o,r,i),ua(n+s-o,r,n+s,r,n+s,r+o,i),ua(n+s,r+a-o,n+s,r+a,n+s-o,r+a,i),ua(n+o,r+a,n,r+a,n,r+a-o,i)):i.push(n,r,n+s,r,n+s,r+a,n,r+a)},triangulate:function(t,e){for(var i=t.points,n=e.points,r=e.indices,s=n.length/2,a=Dt()(i,null,2),o=0,h=a.length;o<h;o+=3)r.push(a[o]+s),r.push(a[o+1]+s),r.push(a[o+2]+s);for(o=0,h=i.length;o<h;o++)n.push(i[o],i[++o])}};function pa(t,e,i,n,r,s,a,o){var h,l;a?(h=n,l=-i):(h=-n,l=i);var c=t-i*r+h,u=e-n*r+l,d=t+i*s+h,p=e+n*s+l;return o.push(c,u),o.push(d,p),2}function fa(t,e,i,n,r,s,a,o){var h=i-t,l=n-e,c=Math.atan2(h,l),u=Math.atan2(r-t,s-e);o&&c<u?c+=2*Math.PI:!o&&c>u&&(u+=2*Math.PI);var d=c,p=u-c,f=Math.abs(p),m=Math.sqrt(h*h+l*l),_=1+(15*f*Math.sqrt(m)/Math.PI>>0),g=p/_;if(d+=g,o){a.push(t,e),a.push(i,n);for(var y=1,x=d;y<_;y++,x+=g)a.push(t,e),a.push(t+Math.sin(x)*m,e+Math.cos(x)*m);a.push(t,e),a.push(r,s)}else{a.push(i,n),a.push(t,e);for(y=1,x=d;y<_;y++,x+=g)a.push(t+Math.sin(x)*m,e+Math.cos(x)*m),a.push(t,e);a.push(r,s),a.push(t,e)}return 2*_}function ma(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,r=t.points||n.points,s=n.type!==Ee.POLY||n.closeStroke;if(0!==r.length){var a=e.points,o=e.indices,h=r.length/2,l=a.length/2,c=l;for(a.push(r[0],r[1]),i=1;i<h;i++)a.push(r[2*i],r[2*i+1]),o.push(c,c+1),c++;s&&o.push(c,l)}}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0!==n.length){var s=t.lineStyle,a=new Pe(n[0],n[1]),o=new Pe(n[n.length-2],n[n.length-1]),h=i.type!==Ee.POLY||i.closeStroke,l=Math.abs(a.x-o.x)<r&&Math.abs(a.y-o.y)<r;if(h){n=n.slice(),l&&(n.pop(),n.pop(),o.set(n[n.length-2],n[n.length-1]));var c=.5*(a.x+o.x),u=.5*(o.y+a.y);n.unshift(c,u),n.push(c,u)}var d=e.points,p=n.length/2,f=n.length,m=d.length/2,_=s.width/2,g=_*_,y=s.miterLimit*s.miterLimit,x=n[0],v=n[1],b=n[2],E=n[3],S=0,T=0,w=-(v-E),A=x-b,R=0,C=0,I=Math.sqrt(w*w+A*A);w/=I,A/=I,w*=_,A*=_;var M=s.alignment,P=2*(1-M),O=2*M;h||(s.cap===Qs.ROUND?f+=fa(x-w*(P-O)*.5,v-A*(P-O)*.5,x-w*P,v-A*P,x+w*O,v+A*O,d,!0)+2:s.cap===Qs.SQUARE&&(f+=pa(x,v,w,A,P,O,!0,d))),d.push(x-w*P,v-A*P),d.push(x+w*O,v+A*O);for(var D=1;D<p-1;++D){x=n[2*(D-1)],v=n[2*(D-1)+1],b=n[2*D],E=n[2*D+1],S=n[2*(D+1)],T=n[2*(D+1)+1],w=-(v-E),A=x-b,w/=I=Math.sqrt(w*w+A*A),A/=I,w*=_,A*=_,R=-(E-T),C=b-S,R/=I=Math.sqrt(R*R+C*C),C/=I,R*=_,C*=_;var F=b-x,k=v-E,N=b-S,L=T-E,B=k*N-L*F,X=B<0;if(Math.abs(B)<.1)d.push(b-w*P,E-A*P),d.push(b+w*O,E+A*O);else{var U=(-w+x)*(-A+E)-(-w+b)*(-A+v),Y=(-R+S)*(-C+E)-(-R+b)*(-C+T),V=(F*Y-N*U)/B,G=(L*U-k*Y)/B,j=(V-b)*(V-b)+(G-E)*(G-E),W=b+(V-b)*P,H=E+(G-E)*P,z=b-(V-b)*O,q=E-(G-E)*O,Z=X?P:O;j<=Math.min(F*F+k*k,N*N+L*L)+Z*Z*g?s.join===$s.BEVEL||j/g>y?(X?(d.push(W,H),d.push(b+w*O,E+A*O),d.push(W,H),d.push(b+R*O,E+C*O)):(d.push(b-w*P,E-A*P),d.push(z,q),d.push(b-R*P,E-C*P),d.push(z,q)),f+=2):s.join===$s.ROUND?X?(d.push(W,H),d.push(b+w*O,E+A*O),f+=fa(b,E,b+w*O,E+A*O,b+R*O,E+C*O,d,!0)+4,d.push(W,H),d.push(b+R*O,E+C*O)):(d.push(b-w*P,E-A*P),d.push(z,q),f+=fa(b,E,b-w*P,E-A*P,b-R*P,E-C*P,d,!1)+4,d.push(b-R*P,E-C*P),d.push(z,q)):(d.push(W,H),d.push(z,q)):(d.push(b-w*P,E-A*P),d.push(b+w*O,E+A*O),s.join===$s.BEVEL||j/g>y||(s.join===$s.ROUND?f+=X?fa(b,E,b+w*O,E+A*O,b+R*O,E+C*O,d,!0)+2:fa(b,E,b-w*P,E-A*P,b-R*P,E-C*P,d,!1)+2:(X?(d.push(z,q),d.push(z,q)):(d.push(W,H),d.push(W,H)),f+=2)),d.push(b-R*P,E-C*P),d.push(b+R*O,E+C*O),f+=2)}}x=n[2*(p-2)],v=n[2*(p-2)+1],b=n[2*(p-1)],w=-(v-(E=n[2*(p-1)+1])),A=x-b,w/=I=Math.sqrt(w*w+A*A),A/=I,w*=_,A*=_,d.push(b-w*P,E-A*P),d.push(b+w*O,E+A*O),h||(s.cap===Qs.ROUND?f+=fa(b-w*(P-O)*.5,E-A*(P-O)*.5,b-w*P,E-A*P,b+w*O,E+A*O,d,!1)+2:s.cap===Qs.SQUARE&&(f+=pa(b,E,w,A,P,O,!1,d)));var K=e.indices,J=na.epsilon*na.epsilon;for(D=m;D<f+m-2;++D)x=d[2*D],v=d[2*D+1],b=d[2*(D+1)],E=d[2*(D+1)+1],S=d[2*(D+2)],T=d[2*(D+2)+1],Math.abs(x*(E-T)+b*(T-v)+S*(v-E))<J||K.push(D,D+1,D+2)}}(t,e)}var _a,ga=function(){function t(){}return t.curveTo=function(t,e,i,n,r,s){var a=s[s.length-2],o=s[s.length-1]-e,h=a-t,l=n-e,c=i-t,u=Math.abs(o*c-h*l);if(u<1e-8||0===r)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=o*o+h*h,p=l*l+c*c,f=o*l+h*c,m=r*Math.sqrt(d)/u,_=r*Math.sqrt(p)/u,g=m*f/d,y=_*f/p,x=m*c+_*h,v=m*l+_*o,b=h*(_+g),E=o*(_+g),S=c*(m+y),T=l*(m+y);return{cx:x+t,cy:v+e,radius:r,startAngle:Math.atan2(E-v,b-x),endAngle:Math.atan2(T-v,S-x),anticlockwise:h*l>c*o}},t.arc=function(t,e,i,n,r,s,a,o,h){for(var l=a-s,c=na._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/Se)),u=l/(2*c),d=2*u,p=Math.cos(u),f=Math.sin(u),m=c-1,_=m%1/m,g=0;g<=m;++g){var y=u+s+d*(g+_*g),x=Math.cos(y),v=-Math.sin(y);h.push((p*x+f*v)*r+i,(p*-v+f*x)*r+n)}},t}(),ya=function(){function t(){}return t.curveLength=function(t,e,i,n,r,s,a,o){for(var h=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,_=0,g=0,y=0,x=t,v=e,b=1;b<=10;++b)g=x-(m=(f=(p=(d=1-(l=b/10))*d)*d)*t+3*p*l*i+3*d*(c=l*l)*r+(u=c*l)*a),y=v-(_=f*e+3*p*l*n+3*d*c*s+u*o),x=m,v=_,h+=Math.sqrt(g*g+y*y);return h},t.curveTo=function(e,i,n,r,s,a,o){var h=o[o.length-2],l=o[o.length-1];o.length-=2;var c=na._segmentsCount(t.curveLength(h,l,e,i,n,r,s,a)),u=0,d=0,p=0,f=0,m=0;o.push(h,l);for(var _=1,g=0;_<=c;++_)p=(d=(u=1-(g=_/c))*u)*u,m=(f=g*g)*g,o.push(p*h+3*d*g*e+3*u*f*n+m*s,p*l+3*d*g*i+3*u*f*r+m*a)},t}(),xa=function(){function t(){}return t.curveLength=function(t,e,i,n,r,s){var a=t-2*i+r,o=e-2*n+s,h=2*i-2*t,l=2*n-2*e,c=4*(a*a+o*o),u=4*(a*h+o*l),d=h*h+l*l,p=2*Math.sqrt(c+u+d),f=Math.sqrt(c),m=2*c*f,_=2*Math.sqrt(d),g=u/f;return(m*p+f*u*(p-_)+(4*d*c-u*u)*Math.log((2*f+g+p)/(g+_)))/(4*m)},t.curveTo=function(e,i,n,r,s){for(var a=s[s.length-2],o=s[s.length-1],h=na._segmentsCount(t.curveLength(a,o,e,i,n,r)),l=0,c=0,u=1;u<=h;++u){var d=u/h;l=a+(e-a)*d,c=o+(i-o)*d,s.push(l+(e+(n-e)*d-l)*d,c+(i+(r-i)*d-c)*d)}},t}(),va=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ba=((_a={})[Ee.POLY]=oa,_a[Ee.CIRC]=ha,_a[Ee.ELIP]=ha,_a[Ee.RECT]=la,_a[Ee.RREC]=da,_a),Ea=[],Sa=[],Ta=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),wa=new Pe,Aa=new Ge,Ra=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new Ge,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return aa(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Sa.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),Ea.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=new Ta(t,e,i,n);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new Ta(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,wa):wa.copyFrom(t),n.shape.contains(wa.x,wa.y)))){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++){if(n.holes[s].shape.contains(wa.x,wa.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,n=null,r=null;this.batches.length>0&&(r=(n=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var a=i[s],o=a.fillStyle,h=a.lineStyle;ba[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var l=0;l<2;l++){var c=0===l?o:h;if(c.visible){var u=c.texture.baseTexture,d=this.indices.length,p=this.points.length/2;u.wrapMode=bt.REPEAT,0===l?this.processFill(a):this.processLine(a);var f=this.points.length/2-p;0!==f&&(n&&!this._compareStyles(r,c)&&(n.end(d,p),n=null),n||((n=Ea.pop()||new va).begin(c,d,p),this.batches.push(n),r=c),this.addUvs(this.points,e,c.texture,p,f,c.matrix))}}}var m=this.indices.length,_=this.points.length/2;if(n&&n.end(m,_),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=_>65535&&t;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var s=n.start+r;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++yi._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Sa.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=Sa.pop();r||((r=new fr).texArray=new mr),r.texArray.count=0,r.start=0,r.size=0,r.type=mt.TRIANGLES;var s=0,a=null,o=0,h=!1,l=mt.TRIANGLES,c=0;this.drawCalls.push(r);for(e=0;e<this.batches.length;e++){var u=this.batches[e],d=u.style,p=d.texture.baseTexture;h!==!!d.native&&(l=(h=!!d.native)?mt.LINES:mt.TRIANGLES,a=null,s=8,t++),a!==p&&(a=p,p._batchEnabled!==t&&(8===s&&(t++,s=0,r.size>0&&((r=Sa.pop())||((r=new fr).texArray=new mr),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=s,p.wrapMode=bt.REPEAT,r.texArray.elements[r.texArray.count++]=p,s++)),r.size+=u.size,c+=u.size,o=p._batchLocation,this.addColors(i,d.color,d.alpha,u.attribSize),this.addTextureIds(n,o,u.attribSize)}yi._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),a=new Uint32Array(r),o=0,h=0;h<t.length/2;h++)s[o++]=t[2*h],s[o++]=t[2*h+1],s[o++]=e[2*h],s[o++]=e[2*h+1],a[o++]=i[h],s[o++]=n[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),oa.triangulate(t,this)):ba[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ma(t,this);for(var e=0;e<t.holes.length;e++)ma(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];ba[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Aa,i=De.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var r=this.graphicsData[n],s=r.shape,a=r.type,o=r.lineStyle,h=r.matrix||De.IDENTITY,l=0;if(o&&o.visible){var c=o.alignment;l=o.width,a===Ee.POLY?l*=.5+Math.abs(.5-c):l*=Math.max(0,c)}if(i!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=h),a===Ee.RECT||a===Ee.RREC){var u=s;e.addFramePad(u.x,u.y,u.x+u.width,u.y+u.height,l,l)}else if(a===Ee.CIRC){var d=s;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+l,d.radius+l)}else if(a===Ee.ELIP){var p=s;e.addFramePad(p.x,p.y,p.x,p.y,p.width+l,p.height+l)}else{var f=s;t.addVerticesMatrix(i,f.points,0,f.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,n){for(var r=Zt((e>>16)+(65280&e)+((255&e)<<16),i);n-- >0;)t.push(r)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,n,r,s){void 0===s&&(s=null);for(var a=0,o=e.length,h=i.frame;a<r;){var l=t[2*(n+a)],c=t[2*(n+a)+1];if(s){var u=s.a*l+s.c*c+s.tx;c=s.b*l+s.d*c+s.ty,l=u}a++,e.push(l/h.width,c/h.height)}var d=i.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,i,o,r)},e.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,s=1e-6,a=i+2*n,o=e.frame,h=o.width/r.width,l=o.height/r.height,c=o.x/o.width,u=o.y/o.height,d=Math.floor(t[i]+s),p=Math.floor(t[i+1]+s),f=i+2;f<a;f+=2)d=Math.min(d,Math.floor(t[f]+s)),p=Math.min(p,Math.floor(t[f+1]+s));c-=d,u-=p;for(f=i;f<a;f+=2)t[f]=(t[f]+c)*h,t[f+1]=(t[f+1]+u)*l},e.BATCHABLE_SIZE=100,e}(xr),Ca=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Qs.BUTT,e.join=$s.MITER,e.miterLimit=10,e}return aa(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(ra),Ia=new Float32Array(3),Ma={},Pa=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._geometry=e||new Ra,i._geometry.refCount++,i.shader=null,i.state=Xn.for2d(),i._fillStyle=new ra,i._lineStyle=new Ca,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=ft.NORMAL,i}return aa(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,n,r){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=.5),void 0===r&&(r=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:n,native:r}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:ki.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Qs.BUTT,join:$s.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Ie,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Ie,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),xa.curveTo(t,e,i,n,r),this},e.prototype.bezierCurveTo=function(t,e,i,n,r,s){return this._initCurve(),ya.curveTo(t,e,i,n,r,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var s=this.currentPath.points,a=ga.curveTo(t,e,i,n,r,s);if(a){var o=a.cx,h=a.cy,l=a.radius,c=a.startAngle,u=a.endAngle,d=a.anticlockwise;this.arc(o,h,l,c,u,d)}return this},e.prototype.arc=function(t,e,i,n,r,s){if(void 0===s&&(s=!1),n===r)return this;if(!s&&r<=n?r+=Se:s&&n<=r&&(n+=Se),0===r-n)return this;var a=t+Math.cos(n)*i,o=e+Math.sin(n)*i,h=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-a),u=Math.abs(l[l.length-1]-o);c<h&&u<h||l.push(a,o)}else this.moveTo(a,o),l=this.currentPath.points;return ga.arc(a,o,t,e,i,n,r,s,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ki.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:ki.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new Ae(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new Me(t,e,i,n,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new Re(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new Ce(t,e,i,n))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var r=!0,s=i[0];s.points?(r=s.closeStroke,t=s.points):t=Array.isArray(i[0])?i[0]:i;var a=new Ie(t);return a.closeStroke=r,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Ee.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var n=0;n<i;n++){var r=t.batches[n],s=r.style.color,a=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),o=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),h={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:o,_batchRGB:Vt(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,n=this.tint,r=this.worldAlpha,s=e.uniforms,a=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*r,s.tint[1]=(n>>8&255)/255*r,s.tint[2]=(255&n)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var o=0,h=a.length;o<h;o++)this._renderDrawCallDirect(t,i.drawCalls[o])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,n=e.type,r=e.size,s=e.start,a=i.count,o=0;o<a;o++)t.texture.bind(i.elements[o],o);t.geometry.draw(n,r,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!Ma[i]){for(var n=t.plugins.batch.MAX_TEXTURES,r=new Int32Array(n),s=0;s<n;s++)r[s]=s;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new De,default:Ji.from({uSamplers:r},!0)},o=t.plugins[i]._shader.program;Ma[i]=new Bn(o,a)}e=Ma[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,r=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,i,n,r,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Vt(this.tint,Ia),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,r=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty,h=this._geometry.points,l=this.vertexData,c=0,u=0;u<h.length;u+=2){var d=h[u],p=h[u+1];l[c++]=i*d+r*p+a,l[c++]=s*p+n*d+o}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new Pe,e}(Ze),Oa={buildPoly:oa,buildCircle:ha,buildRectangle:la,buildRoundedRectangle:da,buildLine:ma,ArcUtils:ga,BezierUtils:ya,QuadraticUtils:xa,BatchPart:va,FILL_COMMANDS:ba,BATCH_POOL:Ea,DRAW_CALL_POOL:Sa},Da=function(t,e){return(Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Fa,ka=new Pe,Na=new Uint16Array([0,1,2,0,2,3]),La=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new Oe(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=ft.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||ki.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=Na,i.pluginName="batch",i.isSprite=!0,i._roundPixels=It.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}Da(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=se(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=se(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty,h=this.vertexData,l=t.trim,c=t.orig,u=this._anchor,d=0,p=0,f=0,m=0;if(l?(d=(p=l.x-u._x*c.width)+l.width,f=(m=l.y-u._y*c.height)+l.height):(d=(p=-u._x*c.width)+c.width,f=(m=-u._y*c.height)+c.height),h[0]=i*p+r*m+a,h[1]=s*m+n*p+o,h[2]=i*d+r*m+a,h[3]=s*m+n*d+o,h[4]=i*d+r*f+a,h[5]=s*f+n*d+o,h[6]=i*p+r*f+a,h[7]=s*f+n*p+o,this._roundPixels)for(var _=It.RESOLUTION,g=0;g<h.length;++g)h[g]=Math.round((h[g]*_|0)/_)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,a=r.b,o=r.c,h=r.d,l=r.tx,c=r.ty,u=-n._x*i.width,d=u+i.width,p=-n._y*i.height,f=p+i.height;e[0]=s*u+o*p+l,e[1]=h*p+a*u+c,e[2]=s*d+o*p+l,e[3]=h*p+a*d+c,e[4]=s*d+o*f+l,e[5]=h*f+a*d+c,e[6]=s*u+o*f+l,e[7]=h*f+a*u+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ka);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return ka.x>=n&&ka.x<n+e&&(r=-i*this.anchor.y,ka.y>=r&&ka.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof ki?t:ki.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=se(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=se(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ki.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Ze),Ba=function(t,e){return(Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Fa||(Fa={}));var Xa={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Fa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ua=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ya=function(){function t(t){this.styleID=0,this.reset(),ja(this,t,t)}return t.prototype.clone=function(){var e={};return ja(e,this,Xa),new t(e)},t.prototype.reset=function(){ja(this,Xa,Xa)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Ga(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Ga(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Ga(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Ua.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Va(t){return"number"==typeof t?Gt(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Ga(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Va(t[e]);return t}return Va(t)}function ja(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var Wa=function(){function t(t,e,i,n,r,s,a,o,h){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=h}return t.measureText=function(e,i,n,r){void 0===r&&(r=t._canvas),n=null==n?i.wordWrap:n;var s=i.toFontString(),a=t.measureFont(s);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);var o=r.getContext("2d");o.font=s;for(var h=(n?t.wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),c=0,u=0;u<h.length;u++){var d=o.measureText(h[u]).width+(h[u].length-1)*i.letterSpacing;l[u]=d,c=Math.max(c,d)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||a.fontSize+i.strokeThickness,m=Math.max(f,a.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,p,m,h,l,f+i.leading,c,a)},t.wordWrap=function(e,i,n){void 0===n&&(n=t._canvas);for(var r=n.getContext("2d"),s=0,a="",o="",h=Object.create(null),l=i.letterSpacing,c=i.whiteSpace,u=t.collapseSpaces(c),d=t.collapseNewlines(c),p=!u,f=i.wordWrapWidth+l,m=t.tokenize(e),_=0;_<m.length;_++){var g=m[_];if(t.isNewline(g)){if(!d){o+=t.addLine(a),p=!u,a="",s=0;continue}g=" "}if(u){var y=t.isBreakingSpace(g),x=t.isBreakingSpace(a[a.length-1]);if(y&&x)continue}var v=t.getFromCache(g,l,h,r);if(v>f)if(""!==a&&(o+=t.addLine(a),a="",s=0),t.canBreakWords(g,i.breakWords))for(var b=t.wordWrapSplit(g),E=0;E<b.length;E++){for(var S=b[E],T=1;b[E+T];){var w=b[E+T],A=S[S.length-1];if(t.canBreakChars(A,w,g,E,i.breakWords))break;S+=w,T++}E+=S.length-1;var R=t.getFromCache(S,l,h,r);R+s>f&&(o+=t.addLine(a),p=!1,a="",s=0),a+=S,s+=R}else{a.length>0&&(o+=t.addLine(a),a="",s=0);var C=_===m.length-1;o+=t.addLine(g,!C),p=!1,a="",s=0}else v+s>f&&(p=!1,o+=t.addLine(a),a="",s=0),(a.length>0||!t.isBreakingSpace(g)||p)&&(a+=g,s+=v)}return o+=t.addLine(a,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if("number"!=typeof r){var s=t.length*e;r=n.measureText(t).width+s,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var s=e[r],a=e[r+1];t.isBreakingSpace(s,a)||t.isNewline(s)?(""!==n&&(i.push(n),n=""),i.push(s)):n+=s}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},n=t._canvas,r=t._context;r.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(r.measureText(s).width),o=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=Math.ceil(t.HEIGHT_MULTIPLIER*o);o=o*t.BASELINE_MULTIPLIER|0,n.width=a,n.height=h,r.fillStyle="#f00",r.fillRect(0,0,a,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,o);var l=r.getImageData(0,0,a,h).data,c=l.length,u=4*a,d=0,p=0,f=!1;for(d=0;d<o;++d){for(var m=0;m<u;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p+=u}for(i.ascent=o-d,p=c-u,f=!1,d=h;d>o;--d){for(m=0;m<u;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p-=u}return i.descent=d-o,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Ha=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Ha.width=Ha.height=10,Wa._canvas=Ha,Wa._context=Ha.getContext("2d"),Wa._fonts={},Wa.METRICS_STRING="|q",Wa.BASELINE_SYMBOL="M",Wa.BASELINE_MULTIPLIER=1.4,Wa.HEIGHT_MULTIPLIER=2,Wa._newlines=[10,13],Wa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var za={texture:!0,children:!1,baseTexture:!0},qa=function(t){function e(e,i,n){var r=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var a=ki.from(n);return a.orig=new Ae,a.trim=new Ae,(r=t.call(this,a)||this)._ownCanvas=s,r.canvas=n,r.context=r.canvas.getContext("2d"),r._resolution=It.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=i,r.localStyleID=-1,r}return function(t,e){function i(){this.constructor=t}Ba(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,r,s=this.context,a=Wa.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,h=a.height,l=a.lines,c=a.lineHeight,u=a.lineWidths,d=a.maxLineWidth,p=a.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,h)+2*i.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var f=i.dropShadow?2:1,m=0;m<f;++m){var _=i.dropShadow&&0===m,g=_?Math.ceil(Math.max(1,h)+2*i.padding):0,y=g*this._resolution;if(_){s.fillStyle="black",s.strokeStyle="black";var x=i.dropShadowColor,v=Vt("number"==typeof x?x:jt(x));s.shadowColor="rgba("+255*v[0]+","+255*v[1]+","+255*v[2]+","+i.dropShadowAlpha+")",s.shadowBlur=i.dropShadowBlur,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+y}else s.fillStyle=this._generateFillStyle(i,l,a),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var b=(c-p.fontSize)/2;(!e.nextLineHeightBehavior||c-p.fontSize<0)&&(b=0);for(var E=0;E<l.length;E++)n=i.strokeThickness/2,r=i.strokeThickness/2+E*c+p.ascent+b,"right"===i.align?n+=d-u[E]:"center"===i.align&&(n+=(d-u[E])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[E],n+i.padding,r+i.padding-g,!0),i.fill&&this.drawLetterSpacing(l[E],n+i.padding,r+i.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var r=this._style.letterSpacing;if(0!==r)for(var s=e,a=Array.from?Array.from(t):t.split(""),o=this.context.measureText(t).width,h=0,l=0;l<a.length;++l){var c=a[l];n?this.context.strokeText(c,s,i):this.context.fillText(c,s,i),s+=o-(h=this.context.measureText(t.substring(l+1)).width)+r,o=h}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=_e(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,s=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var n,r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var s=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,o=Math.ceil(this.canvas.width/this._resolution)-s-2*a,h=Math.ceil(this.canvas.height/this._resolution)-s-2*a,l=r.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var u=l.length+1,d=1;d<u;++d)c.push(d/u);if(l.unshift(r[0]),c.unshift(0),l.push(r[r.length-1]),c.push(1),t.fillGradientType===Fa.LINEAR_VERTICAL){n=this.context.createLinearGradient(o/2,a,o/2,h+a);var p=(i.fontProperties.fontSize+t.strokeThickness)/h;for(d=0;d<e.length;d++)for(var f=i.lineHeight*d,m=0;m<l.length;m++){var _=0;_="number"==typeof c[m]?c[m]:m/l.length;var g=Math.min(1,Math.max(0,f/h+_*p));g=Number(g.toFixed(5)),n.addColorStop(g,l[m])}}else{n=this.context.createLinearGradient(a,h/2,o+a,h/2);var y=l.length+1,x=1;for(d=0;d<l.length;d++){var v=void 0;v="number"==typeof c[d]?c[d]:x/y,n.addColorStop(v,l[d]),x++}}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},za,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=se(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=se(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Ya?t:new Ya(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(La);
/*!
 * @pixi/prepare - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
It.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Za=function(t,e){return(Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Ka=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Ja(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof ki){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function $a(t,e){if(t.baseTexture instanceof yi){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Qa(t,e){if(t._texture&&t._texture instanceof ki){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function to(t,e){return e instanceof qa&&(e.updateText(!0),!0)}function eo(t,e){if(e instanceof Ya){var i=e.toFontString();return Wa.measureFont(i),!0}return!1}function io(t,e){if(t instanceof qa){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function no(t,e){return t instanceof Ya&&(-1===e.indexOf(t)&&e.push(t),!0)}var ro=function(){function t(t){var e=this;this.limiter=new Ka(It.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(io),this.registerFindHook(no),this.registerFindHook(Ja),this.registerFindHook($a),this.registerFindHook(Qa),this.registerUploadHook(to),this.registerUploadHook(eo)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,ti.system.addOnce(this.tick,this,Je.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)ti.system.addOnce(this.tick,this,Je.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(i=0,n=r.length;i<n;i++)r[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ze)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&ti.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function so(t,e){return e instanceof yi&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function ao(t,e){if(!(e instanceof Pa))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var s=n[r].style.texture;s&&so(t,s.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function oo(t,e){return t instanceof Pa&&(e.push(t),!0)}var ho=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(oo),i.registerUploadHook(so),i.registerUploadHook(ao),i}return function(t,e){function i(){this.constructor=t}Za(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(ro),lo=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),co=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof ki?t:null,this.baseTexture=t instanceof yi?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=be(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],s=this._frames[r],a=s.frame;if(a){var o=null,h=null,l=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,c=new Ae(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=s.rotated?new Ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new Ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(h=new Ae(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new ki(this.baseTexture,o,c,h,s.rotated?2:0,s.anchor),ki.addToCache(this.textures[r],r)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),uo=function(){function t(){}return t.use=function(e,i){var n,r,s=this,a=e.name+"_image";if(e.data&&e.type===as.TYPE.JSON&&e.data.frames&&!s.resources[a]){var o=null===(r=null===(n=e.data)||void 0===n?void 0:n.meta)||void 0===r?void 0:r.related_multi_packs;if(Array.isArray(o))for(var h=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),n=kt.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[i]||Object.values(s.resources).some((function(t){return kt.format(kt.parse(t.url))===n})))return"continue";var r={crossOrigin:e.crossOrigin,loadType:as.LOAD_TYPE.XHR,xhrType:as.XHR_RESPONSE_TYPE.JSON,parentResource:e};s.add(i,n,r)},l=0,c=o;l<c.length;l++){h(c[l])}var u={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(a,d,u,(function(t){if(t.error)i(t.error);else{var n=new co(t.texture,e.data,e.url);n.parse((function(){e.spritesheet=n,e.textures=n.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:kt.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),po=function(t,e){return(po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function fo(t,e){function i(){this.constructor=t}po(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var mo=new Pe,_o=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100);var r=t.call(this,e)||this;return r.tileTransform=new Ve,r._width=i,r._height=n,r.uvMatrix=r.texture.uvMatrix||new Vn(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return fo(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,mo);var e=this._width,i=this._height,n=-e*this.anchor._x;if(mo.x>=n&&mo.x<n+e){var r=-i*this.anchor._y;if(mo.y>=r&&mo.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof ki?t:ki.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(La),go="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",yo=new De,xo=function(t){function e(e){var i=t.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=Bn.from(go,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",n),i.simpleShader=Bn.from(go,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",n),i.quad=new Zi,i.state=Xn.for2d(),i}return fo(e,t),e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);var r=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(n=i.uvs)[0]=n[6]=-r,n[1]=n[3]=-s,n[2]=n[4]=1-r,n[5]=n[7]=1-s,i.invalidate();var a=t._texture,o=a.baseTexture,h=t.tileTransform.localTransform,l=t.uvMatrix,c=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==bt.CLAMP:o.wrapMode===bt.CLAMP&&(o.wrapMode=bt.REPEAT));var u=c?this.simpleShader:this.shader,d=a.width,p=a.height,f=t._width,m=t._height;yo.set(h.a*d/f,h.b*d/m,h.c*p/f,h.d*p/m,h.tx/f,h.ty/m),yo.invert(),c?yo.prepend(l.mapCoord):(u.uniforms.uMapCoord=l.mapCoord.toArray(!0),u.uniforms.uClampFrame=l.uClampFrame,u.uniforms.uClampOffset=l.uClampOffset),u.uniforms.uTransform=yo.toArray(!0),u.uniforms.uColor=Kt(t.tint,t.worldAlpha,u.uniforms.uColor,o.alphaMode),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.uSampler=a,e.shader.bind(u),e.geometry.bind(i),this.state.blendMode=zt(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(nn),vo=function(t,e){return(vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function bo(t,e){function i(){this.constructor=t}vo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Eo=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),So=new Pe,To=new Ie,wo=function(t){function e(e,i,n,r){void 0===r&&(r=mt.TRIANGLES);var s=t.call(this)||this;return s.geometry=e,e.refCount++,s.shader=i,s.state=n||Xn.for2d(),s.drawMode=r,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=It.ROUND_PIXELS,s.batchUvs=null,s}return bo(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===mt.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,r=n.a,s=n.b,a=n.c,o=n.d,h=n.tx,l=n.ty,c=this.vertexData,u=0;u<c.length/2;u++){var d=e[2*u],p=e[2*u+1];c[2*u]=r*d+a*p+h,c[2*u+1]=s*d+o*p+l}if(this._roundPixels){var f=It.RESOLUTION;for(u=0;u<c.length;++u)c[u]=Math.round((c[u]*f|0)/f)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Eo(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,So);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=To.points,n=this.geometry.getIndex().data,r=n.length,s=4===this.drawMode?3:1,a=0;a+2<r;a+=s){var o=2*n[a],h=2*n[a+1],l=2*n[a+2];if(i[0]=e[o],i[1]=e[o+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],To.contains(So.x,So.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Ze),Ao=function(t){function e(e,i){var n=this,r={uSampler:e,alpha:1,uTextureMatrix:De.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(r,i.uniforms),(n=t.call(this,i.program||Ln.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,n.uvMatrix=new Vn(e),n.batchable=void 0===i.program,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return bo(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Kt(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Bn),Ro=function(t){function e(e,i,n){var r=t.call(this)||this,s=new Yi(e),a=new Yi(i,!0),o=new Yi(n,!0,!0);return r.addAttribute("aVertexPosition",s,2,!1,yt.FLOAT).addAttribute("aTextureCoord",a,2,!1,yt.FLOAT).addIndex(o),r._updateId=-1,r}return bo(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(zi),Co=function(t,e){return(Co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Io=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Mo=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in e){var r=e[n].match(/^[a-z]+/gm)[0],s=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var o in s){var h=s[o].split("="),l=h[0],c=h[1].replace(/"/gm,""),u=parseFloat(c),d=isNaN(u)?c:u;a[l]=d}i[r].push(a)}var p=new Io;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),Po=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Io,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),o=0;o<i.length;o++)e.info.push({face:i[o].getAttribute("face"),size:parseInt(i[o].getAttribute("size"),10)});for(o=0;o<n.length;o++)e.common.push({lineHeight:parseInt(n[o].getAttribute("lineHeight"),10)});for(o=0;o<r.length;o++)e.page.push({id:parseInt(r[o].getAttribute("id"),10)||0,file:r[o].getAttribute("file")});for(o=0;o<s.length;o++){var h=s[o];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(o=0;o<a.length;o++)e.kerning.push({first:parseInt(a[o].getAttribute("first"),10),second:parseInt(a[o].getAttribute("second"),10),amount:parseInt(a[o].getAttribute("amount"),10)});return e},t}(),Oo=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return Po.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return Po.parse(e)},t}(),Do=[Mo,Po,Oo];function Fo(t){for(var e=0;e<Do.length;e++)if(Do[e].test(t))return Do[e];return null}function ko(t,e,i,n,r,s){var a,o=i.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var h=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,c=Math.ceil(t.width/n)-h-2*l,u=Math.ceil(t.height/n)-h-2*l,d=o.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(o[0]),p.unshift(0),d.push(o[o.length-1]),p.push(1),i.fillGradientType===Fa.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,l,c/2,u+l);var _=0,g=(s.fontProperties.fontSize+i.strokeThickness)/u;for(m=0;m<r.length;m++)for(var y=s.lineHeight*m,x=0;x<d.length;x++){var v=y/u+("number"==typeof p[x]?p[x]:x/d.length)*g,b=Math.max(_,v);b=Math.min(b,1),a.addColorStop(b,d[x]),_=b}}else{a=e.createLinearGradient(l,u/2,c+l,u/2);var E=d.length+1,S=1;for(m=0;m<d.length;m++){var T=void 0;T="number"==typeof p[m]?p[m]:S/E,a.addColorStop(T,d[m]),S++}}return a}function No(t,e,i,n,r,s,a){var o=i.text,h=i.fontProperties;e.translate(n,r),e.scale(s,s);var l=a.strokeThickness/2,c=-a.strokeThickness/2;e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=ko(t,e,a,s,[o],i),e.strokeStyle=a.stroke,e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=ko(t,e,a,s,[o],i),e.strokeStyle=a.stroke;var u=a.dropShadowColor,d=Vt("number"==typeof u?u:jt(u));a.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+a.dropShadowAlpha+")",e.shadowBlur=a.dropShadowBlur,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),a.stroke&&a.strokeThickness&&e.strokeText(o,l,c+i.lineHeight-h.descent),a.fill&&e.fillText(o,l,c+i.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var Lo=function(){function t(t,e,i){var n=t.info[0],r=t.common[0],s=be(t.page[0].file),a={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=r.lineHeight/s,this.chars={},this.pageTextures=a;for(var o=0;o<t.page.length;o++){var h=t.page[o],l=h.id,c=h.file;a[l]=e instanceof Array?e[o]:e[c]}for(o=0;o<t.char.length;o++){var u=t.char[o],d=(l=u.id,u.page),p=t.char[o],f=p.x,m=p.y,_=p.width,g=p.height,y=p.xoffset,x=p.yoffset,v=p.xadvance;m/=s,_/=s,g/=s,y/=s,x/=s,v/=s;var b=new Ae((f/=s)+a[d].frame.x/s,m+a[d].frame.y/s,_,g);this.chars[l]={xOffset:y,yOffset:x,xAdvance:v,kerning:{},texture:new ki(a[d].baseTexture,b),page:d}}for(o=0;o<t.kerning.length;o++){var E=t.kerning[o],S=E.first,T=E.second,w=E.amount;S/=s,T/=s,w/=s,this.chars[T]&&(this.chars[T].kerning[S]=w)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,n){var r;if(e instanceof Io)r=e;else{var s=Fo(e);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(e)}i instanceof ki&&(i=[i]);var a=new t(r,i,n);return t.available[a.font]=a,a},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,n),s=r.chars,a=r.padding,o=r.resolution,h=r.textureWidth,l=r.textureHeight,c=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var s=r[0].charCodeAt(0),a=r[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(var o=s,h=a;o<=h;o++)e.push(String.fromCharCode(o))}else e.push.apply(e,r.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),u=i instanceof Ya?i:new Ya(i),d=h,p=new Io;p.info[0]={face:u.fontFamily,size:u.fontSize},p.common[0]={lineHeight:u.fontSize};for(var f,m,_,g=0,y=0,x=0,v=[],b=0;b<c.length;b++){f||((f=document.createElement("canvas")).width=h,f.height=l,m=f.getContext("2d"),_=new yi(f,{resolution:o}),v.push(new ki(_)),p.page.push({id:v.length-1,file:""}));var E=Wa.measureText(c[b],u,!1,f),S=E.width,T=Math.ceil(E.height),w=Math.ceil(("italic"===u.fontStyle?2:1)*S);if(y>=l-T*o){if(0===y)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+u.fontSize+"px fonts");--b,f=null,m=null,_=null,y=0,g=0,x=0}else if(x=Math.max(T+E.fontProperties.descent,x),w*o+g>=d)--b,y+=x*o,y=Math.ceil(y),g=0,x=0;else{No(f,m,E,g,y,o,u);var A=E.text.charCodeAt(0);p.char.push({id:A,page:v.length-1,x:g/o,y:y/o,width:w,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(S-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),g+=(w+2*a)*o,g=Math.ceil(g)}}b=0;for(var R=c.length;b<R;b++)for(var C=c[b],I=0;I<R;I++){var M=c[I],P=m.measureText(C).width,O=m.measureText(M).width,D=m.measureText(C+M).width-(P+O);D&&p.kerning.push({first:C.charCodeAt(0),second:M.charCodeAt(0),amount:D})}var F=new t(p,v,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=F,F},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Bo=[],Xo=[],Uo=function(t){function e(i,n){void 0===n&&(n={});var r=t.call(this)||this;r._tint=16777215;var s=Object.assign({},e.styleDefaults,n),a=s.align,o=s.tint,h=s.maxWidth,l=s.letterSpacing,c=s.fontName,u=s.fontSize;if(!Lo.available[c])throw new Error('Missing BitmapFont "'+c+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=a,r._tint=o,r._fontName=c,r._fontSize=u||Lo.available[c].size,r._text=i,r._maxWidth=h,r._maxLineHeight=0,r._letterSpacing=l,r._anchor=new Oe((function(){r.dirty=!0}),r,0,0),r._roundPixels=It.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}return function(t,e){function i(){this.constructor=t}Co(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=Lo.available[this._fontName],i=this._fontSize/e.size,n=new Pe,r=[],s=[],a=[],o=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=o.length,l=this._maxWidth*e.size/this._fontSize,c=null,u=0,d=0,p=0,f=-1,m=0,_=0,g=0,y=0,x=0;x<h;x++){var v=o.charCodeAt(x),b=o.charAt(x);if(/(?:\s)/.test(b)&&(f=x,m=u,y++),"\r"!==b&&"\n"!==b){var E=e.chars[v];if(E){c&&E.kerning[c]&&(n.x+=E.kerning[c]);var S=Xo.pop()||{texture:ki.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Pe};S.texture=E.texture,S.line=p,S.charCode=v,S.position.x=n.x+E.xOffset+this._letterSpacing/2,S.position.y=n.y+E.yOffset,S.prevSpaces=y,r.push(S),n.x+=E.xAdvance+this._letterSpacing,u=n.x,g=Math.max(g,E.yOffset+E.texture.height),c=v,-1!==f&&l>0&&n.x>l&&(re(r,1+f-++_,1+x-f),x=f,f=-1,s.push(m),a.push(r.length>0?r[r.length-1].prevSpaces:0),d=Math.max(d,m),p++,n.x=0,n.y+=e.lineHeight,c=null,y=0)}}else s.push(u),a.push(-1),d=Math.max(d,u),++p,++_,n.x=0,n.y+=e.lineHeight,c=null,y=0}var T=o.charAt(o.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(u=m),s.push(u),d=Math.max(d,u),a.push(-1));var w=[];for(x=0;x<=p;x++){var A=0;"right"===this._align?A=d-s[x]:"center"===this._align?A=(d-s[x])/2:"justify"===this._align&&(A=a[x]<0?0:(d-s[x])/a[x]),w.push(A)}var R=r.length,C={},I=[],M=this._activePagesMeshData;for(x=0;x<M.length;x++)Bo.push(M[x]);for(x=0;x<R;x++){var P=(U=r[x].texture).baseTexture.uid;if(!C[P]){if(!(z=Bo.pop())){var O=new Ro,D=new Ao(ki.EMPTY);z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new wo(O,D),vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;var F=this._textureCache;F[P]=F[P]||new ki(U.baseTexture),z.mesh.texture=F[P],z.mesh.tint=this._tint,I.push(z),C[P]=z}C[P].total++}for(x=0;x<M.length;x++)-1===I.indexOf(M[x])&&this.removeChild(M[x].mesh);for(x=0;x<I.length;x++)I[x].mesh.parent!==this&&this.addChild(I[x].mesh);for(var x in this._activePagesMeshData=I,C){var k=(z=C[x]).total;if(!((null===(t=z.indices)||void 0===t?void 0:t.length)>6*k)||z.vertices.length<2*wo.BATCHABLE_SIZE)z.vertices=new Float32Array(8*k),z.uvs=new Float32Array(8*k),z.indices=new Uint16Array(6*k);else for(var N=z.total,L=z.vertices,B=4*N*2;B<L.length;B++)L[B]=0;z.mesh.size=6*k}for(x=0;x<R;x++){var X=(b=r[x]).position.x+w[b.line]*("justify"===this._align?b.prevSpaces:1);this._roundPixels&&(X=Math.round(X));var U,Y=X*i,V=b.position.y*i,G=C[(U=b.texture).baseTexture.uid],j=U.frame,W=U._uvs,H=G.index++;G.indices[6*H+0]=0+4*H,G.indices[6*H+1]=1+4*H,G.indices[6*H+2]=2+4*H,G.indices[6*H+3]=0+4*H,G.indices[6*H+4]=2+4*H,G.indices[6*H+5]=3+4*H,G.vertices[8*H+0]=Y,G.vertices[8*H+1]=V,G.vertices[8*H+2]=Y+j.width*i,G.vertices[8*H+3]=V,G.vertices[8*H+4]=Y+j.width*i,G.vertices[8*H+5]=V+j.height*i,G.vertices[8*H+6]=Y,G.vertices[8*H+7]=V+j.height*i,G.uvs[8*H+0]=W.x0,G.uvs[8*H+1]=W.y0,G.uvs[8*H+2]=W.x1,G.uvs[8*H+3]=W.y1,G.uvs[8*H+4]=W.x2,G.uvs[8*H+5]=W.y2,G.uvs[8*H+6]=W.x3,G.uvs[8*H+7]=W.y3}for(var x in this._textWidth=d*i,this._textHeight=(n.y+e.lineHeight)*i,C){var z=C[x];if(0!==this.anchor.x||0!==this.anchor.y)for(var q=0,Z=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y,J=0;J<z.total;J++)z.vertices[q++]-=Z,z.vertices[q++]-=K,z.vertices[q++]-=Z,z.vertices[q++]-=K,z.vertices[q++]-=Z,z.vertices[q++]-=K,z.vertices[q++]-=Z,z.vertices[q++]-=K;this._maxLineHeight=g*i;var $=z.mesh.geometry.getBuffer("aVertexPosition"),Q=z.mesh.geometry.getBuffer("aTextureCoord"),tt=z.mesh.geometry.getIndex();$.data=z.vertices,Q.data=z.uvs,tt.data=z.indices,$.update(),Q.update(),tt.update()}for(x=0;x<r.length;x++)Xo.push(r[x])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Lo.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache;for(var n in i){i[n].destroy(),delete i[n]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Ze),Yo=function(){function t(){}return t.add=function(){as.setExtensionXhrType("fnt",as.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var n=Fo(e.data);if(n)for(var r=t.getBaseUrl(this,e),s=n.parse(e.data),a={},o=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===s.page.length&&(e.bitmapFont=Lo.install(s,a,!0),i())},h=0;h<s.page.length;++h){var l=s.page[h].file,c=r+l,u=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===c){p.metadata.pageFile=l,p.texture?o(p):p.onAfterMiddleware.add(o),u=!0;break}}if(!u){var f={crossOrigin:e.crossOrigin,loadType:as.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(c,f,o)}}else i()},t.getBaseUrl=function(e,i){var n=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===n&&(n=""),e.baseUrl&&n&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(n+="/")),(n=n.replace(e.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),Vo=function(t,e){return(Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Go=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,dr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}Vo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Un),jo=function(t,e){return(jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Wo(t,e){function i(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ho,zo,qo,Zo,Ko,Jo,$o,Qo,th,eh,ih,nh,rh,sh,ah,oh,hh,lh,ch={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},uh=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ho||(Ho={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(zo||(zo={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(qo||(qo={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Zo||(Zo={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ko||(Ko={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Jo||(Jo={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}($o||($o={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Qo||(Qo={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(th||(th={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(eh||(eh={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ih||(ih={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(nh||(nh={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(rh||(rh={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(sh||(sh={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(ah||(ah={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(oh||(oh={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(hh||(hh={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(lh||(lh={}));var dh=function(t){function e(e,i,n,r,s){void 0===i&&(i=8),void 0===n&&(n=4),void 0===r&&(r=It.FILTER_RESOLUTION),void 0===s&&(s=5);var a=this,o=function(t,e){var i,n=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var o=i.replace("%index%",a.toString());s+=o=o.replace("%sampleIndex%",a-(n-1)+".0"),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s,e),h=function(t){for(var e,i=ch[t],n=i.length,r=uh,s="",a=0;a<t;a++){var o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());e=a,a>=n&&(e=t-a-1),s+=o=o.replace("%value%",i[e].toString()),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s);return(a=t.call(this,o,h)||this).horizontal=e,a.resolution=r,a._quality=0,a.quality=n,a.blur=i,a}return Wo(e,t),e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),s=t.renderer,a=e,o=r;this.state.blend=!1,t.applyFilter(this,a,o,sh.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(a,sh.BLIT),this.uniforms.uSampler=o;var l=o;o=a,a=l,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,o,i,n),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Un),ph=function(t){function e(e,i,n,r){void 0===e&&(e=8),void 0===i&&(i=4),void 0===n&&(n=It.FILTER_RESOLUTION),void 0===r&&(r=5);var s=t.call(this)||this;return s.blurXFilter=new dh(!0,e,i,n,r),s.blurYFilter=new dh(!1,e,i,n,r),s.resolution=n,s.quality=i,s.blur=e,s.repeatEdgePixels=!1,s}return Wo(e,t),e.prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(r&&s){var a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,sh.CLEAR),this.blurYFilter.apply(t,a,i,n),t.returnFilterTexture(a)}else s?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Un),fh=function(t,e){return(fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var mh=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,pr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}fh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,s=(0,Math.sqrt)(r),a=[i+(1-i)*r,r*(1-i)-s*n,r*(1-i)+s*n,0,0,r*(1-i)+s*n,i+r*(1-i),r*(1-i)-s*n,0,0,r*(1-i)-s*n,r*(1-i)+s*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,h=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,c=(255&n)/255,u=[.3,.59,.11,0,0,s,a,o,t=t||.2,0,h,l,c,e=e||.15,0,s-h,a-l,o-c,0,0];this._loadMatrix(u,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Un);mh.prototype.grayscale=mh.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var _h=function(t,e){return(_h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var gh=function(t){function e(e,i){var n=this,r=new De;return e.renderable=!1,(n=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,n.maskMatrix=r,null==i&&(i=20),n.scale=new Pe(i,i),n}return function(t,e){function i(){this.constructor=t}_h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,s=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d);0!==s&&0!==a&&(this.uniforms.rotation[0]=r.a/s,this.uniforms.rotation[1]=r.b/s,this.uniforms.rotation[2]=r.c/a,this.uniforms.rotation[3]=r.d/a),t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Un),yh=function(t,e){return(yh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var xh=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}yh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Un),vh=function(t,e){return(vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var bh=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var n=t.call(this,pr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return function(t,e){function i(){this.constructor=t}vh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Un),Eh=new De;He.prototype._cacheAsBitmap=!1,He.prototype._cacheData=null,He.prototype._cacheAsBitmapResolution=null;var Sh=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(He.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Sh),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),He.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},He.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(It.RESOLUTION);var r=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),o=t.projection.transform,h=Li.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution}),l="cacheAsBitmap_"+oe();this._cacheData.textureCacheId=l,yi.addToCache(h.baseTexture,l),ki.addToCache(h,l);var c=this.transform.localTransform.copyTo(Eh).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),t.projection.transform=o,t.renderTexture.bind(r,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;var u=new La(h);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-i.x/i.width,u.anchor.y=-i.y/i.height,u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)}},He.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},He.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,r=t._projTransform;e.ceil(It.RESOLUTION);var s=Li.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+oe();this._cacheData.textureCacheId=a,yi.addToCache(s.baseTexture,a),ki.addToCache(s,a);var o=Eh;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:o,skipUpdateTransform:!1}),t.context=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new La(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},He.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},He.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},He.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,yi.removeFromCache(this._cacheData.textureCacheId),ki.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},He.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
He.prototype.name=null,Ze.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,n=this.children.length;i<n;i++){if(this.children[i].getChildByName){var r=this.children[i].getChildByName(t,!0);if(r)return r}}return null},
/*!
 * @pixi/mixin-get-global-position - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
He.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Pe),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh-extras - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Th=function(t,e){return(Th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function wh(t,e){function i(){this.constructor=t}Th(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ah=function(t){function e(e,i,n,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===r&&(r=10);var s=t.call(this)||this;return s.segWidth=n,s.segHeight=r,s.width=e,s.height=i,s.build(),s}return wh(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],r=this.segWidth-1,s=this.segHeight-1,a=this.width/r,o=this.height/s,h=0;h<t;h++){var l=h%this.segWidth,c=h/this.segWidth|0;e.push(l*a,c*o),i.push(l/r,c/s)}var u=r*s;for(h=0;h<u;h++){var d=h%r,p=h/r|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,_=(p+1)*this.segWidth+d,g=(p+1)*this.segWidth+d+1;n.push(f,m,_,m,g,_)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Ro),Rh=function(t){function e(e,i,n){void 0===e&&(e=200),void 0===n&&(n=0);var r=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return r.points=i,r._width=e,r.textureScale=n,r.build(),r}return wh(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var r=i.data,s=n.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var a=0,o=t[0],h=this._width*this.textureScale,l=t.length,c=0;c<l;c++){var u=4*c;if(this.textureScale>0){var d=o.x-t[c].x,p=o.y-t[c].y,f=Math.sqrt(d*d+p*p);o=t[c],a+=f/h}else a=c/(l-1);r[u]=a,r[u+1]=0,r[u+2]=a,r[u+3]=1}var m=0;for(c=0;c<l-1;c++){u=2*c;s[m++]=u,s[m++]=u+1,s[m++]=u+2,s[m++]=u+2,s[m++]=u+1,s[m++]=u+3}i.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],n=0,r=0,s=this.buffers[0].data,a=t.length,o=0;o<a;o++){var h=t[o],l=4*o;r=-((e=o<t.length-1?t[o+1]:h).x-i.x),n=e.y-i.y;var c=Math.sqrt(n*n+r*r),u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=c,r/=c,n*=u,r*=u,s[l]=h.x+n,s[l+1]=h.y+r,s[l+2]=h.x-n,s[l+3]=h.y-r,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Ro),Ch=function(t){function e(e,i,n){void 0===n&&(n=0);var r=this,s=new Rh(e.height,i,n),a=new Ao(e);return n>0&&(e.baseTexture.wrapMode=bt.REPEAT),(r=t.call(this,s,a)||this).autoUpdate=!0,r}return wh(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(wo),Ih=function(t){function e(e,i,n){var r=this,s=new Ah(e.width,e.height,i,n),a=new Ao(ki.WHITE);return(r=t.call(this,s,a)||this).texture=e,r}return wh(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(wo),Mh=function(t){function e(e,i,n,r,s){void 0===e&&(e=ki.EMPTY);var a=this,o=new Ro(i,n,r);o.getBuffer("aVertexPosition").static=!1;var h=new Ao(e);return(a=t.call(this,o,h,null,s)||this).autoUpdate=!0,a}return wh(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(wo),Ph=function(t){function e(e,i,n,r,s){void 0===i&&(i=10),void 0===n&&(n=10),void 0===r&&(r=10),void 0===s&&(s=10);var a=t.call(this,ki.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=r,a._topHeight=n,a._bottomHeight=s,a.texture=e,a}return wh(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(Ih),Oh=function(t,e){return(Oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Dh=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e[0]instanceof ki?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return function(t,e){function i(){this.constructor=t}Oh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ti.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ti.shared.add(this.update,this,Je.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ki.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ki.from(t[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ki)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ti.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ti.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(La);
/*!
 * pixi.js - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */cr.registerPlugin("accessibility",$e),cr.registerPlugin("extract",Or),cr.registerPlugin("interaction",li),cr.registerPlugin("particle",ia),cr.registerPlugin("prepare",ho),cr.registerPlugin("batch",Sr),cr.registerPlugin("tilingSprite",xo),is.registerPlugin(Yo),is.registerPlugin(ms),is.registerPlugin(Ds),is.registerPlugin(Zs),is.registerPlugin(uo),Ir.registerPlugin(ei),Ir.registerPlugin(ss);var Fh,kh,Nh,Lh="6.0.4",Bh={AlphaFilter:Go,BlurFilter:ph,BlurFilterPass:dh,ColorMatrixFilter:mh,DisplacementFilter:gh,FXAAFilter:xh,NoiseFilter:bh},Xh=function(){function t(e){g()(this,t),this.id=e,this.pos=[0,0],this.targetPos=[0,0],this.control={move:[0,0]}}return x()(t,[{key:"createGraph",value:function(t){var e=new Ze,i=new La(t.role.texture);i.name="role",i.anchor.set(.5),e.addChild(i);var n=new La(t.arrow.texture);return n.name="arrow",n.anchor.set(0,.5),e.addChild(n),this.graph={root:e,role:i,arrow:n},e}},{key:"setPos",value:function(t,e){this.pos[0]=t,this.pos[1]=e}},{key:"setTargetPos",value:function(t,e){this.targetPos[0]=t,this.targetPos[1]=e}},{key:"move",value:function(t,e){this.pos[0]+=t,this.pos[1]+=e}},{key:"updateGraph",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.graph.root.x=v.mix(this.graph.root.x,this.pos[0],t),this.graph.root.y=v.mix(this.graph.root.y,this.pos[1],t);var e=b.getAngle(b.normalize(b.sub(this.targetPos,this.pos)));this.graph.arrow.rotation=v.angleMix(this.graph.arrow.rotation,e,t)}}]),t}(),Uh=function(){function t(e,i){g()(this,t),this.id=e,this.playerID=i,this.pos=[0,0],this.angle=0,this.life=0,this.lifeMax=2}return x()(t,[{key:"createGraph",value:function(t){var e=new Ze,i=new La(t.bullet.texture);return i.name="bullet",i.anchor.set(.5),e.addChild(i),this.graph={root:e,bullet:i},e}},{key:"setPos",value:function(t,e){this.pos[0]=t,this.pos[1]=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"move",value:function(t,e){this.pos[0]+=t,this.pos[1]+=e}},{key:"updateLife",value:function(t){return this.life+=t,this.life>this.lifeMax}},{key:"updateGraph",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.graph.root.x=v.mix(this.graph.root.x,this.pos[0],t),this.graph.root.y=v.mix(this.graph.root.y,this.pos[1],t),this.graph.bullet.rotation=v.angleMix(this.graph.bullet.rotation,this.angle,t)}}]),t}(),Yh=i(37),Vh=i.n(Yh),Gh=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:kh.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,n=void 0,r=i[0],s=r.value,a=r.time,o=n=new t("string"==typeof s?kh.hexToRGB(s):s,a,e.ease);if(i.length>2||2===i.length&&i[1].value!==s)for(var h=1;h<i.length;++h){var l=i[h],c=l.value,u=l.time;n.next=new t("string"==typeof c?kh.hexToRGB(c):c,u),n=n.next}return o.isStepped=!!e.isStepped,o}var d=new t("string"==typeof e.start?kh.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(d.next=new t("string"==typeof e.end?kh.hexToRGB(e.end):e.end,1)),d},t}(),jh=r;function Wh(t){return Fh(t)}Fh=parseInt(/^(\d+)\./.exec(Lh)[1],10)<5?jh.Texture.fromImage:jh.Texture.from,(Nh=kh||(kh={})).verbose=!1,Nh.DEG_TO_RADS=Math.PI/180,Nh.rotatePoint=function(t,e){if(t){t*=Nh.DEG_TO_RADS;var i=Math.sin(t),n=Math.cos(t),r=e.x*n-e.y*i,s=e.x*i+e.y*n;e.x=r,e.y=s}},Nh.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},Nh.normalize=function(t){var e=1/Nh.length(t);t.x*=e,t.y*=e},Nh.scaleBy=function(t,e){t.x*=e,t.y*=e},Nh.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Nh.hexToRGB=function(t,e){var i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},Nh.generateEase=function(t){var e=t.length,i=1/e;return function(n){var r=e*n|0,s=(n-r*i)*e,a=t[r]||t[e-1];return a.s+s*(2*(1-s)*(a.cp-a.s)+s*(a.e-a.s))}},Nh.getBlendMode=function(t){if(!t)return ft.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return ft[t]||ft.NORMAL},Nh.createSteppedGradient=function(t,e){void 0===e&&(e=10),("number"!=typeof e||e<=0)&&(e=10);var i=new Gh(Nh.hexToRGB(t[0].value),t[0].time);i.isStepped=!0;for(var n=i,r=t[0],s=1,a=t[s],o=1;o<e;++o){for(var h=o/e;h>a.time;)r=a,a=t[++s];h=(h-r.time)/(a.time-r.time);var l=Nh.hexToRGB(r.value),c=Nh.hexToRGB(a.value),u={r:(c.r-l.r)*h+l.r,g:(c.g-l.g)*h+l.g,b:(c.b-l.b)*h+l.b};n.next=new Gh(u,o/e),n=n.next}return i};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Hh=function(t,e){return(Hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function zh(t,e){function i(){this.constructor=t}Hh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function qh(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function Zh(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,s=(i.b-e.b)*t+e.b;return kh.combineRGBComponents(n,r,s)}function Kh(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function Jh(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,s=(i.b-e.b)*t+e.b;return kh.combineRGBComponents(n,r,s)}function $h(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function Qh(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return kh.combineRGBComponents(e.r,e.g,e.b)}var tl,el=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?Zh:qh:t.isStepped?this.interpolate=this.isColor?Qh:$h:this.interpolate=this.isColor?Jh:Kh,this.ease=this.current.ease},t}(),il=function(t){function e(i){var n=t.call(this)||this;return n.prevChild=n.nextChild=null,n.emitter=i,n.anchor.x=n.anchor.y=.5,n.velocity=new Pe,n.rotationSpeed=0,n.rotationAcceleration=0,n.maxLife=0,n.age=0,n.ease=null,n.extraData=null,n.alphaList=new el,n.speedList=new el,n.speedMultiplier=1,n.acceleration=new Pe,n.maxSpeed=NaN,n.scaleList=new el,n.scaleMultiplier=1,n.colorList=new el(!0),n._doAlpha=!1,n._doScale=!1,n._doSpeed=!1,n._doAcceleration=!1,n._doColor=!1,n._doNormalMovement=!1,n._oneOverLife=0,n.next=null,n.prev=null,n.init=n.init,n.Particle_init=e.prototype.init,n.update=n.update,n.Particle_update=e.prototype.update,n.Sprite_destroy=t.prototype.destroy,n.Particle_destroy=e.prototype.destroy,n.applyArt=n.applyArt,n.kill=n.kill,n}return zh(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,kh.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=kh.DEG_TO_RADS,this.rotationSpeed*=kh.DEG_TO_RADS,this.rotationAcceleration*=kh.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=kh.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||ki.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4===this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var n=void 0,r=void 0;if(this._doSpeed){var s=this.speedList.interpolate(e)*this.speedMultiplier;kh.normalize(this.velocity),kh.scaleBy(this.velocity,s),n=this.velocity.x*t,r=this.velocity.y*t}else if(this._doAcceleration){var a=this.velocity.x,o=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var h=kh.length(this.velocity);h>this.maxSpeed&&kh.scaleBy(this.velocity,this.maxSpeed/h)}n=(a+this.velocity.x)/2*t,r=(o+this.velocity.y)/2*t}else n=this.velocity.x*t,r=this.velocity.y*t;this.position.x+=n,this.position.y+=r}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var l=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+l)/2*t,this.rotationSpeed=l}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=Wh(t[e]));if(kh.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!==t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(La),nl=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],n=i[0],r=1;r<i.length;++r){var s=i[r];this.segments.push({p1:n,p2:s,l:0}),n=s}else for(n=t[0],e=1;e<t.length;++e){s=t[e];this.segments.push({p1:n,p2:s,l:0}),n=s}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var a=this.segments[e],o=a.p1,h=a.p2,l=Math.sqrt((h.x-o.x)*(h.x-o.x)+(h.y-o.y)*(h.y-o.y));this.segments[e].l=l,this.totalLength+=l,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,n=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=n;else for(var r=0;r<this.countingLengths.length;++r)if(n<this.countingLengths[r]){e=this.segments[r],i=0===r?n:n-this.countingLengths[r-1];break}i/=e.l||1;var s=e.p1,a=e.p2;t.x=s.x+i*(a.x-s.x),t.y=s.y+i*(a.y-s.y)},t}(),rl=r;tl=parseInt(/^(\d+)\./.exec(Lh)[1],10)<5?rl.ticker.shared:rl.Ticker.shared;var sl=new Pe,al=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=il,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!==this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=Gh.createList(e.alpha):this.startAlpha=new Gh(1,0),e.speed?(this.startSpeed=Gh.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new Gh(0,0));var n=e.acceleration;n&&(n.x||n.y)?(this.startSpeed.next=null,this.acceleration=new Pe(n.x,n.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new Pe,e.scale?(this.startScale=Gh.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new Gh(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=Gh.createList(e.color):this.startColor=new Gh({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=kh.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:kh.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new Pe,this.spawnPos=new Pe(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new Ae(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new Re(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new Re(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new nl(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!==t){var e=t-this.rotation;this.rotation=t,kh.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?tl.remove(this.update,this):!this._autoUpdate&&t&&tl.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/It.TARGET_FPMS/1e3),this._parent){var e,i,n,r,s;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(r=this._prevEmitterPos.x,s=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,o=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var h=void 0;if(h=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<h){var l=void 0,c=void 0;if(this._prevPosIsValid&&this._posChanged){var u=1+this._spawnTimer/t;l=(a-r)*u+r,c=(o-s)*u+s}else l=a,c=o;e=0;for(var d=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<d;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var p=void 0;this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(p.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):p.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):p.applyArt(this.particleImages[0]),p.alphaList.reset(this.startAlpha),1!==this.minimumSpeedMultiplier&&(p.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),p.speedList.reset(this.startSpeed),p.acceleration.x=this.acceleration.x,p.acceleration.y=this.acceleration.y,p.maxSpeed=this.maxSpeed,1!==this.minimumScaleMultiplier&&(p.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),p.scaleList.reset(this.startScale),p.colorList.reset(this.startColor),this.minRotationSpeed===this.maxRotationSpeed?p.rotationSpeed=this.minRotationSpeed:p.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,p.rotationAcceleration=this.rotationAcceleration,p.noRotation=this.noRotation,p.maxLife=h,p.blendMode=this.particleBlendMode,p.ease=this.customEase,p.extraData=this.extraData,this.applyAdditionalProperties(p),this._spawnFunc(p,l,c,e),p.init(),this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),this._activeParticlesLast?(this._activeParticlesLast.next=p,p.prev=this._activeParticlesLast,this._activeParticlesLast=p):this._activeParticlesLast=this._activeParticlesFirst=p,++this.particleCount,p.update(-this._spawnTimer)}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=o,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var f=this._completeCallback;this._completeCallback=null,f()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,sl.x=Math.random()*this.spawnRect.width+this.spawnRect.x,sl.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&kh.rotatePoint(this.rotation,sl),t.position.x=e+sl.x,t.position.y=i+sl.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,sl.x=Math.random()*this.spawnCircle.radius,sl.y=0,kh.rotatePoint(360*Math.random(),sl),sl.x+=this.spawnCircle.x,sl.y+=this.spawnCircle.y,0!==this.rotation&&kh.rotatePoint(this.rotation,sl),t.position.x=e+sl.x,t.position.y=i+sl.y},t.prototype._spawnRing=function(t,e,i){var n=this.spawnCircle;this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,n.minRadius!==n.radius?sl.x=Math.random()*(n.radius-n.minRadius)+n.minRadius:sl.x=n.radius,sl.y=0;var r=360*Math.random();t.rotation+=r,kh.rotatePoint(r,sl),sl.x+=this.spawnCircle.x,sl.y+=this.spawnCircle.y,0!==this.rotation&&kh.rotatePoint(this.rotation,sl),t.position.x=e+sl.x,t.position.y=i+sl.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(sl),0!==this.rotation&&kh.rotatePoint(this.rotation,sl),t.position.x=e+sl.x,t.position.y=i+sl.y},t.prototype._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),ol=new Pe,hl=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],ll=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(hl).join("|"),"g");var cl,ul,dl;(function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new Pe,i.movement=0,i}zh(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){if(this._doSpeed){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t}else{i=this.speedList.current.value*this.speedMultiplier;this.movement+=i*t}ol.x=this.movement,ol.y=this.path(this.movement),kh.rotatePoint(this.initialRotation,ol),this.position.x=this.initialPosition.x+ol.x,this.position.y=this.initialPosition.y+ol.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return il.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(ll),i=e.length-1;i>=0;--i)hl.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){kh.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else kh.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e}})(il),function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}zh(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>=this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||this.textures[this.textures.length-1]||ki.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e=[],i=0;i<t.length;++i){for(var n=t[i],r=e[i]={},s=r.textures=[],a=n.textures,o=0;o<a.length;++o){var h=a[o];if("string"==typeof h)s.push(Wh(h));else if(h instanceof ki)s.push(h);else{var l=h.count||1;for(h="string"==typeof h.texture?Wh(h.texture):h.texture;l>0;--l)s.push(h)}}"matchLife"===n.framerate?(r.framerate=-1,r.duration=0,r.loop=!1):(r.loop=!!n.loop,r.framerate=n.framerate>0?n.framerate:60,r.duration=s.length/r.framerate)}return e}}(il),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._firstChild=null,e._lastChild=null,e._childCount=0,e}zh(e,t),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._childCount},enumerable:!0,configurable:!0}),e.prototype.addChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.addChild(t[i]);else{var n=t[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this._lastChild?(this._lastChild.nextChild=n,n.prevChild=this._lastChild,this._lastChild=n):this._firstChild=this._lastChild=n,++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",n,this,this._childCount),n.emit("added",this)}return t[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this._childCount)throw new Error("addChildAt: The index "+e+" supplied is out of bounds "+this._childCount);t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1;var i=t;if(this._firstChild)if(0===e)this._firstChild.prevChild=i,i.nextChild=this._firstChild,this._firstChild=i;else if(e===this._childCount)this._lastChild.nextChild=i,i.prevChild=this._lastChild,this._lastChild=i;else{for(var n=0,r=this._firstChild;n<e;)r=r.nextChild,++n;r.prevChild.nextChild=i,i.prevChild=r.prevChild,i.nextChild=r,r.prevChild=i}else this._firstChild=this._lastChild=i;return++this._childCount,this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.addChildBelow=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.prevChild.nextChild=t,t.prevChild=e.prevChild,t.nextChild=e,e.prevChild=t,this._firstChild===e&&(this._firstChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.addChildAbove=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.nextChild.prevChild=t,t.nextChild=e.nextChild,t.prevChild=e,e.nextChild=t,this._lastChild===e&&(this._lastChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e&&t.parent===this&&e.parent===this){var i=t,n=i.prevChild,r=i.nextChild;t.prevChild=e.prevChild,t.nextChild=e.nextChild,e.prevChild=n,e.nextChild=r,this._firstChild===t?this._firstChild=e:this._firstChild===e&&(this._firstChild=t),this._lastChild===t?this._lastChild=e:this._lastChild===e&&(this._lastChild=t),this.onChildrenChange()}},e.prototype.getChildIndex=function(t){for(var e=0,i=this._firstChild;i&&i!==t;)i=i.nextChild,++e;if(!i)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this._childCount)throw new Error("The index "+e+" supplied is out of bounds "+this._childCount);if(t.parent!==this)throw new Error("The supplied DisplayObject must be a child of the caller");if(t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,this._firstChild)if(0===e)this._firstChild.prevChild=t,t.nextChild=this._firstChild,this._firstChild=t;else if(e===this._childCount)this._lastChild.nextChild=t,t.prevChild=this._lastChild,this._lastChild=t;else{for(var i=0,n=this._firstChild;i<e;)n=n.nextChild,++i;n.prevChild.nextChild=t,t.prevChild=n.prevChild,t.nextChild=n,n.prevChild=t}else this._firstChild=this._lastChild=t;this.onChildrenChange(e)},e.prototype.removeChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.removeChild(t[i]);else{var n=t[0];if(n.parent!==this)return null;n.parent=null,n.transform._parentID=-1,n.nextChild&&(n.nextChild.prevChild=n.prevChild),n.prevChild&&(n.prevChild.nextChild=n.nextChild),this._firstChild===n&&(this._firstChild=n.nextChild),this._lastChild===n&&(this._lastChild=n.prevChild),n.nextChild=null,n.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(),n.emit("removed",this),this.emit("childRemoved",n,this)}return t[0]},e.prototype.getChildAt=function(t){if(t<0||t>=this._childCount)throw new Error("getChildAt: Index ("+t+") does not exist.");if(0===t)return this._firstChild;if(t===this._childCount)return this._lastChild;for(var e=0,i=this._firstChild;e<t;)i=i.nextChild,++e;return i},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this._childCount);var i=t,n=e,r=n-i;if(r>0&&r<=n){for(var s=[],a=this._firstChild,o=0;o<=n&&a;++o,a=a.nextChild)o>=i&&s.push(a);var h=s[0].prevChild,l=s[s.length-1].nextChild;l?l.prevChild=h:this._lastChild=h,h?h.nextChild=l:this._firstChild=l;for(o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1),s[o].nextChild=null,s[o].prevChild=null;this._boundsID++,this.onChildrenChange(t);for(o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}if(0===r&&0===this._childCount)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){var t,e;for(this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,t=this._firstChild;t;t=e)e=t.nextChild,t.visible&&t.updateTransform()},e.prototype.calculateBounds=function(){var t,e;for(this._bounds.clear(),this._calculateBounds(),t=this._firstChild;t;t=e)if(e=t.nextChild,t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var i=t._mask.maskObject||t._mask;i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds);this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);var i=He.prototype.getLocalBounds.call(this,t);if(!e){var n=void 0,r=void 0;for(n=this._firstChild;n;n=r)r=n.nextChild,n.visible&&n.updateTransform()}return i},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e,i,n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}for(r&&t.mask.push(this,this._mask),this._render(t),e=this._firstChild;e;e=i)i=e.nextChild,e.render(t);t.batch.flush(),r&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e,i,n=this._filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}for(r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),n&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,i;for(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}}(Ze);!function(t){t[t.Region=0]="Region";t[t.BoundingBox=1]="BoundingBox";t[t.Mesh=2]="Mesh";t[t.LinkedMesh=3]="LinkedMesh";t[t.Path=4]="Path";t[t.Point=5]="Point";t[t.Clipping=6]="Clipping"}(cl||(cl={}));class pl{constructor(t,e=new Array,i=0,n=new DataView(t.buffer)){this.strings=e,this.index=i,this.buffer=n}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}}function fl(t){switch(t.toLowerCase()){case"nearest":return ul.Nearest;case"linear":return ul.Linear;case"mipmap":return ul.MipMap;case"mipmapnearestnearest":return ul.MipMapNearestNearest;case"mipmaplinearnearest":return ul.MipMapLinearNearest;case"mipmapnearestlinear":return ul.MipMapNearestLinear;case"mipmaplinearlinear":return ul.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}}!function(t){t[t.Nearest=9728]="Nearest";t[t.Linear=9729]="Linear";t[t.MipMap=9987]="MipMap";t[t.MipMapNearestNearest=9984]="MipMapNearestNearest";t[t.MipMapLinearNearest=9985]="MipMapLinearNearest";t[t.MipMapNearestLinear=9986]="MipMapNearestLinear";t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(ul||(ul={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat";t[t.ClampToEdge=33071]="ClampToEdge";t[t.Repeat=10497]="Repeat"}(dl||(dl={}));class ml{constructor(){ml.prototype.__init.call(this),ml.prototype.__init2.call(this),ml.prototype.__init3.call(this)}__init(){this.size=null}__init2(){this.names=null}__init3(){this.values=null}get width(){const t=this.texture;return t.trim?t.trim.width:t.orig.width}get height(){const t=this.texture;return t.trim?t.trim.height:t.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const t=this.texture;return t.trim?t.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const t=this.texture;return t.trim?t.trim.y:0}get spineOffsetY(){let t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return 0!==this.texture.rotate}get degrees(){return(360-45*this.texture.rotate)%360}}class _l{constructor(){_l.prototype.__init.call(this),_l.prototype.__init2.call(this),_l.prototype.__init3.call(this),_l.prototype.__init4.call(this),_l.prototype.__init5.call(this),_l.prototype.__init6.call(this),_l.prototype.__init7.call(this),_l.prototype.__init8.call(this),_l.prototype.__init9.call(this),_l.prototype.__init10.call(this)}__init(){this.x=0}__init2(){this.y=0}__init3(){this.width=0}__init4(){this.height=0}__init5(){this.offsetX=0}__init6(){this.offsetY=0}__init7(){this.originalWidth=0}__init8(){this.originalHeight=0}__init9(){this.rotate=0}__init10(){this.index=0}}class gl{__init11(){this.pages=new Array}__init12(){this.regions=new Array}constructor(t,e,i){gl.prototype.__init11.call(this),gl.prototype.__init12.call(this),t&&this.addSpineAtlas(t,e,i)}addTexture(t,e){let i=this.pages,n=null;for(let t=0;t<i.length;t++)if(i[t].baseTexture===e.baseTexture){n=i[t];break}if(null===n){n=new xl,n.name="texturePage";let t=e.baseTexture;n.width=t.realWidth,n.height=t.realHeight,n.baseTexture=t,n.minFilter=n.magFilter=ul.Nearest,n.uWrap=dl.ClampToEdge,n.vWrap=dl.ClampToEdge,i.push(n)}let r=new vl;return r.name=t,r.page=n,r.texture=e,r.index=-1,this.regions.push(r),r}addTextureHash(t,e){for(let i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])}addSpineAtlas(t,e,i){return this.load(t,e,i)}load(t,e,i){if(null==e)throw new Error("textureLoader cannot be null.");let n=new yl(t),r=new Array(4),s=null,a={},o=null;a.size=()=>{s.width=parseInt(r[1]),s.height=parseInt(r[2])},a.format=()=>{},a.filter=()=>{s.minFilter=fl(r[1]),s.magFilter=fl(r[2])},a.repeat=()=>{-1!=r[1].indexOf("x")&&(s.uWrap=dl.Repeat),-1!=r[1].indexOf("y")&&(s.vWrap=dl.Repeat)},a.pma=()=>{s.pma="true"==r[1]};let h={xy:()=>{o.x=parseInt(r[1]),o.y=parseInt(r[2])},size:()=>{o.width=parseInt(r[1]),o.height=parseInt(r[2])},bounds:()=>{o.x=parseInt(r[1]),o.y=parseInt(r[2]),o.width=parseInt(r[3]),o.height=parseInt(r[4])},offset:()=>{o.offsetX=parseInt(r[1]),o.offsetY=parseInt(r[2])},orig:()=>{o.originalWidth=parseInt(r[1]),o.originalHeight=parseInt(r[2])},offsets:()=>{o.offsetX=parseInt(r[1]),o.offsetY=parseInt(r[2]),o.originalWidth=parseInt(r[3]),o.originalHeight=parseInt(r[4])},rotate:()=>{let t=r[1],e=0;e="true"==t.toLocaleLowerCase()?6:"false"==t.toLocaleLowerCase()?0:(720-parseFloat(t))%360/45,o.rotate=e},index:()=>{o.index=parseInt(r[1])}},l=n.readLine();for(;null!=l&&0==l.trim().length;)l=n.readLine();for(;null!=l&&0!=l.trim().length&&0!=n.readEntry(r,l);)l=n.readLine();let c=()=>{for(;;){if(null==l)return i&&i(this);if(0==l.trim().length)s=null,l=n.readLine();else{if(null===s){for(s=new xl,s.name=l.trim();0!=n.readEntry(r,l=n.readLine());){let t=a[r[0]];t&&t()}this.pages.push(s),e(s.name,t=>{if(null===t)return this.pages.splice(this.pages.indexOf(s),1),i&&i(null);s.baseTexture=t,s.pma&&(t.alphaMode=St.PMA),t.valid||t.setSize(s.width,s.height),this.pages.push(s),s.setFilters(),s.width&&s.height||(s.width=t.realWidth,s.height=t.realHeight,s.width&&s.height||console.log("ERROR spine atlas page "+s.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()}),this.pages.push(s);break}{o=new _l;let t=new vl;t.name=l,t.page=s;let e=null,i=null;for(;;){let t=n.readEntry(r,l=n.readLine());if(0==t)break;let s=h[r[0]];if(s)s();else{null==e&&(e=[],i=[]),e.push(r[0]);let n=[];for(let e=0;e<t;e++)n.push(parseInt(r[e+1]));i.push(n)}}0==o.originalWidth&&0==o.originalHeight&&(o.originalWidth=o.width,o.originalHeight=o.height);let a=s.baseTexture.resolution;o.x/=a,o.y/=a,o.width/=a,o.height/=a,o.originalWidth/=a,o.originalHeight/=a,o.offsetX/=a,o.offsetY/=a;const c=o.rotate%4!=0;let u=new Ae(o.x,o.y,c?o.height:o.width,c?o.width:o.height),d=new Ae(0,0,o.originalWidth,o.originalHeight),p=new Ae(o.offsetX,o.originalHeight-o.height-o.offsetY,o.width,o.height);t.texture=new ki(t.page.baseTexture,u,d,p,o.rotate),t.index=o.index,t.texture.updateUvs(),this.regions.push(t)}}}};c()}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()}}class yl{__init13(){this.index=0}constructor(t){yl.prototype.__init13.call(this),this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(null==e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let n=1,r=i+1;;n++){let i=e.indexOf(",",r);if(-1==i)return t[n]=e.substr(r).trim(),n;if(t[n]=e.substr(r,i-r).trim(),r=i+1,4==n)return 4}}}class xl{constructor(){xl.prototype.__init14.call(this),xl.prototype.__init15.call(this),xl.prototype.__init16.call(this),xl.prototype.__init17.call(this)}__init14(){this.minFilter=ul.Nearest}__init15(){this.magFilter=ul.Nearest}__init16(){this.uWrap=dl.ClampToEdge}__init17(){this.vWrap=dl.ClampToEdge}setFilters(){let t=this.baseTexture,e=this.minFilter;e==ul.Linear?t.scaleMode=vt.LINEAR:this.minFilter==ul.Nearest?t.scaleMode=vt.NEAREST:(t.mipmap=Et.POW2,e==ul.MipMapNearestNearest?t.scaleMode=vt.NEAREST:t.scaleMode=vt.LINEAR)}}class vl extends ml{}let bl=(El=new Float32Array(1),function(t){return El[0]=t,El[0]});var El;let Sl=Math.fround||bl;class Tl{constructor(){Tl.prototype.__init.call(this)}__init(){this.array=new Array}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}}class wl{constructor(){wl.prototype.__init2.call(this),wl.prototype.__init3.call(this)}__init2(){this.entries={}}__init3(){this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,n=t.length;i<n;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class Al{static __initStatic(){this.WHITE=new Al(1,1,1,1)}static __initStatic2(){this.RED=new Al(1,0,0,1)}static __initStatic3(){this.GREEN=new Al(0,1,0,1)}static __initStatic4(){this.BLUE=new Al(0,0,1,1)}static __initStatic5(){this.MAGENTA=new Al(1,0,1,1)}constructor(t=0,e=0,i=0,n=0){this.r=t,this.g=e,this.b=i,this.a=n}set(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new Al).setFromString(t)}}Al.__initStatic(),Al.__initStatic2(),Al.__initStatic3(),Al.__initStatic4(),Al.__initStatic5();class Rl{static __initStatic6(){this.PI=3.1415927}static __initStatic7(){this.PI2=2*Rl.PI}static __initStatic8(){this.radiansToDegrees=180/Rl.PI}static __initStatic9(){this.radDeg=Rl.radiansToDegrees}static __initStatic10(){this.degreesToRadians=Rl.PI/180}static __initStatic11(){this.degRad=Rl.degreesToRadians}static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*Rl.degRad)}static sinDeg(t){return Math.sin(t*Rl.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return Rl.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let n=Math.random(),r=e-t;return n<=(i-t)/r?t+Math.sqrt(n*r*(i-t)):e-Math.sqrt((1-n)*r*(e-i))}}Rl.__initStatic6(),Rl.__initStatic7(),Rl.__initStatic8(),Rl.__initStatic9(),Rl.__initStatic10(),Rl.__initStatic11();class Cl extends class{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}}{__init4(){this.power=2}constructor(t){super(),Cl.prototype.__init4.call(this),this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}class Il extends Cl{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}class Ml{static __initStatic12(){this.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array}static arrayCopy(t,e,i,n,r){for(let s=e,a=n;s<e+r;s++,a++)i[a]=t[s]}static arrayFill(t,e,i,n){for(let r=e;r<i;r++)t[r]=n}static setArraySize(t,e,i=0){let n=t.length;if(n==e)return t;if(t.length=e,n<e)for(let r=n;r<e;r++)t[r]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:Ml.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let n=0;n<t;n++)i[n]=e;return i}static newFloatArray(t){if(Ml.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(Ml.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return Ml.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return Ml.SUPPORTS_TYPED_ARRAYS?Sl(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(let i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}Ml.__initStatic12();class Pl{__init5(){this.items=new Array}constructor(t){Pl.prototype.__init5.call(this),this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class Ol{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}let Dl=!0,Fl=!1,kl=!0,Nl=0,Ll=[0,0,0];class Bl extends La{constructor(...t){super(...t),Bl.prototype.__init.call(this),Bl.prototype.__init2.call(this)}__init(){this.region=null}__init2(){this.attachment=null}}class Xl extends Mh{__init3(){this.region=null}__init4(){this.attachment=null}constructor(t,e,i,n,r){super(t,e,i,n,r),Xl.prototype.__init3.call(this),Xl.prototype.__init4.call(this)}}class Ul extends Ze{constructor(t){if(super(),!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=t,this.createSkeleton(t),this.slotContainers=[],this.tempClipContainers=[];for(let t=0,e=this.skeleton.slots.length;t<e;t++){let e=this.skeleton.slots[t],i=e.getAttachment(),n=this.newContainer();if(this.slotContainers.push(n),this.addChild(n),this.tempClipContainers.push(null),i)if(i.type===cl.Region){let t=i.region.name,r=this.createSprite(e,i,t);e.currentSprite=r,e.currentSpriteName=t,n.addChild(r)}else if(i.type===cl.Mesh){let t=this.createMesh(e,i);e.currentMesh=t,e.currentMeshId=i.id,e.currentMeshName=i.name,n.addChild(t)}else i.type===cl.Clipping&&(this.createGraphics(e,i),n.addChild(e.clippingContainer),n.addChild(e.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?Ul.prototype.autoUpdateTransform:Ze.prototype.updateTransform)}get tint(){return Wt(this.tintRgb)}set tint(t){this.tintRgb=Vt(t,this.tintRgb)}get delayLimit(){return(void 0!==this.localDelayLimit?this.localDelayLimit:Nl)||Number.MAX_VALUE}update(t){let e=this.delayLimit;if(t>e&&(t=e),this.state.update(t),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();let i=this.skeleton.slots,n=this.color,r=null,s=null;n?(r=n.light,s=n.dark):r=this.tintRgb;for(let t=0,e=i.length;t<e;t++){let e=i[t],n=e.getAttachment(),a=this.slotContainers[t];if(!n){a.visible=!1;continue}let o=null,h=n.color;switch(n.type){case cl.Region:let t=n.region;if(t){e.currentMesh&&(e.currentMesh.visible=!1,e.currentMesh=null,e.currentMeshId=void 0,e.currentMeshName=void 0);let i=t;if(e.currentSpriteName&&e.currentSpriteName===i.name)e.currentSpriteName!==i.name||e.hackRegion||this.setSpriteRegion(n,e.currentSprite,t);else{let t=i.name;if(e.currentSprite&&(e.currentSprite.visible=!1),e.sprites=e.sprites||{},void 0!==e.sprites[t])e.sprites[t].visible=!0;else{let i=this.createSprite(e,n,t);a.addChild(i)}e.currentSprite=e.sprites[t],e.currentSpriteName=t}}a.transform.setFromMatrix(e.bone.matrix),e.currentSprite.color?o=e.currentSprite.color:(Ll[0]=r[0]*e.color.r*h.r,Ll[1]=r[1]*e.color.g*h.g,Ll[2]=r[2]*e.color.b*h.b,e.currentSprite.tint=Wt(Ll)),e.currentSprite.blendMode=e.blendMode;break;case cl.Mesh:if(e.currentSprite){e.currentSprite.visible=!1,e.currentSprite=null,e.currentSpriteName=void 0;const t=new Ve;t._parentID=-1,t._worldID=a.transform._worldID,a.transform=t}const i=n.id;if(!e.currentMeshId||e.currentMeshId!==i){let t=i;if(e.currentMesh&&(e.currentMesh.visible=!1),e.meshes=e.meshes||{},void 0!==e.meshes[t])e.meshes[t].visible=!0;else{let t=this.createMesh(e,n);a.addChild(t)}e.currentMesh=e.meshes[t],e.currentMeshName=n.name,e.currentMeshId=t}n.computeWorldVerticesOld(e,e.currentMesh.vertices),e.currentMesh.color?o=e.currentMesh.color:(Ll[0]=r[0]*e.color.r*h.r,Ll[1]=r[1]*e.color.g*h.g,Ll[2]=r[2]*e.color.b*h.b,e.currentMesh.tint=Wt(Ll)),e.currentMesh.blendMode=e.blendMode;break;case cl.Clipping:e.currentGraphics||(this.createGraphics(e,n),a.addChild(e.clippingContainer),a.addChild(e.currentGraphics)),this.updateGraphics(e,n),a.alpha=1,a.visible=!0;continue;default:a.visible=!1;continue}if(a.visible=!0,o){let t=e.color.r*h.r,i=e.color.g*h.g,n=e.color.b*h.b;o.setLight(r[0]*t+s[0]*(1-t),r[1]*i+s[1]*(1-i),r[2]*n+s[2]*(1-n)),e.darkColor?(t=e.darkColor.r,i=e.darkColor.g,n=e.darkColor.b):(t=0,i=0,n=0),o.setDark(r[0]*t+s[0]*(1-t),r[1]*i+s[1]*(1-i),r[2]*n+s[2]*(1-n))}a.alpha=e.color.a}let a=this.skeleton.drawOrder,o=null,h=null;for(let t=0,e=a.length;t<e;t++){let e=i[a[t].data.index],n=this.slotContainers[a[t].data.index];if(h||null!==n.parent&&n.parent!==this&&(n.parent.removeChild(n),n.parent=this),e.currentGraphics&&e.getAttachment())h=e.clippingContainer,o=e.getAttachment(),h.children.length=0,this.children[t]=n,o.endSlot===e.data&&(o.endSlot=null);else if(h){let i=this.tempClipContainers[t];i||(i=this.tempClipContainers[t]=this.newContainer(),i.visible=!1),this.children[t]=i,n.parent=null,h.addChild(n),o.endSlot==e.data&&(h.renderable=!0,h=null,o=null)}else this.children[t]=n}}setSpriteRegion(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,e.rotation=t.rotation*Rl.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight))}setMeshRegion(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,i.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))}autoUpdateTransform(){if(kl){this.lastTime=this.lastTime||Date.now();let t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;Ze.prototype.updateTransform.call(this)}createSprite(t,e,i){let n=e.region;t.hackAttachment===e&&(n=t.hackRegion);let r=n.texture,s=this.newSprite(r);return s.anchor.set(.5),this.setSpriteRegion(e,s,e.region),t.sprites=t.sprites||{},t.sprites[i]=s,s}createMesh(t,e){let i=e.region;t.hackAttachment===e&&(i=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);let n=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),mt.TRIANGLES);return void 0!==n._canvasPadding&&(n._canvasPadding=1.5),n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.id]=n,n}static __initStatic(){this.clippingPolygon=[]}createGraphics(t,e){let i=this.newGraphics(),n=new Ie([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i}updateGraphics(t,e){let i=t.currentGraphics.geometry,n=i.graphicsData[0].shape.points,r=e.worldVerticesLength;n.length=r,e.computeWorldVertices(t,0,r,n,0,2),i.invalidate()}hackTextureBySlotIndex(t,e=null,i=null){let n=this.skeleton.slots[t];if(!n)return!1;let r=n.getAttachment(),s=r.region;return e?(s=new ml,s.texture=e,s.size=i,n.hackRegion=s,n.hackAttachment=r):(n.hackRegion=null,n.hackAttachment=null),n.currentSprite&&n.currentSprite.region!=s?(this.setSpriteRegion(r,n.currentSprite,s),n.currentSprite.region=s):n.currentMesh&&n.currentMesh.region!=s&&this.setMeshRegion(r,n.currentMesh,s),!0}hackTextureBySlotName(t,e=null,i=null){let n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)}hackTextureAttachment(t,e,i,n=null){const r=this.skeleton.findSlotIndex(t),s=this.skeleton.getAttachmentByName(t,e);s.region.texture=i;const a=this.skeleton.slots[r];if(!a)return!1;const o=a.getAttachment();if(e===o.name){let t=s.region;return i?(t=new ml,t.texture=i,t.size=n,a.hackRegion=t,a.hackAttachment=o):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=t?(this.setSpriteRegion(o,a.currentSprite,t),a.currentSprite.region=t):a.currentMesh&&a.currentMesh.region!=t&&this.setMeshRegion(o,a.currentMesh,t),!0}return!1}newContainer(){return new Ze}newSprite(t){return new Bl(t)}newGraphics(){return new Pa}newMesh(t,e,i,n,r){return new Xl(t,e,i,n,r)}transformHack(){return 1}hackAttachmentGroups(t,e,i){if(!t)return;const n=[],r=[];for(let s=0,a=this.skeleton.slots.length;s<a;s++){const a=this.skeleton.slots[s],o=a.currentSpriteName||a.currentMeshName||"",h=a.currentSprite||a.currentMesh;o.endsWith(t)?(h.parentGroup=e,r.push(h)):i&&h&&(h.parentGroup=i,n.push(h))}return[n,r]}destroy(t){for(let e=0,i=this.skeleton.slots.length;e<i;e++){let i=this.skeleton.slots[e];for(let e in i.meshes)i.meshes[e].destroy(t);i.meshes=null;for(let e in i.sprites)i.sprites[e].destroy(t);i.sprites=null}for(let e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(t)}}Ul.__initStatic(),Object.defineProperty(Ul.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}}),as.setExtensionXhrType("skel",as.XHR_RESPONSE_TYPE.BUFFER);function Yl(t){return function(e,i){let n=t[e]||t.default;n&&n.baseTexture?i(n.baseTexture):i(n)}}
/*!
 * @pixi-spine/runtime-3.8 - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:22 UTC
 *
 * @pixi-spine/runtime-3.8 is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */class Vl{constructor(t){if(null==t)throw new Error("name cannot be null.");this.name=t}}class Gl extends Vl{static __initStatic(){this.nextID=0}__init(){this.id=(65535&Gl.nextID++)<<11}__init2(){this.worldVerticesLength=0}__init3(){this.deformAttachment=this}constructor(t){super(t),Gl.prototype.__init.call(this),Gl.prototype.__init2.call(this),Gl.prototype.__init3.call(this)}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,i,n,r,s){i=r+(i>>1)*s;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(null==l){o.length>0&&(h=o);let a=t.bone.matrix,l=a.tx,c=a.ty,u=a.a,d=a.c,p=a.b,f=a.d;for(let t=e,a=r;a<i;t+=2,a+=s){let e=h[t],i=h[t+1];n[a]=e*u+i*d+l,n[a+1]=e*p+i*f+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,e+=3){let t=d[l[c]].matrix,n=h[e],s=h[e+1],a=h[e+2];i+=(n*t.a+s*t.c+t.tx)*a,r+=(n*t.b+s*t.d+t.ty)*a}n[t]=i,n[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,a+=3,o+=2){let e=d[l[c]].matrix,n=h[a]+t[o],s=h[a+1]+t[o+1],u=h[a+2];i+=(n*e.a+s*e.c+e.tx)*u,r+=(n*e.b+s*e.d+e.ty)*u}n[e]=i,n[e+1]=r}}}copyTo(t){null!=this.bones?(t.bones=new Array(this.bones.length),Ml.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=Ml.newFloatArray(this.vertices.length),Ml.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}}Gl.__initStatic();class jl extends Gl{__init(){this.type=cl.BoundingBox}__init2(){this.color=new Al(1,1,1,1)}constructor(t){super(t),jl.prototype.__init.call(this),jl.prototype.__init2.call(this)}copy(){let t=new jl(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Wl extends Gl{__init(){this.type=cl.Clipping}__init2(){this.color=new Al(.2275,.2275,.8078,1)}constructor(t){super(t),Wl.prototype.__init.call(this),Wl.prototype.__init2.call(this)}copy(){let t=new Wl(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Hl extends Gl{__init(){this.type=cl.Mesh}__init2(){this.color=new Al(1,1,1,1)}__init3(){this.tempColor=new Al(0,0,0,0)}constructor(t){super(t),Hl.prototype.__init.call(this),Hl.prototype.__init2.call(this),Hl.prototype.__init3.call(this)}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(null!=this.parentMesh)return this.newLinkedMesh();let t=new Hl(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Ml.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Ml.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),Ml.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new Hl(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t}}class zl extends Gl{__init(){this.type=cl.Path}__init2(){this.closed=!1}__init3(){this.constantSpeed=!1}__init4(){this.color=new Al(1,1,1,1)}constructor(t){super(t),zl.prototype.__init.call(this),zl.prototype.__init2.call(this),zl.prototype.__init3.call(this),zl.prototype.__init4.call(this)}copy(){let t=new zl(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Ml.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class ql extends Gl{__init(){this.type=cl.Point}__init2(){this.color=new Al(.38,.94,0,1)}constructor(t){super(t),ql.prototype.__init.call(this),ql.prototype.__init2.call(this)}computeWorldPosition(t,e){const i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix;let i=Rl.cosDeg(this.rotation),n=Rl.sinDeg(this.rotation),r=i*e.a+n*e.c,s=i*e.b+n*e.d;return Math.atan2(s,r)*Rl.radDeg}copy(){let t=new ql(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class Zl extends Vl{__init(){this.type=cl.Region}static __initStatic(){this.OX1=0}static __initStatic2(){this.OY1=1}static __initStatic3(){this.OX2=2}static __initStatic4(){this.OY2=3}static __initStatic5(){this.OX3=4}static __initStatic6(){this.OY3=5}static __initStatic7(){this.OX4=6}static __initStatic8(){this.OY4=7}static __initStatic9(){this.X1=0}static __initStatic10(){this.Y1=1}static __initStatic11(){this.C1R=2}static __initStatic12(){this.C1G=3}static __initStatic13(){this.C1B=4}static __initStatic14(){this.C1A=5}static __initStatic15(){this.U1=6}static __initStatic16(){this.V1=7}static __initStatic17(){this.X2=8}static __initStatic18(){this.Y2=9}static __initStatic19(){this.C2R=10}static __initStatic20(){this.C2G=11}static __initStatic21(){this.C2B=12}static __initStatic22(){this.C2A=13}static __initStatic23(){this.U2=14}static __initStatic24(){this.V2=15}static __initStatic25(){this.X3=16}static __initStatic26(){this.Y3=17}static __initStatic27(){this.C3R=18}static __initStatic28(){this.C3G=19}static __initStatic29(){this.C3B=20}static __initStatic30(){this.C3A=21}static __initStatic31(){this.U3=22}static __initStatic32(){this.V3=23}static __initStatic33(){this.X4=24}static __initStatic34(){this.Y4=25}static __initStatic35(){this.C4R=26}static __initStatic36(){this.C4G=27}static __initStatic37(){this.C4B=28}static __initStatic38(){this.C4A=29}static __initStatic39(){this.U4=30}static __initStatic40(){this.V4=31}__init2(){this.x=0}__init3(){this.y=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.rotation=0}__init7(){this.width=0}__init8(){this.height=0}__init9(){this.color=new Al(1,1,1,1)}__init10(){this.offset=Ml.newFloatArray(8)}__init11(){this.uvs=Ml.newFloatArray(8)}__init12(){this.tempColor=new Al(1,1,1,1)}constructor(t){super(t),Zl.prototype.__init.call(this),Zl.prototype.__init2.call(this),Zl.prototype.__init3.call(this),Zl.prototype.__init4.call(this),Zl.prototype.__init5.call(this),Zl.prototype.__init6.call(this),Zl.prototype.__init7.call(this),Zl.prototype.__init8.call(this),Zl.prototype.__init9.call(this),Zl.prototype.__init10.call(this),Zl.prototype.__init11.call(this),Zl.prototype.__init12.call(this)}updateOffset(){let t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,r=i+this.region.width*t,s=n+this.region.height*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,c=i*h,u=n*o+this.y,d=n*h,p=r*o+this.x,f=r*h,m=s*o+this.y,_=s*h,g=this.offset;g[Zl.OX1]=l-d,g[Zl.OY1]=u+c,g[Zl.OX2]=l-_,g[Zl.OY2]=m+c,g[Zl.OX3]=p-_,g[Zl.OY3]=m+f,g[Zl.OX4]=p-d,g[Zl.OY4]=u+f}setRegion(t){this.region=t;let e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,n){let r=this.offset,s=t.matrix,a=s.tx,o=s.ty,h=s.a,l=s.c,c=s.b,u=s.d,d=0,p=0;d=r[Zl.OX1],p=r[Zl.OY1],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[Zl.OX2],p=r[Zl.OY2],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[Zl.OX3],p=r[Zl.OY3],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[Zl.OX4],p=r[Zl.OY4],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o}copy(){let t=new Zl(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Ml.arrayCopy(this.uvs,0,t.uvs,0,8),Ml.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}}Zl.__initStatic(),Zl.__initStatic2(),Zl.__initStatic3(),Zl.__initStatic4(),Zl.__initStatic5(),Zl.__initStatic6(),Zl.__initStatic7(),Zl.__initStatic8(),Zl.__initStatic9(),Zl.__initStatic10(),Zl.__initStatic11(),Zl.__initStatic12(),Zl.__initStatic13(),Zl.__initStatic14(),Zl.__initStatic15(),Zl.__initStatic16(),Zl.__initStatic17(),Zl.__initStatic18(),Zl.__initStatic19(),Zl.__initStatic20(),Zl.__initStatic21(),Zl.__initStatic22(),Zl.__initStatic23(),Zl.__initStatic24(),Zl.__initStatic25(),Zl.__initStatic26(),Zl.__initStatic27(),Zl.__initStatic28(),Zl.__initStatic29(),Zl.__initStatic30(),Zl.__initStatic31(),Zl.__initStatic32(),Zl.__initStatic33(),Zl.__initStatic34(),Zl.__initStatic35(),Zl.__initStatic36(),Zl.__initStatic37(),Zl.__initStatic38(),Zl.__initStatic39(),Zl.__initStatic40();class Kl{__init(){this.jitterX=0}__init2(){this.jitterY=0}constructor(t,e){Kl.prototype.__init.call(this),Kl.prototype.__init2.call(this),this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,i,n){t.x+=Rl.randomTriangular(-this.jitterX,this.jitterY),t.y+=Rl.randomTriangular(-this.jitterX,this.jitterY)}end(){}}class Jl{static __initStatic(){this.interpolation=new Il(2)}__init(){this.centerX=0}__init2(){this.centerY=0}__init3(){this.radius=0}__init4(){this.angle=0}__init5(){this.worldX=0}__init6(){this.worldY=0}constructor(t){Jl.prototype.__init.call(this),Jl.prototype.__init2.call(this),Jl.prototype.__init3.call(this),Jl.prototype.__init4.call(this),Jl.prototype.__init5.call(this),Jl.prototype.__init6.call(this),this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,i,n){let r=this.angle*Rl.degreesToRadians,s=t.x-this.worldX,a=t.y-this.worldY,o=Math.sqrt(s*s+a*a);if(o<this.radius){let e=Jl.interpolation.apply(0,r,(this.radius-o)/this.radius),i=Math.cos(e),n=Math.sin(e);t.x=i*s-n*a+this.worldX,t.y=n*s+i*a+this.worldY}}end(){}}Jl.__initStatic();class $l{constructor(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=i}hasTimeline(t){return 1==this.timelineIds[t]}apply(t,e,i,n,r,s,a,o){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let n=0,l=h.length;n<l;n++)h[n].apply(t,e,i,r,s,a,o)}static binarySearch(t,e,i=1){let n=0,r=t.length/i-2;if(0==r)return i;let s=r>>>1;for(;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}}static linearSearch(t,e,i){for(let n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1}}var Ql,tc,ec;!function(t){t[t.setup=0]="setup";t[t.first=1]="first";t[t.replace=2]="replace";t[t.add=3]="add"}(Ql||(Ql={})),function(t){t[t.mixIn=0]="mixIn";t[t.mixOut=1]="mixOut"}(tc||(tc={})),function(t){t[t.rotate=0]="rotate";t[t.translate=1]="translate";t[t.scale=2]="scale";t[t.shear=3]="shear";t[t.attachment=4]="attachment";t[t.color=5]="color";t[t.deform=6]="deform";t[t.event=7]="event";t[t.drawOrder=8]="drawOrder";t[t.ikConstraint=9]="ikConstraint";t[t.transformConstraint=10]="transformConstraint";t[t.pathConstraintPosition=11]="pathConstraintPosition";t[t.pathConstraintSpacing=12]="pathConstraintSpacing";t[t.pathConstraintMix=13]="pathConstraintMix";t[t.twoColor=14]="twoColor"}(ec||(ec={}));class ic{static __initStatic(){this.LINEAR=0}static __initStatic2(){this.STEPPED=1}static __initStatic3(){this.BEZIER=2}static __initStatic4(){this.BEZIER_SIZE=19}constructor(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=Ml.newFloatArray((t-1)*ic.BEZIER_SIZE)}getFrameCount(){return this.curves.length/ic.BEZIER_SIZE+1}setLinear(t){this.curves[t*ic.BEZIER_SIZE]=ic.LINEAR}setStepped(t){this.curves[t*ic.BEZIER_SIZE]=ic.STEPPED}getCurveType(t){let e=t*ic.BEZIER_SIZE;if(e==this.curves.length)return ic.LINEAR;let i=this.curves[e];return i==ic.LINEAR?ic.LINEAR:i==ic.STEPPED?ic.STEPPED:ic.BEZIER}setCurve(t,e,i,n,r){let s=.03*(2*-e+n),a=.03*(2*-i+r),o=.006*(3*(e-n)+1),h=.006*(3*(i-r)+1),l=2*s+o,c=2*a+h,u=.3*e+s+.16666667*o,d=.3*i+a+.16666667*h,p=t*ic.BEZIER_SIZE,f=this.curves;f[p++]=ic.BEZIER;let m=u,_=d;for(let t=p+ic.BEZIER_SIZE-1;p<t;p+=2)f[p]=m,f[p+1]=_,u+=l,d+=c,l+=o,c+=h,m+=u,_+=d}getCurvePercent(t,e){e=Rl.clamp(e,0,1);let i=this.curves,n=t*ic.BEZIER_SIZE,r=i[n];if(r==ic.LINEAR)return e;if(r==ic.STEPPED)return 0;n++;let s=0;for(let t=n,r=n+ic.BEZIER_SIZE-1;n<r;n+=2)if(s=i[n],s>=e){let r,a;return n==t?(r=0,a=0):(r=i[n-2],a=i[n-1]),a+(i[n+1]-a)*(e-r)/(s-r)}let a=i[n-1];return a+(1-a)*(e-s)/(1-s)}}ic.__initStatic(),ic.__initStatic2(),ic.__initStatic3(),ic.__initStatic4();class nc extends ic{static __initStatic5(){this.ENTRIES=2}static __initStatic6(){this.PREV_TIME=-2}static __initStatic7(){this.PREV_ROTATION=-1}static __initStatic8(){this.ROTATION=1}constructor(t){super(t),this.frames=Ml.newFloatArray(t<<1)}getPropertyId(){return(ec.rotate<<24)+this.boneIndex}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+nc.ROTATION]=i}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return void(h.rotation=h.data.rotation);case Ql.first:let t=h.data.rotation-h.rotation;h.rotation+=(t-360*(16384-(16384.499999999996-t/360|0)))*r}return}if(i>=o[o.length-nc.ENTRIES]){let t=o[o.length+nc.PREV_ROTATION];switch(s){case Ql.setup:h.rotation=h.data.rotation+t*r;break;case Ql.first:case Ql.replace:t+=h.data.rotation-h.rotation,t-=360*(16384-(16384.499999999996-t/360|0));case Ql.add:h.rotation+=t*r}return}let l=$l.binarySearch(o,i,nc.ENTRIES),c=o[l+nc.PREV_ROTATION],u=o[l],d=this.getCurvePercent((l>>1)-1,1-(i-u)/(o[l+nc.PREV_TIME]-u)),p=o[l+nc.ROTATION]-c;switch(p=c+(p-360*(16384-(16384.499999999996-p/360|0)))*d,s){case Ql.setup:h.rotation=h.data.rotation+(p-360*(16384-(16384.499999999996-p/360|0)))*r;break;case Ql.first:case Ql.replace:p+=h.data.rotation-h.rotation;case Ql.add:h.rotation+=(p-360*(16384-(16384.499999999996-p/360|0)))*r}}}nc.__initStatic5(),nc.__initStatic6(),nc.__initStatic7(),nc.__initStatic8();class rc extends ic{static __initStatic9(){this.ENTRIES=3}static __initStatic10(){this.PREV_TIME=-3}static __initStatic11(){this.PREV_X=-2}static __initStatic12(){this.PREV_Y=-1}static __initStatic13(){this.X=1}static __initStatic14(){this.Y=2}constructor(t){super(t),this.frames=Ml.newFloatArray(t*rc.ENTRIES)}getPropertyId(){return(ec.translate<<24)+this.boneIndex}setFrame(t,e,i,n){t*=rc.ENTRIES,this.frames[t]=e,this.frames[t+rc.X]=i,this.frames[t+rc.Y]=n}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return h.x=h.data.x,void(h.y=h.data.y);case Ql.first:h.x+=(h.data.x-h.x)*r,h.y+=(h.data.y-h.y)*r}return}let l=0,c=0;if(i>=o[o.length-rc.ENTRIES])l=o[o.length+rc.PREV_X],c=o[o.length+rc.PREV_Y];else{let t=$l.binarySearch(o,i,rc.ENTRIES);l=o[t+rc.PREV_X],c=o[t+rc.PREV_Y];let e=o[t],n=this.getCurvePercent(t/rc.ENTRIES-1,1-(i-e)/(o[t+rc.PREV_TIME]-e));l+=(o[t+rc.X]-l)*n,c+=(o[t+rc.Y]-c)*n}switch(s){case Ql.setup:h.x=h.data.x+l*r,h.y=h.data.y+c*r;break;case Ql.first:case Ql.replace:h.x+=(h.data.x+l-h.x)*r,h.y+=(h.data.y+c-h.y)*r;break;case Ql.add:h.x+=l*r,h.y+=c*r}}}rc.__initStatic9(),rc.__initStatic10(),rc.__initStatic11(),rc.__initStatic12(),rc.__initStatic13(),rc.__initStatic14();class sc extends rc{constructor(t){super(t)}getPropertyId(){return(ec.scale<<24)+this.boneIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case Ql.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let l=0,c=0;if(i>=o[o.length-sc.ENTRIES])l=o[o.length+sc.PREV_X]*h.data.scaleX,c=o[o.length+sc.PREV_Y]*h.data.scaleY;else{let t=$l.binarySearch(o,i,sc.ENTRIES);l=o[t+sc.PREV_X],c=o[t+sc.PREV_Y];let e=o[t],n=this.getCurvePercent(t/sc.ENTRIES-1,1-(i-e)/(o[t+sc.PREV_TIME]-e));l=(l+(o[t+sc.X]-l)*n)*h.data.scaleX,c=(c+(o[t+sc.Y]-c)*n)*h.data.scaleY}if(1==r)s==Ql.add?(h.scaleX+=l-h.data.scaleX,h.scaleY+=c-h.data.scaleY):(h.scaleX=l,h.scaleY=c);else{let t=0,e=0;if(a==tc.mixOut)switch(s){case Ql.setup:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-e)*r;break;case Ql.first:case Ql.replace:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-e)*r;break;case Ql.add:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-h.data.scaleX)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-h.data.scaleY)*r}else switch(s){case Ql.setup:t=Math.abs(h.data.scaleX)*Rl.signum(l),e=Math.abs(h.data.scaleY)*Rl.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case Ql.first:case Ql.replace:t=Math.abs(h.scaleX)*Rl.signum(l),e=Math.abs(h.scaleY)*Rl.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case Ql.add:t=Rl.signum(l),e=Rl.signum(c),h.scaleX=Math.abs(h.scaleX)*t+(l-Math.abs(h.data.scaleX)*t)*r,h.scaleY=Math.abs(h.scaleY)*e+(c-Math.abs(h.data.scaleY)*e)*r}}}}class ac extends rc{constructor(t){super(t)}getPropertyId(){return(ec.shear<<24)+this.boneIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case Ql.first:h.shearX+=(h.data.shearX-h.shearX)*r,h.shearY+=(h.data.shearY-h.shearY)*r}return}let l=0,c=0;if(i>=o[o.length-ac.ENTRIES])l=o[o.length+ac.PREV_X],c=o[o.length+ac.PREV_Y];else{let t=$l.binarySearch(o,i,ac.ENTRIES);l=o[t+ac.PREV_X],c=o[t+ac.PREV_Y];let e=o[t],n=this.getCurvePercent(t/ac.ENTRIES-1,1-(i-e)/(o[t+ac.PREV_TIME]-e));l+=(o[t+ac.X]-l)*n,c+=(o[t+ac.Y]-c)*n}switch(s){case Ql.setup:h.shearX=h.data.shearX+l*r,h.shearY=h.data.shearY+c*r;break;case Ql.first:case Ql.replace:h.shearX+=(h.data.shearX+l-h.shearX)*r,h.shearY+=(h.data.shearY+c-h.shearY)*r;break;case Ql.add:h.shearX+=l*r,h.shearY+=c*r}}}class oc extends ic{static __initStatic15(){this.ENTRIES=5}static __initStatic16(){this.PREV_TIME=-5}static __initStatic17(){this.PREV_R=-4}static __initStatic18(){this.PREV_G=-3}static __initStatic19(){this.PREV_B=-2}static __initStatic20(){this.PREV_A=-1}static __initStatic21(){this.R=1}static __initStatic22(){this.G=2}static __initStatic23(){this.B=3}static __initStatic24(){this.A=4}constructor(t){super(t),this.frames=Ml.newFloatArray(t*oc.ENTRIES)}getPropertyId(){return(ec.color<<24)+this.slotIndex}setFrame(t,e,i,n,r,s){t*=oc.ENTRIES,this.frames[t]=e,this.frames[t+oc.R]=i,this.frames[t+oc.G]=n,this.frames[t+oc.B]=r,this.frames[t+oc.A]=s}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames;if(i<h[0]){switch(s){case Ql.setup:return void o.color.setFromColor(o.data.color);case Ql.first:let t=o.color,e=o.data.color;t.add((e.r-t.r)*r,(e.g-t.g)*r,(e.b-t.b)*r,(e.a-t.a)*r)}return}let l=0,c=0,u=0,d=0;if(i>=h[h.length-oc.ENTRIES]){let t=h.length;l=h[t+oc.PREV_R],c=h[t+oc.PREV_G],u=h[t+oc.PREV_B],d=h[t+oc.PREV_A]}else{let t=$l.binarySearch(h,i,oc.ENTRIES);l=h[t+oc.PREV_R],c=h[t+oc.PREV_G],u=h[t+oc.PREV_B],d=h[t+oc.PREV_A];let e=h[t],n=this.getCurvePercent(t/oc.ENTRIES-1,1-(i-e)/(h[t+oc.PREV_TIME]-e));l+=(h[t+oc.R]-l)*n,c+=(h[t+oc.G]-c)*n,u+=(h[t+oc.B]-u)*n,d+=(h[t+oc.A]-d)*n}if(1==r)o.color.set(l,c,u,d);else{let t=o.color;s==Ql.setup&&t.setFromColor(o.data.color),t.add((l-t.r)*r,(c-t.g)*r,(u-t.b)*r,(d-t.a)*r)}}}oc.__initStatic15(),oc.__initStatic16(),oc.__initStatic17(),oc.__initStatic18(),oc.__initStatic19(),oc.__initStatic20(),oc.__initStatic21(),oc.__initStatic22(),oc.__initStatic23(),oc.__initStatic24();class hc extends ic{static __initStatic25(){this.ENTRIES=8}static __initStatic26(){this.PREV_TIME=-8}static __initStatic27(){this.PREV_R=-7}static __initStatic28(){this.PREV_G=-6}static __initStatic29(){this.PREV_B=-5}static __initStatic30(){this.PREV_A=-4}static __initStatic31(){this.PREV_R2=-3}static __initStatic32(){this.PREV_G2=-2}static __initStatic33(){this.PREV_B2=-1}static __initStatic34(){this.R=1}static __initStatic35(){this.G=2}static __initStatic36(){this.B=3}static __initStatic37(){this.A=4}static __initStatic38(){this.R2=5}static __initStatic39(){this.G2=6}static __initStatic40(){this.B2=7}constructor(t){super(t),this.frames=Ml.newFloatArray(t*hc.ENTRIES)}getPropertyId(){return(ec.twoColor<<24)+this.slotIndex}setFrame(t,e,i,n,r,s,a,o,h){t*=hc.ENTRIES,this.frames[t]=e,this.frames[t+hc.R]=i,this.frames[t+hc.G]=n,this.frames[t+hc.B]=r,this.frames[t+hc.A]=s,this.frames[t+hc.R2]=a,this.frames[t+hc.G2]=o,this.frames[t+hc.B2]=h}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames;if(i<h[0]){switch(s){case Ql.setup:return o.color.setFromColor(o.data.color),void o.darkColor.setFromColor(o.data.darkColor);case Ql.first:let t=o.color,e=o.darkColor,i=o.data.color,n=o.data.darkColor;t.add((i.r-t.r)*r,(i.g-t.g)*r,(i.b-t.b)*r,(i.a-t.a)*r),e.add((n.r-e.r)*r,(n.g-e.g)*r,(n.b-e.b)*r,0)}return}let l=0,c=0,u=0,d=0,p=0,f=0,m=0;if(i>=h[h.length-hc.ENTRIES]){let t=h.length;l=h[t+hc.PREV_R],c=h[t+hc.PREV_G],u=h[t+hc.PREV_B],d=h[t+hc.PREV_A],p=h[t+hc.PREV_R2],f=h[t+hc.PREV_G2],m=h[t+hc.PREV_B2]}else{let t=$l.binarySearch(h,i,hc.ENTRIES);l=h[t+hc.PREV_R],c=h[t+hc.PREV_G],u=h[t+hc.PREV_B],d=h[t+hc.PREV_A],p=h[t+hc.PREV_R2],f=h[t+hc.PREV_G2],m=h[t+hc.PREV_B2];let e=h[t],n=this.getCurvePercent(t/hc.ENTRIES-1,1-(i-e)/(h[t+hc.PREV_TIME]-e));l+=(h[t+hc.R]-l)*n,c+=(h[t+hc.G]-c)*n,u+=(h[t+hc.B]-u)*n,d+=(h[t+hc.A]-d)*n,p+=(h[t+hc.R2]-p)*n,f+=(h[t+hc.G2]-f)*n,m+=(h[t+hc.B2]-m)*n}if(1==r)o.color.set(l,c,u,d),o.darkColor.set(p,f,m,1);else{let t=o.color,e=o.darkColor;s==Ql.setup&&(t.setFromColor(o.data.color),e.setFromColor(o.data.darkColor)),t.add((l-t.r)*r,(c-t.g)*r,(u-t.b)*r,(d-t.a)*r),e.add((p-e.r)*r,(f-e.g)*r,(m-e.b)*r,0)}}}hc.__initStatic25(),hc.__initStatic26(),hc.__initStatic27(),hc.__initStatic28(),hc.__initStatic29(),hc.__initStatic30(),hc.__initStatic31(),hc.__initStatic32(),hc.__initStatic33(),hc.__initStatic34(),hc.__initStatic35(),hc.__initStatic36(),hc.__initStatic37(),hc.__initStatic38(),hc.__initStatic39(),hc.__initStatic40();class lc{constructor(t){this.frames=Ml.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(ec.attachment<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;if(a==tc.mixOut)return void(s==Ql.setup&&this.setAttachment(t,o,o.data.attachmentName));let h=this.frames;if(i<h[0])return void(s!=Ql.setup&&s!=Ql.first||this.setAttachment(t,o,o.data.attachmentName));let l=0;l=i>=h[h.length-1]?h.length-1:$l.binarySearch(h,i,1)-1;let c=this.attachmentNames[l];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}setAttachment(t,e,i){e.setAttachment(null==i?null:t.getAttachment(this.slotIndex,i))}}let cc=null;class uc extends ic{constructor(t){super(t),this.frames=Ml.newFloatArray(t),this.frameVertices=new Array(t),null==cc&&(cc=Ml.newFloatArray(64))}getPropertyId(){return(ec.deform<<27)+ +this.attachment.id+this.slotIndex}setFrame(t,e,i){this.frames[t]=e,this.frameVertices[t]=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.getAttachment();if(!(h instanceof Gl)||h.deformAttachment!=this.attachment)return;let l=o.deform;0==l.length&&(s=Ql.setup);let c=this.frameVertices,u=c[0].length,d=this.frames;if(i<d[0]){let t=h;switch(s){case Ql.setup:return void(l.length=0);case Ql.first:if(1==r){l.length=0;break}let e=Ml.setArraySize(l,u);if(null==t.bones){let i=t.vertices;for(var p=0;p<u;p++)e[p]+=(i[p]-e[p])*r}else{r=1-r;for(p=0;p<u;p++)e[p]*=r}}return}let f=Ml.setArraySize(l,u);if(i>=d[d.length-1]){let t=c[d.length-1];if(1==r)if(s==Ql.add){let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++)f[e]+=t[e]-i[e]}else for(let e=0;e<u;e++)f[e]+=t[e]}else Ml.arrayCopy(t,0,f,0,u);else switch(s){case Ql.setup:{let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++){let n=i[e];f[e]=n+(t[e]-n)*r}}else for(let e=0;e<u;e++)f[e]=t[e]*r;break}case Ql.first:case Ql.replace:for(let e=0;e<u;e++)f[e]+=(t[e]-f[e])*r;break;case Ql.add:let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++)f[e]+=(t[e]-i[e])*r}else for(let e=0;e<u;e++)f[e]+=t[e]*r}return}let m=$l.binarySearch(d,i),_=c[m-1],g=c[m],y=d[m],x=this.getCurvePercent(m-1,1-(i-y)/(d[m-1]-y));if(1==r)if(s==Ql.add){let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=_[t];f[t]+=i+(g[t]-i)*x-e[t]}}else for(let t=0;t<u;t++){let e=_[t];f[t]+=e+(g[t]-e)*x}}else for(let t=0;t<u;t++){let e=_[t];f[t]=e+(g[t]-e)*x}else switch(s){case Ql.setup:{let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=_[t],n=e[t];f[t]=n+(i+(g[t]-i)*x-n)*r}}else for(let t=0;t<u;t++){let e=_[t];f[t]=(e+(g[t]-e)*x)*r}break}case Ql.first:case Ql.replace:for(let t=0;t<u;t++){let e=_[t];f[t]+=(e+(g[t]-e)*x-f[t])*r}break;case Ql.add:let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=_[t];f[t]+=(i+(g[t]-i)*x-e[t])*r}}else for(let t=0;t<u;t++){let e=_[t];f[t]+=(e+(g[t]-e)*x)*r}}}}class dc{constructor(t){this.frames=Ml.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return ec.event<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,n,r,s,a){if(null==n)return;let o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,r,s,a),e=-1;else if(e>=o[h-1])return;if(i<o[0])return;let l=0;if(e<o[0])l=0;else{l=$l.binarySearch(o,e);let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&i>=o[l];l++)n.push(this.events[l])}}class pc{constructor(t){this.frames=Ml.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return ec.drawOrder<<24}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,n,r,s,a){let o=t.drawOrder,h=t.slots;if(a==tc.mixOut&&s==Ql.setup)return void Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);let l=this.frames;if(i<l[0])return void(s!=Ql.setup&&s!=Ql.first||Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let c=0;c=i>=l[l.length-1]?l.length-1:$l.binarySearch(l,i)-1;let u=this.drawOrders[c];if(null==u)Ml.arrayCopy(h,0,o,0,h.length);else for(let t=0,e=u.length;t<e;t++)o[t]=h[u[t]]}}class fc extends ic{static __initStatic41(){this.ENTRIES=6}static __initStatic42(){this.PREV_TIME=-6}static __initStatic43(){this.PREV_MIX=-5}static __initStatic44(){this.PREV_SOFTNESS=-4}static __initStatic45(){this.PREV_BEND_DIRECTION=-3}static __initStatic46(){this.PREV_COMPRESS=-2}static __initStatic47(){this.PREV_STRETCH=-1}static __initStatic48(){this.MIX=1}static __initStatic49(){this.SOFTNESS=2}static __initStatic50(){this.BEND_DIRECTION=3}static __initStatic51(){this.COMPRESS=4}static __initStatic52(){this.STRETCH=5}constructor(t){super(t),this.frames=Ml.newFloatArray(t*fc.ENTRIES)}getPropertyId(){return(ec.ikConstraint<<24)+this.ikConstraintIndex}setFrame(t,e,i,n,r,s,a){t*=fc.ENTRIES,this.frames[t]=e,this.frames[t+fc.MIX]=i,this.frames[t+fc.SOFTNESS]=n,this.frames[t+fc.BEND_DIRECTION]=r,this.frames[t+fc.COMPRESS]=s?1:0,this.frames[t+fc.STRETCH]=a?1:0}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return h.mix=h.data.mix,h.softness=h.data.softness,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,void(h.stretch=h.data.stretch);case Ql.first:h.mix+=(h.data.mix-h.mix)*r,h.softness+=(h.data.softness-h.softness)*r,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}return}if(i>=o[o.length-fc.ENTRIES])return void(s==Ql.setup?(h.mix=h.data.mix+(o[o.length+fc.PREV_MIX]-h.data.mix)*r,h.softness=h.data.softness+(o[o.length+fc.PREV_SOFTNESS]-h.data.softness)*r,a==tc.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[o.length+fc.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+fc.PREV_COMPRESS],h.stretch=0!=o[o.length+fc.PREV_STRETCH])):(h.mix+=(o[o.length+fc.PREV_MIX]-h.mix)*r,h.softness+=(o[o.length+fc.PREV_SOFTNESS]-h.softness)*r,a==tc.mixIn&&(h.bendDirection=o[o.length+fc.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+fc.PREV_COMPRESS],h.stretch=0!=o[o.length+fc.PREV_STRETCH])));let l=$l.binarySearch(o,i,fc.ENTRIES),c=o[l+fc.PREV_MIX],u=o[l+fc.PREV_SOFTNESS],d=o[l],p=this.getCurvePercent(l/fc.ENTRIES-1,1-(i-d)/(o[l+fc.PREV_TIME]-d));s==Ql.setup?(h.mix=h.data.mix+(c+(o[l+fc.MIX]-c)*p-h.data.mix)*r,h.softness=h.data.softness+(u+(o[l+fc.SOFTNESS]-u)*p-h.data.softness)*r,a==tc.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[l+fc.PREV_BEND_DIRECTION],h.compress=0!=o[l+fc.PREV_COMPRESS],h.stretch=0!=o[l+fc.PREV_STRETCH])):(h.mix+=(c+(o[l+fc.MIX]-c)*p-h.mix)*r,h.softness+=(u+(o[l+fc.SOFTNESS]-u)*p-h.softness)*r,a==tc.mixIn&&(h.bendDirection=o[l+fc.PREV_BEND_DIRECTION],h.compress=0!=o[l+fc.PREV_COMPRESS],h.stretch=0!=o[l+fc.PREV_STRETCH]))}}fc.__initStatic41(),fc.__initStatic42(),fc.__initStatic43(),fc.__initStatic44(),fc.__initStatic45(),fc.__initStatic46(),fc.__initStatic47(),fc.__initStatic48(),fc.__initStatic49(),fc.__initStatic50(),fc.__initStatic51(),fc.__initStatic52();class mc extends ic{static __initStatic53(){this.ENTRIES=5}static __initStatic54(){this.PREV_TIME=-5}static __initStatic55(){this.PREV_ROTATE=-4}static __initStatic56(){this.PREV_TRANSLATE=-3}static __initStatic57(){this.PREV_SCALE=-2}static __initStatic58(){this.PREV_SHEAR=-1}static __initStatic59(){this.ROTATE=1}static __initStatic60(){this.TRANSLATE=2}static __initStatic61(){this.SCALE=3}static __initStatic62(){this.SHEAR=4}constructor(t){super(t),this.frames=Ml.newFloatArray(t*mc.ENTRIES)}getPropertyId(){return(ec.transformConstraint<<24)+this.transformConstraintIndex}setFrame(t,e,i,n,r,s){t*=mc.ENTRIES,this.frames[t]=e,this.frames[t+mc.ROTATE]=i,this.frames[t+mc.TRANSLATE]=n,this.frames[t+mc.SCALE]=r,this.frames[t+mc.SHEAR]=s}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(!h.active)return;if(i<o[0]){let t=h.data;switch(s){case Ql.setup:return h.rotateMix=t.rotateMix,h.translateMix=t.translateMix,h.scaleMix=t.scaleMix,void(h.shearMix=t.shearMix);case Ql.first:h.rotateMix+=(t.rotateMix-h.rotateMix)*r,h.translateMix+=(t.translateMix-h.translateMix)*r,h.scaleMix+=(t.scaleMix-h.scaleMix)*r,h.shearMix+=(t.shearMix-h.shearMix)*r}return}let l=0,c=0,u=0,d=0;if(i>=o[o.length-mc.ENTRIES]){let t=o.length;l=o[t+mc.PREV_ROTATE],c=o[t+mc.PREV_TRANSLATE],u=o[t+mc.PREV_SCALE],d=o[t+mc.PREV_SHEAR]}else{let t=$l.binarySearch(o,i,mc.ENTRIES);l=o[t+mc.PREV_ROTATE],c=o[t+mc.PREV_TRANSLATE],u=o[t+mc.PREV_SCALE],d=o[t+mc.PREV_SHEAR];let e=o[t],n=this.getCurvePercent(t/mc.ENTRIES-1,1-(i-e)/(o[t+mc.PREV_TIME]-e));l+=(o[t+mc.ROTATE]-l)*n,c+=(o[t+mc.TRANSLATE]-c)*n,u+=(o[t+mc.SCALE]-u)*n,d+=(o[t+mc.SHEAR]-d)*n}if(s==Ql.setup){let t=h.data;h.rotateMix=t.rotateMix+(l-t.rotateMix)*r,h.translateMix=t.translateMix+(c-t.translateMix)*r,h.scaleMix=t.scaleMix+(u-t.scaleMix)*r,h.shearMix=t.shearMix+(d-t.shearMix)*r}else h.rotateMix+=(l-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r,h.scaleMix+=(u-h.scaleMix)*r,h.shearMix+=(d-h.shearMix)*r}}mc.__initStatic53(),mc.__initStatic54(),mc.__initStatic55(),mc.__initStatic56(),mc.__initStatic57(),mc.__initStatic58(),mc.__initStatic59(),mc.__initStatic60(),mc.__initStatic61(),mc.__initStatic62();class _c extends ic{static __initStatic63(){this.ENTRIES=2}static __initStatic64(){this.PREV_TIME=-2}static __initStatic65(){this.PREV_VALUE=-1}static __initStatic66(){this.VALUE=1}constructor(t){super(t),this.frames=Ml.newFloatArray(t*_c.ENTRIES)}getPropertyId(){return(ec.pathConstraintPosition<<24)+this.pathConstraintIndex}setFrame(t,e,i){t*=_c.ENTRIES,this.frames[t]=e,this.frames[t+_c.VALUE]=i}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return void(h.position=h.data.position);case Ql.first:h.position+=(h.data.position-h.position)*r}return}let l=0;if(i>=o[o.length-_c.ENTRIES])l=o[o.length+_c.PREV_VALUE];else{let t=$l.binarySearch(o,i,_c.ENTRIES);l=o[t+_c.PREV_VALUE];let e=o[t],n=this.getCurvePercent(t/_c.ENTRIES-1,1-(i-e)/(o[t+_c.PREV_TIME]-e));l+=(o[t+_c.VALUE]-l)*n}s==Ql.setup?h.position=h.data.position+(l-h.data.position)*r:h.position+=(l-h.position)*r}}_c.__initStatic63(),_c.__initStatic64(),_c.__initStatic65(),_c.__initStatic66();class gc extends _c{constructor(t){super(t)}getPropertyId(){return(ec.pathConstraintSpacing<<24)+this.pathConstraintIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return void(h.spacing=h.data.spacing);case Ql.first:h.spacing+=(h.data.spacing-h.spacing)*r}return}let l=0;if(i>=o[o.length-gc.ENTRIES])l=o[o.length+gc.PREV_VALUE];else{let t=$l.binarySearch(o,i,gc.ENTRIES);l=o[t+gc.PREV_VALUE];let e=o[t],n=this.getCurvePercent(t/gc.ENTRIES-1,1-(i-e)/(o[t+gc.PREV_TIME]-e));l+=(o[t+gc.VALUE]-l)*n}s==Ql.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*r:h.spacing+=(l-h.spacing)*r}}class yc extends ic{static __initStatic67(){this.ENTRIES=3}static __initStatic68(){this.PREV_TIME=-3}static __initStatic69(){this.PREV_ROTATE=-2}static __initStatic70(){this.PREV_TRANSLATE=-1}static __initStatic71(){this.ROTATE=1}static __initStatic72(){this.TRANSLATE=2}constructor(t){super(t),this.frames=Ml.newFloatArray(t*yc.ENTRIES)}getPropertyId(){return(ec.pathConstraintMix<<24)+this.pathConstraintIndex}setFrame(t,e,i,n){t*=yc.ENTRIES,this.frames[t]=e,this.frames[t+yc.ROTATE]=i,this.frames[t+yc.TRANSLATE]=n}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(i<o[0]){switch(s){case Ql.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case Ql.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*r,h.translateMix+=(h.data.translateMix-h.translateMix)*r}return}let l=0,c=0;if(i>=o[o.length-yc.ENTRIES])l=o[o.length+yc.PREV_ROTATE],c=o[o.length+yc.PREV_TRANSLATE];else{let t=$l.binarySearch(o,i,yc.ENTRIES);l=o[t+yc.PREV_ROTATE],c=o[t+yc.PREV_TRANSLATE];let e=o[t],n=this.getCurvePercent(t/yc.ENTRIES-1,1-(i-e)/(o[t+yc.PREV_TIME]-e));l+=(o[t+yc.ROTATE]-l)*n,c+=(o[t+yc.TRANSLATE]-c)*n}s==Ql.setup?(h.rotateMix=h.data.rotateMix+(l-h.data.rotateMix)*r,h.translateMix=h.data.translateMix+(c-h.data.translateMix)*r):(h.rotateMix+=(l-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r)}}yc.__initStatic67(),yc.__initStatic68(),yc.__initStatic69(),yc.__initStatic70(),yc.__initStatic71(),yc.__initStatic72();class xc{static __initStatic(){this.emptyAnimation=new $l("<empty>",[],0)}static __initStatic2(){this.SUBSEQUENT=0}static __initStatic3(){this.FIRST=1}static __initStatic4(){this.HOLD_SUBSEQUENT=2}static __initStatic5(){this.HOLD_FIRST=3}static __initStatic6(){this.HOLD_MIX=4}static __initStatic7(){this.SETUP=1}static __initStatic8(){this.CURRENT=2}__init(){this.tracks=new Array}__init2(){this.timeScale=1}__init3(){this.unkeyedState=0}__init4(){this.events=new Array}__init5(){this.listeners=new Array}__init6(){this.queue=new bc(this)}__init7(){this.propertyIDs=new Tl}__init8(){this.animationsChanged=!1}__init9(){this.trackEntryPool=new Pl(()=>new vc)}constructor(t){xc.prototype.__init.call(this),xc.prototype.__init2.call(this),xc.prototype.__init3.call(this),xc.prototype.__init4.call(this),xc.prototype.__init5.call(this),xc.prototype.__init6.call(this),xc.prototype.__init7.call(this),xc.prototype.__init8.call(this),xc.prototype.__init9.call(this),this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(null==n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let r=t*n.timeScale;if(n.delay>0){if(n.delay-=r,n.delay>0)continue;r=-n.delay,n.delay=0}let s=n.next;if(null!=s){let e=n.trackLast-s.delay;if(e>=0){for(s.delay=0,s.trackTime+=0==n.timeScale?0:(e/n.timeScale+t)*s.timeScale,n.trackTime+=r,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){let t=n.mixingFrom;for(n.mixingFrom=null,null!=t&&(t.mixingTo=null);null!=t;)this.queue.end(t),t=t.mixingFrom}n.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(null==i)return!0;let n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,n=!1;for(let s=0,a=i.length;s<a;s++){let a=i[s];if(null==a||a.delay>0)continue;n=!0;let o=0==s?Ql.first:a.mixBlend,h=a.alpha;null!=a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&null==a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),u=a.animation.timelines.length,d=a.animation.timelines;if(0==s&&1==h||o==Ql.add)for(let i=0;i<u;i++){Ml.webkit602BugfixHelper(h,o);var r=d[i];r instanceof lc?this.applyAttachmentTimeline(r,t,c,o,!0):r.apply(t,l,c,e,h,o,tc.mixIn)}else{let i=a.timelineMode,n=0==a.timelinesRotation.length;n&&Ml.setArraySize(a.timelinesRotation,u<<1,null);let r=a.timelinesRotation;for(let s=0;s<u;s++){let a=d[s],u=i[s]==xc.SUBSEQUENT?o:Ql.setup;a instanceof nc?this.applyRotateTimeline(a,t,c,h,u,r,s<<1,n):a instanceof lc?this.applyAttachmentTimeline(a,t,c,o,!0):(Ml.webkit602BugfixHelper(h,o),a.apply(t,l,c,e,h,u,tc.mixIn))}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var s=this.unkeyedState+xc.SETUP,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==s){var c=l.data.attachmentName;l.setAttachment(null==c?null:t.getAttachment(l.data.index,c))}}return this.unkeyedState+=2,this.queue.drain(),n}applyMixingFrom(t,e,i){let n=t.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,e,i);let r=0;0==t.mixDuration?(r=1,i==Ql.first&&(i=Ql.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),i!=Ql.first&&(i=n.mixBlend));let s=r<n.eventThreshold?this.events:null,a=r<n.attachmentThreshold,o=r<n.drawOrderThreshold,h=n.animationLast,l=n.getAnimationTime(),c=n.animation.timelines.length,u=n.animation.timelines,d=n.alpha*t.interruptAlpha,p=d*(1-r);if(i==Ql.add)for(let t=0;t<c;t++)u[t].apply(e,h,l,s,p,i,tc.mixOut);else{let t=n.timelineMode,r=n.timelineHoldMix,f=0==n.timelinesRotation.length;f&&Ml.setArraySize(n.timelinesRotation,c<<1,null);let m=n.timelinesRotation;n.totalAlpha=0;for(let _=0;_<c;_++){let c,g=u[_],y=tc.mixOut,x=0;switch(t[_]){case xc.SUBSEQUENT:if(!o&&g instanceof pc)continue;c=i,x=p;break;case xc.FIRST:c=Ql.setup,x=p;break;case xc.HOLD_SUBSEQUENT:c=i,x=d;break;case xc.HOLD_FIRST:c=Ql.setup,x=d;break;default:c=Ql.setup;let t=r[_];x=d*Math.max(0,1-t.mixTime/t.mixDuration)}n.totalAlpha+=x,g instanceof nc?this.applyRotateTimeline(g,e,l,x,c,m,_<<1,f):g instanceof lc?this.applyAttachmentTimeline(g,e,l,c,a):(Ml.webkit602BugfixHelper(x,i),o&&g instanceof pc&&c==Ql.setup&&(y=tc.mixIn),g.apply(e,h,l,s,x,c,y))}}return t.mixDuration>0&&this.queueEvents(n,l),this.events.length=0,n.nextAnimationLast=l,n.nextTrackLast=n.trackTime,r}applyAttachmentTimeline(t,e,i,n,r){var s=e.slots[t.slotIndex];if(s.bone.active){var a,o=t.frames;if(i<o[0])n!=Ql.setup&&n!=Ql.first||this.setAttachment(e,s,s.data.attachmentName,r);else a=i>=o[o.length-1]?o.length-1:$l.binarySearch(o,i)-1,this.setAttachment(e,s,t.attachmentNames[a],r);s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+xc.SETUP)}}setAttachment(t,e,i,n){e.setAttachment(null==i?null:t.getAttachment(e.data.index,i)),n&&(e.attachmentState=this.unkeyedState+xc.CURRENT)}applyRotateTimeline(t,e,i,n,r,s,a,o){if(o&&(s[a]=0),1==n)return void t.apply(e,0,i,null,1,r,tc.mixIn);let h=t,l=h.frames,c=e.bones[h.boneIndex];if(!c.active)return;let u=0,d=0;if(i<l[0])switch(r){case Ql.setup:c.rotation=c.data.rotation;default:return;case Ql.first:u=c.rotation,d=c.data.rotation}else if(u=r==Ql.setup?c.data.rotation:c.rotation,i>=l[l.length-nc.ENTRIES])d=c.data.rotation+l[l.length+nc.PREV_ROTATION];else{let t=$l.binarySearch(l,i,nc.ENTRIES),e=l[t+nc.PREV_ROTATION],n=l[t],r=h.getCurvePercent((t>>1)-1,1-(i-n)/(l[t+nc.PREV_TIME]-n));d=l[t+nc.ROTATION]-e,d-=360*(16384-(16384.499999999996-d/360|0)),d=e+d*r+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}let p=0,f=d-u;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)p=s[a];else{let t=0,e=0;o?(t=0,e=f):(t=s[a],e=s[a+1]);let i=f>0,n=t>=0;Rl.signum(e)!=Rl.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*Rl.signum(t)),n=i),p=f+t-t%360,n!=i&&(p+=360*Rl.signum(t)),s[a]=p}s[a+1]=f,u+=p*n,c.rotation=u-360*(16384-(16384.499999999996-u/360|0))}queueEvents(t,e){let i=t.animationStart,n=t.animationEnd,r=n-i,s=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<s)break;e.time>n||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||s>t.trackTime%r:e>=n&&t.animationLast<n,l&&this.queue.complete(t);o<h;o++){a[o].time<i||this.queue.event(t,a[o])}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(null==e)return;this.queue.end(e),this.disposeNext(e);let i=e;for(;;){let t=i.mixingFrom;if(null==t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i){let n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)}setAnimationWith(t,e,i){if(null==e)throw new Error("animation cannot be null.");let n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));let s=this.trackEntry(t,e,i,r);return this.setCurrent(t,s,n),this.queue.drain(),s}addAnimation(t,e,i,n){let r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)}addAnimationWith(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;let s=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,s,!0),this.queue.drain();else if(r.next=s,n<=0){let t=r.animationEnd-r.animationStart;0!=t?(r.loop?n+=t*(1+(r.trackTime/t|0)):n+=Math.max(t,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime}return s.delay=n,s}setEmptyAnimation(t,e){let i=this.setAnimationWith(t,xc.emptyAnimation,!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e,i){i<=0&&(i-=e);let n=this.addAnimationWith(t,xc.emptyAnimation,!1,i);return n.mixDuration=e,n.trackEnd=e,n}setEmptyAnimations(t){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Ml.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,n){let r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,e),r.mixBlend=Ql.replace,r}disposeNext(t){let e=t.next;for(;null!=e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let e=this.tracks[t];if(null!=e){for(;null!=e.mixingFrom;)e=e.mixingFrom;do{null!=e.mixingFrom&&e.mixBlend==Ql.add||this.computeHold(e),e=e.mixingTo}while(null!=e)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,n=t.animation.timelines.length,r=Ml.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;let s=Ml.setArraySize(t.timelineHoldMix,n),a=this.propertyIDs;if(null!=e&&e.holdPrevious)for(let t=0;t<n;t++)r[t]=a.add(i[t].getPropertyId())?xc.HOLD_FIRST:xc.HOLD_SUBSEQUENT;else t:for(let o=0;o<n;o++){let n=i[o],h=n.getPropertyId();if(a.add(h))if(null==e||n instanceof lc||n instanceof pc||n instanceof dc||!e.animation.hasTimeline(h))r[o]=xc.FIRST;else{for(let i=e.mixingTo;null!=i;i=i.mixingTo)if(!i.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=xc.HOLD_MIX,s[o]=i;continue t}break}r[o]=xc.HOLD_FIRST}else r[o]=xc.SUBSEQUENT}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}static __initStatic9(){this.deprecatedWarning1=!1}setAnimationByName(t,e,i){xc.deprecatedWarning1||(xc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,i)}static __initStatic10(){this.deprecatedWarning2=!1}addAnimationByName(t,e,i,n){xc.deprecatedWarning2||(xc.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,i,n)}static __initStatic11(){this.deprecatedWarning3=!1}hasAnimation(t){return null!==this.data.skeletonData.findAnimation(t)}hasAnimationByName(t){return xc.deprecatedWarning3||(xc.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}}xc.__initStatic(),xc.__initStatic2(),xc.__initStatic3(),xc.__initStatic4(),xc.__initStatic5(),xc.__initStatic6(),xc.__initStatic7(),xc.__initStatic8(),xc.__initStatic9(),xc.__initStatic10(),xc.__initStatic11();class vc{constructor(){vc.prototype.__init10.call(this),vc.prototype.__init11.call(this),vc.prototype.__init12.call(this),vc.prototype.__init13.call(this)}__init10(){this.mixBlend=Ql.replace}__init11(){this.timelineMode=new Array}__init12(){this.timelineHoldMix=new Array}__init13(){this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}static __initStatic12(){this.deprecatedWarning1=!1}static __initStatic13(){this.deprecatedWarning2=!1}get time(){return vc.deprecatedWarning1||(vc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){vc.deprecatedWarning1||(vc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return vc.deprecatedWarning2||(vc.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){vc.deprecatedWarning2||(vc.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}}vc.__initStatic12(),vc.__initStatic13();class bc{__init14(){this.objects=[]}__init15(){this.drainDisabled=!1}constructor(t){bc.prototype.__init14.call(this),bc.prototype.__init15.call(this),this.animState=t}start(t){this.objects.push(Ec.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Ec.interrupt),this.objects.push(t)}end(t){this.objects.push(Ec.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Ec.dispose),this.objects.push(t)}complete(t){this.objects.push(Ec.complete),this.objects.push(t)}event(t,e){this.objects.push(Ec.event),this.objects.push(t),this.objects.push(e)}static __initStatic14(){this.deprecatedWarning1=!1}deprecateStuff(){return bc.deprecatedWarning1||(bc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let n=t[i],r=t[i+1];switch(n){case Ec.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++)e[t].start&&e[t].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case Ec.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++)e[t].interrupt&&e[t].interrupt(r);break;case Ec.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++)e[t].end&&e[t].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case Ec.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++)e[t].dispose&&e[t].dispose(r);this.animState.trackEntryPool.free(r);break;case Ec.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++)e[t].complete&&e[t].complete(r);let n=Rl.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,n),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,n);break;case Ec.event:let s=t[2+i++];null!=r.listener&&r.listener.event&&r.listener.event(r,s);for(let t=0;t<e.length;t++)e[t].event&&e[t].event(r,s);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,s)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var Ec,Sc,Tc,wc,Ac,Rc,Cc,Ic;bc.__initStatic14(),function(t){t[t.start=0]="start";t[t.interrupt=1]="interrupt";t[t.end=2]="end";t[t.dispose=3]="dispose";t[t.complete=4]="complete";t[t.event=5]="event"}(Ec||(Ec={}));class Mc{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}class Pc{__init(){this.animationToMixTime={}}__init2(){this.defaultMix=0}constructor(t){if(Pc.prototype.__init.call(this),Pc.prototype.__init2.call(this),null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)}static __initStatic(){this.deprecatedWarning1=!1}setMixByName(t,e,i){Pc.deprecatedWarning1||(Pc.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,i)}setMixWith(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");let n=t.name+"."+e.name;this.animationToMixTime[n]=i}getMix(t,e){let i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n}}Pc.__initStatic();class Oc{constructor(t){this.atlas=t}newRegionAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");let r=new Zl(e);return r.region=n,r}newMeshAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");let r=new Hl(e);return r.region=n,r}newBoundingBoxAttachment(t,e){return new jl(e)}newPathAttachment(t,e){return new zl(e)}newPointAttachment(t,e){return new ql(e)}newClippingAttachment(t,e){return new Wl(e)}}class Dc{__init(){this.x=0}__init2(){this.y=0}__init3(){this.rotation=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.shearX=0}__init7(){this.shearY=0}__init8(){this.transformMode=Sc.Normal}__init9(){this.skinRequired=!1}__init10(){this.color=new Al}constructor(t,e,i){if(Dc.prototype.__init.call(this),Dc.prototype.__init2.call(this),Dc.prototype.__init3.call(this),Dc.prototype.__init4.call(this),Dc.prototype.__init5.call(this),Dc.prototype.__init6.call(this),Dc.prototype.__init7.call(this),Dc.prototype.__init8.call(this),Dc.prototype.__init9.call(this),Dc.prototype.__init10.call(this),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}!function(t){t[t.Normal=0]="Normal";t[t.OnlyTranslation=1]="OnlyTranslation";t[t.NoRotationOrReflection=2]="NoRotationOrReflection";t[t.NoScale=3]="NoScale";t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Sc||(Sc={}));class Fc{__init(){this.matrix=new De}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}__init2(){this.children=new Array}__init3(){this.x=0}__init4(){this.y=0}__init5(){this.rotation=0}__init6(){this.scaleX=0}__init7(){this.scaleY=0}__init8(){this.shearX=0}__init9(){this.shearY=0}__init10(){this.ax=0}__init11(){this.ay=0}__init12(){this.arotation=0}__init13(){this.ascaleX=0}__init14(){this.ascaleY=0}__init15(){this.ashearX=0}__init16(){this.ashearY=0}__init17(){this.appliedValid=!1}__init18(){this.sorted=!1}__init19(){this.active=!1}constructor(t,e,i){if(Fc.prototype.__init.call(this),Fc.prototype.__init2.call(this),Fc.prototype.__init3.call(this),Fc.prototype.__init4.call(this),Fc.prototype.__init5.call(this),Fc.prototype.__init6.call(this),Fc.prototype.__init7.call(this),Fc.prototype.__init8.call(this),Fc.prototype.__init9.call(this),Fc.prototype.__init10.call(this),Fc.prototype.__init11.call(this),Fc.prototype.__init12.call(this),Fc.prototype.__init13.call(this),Fc.prototype.__init14.call(this),Fc.prototype.__init15.call(this),Fc.prototype.__init16.call(this),Fc.prototype.__init17.call(this),Fc.prototype.__init18.call(this),Fc.prototype.__init19.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,n,r,s,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=n,this.ascaleY=r,this.ashearX=s,this.ashearY=a,this.appliedValid=!0;let o=this.parent,h=this.matrix,l=this.skeleton.scaleX,c=Dl?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==o){let o=this.skeleton,u=i+90+a;return h.a=Rl.cosDeg(i+s)*n*l,h.c=Rl.cosDeg(u)*r*l,h.b=Rl.sinDeg(i+s)*n*c,h.d=Rl.sinDeg(u)*r*c,h.tx=t*l+o.x,void(h.ty=e*c+o.y)}let u=o.matrix.a,d=o.matrix.c,p=o.matrix.b,f=o.matrix.d;switch(h.tx=u*t+d*e+o.matrix.tx,h.ty=p*t+f*e+o.matrix.ty,this.data.transformMode){case Sc.Normal:{let t=i+90+a,e=Rl.cosDeg(i+s)*n,o=Rl.cosDeg(t)*r,l=Rl.sinDeg(i+s)*n,c=Rl.sinDeg(t)*r;return h.a=u*e+d*l,h.c=u*o+d*c,h.b=p*e+f*l,void(h.d=p*o+f*c)}case Sc.OnlyTranslation:{let t=i+90+a;h.a=Rl.cosDeg(i+s)*n,h.c=Rl.cosDeg(t)*r,h.b=Rl.sinDeg(i+s)*n,h.d=Rl.sinDeg(t)*r;break}case Sc.NoRotationOrReflection:{let t=u*u+p*p,e=0;t>1e-4?(t=Math.abs(u*f-d*p)/t,u/=this.skeleton.scaleX,p/=this.skeleton.scaleY,d=p*t,f=u*t,e=Math.atan2(p,u)*Rl.radDeg):(u=0,p=0,e=90-Math.atan2(f,d)*Rl.radDeg);let o=i+s-e,l=i+a-e+90,c=Rl.cosDeg(o)*n,m=Rl.cosDeg(l)*r,_=Rl.sinDeg(o)*n,g=Rl.sinDeg(l)*r;h.a=u*c-d*_,h.c=u*m-d*g,h.b=p*c+f*_,h.d=p*m+f*g;break}case Sc.NoScale:case Sc.NoScaleOrReflection:{let t=Rl.cosDeg(i),e=Rl.sinDeg(i),o=(u*t+d*e)/l,m=(p*t+f*e)/c,_=Math.sqrt(o*o+m*m);_>1e-5&&(_=1/_),o*=_,m*=_,_=Math.sqrt(o*o+m*m),this.data.transformMode==Sc.NoScale&&u*f-d*p<0!=(Dl?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let g=Math.PI/2+Math.atan2(m,o),y=Math.cos(g)*_,x=Math.sin(g)*_,v=Rl.cosDeg(s)*n,b=Rl.cosDeg(90+a)*r,E=Rl.sinDeg(s)*n,S=Rl.sinDeg(90+a)*r;h.a=o*v+y*E,h.c=o*b+y*S,h.b=m*v+x*E,h.d=m*b+x*S;break}}h.a*=l,h.c*=l,h.b*=c,h.d*=c}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*Rl.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*Rl.radDeg}getWorldScaleX(){let t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){let t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;let t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*Rl.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*Rl.radDeg);let i=t.matrix,n=1/(i.a*i.d-i.b*i.c),r=e.tx-i.tx,s=e.ty-i.ty;this.ax=r*i.d*n-s*i.c*n,this.ay=s*i.a*n-r*i.b*n;let a=n*i.d,o=n*i.a,h=n*i.c,l=n*i.b,c=a*e.a-h*e.b,u=a*e.c-h*e.d,d=o*e.b-l*e.a,p=o*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){let t=c*p-u*d;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(c*u+d*p,t)*Rl.radDeg,this.arotation=Math.atan2(d,c)*Rl.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,u)*Rl.radDeg}worldToLocal(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=1/(i*s-n*r),o=t.x-e.tx,h=t.y-e.ty;return t.x=o*s*a-h*n*a,t.y=h*i*a-o*r*a,t}localToWorld(t){let e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*i,n.d*i-n.c*e)*Rl.radDeg}localToWorldRotation(t){let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(i*n.b+e*n.d,i*n.a+e*n.c)*Rl.radDeg}rotateWorld(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=Rl.cosDeg(t),o=Rl.sinDeg(t);e.a=a*i-o*r,e.c=a*n-o*s,e.b=o*i+a*r,e.d=o*n+a*s,this.appliedValid=!1}}class kc{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}}class Nc{constructor(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class Lc{constructor(t){this.name=t}}class Bc{__init(){this.bendDirection=0}__init2(){this.compress=!1}__init3(){this.stretch=!1}__init4(){this.mix=1}__init5(){this.softness=0}__init6(){this.active=!1}constructor(t,e){if(Bc.prototype.__init.call(this),Bc.prototype.__init2.call(this),Bc.prototype.__init3.call(this),Bc.prototype.__init4.call(this),Bc.prototype.__init5.call(this),Bc.prototype.__init6.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}}apply1(t,e,i,n,r,s,a){t.appliedValid||t.updateAppliedTransform();let o=t.parent.matrix,h=o.a,l=o.c,c=o.b,u=o.d,d=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case Sc.OnlyTranslation:p=e-t.worldX,f=i-t.worldY;break;case Sc.NoRotationOrReflection:let n=Math.abs(h*u-l*c)/(h*h+c*c),r=h/t.skeleton.scaleX,s=c/t.skeleton.scaleY;l=-s*n*t.skeleton.scaleX,u=r*n*t.skeleton.scaleY,d+=Math.atan2(s,r)*Rl.radDeg;default:let a=e-o.tx,m=i-o.ty,_=h*u-l*c;p=(a*u-m*l)/_-t.ax,f=(m*h-a*c)/_-t.ay}d+=Math.atan2(f,p)*Rl.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);let m=t.ascaleX,_=t.ascaleY;if(n||r){switch(t.data.transformMode){case Sc.NoScale:case Sc.NoScaleOrReflection:p=e-t.worldX,f=i-t.worldY}let o=t.data.length*m,h=Math.sqrt(p*p+f*f);if(n&&h<o||r&&h>o&&o>1e-4){let t=(h/o-1)*a+1;m*=t,s&&(_*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*a,m,_,t.ashearX,t.ashearY)}apply2(t,e,i,n,r,s,a,o){if(0==o)return void e.updateWorldTransform();t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();let h=t.ax,l=t.ay,c=t.ascaleX,u=c,d=t.ascaleY,p=e.ascaleX,f=t.matrix,m=0,_=0,g=0;c<0?(c=-c,m=180,g=-1):(m=0,g=1),d<0&&(d=-d,g=-g),p<0?(p=-p,_=180):_=0;let y=e.ax,x=0,v=0,b=0,E=f.a,S=f.c,T=f.b,w=f.d,A=Math.abs(c-d)<=1e-4;A?(x=e.ay,v=E*y+S*x+f.tx,b=T*y+w*x+f.ty):(x=0,v=E*y+f.tx,b=T*y+f.ty);let R=t.parent.matrix;E=R.a,S=R.c,T=R.b,w=R.d;let C,I,M=1/(E*w-S*T),P=v-R.tx,O=b-R.ty,D=(P*w-O*S)*M-h,F=(O*E-P*T)*M-l,k=Math.sqrt(D*D+F*F),N=e.data.length*p;if(k<1e-4)return this.apply1(t,i,n,!1,s,!1,o),void e.updateWorldTransformWith(y,x,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);P=i-R.tx,O=n-R.ty;let L=(P*w-O*S)*M-h,B=(O*E-P*T)*M-l,X=L*L+B*B;if(0!=a){a*=c*(p+1)/2;let t=Math.sqrt(X),e=t-k-N*c+a;if(e>0){let i=Math.min(1,e/(2*a))-1;i=(e-a*(1-i*i))/t,L-=i*L,B-=i*B,X=L*L+B*B}}t:if(A){N*=c;let t=(X-k*k-N*N)/(2*k*N);t<-1?t=-1:t>1&&(t=1,s&&(u*=(Math.sqrt(X)/(k+N)-1)*o+1)),I=Math.acos(t)*r,E=k+N*t,S=N*Math.sin(I),C=Math.atan2(B*E-L*S,L*E+B*S)}else{E=c*N,S=d*N;let t=E*E,e=S*S,i=Math.atan2(B,L);T=e*k*k+t*X-t*e;let n=-2*e*k,s=e-t;if(w=n*n-4*s*T,w>=0){let t=Math.sqrt(w);n<0&&(t=-t),t=-(n+t)/2;let e=t/s,a=T/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=X){O=Math.sqrt(X-o*o)*r,C=i-Math.atan2(O,o),I=Math.atan2(O/d,(o-k)/c);break t}}let a=Rl.PI,o=k-E,h=o*o,l=0,u=0,p=k+E,f=p*p,m=0;T=-E*k/(t-e),T>=-1&&T<=1&&(T=Math.acos(T),P=E*Math.cos(T)+k,O=S*Math.sin(T),w=P*P+O*O,w<h&&(a=T,h=w,o=P,l=O),w>f&&(u=T,f=w,p=P,m=O)),X<=(h+f)/2?(C=i-Math.atan2(l*r,o),I=a*r):(C=i-Math.atan2(m*r,p),I=u*r)}let U=Math.atan2(x,y)*g,Y=t.arotation;C=(C-U)*Rl.radDeg+m-Y,C>180?C-=360:C<-180&&(C+=360),t.updateWorldTransformWith(h,l,Y+C*o,u,t.ascaleY,0,0),Y=e.arotation,I=((I+U)*Rl.radDeg-e.ashearX)*g+_-Y,I>180?I-=360:I<-180&&(I+=360),e.updateWorldTransformWith(y,x,Y+I*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Xc extends kc{__init(){this.bones=new Array}__init2(){this.bendDirection=1}__init3(){this.compress=!1}__init4(){this.stretch=!1}__init5(){this.uniform=!1}__init6(){this.mix=1}__init7(){this.softness=0}constructor(t){super(t,0,!1),Xc.prototype.__init.call(this),Xc.prototype.__init2.call(this),Xc.prototype.__init3.call(this),Xc.prototype.__init4.call(this),Xc.prototype.__init5.call(this),Xc.prototype.__init6.call(this),Xc.prototype.__init7.call(this)}}class Uc extends kc{__init(){this.bones=new Array}constructor(t){super(t,0,!1),Uc.prototype.__init.call(this)}}!function(t){t[t.Fixed=0]="Fixed";t[t.Percent=1]="Percent"}(Tc||(Tc={})),function(t){t[t.Length=0]="Length";t[t.Fixed=1]="Fixed";t[t.Percent=2]="Percent"}(wc||(wc={})),function(t){t[t.Tangent=0]="Tangent";t[t.Chain=1]="Chain";t[t.ChainScale=2]="ChainScale"}(Ac||(Ac={}));class Yc{static __initStatic(){this.NONE=-1}static __initStatic2(){this.BEFORE=-2}static __initStatic3(){this.AFTER=-3}static __initStatic4(){this.epsilon=1e-5}__init(){this.position=0}__init2(){this.spacing=0}__init3(){this.rotateMix=0}__init4(){this.translateMix=0}__init5(){this.spaces=new Array}__init6(){this.positions=new Array}__init7(){this.world=new Array}__init8(){this.curves=new Array}__init9(){this.lengths=new Array}__init10(){this.segments=new Array}__init11(){this.active=!1}constructor(t,e){if(Yc.prototype.__init.call(this),Yc.prototype.__init2.call(this),Yc.prototype.__init3.call(this),Yc.prototype.__init4.call(this),Yc.prototype.__init5.call(this),Yc.prototype.__init6.call(this),Yc.prototype.__init7.call(this),Yc.prototype.__init8.call(this),Yc.prototype.__init9.call(this),Yc.prototype.__init10.call(this),Yc.prototype.__init11.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}isActive(){return this.active}apply(){this.update()}update(){let t=this.target.getAttachment();if(!(t instanceof zl))return;let e=this.rotateMix,i=this.translateMix,n=e>0;if(!(i>0)&&!n)return;let r=this.data,s=r.spacingMode,a=s==wc.Length,o=r.rotateMode,h=o==Ac.Tangent,l=o==Ac.ChainScale,c=this.bones.length,u=h?c:c+1,d=this.bones,p=Ml.setArraySize(this.spaces,u),f=null,m=this.spacing;if(l||a){l&&(f=Ml.setArraySize(this.lengths,c));for(let t=0,e=u-1;t<e;){let e=d[t],i=e.data.length;if(i<Yc.epsilon)l&&(f[t]=0),p[++t]=0;else{let n=i*e.matrix.a,r=i*e.matrix.b,s=Math.sqrt(n*n+r*r);l&&(f[t]=s),p[++t]=(a?i+m:m)*s/i}}}else for(let t=1;t<u;t++)p[t]=m;let _=this.computeWorldPositions(t,u,h,r.positionMode==Tc.Percent,s==wc.Percent),g=_[0],y=_[1],x=r.offsetRotation,v=!1;if(0==x)v=o==Ac.Chain;else{v=!1;let t=this.target.bone.matrix;x*=t.a*t.d-t.b*t.c>0?Rl.degRad:-Rl.degRad}for(let t=0,r=3;t<c;t++,r+=3){let s=d[t],a=s.matrix;a.tx+=(g-a.tx)*i,a.ty+=(y-a.ty)*i;let o=_[r],c=_[r+1],u=o-g,m=c-y;if(l){let i=f[t];if(0!=i){let t=(Math.sqrt(u*u+m*m)/i-1)*e+1;a.a*=t,a.b*=t}}if(g=o,y=c,n){let i=a.a,n=a.c,o=a.b,l=a.d,c=0,d=0,f=0;if(c=h?_[r-1]:0==p[t+1]?_[r+2]:Math.atan2(m,u),c-=Math.atan2(o,i),v){d=Math.cos(c),f=Math.sin(c);let t=s.data.length;g+=(t*(d*i-f*o)-u)*e,y+=(t*(f*i+d*o)-m)*e}else c+=x;c>Rl.PI?c-=Rl.PI2:c<-Rl.PI&&(c+=Rl.PI2),c*=e,d=Math.cos(c),f=Math.sin(c),a.a=d*i-f*o,a.c=d*n-f*l,a.b=f*i+d*o,a.d=f*n+d*l}s.appliedValid=!1}}computeWorldPositions(t,e,i,n,r){let s=this.target,a=this.position,o=this.spaces,h=Ml.setArraySize(this.positions,3*e+2),l=null,c=t.closed,u=t.worldVerticesLength,d=u/6,p=Yc.NONE;if(!t.constantSpeed){let f=t.lengths;d-=c?1:2;let m=f[d];if(n&&(a*=m),r)for(let t=0;t<e;t++)o[t]*=m;l=Ml.setArraySize(this.world,8);for(let n=0,r=0,_=0;n<e;n++,r+=3){let e=o[n];a+=e;let g=a;if(c)g%=m,g<0&&(g+=m),_=0;else{if(g<0){p!=Yc.BEFORE&&(p=Yc.BEFORE,t.computeWorldVertices(s,2,4,l,0,2)),this.addBeforePosition(g,l,0,h,r);continue}if(g>m){p!=Yc.AFTER&&(p=Yc.AFTER,t.computeWorldVertices(s,u-6,4,l,0,2)),this.addAfterPosition(g-m,l,0,h,r);continue}}for(;;_++){let t=f[_];if(!(g>t)){if(0==_)g/=t;else{let e=f[_-1];g=(g-e)/(t-e)}break}}_!=p&&(p=_,c&&_==d?(t.computeWorldVertices(s,u-4,4,l,0,2),t.computeWorldVertices(s,0,4,l,4,2)):t.computeWorldVertices(s,6*_+2,8,l,0,2)),this.addCurvePosition(g,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,r,i||n>0&&0==e)}return h}c?(u+=2,l=Ml.setArraySize(this.world,u),t.computeWorldVertices(s,2,u-4,l,0,2),t.computeWorldVertices(s,0,2,l,u-4,2),l[u-2]=l[0],l[u-1]=l[1]):(d--,u-=4,l=Ml.setArraySize(this.world,u),t.computeWorldVertices(s,2,u,l,0,2));let f=Ml.setArraySize(this.curves,d),m=0,_=l[0],g=l[1],y=0,x=0,v=0,b=0,E=0,S=0,T=0,w=0,A=0,R=0,C=0,I=0,M=0,P=0;for(let t=0,e=2;t<d;t++,e+=6)y=l[e],x=l[e+1],v=l[e+2],b=l[e+3],E=l[e+4],S=l[e+5],T=.1875*(_-2*y+v),w=.1875*(g-2*x+b),A=.09375*(3*(y-v)-_+E),R=.09375*(3*(x-b)-g+S),C=2*T+A,I=2*w+R,M=.75*(y-_)+T+.16666667*A,P=.75*(x-g)+w+.16666667*R,m+=Math.sqrt(M*M+P*P),M+=C,P+=I,C+=A,I+=R,m+=Math.sqrt(M*M+P*P),M+=C,P+=I,m+=Math.sqrt(M*M+P*P),M+=C+A,P+=I+R,m+=Math.sqrt(M*M+P*P),f[t]=m,_=E,g=S;if(n&&(a*=m),r)for(let t=0;t<e;t++)o[t]*=m;let O=this.segments,D=0;for(let t=0,n=0,r=0,s=0;t<e;t++,n+=3){let e=o[t];a+=e;let d=a;if(c)d%=m,d<0&&(d+=m),r=0;else{if(d<0){this.addBeforePosition(d,l,0,h,n);continue}if(d>m){this.addAfterPosition(d-m,l,u-4,h,n);continue}}for(;;r++){let t=f[r];if(!(d>t)){if(0==r)d/=t;else{let e=f[r-1];d=(d-e)/(t-e)}break}}if(r!=p){p=r;let t=6*r;for(_=l[t],g=l[t+1],y=l[t+2],x=l[t+3],v=l[t+4],b=l[t+5],E=l[t+6],S=l[t+7],T=.03*(_-2*y+v),w=.03*(g-2*x+b),A=.006*(3*(y-v)-_+E),R=.006*(3*(x-b)-g+S),C=2*T+A,I=2*w+R,M=.3*(y-_)+T+.16666667*A,P=.3*(x-g)+w+.16666667*R,D=Math.sqrt(M*M+P*P),O[0]=D,t=1;t<8;t++)M+=C,P+=I,C+=A,I+=R,D+=Math.sqrt(M*M+P*P),O[t]=D;M+=C,P+=I,D+=Math.sqrt(M*M+P*P),O[8]=D,M+=C+A,P+=I+R,D+=Math.sqrt(M*M+P*P),O[9]=D,s=0}for(d*=D;;s++){let t=O[s];if(!(d>t)){if(0==s)d/=t;else{let e=O[s-1];d=s+(d-e)/(t-e)}break}}this.addCurvePosition(.1*d,_,g,y,x,v,b,E,S,h,n,i||t>0&&0==e)}return h}addBeforePosition(t,e,i,n,r){let s=e[i],a=e[i+1],o=e[i+2]-s,h=e[i+3]-a,l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addAfterPosition(t,e,i,n,r){let s=e[i+2],a=e[i+3],o=s-e[i],h=a-e[i+1],l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addCurvePosition(t,e,i,n,r,s,a,o,h,l,c,u){(0==t||isNaN(t))&&(t=1e-4);let d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,y=3*g,x=f*y,v=y*t,b=e*_+n*x+s*v+o*p,E=i*_+r*x+a*v+h*p;l[c]=b,l[c+1]=E,u&&(l[c+2]=Math.atan2(E-(i*m+r*g*2+a*d),b-(e*m+n*g*2+s*d)))}}Yc.__initStatic(),Yc.__initStatic2(),Yc.__initStatic3(),Yc.__initStatic4();class Vc{__init(){this.deform=new Array}constructor(t,e){if(Vc.prototype.__init.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new Al,this.darkColor=null==t.darkColor?null:new Al,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}class Gc{__init(){this.rotateMix=0}__init2(){this.translateMix=0}__init3(){this.scaleMix=0}__init4(){this.shearMix=0}__init5(){this.temp=new Ol}__init6(){this.active=!1}constructor(t,e){if(Gc.prototype.__init.call(this),Gc.prototype.__init2.call(this),Gc.prototype.__init3.call(this),Gc.prototype.__init4.call(this),Gc.prototype.__init5.call(this),Gc.prototype.__init6.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,a=s.a,o=s.c,h=s.b,l=s.d,c=a*l-o*h>0?Rl.degRad:-Rl.degRad,u=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones;for(let s=0,c=p.length;s<c;s++){let c=p[s],f=!1,m=c.matrix;if(0!=t){let e=m.a,i=m.c,n=m.b,r=m.d,s=Math.atan2(h,a)-Math.atan2(n,e)+u;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let o=Math.cos(s),l=Math.sin(s);m.a=o*e-l*n,m.c=o*i-l*r,m.b=l*e+o*n,m.d=l*i+o*r,f=!0}if(0!=e){let t=this.temp;r.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),m.tx+=(t.x-m.tx)*e,m.ty+=(t.y-m.ty)*e,f=!0}if(i>0){let t=Math.sqrt(m.a*m.a+m.b*m.b),e=Math.sqrt(a*a+h*h);t>1e-5&&(t=(t+(e-t+this.data.offsetScaleX)*i)/t),m.a*=t,m.b*=t,t=Math.sqrt(m.c*m.c+m.d*m.d),e=Math.sqrt(o*o+l*l),t>1e-5&&(t=(t+(e-t+this.data.offsetScaleY)*i)/t),m.c*=t,m.d*=t,f=!0}if(n>0){let t=m.c,e=m.d,i=Math.atan2(e,t),r=Math.atan2(l,o)-Math.atan2(h,a)-(i-Math.atan2(m.b,m.a));r>Rl.PI?r-=Rl.PI2:r<-Rl.PI&&(r+=Rl.PI2),r=i+(r+d)*n;let s=Math.sqrt(t*t+e*e);m.c=Math.cos(r)*s,m.d=Math.sin(r)*s,f=!0}f&&(c.appliedValid=!1)}}applyRelativeWorld(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,a=s.a,o=s.c,h=s.b,l=s.d,c=a*l-o*h>0?Rl.degRad:-Rl.degRad,u=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones;for(let s=0,c=p.length;s<c;s++){let c=p[s],f=!1,m=c.matrix;if(0!=t){let e=m.a,i=m.c,n=m.b,r=m.d,s=Math.atan2(h,a)+u;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let o=Math.cos(s),l=Math.sin(s);m.a=o*e-l*n,m.c=o*i-l*r,m.b=l*e+o*n,m.d=l*i+o*r,f=!0}if(0!=e){let t=this.temp;r.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),m.tx+=t.x*e,m.ty+=t.y*e,f=!0}if(i>0){let t=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleX)*i+1;m.a*=t,m.b*=t,t=(Math.sqrt(o*o+l*l)-1+this.data.offsetScaleY)*i+1,m.c*=t,m.d*=t,f=!0}if(n>0){let t=Math.atan2(l,o)-Math.atan2(h,a);t>Rl.PI?t-=Rl.PI2:t<-Rl.PI&&(t+=Rl.PI2);let e=m.c,i=m.d;t=Math.atan2(i,e)+(t-Rl.PI/2+d)*n;let r=Math.sqrt(e*e+i*i);m.c=Math.cos(t)*r,m.d=Math.sin(t)*r,f=!0}f&&(c.appliedValid=!1)}}applyAbsoluteLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();let s=this.bones;for(let a=0,o=s.length;a<o;a++){let o=s[a];o.appliedValid||o.updateAppliedTransform();let h=o.arotation;if(0!=t){let e=r.arotation-h+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),h+=e*t}let l=o.ax,c=o.ay;0!=e&&(l+=(r.ax-l+this.data.offsetX)*e,c+=(r.ay-c+this.data.offsetY)*e);let u=o.ascaleX,d=o.ascaleY;i>0&&(u>1e-5&&(u=(u+(r.ascaleX-u+this.data.offsetScaleX)*i)/u),d>1e-5&&(d=(d+(r.ascaleY-d+this.data.offsetScaleY)*i)/d));let p=o.ashearY;if(n>0){let t=r.ashearY-p+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),o.shearY+=t*n}o.updateWorldTransformWith(l,c,h,u,d,o.ashearX,p)}}applyRelativeLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();let s=this.bones;for(let a=0,o=s.length;a<o;a++){let o=s[a];o.appliedValid||o.updateAppliedTransform();let h=o.arotation;0!=t&&(h+=(r.arotation+this.data.offsetRotation)*t);let l=o.ax,c=o.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);let u=o.ascaleX,d=o.ascaleY;i>0&&(u>1e-5&&(u*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),d>1e-5&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));let p=o.ashearY;n>0&&(p+=(r.ashearY+this.data.offsetShearY)*n),o.updateWorldTransformWith(l,c,h,u,d,o.ashearX,p)}}}class jc{__init(){this._updateCache=new Array}__init2(){this.updateCacheReset=new Array}__init3(){this.time=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.x=0}__init7(){this.y=0}constructor(t){if(jc.prototype.__init.call(this),jc.prototype.__init2.call(this),jc.prototype.__init3.call(this),jc.prototype.__init4.call(this),jc.prototype.__init5.call(this),jc.prototype.__init6.call(this),jc.prototype.__init7.call(this),null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,n=t.bones[e];if(null==n.parent)i=new Fc(n,this,null);else{let t=this.bones[n.parent.index];i=new Fc(n,this,t),t.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],n=this.bones[i.boneData.index],r=new Vc(i,n);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new Bc(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new Gc(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Yc(i,this))}this.color=new Al(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0,this.updateCacheReset.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(null!=this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(null!=i)}}let e=this.ikConstraints,i=this.transformConstraints,n=this.pathConstraints,r=e.length,s=i.length,a=n.length,o=r+s+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let n=e[i];if(n.data.order==t){this.sortIkConstraint(n);continue t}}for(let e=0;e<s;e++){let n=i[e];if(n.data.order==t){this.sortTransformConstraint(n);continue t}}for(let e=0;e<a;e++){let i=n[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,n=i[0];if(this.sortBone(n),i.length>1){let t=i[i.length-1];this._updateCache.indexOf(t)>-1||this.updateCacheReset.push(t)}this._updateCache.push(t),this.sortReset(n.children),i[i.length-1].sorted=!0}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,n=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,n);let r=e.getAttachment();r instanceof zl&&this.sortPathConstraintAttachmentWith(r,n);let s=t.bones,a=s.length;for(let t=0;t<a;t++)this.sortBone(s[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(s[t].children);for(let t=0;t<a;t++)s[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let n=t.attachments[e];if(n)for(let t in n)this.sortPathConstraintAttachmentWith(n[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof zl))return;let i=t.bones;if(null==i)this.sortBone(e);else{let t=this.bones,e=0;for(;e<i.length;){let n=i[e++];for(let r=e+n;e<r;e++){let n=i[e];this.sortBone(t[n])}}}}sortBone(t){if(t.sorted)return;let e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.updateCacheReset;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],n=e.data;e.rotateMix=n.rotateMix,e.translateMix=n.translateMix,e.scaleMix=n.scaleMix,e.shearMix=n.shearMix}let n=this.pathConstraints;for(let t=0,e=n.length;t<e;t++){let e=n[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.rotateMix=i.rotateMix,e.translateMix=i.translateMix}}setSlotsToSetupPose(){let t=this.slots;Ml.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findBoneIndex(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}findSlot(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findSlotIndex(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}setSkinByName(t){let e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i],r=n.data.attachmentName;if(null!=r){let e=t.getAttachment(i,r);null!=e&&n.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){let i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(null==t)throw new Error("slotName cannot be null.");let i=this.slots;for(let n=0,r=i.length;n<r;n++){let r=i[n];if(r.data.name==t){let i=null;if(null!=e&&(i=this.getAttachment(n,e),null==i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findTransformConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findPathConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}getBounds(t,e,i=new Array(2)){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");let n=this.drawOrder,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=n.length;t<e;t++){let e=n[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof Zl)h=8,l=Ml.setArraySize(i,h,0),c.computeWorldVertices(e.bone,l,0,2);else if(c instanceof Hl){let t=c;h=t.worldVerticesLength,l=Ml.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(null!=l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],i=l[t+1];r=Math.min(r,e),s=Math.min(s,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,s),e.set(a-r,o-s)}update(t){this.time+=t}get flipX(){return-1==this.scaleX}set flipX(t){jc.deprecatedWarning1||(jc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return-1==this.scaleY}set flipY(t){jc.deprecatedWarning1||(jc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}static __initStatic(){this.deprecatedWarning1=!1}}jc.__initStatic();class Wc{constructor(){Wc.prototype.__init.call(this),Wc.prototype.__init2.call(this),Wc.prototype.__init3.call(this),Wc.prototype.__init4.call(this),Wc.prototype.__init5.call(this),Wc.prototype.__init6.call(this),Wc.prototype.__init7.call(this),Wc.prototype.__init8.call(this),Wc.prototype.__init9.call(this)}__init(){this.bones=new Array}__init2(){this.slots=new Array}__init3(){this.skins=new Array}__init4(){this.events=new Array}__init5(){this.animations=new Array}__init6(){this.ikConstraints=new Array}__init7(){this.transformConstraints=new Array}__init8(){this.pathConstraints=new Array}__init9(){this.fps=0}findBone(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findBoneIndex(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSlot(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findSlotIndex(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSkin(t){if(null==t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findEvent(t){if(null==t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findAnimation(t){if(null==t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findIkConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findTransformConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraintIndex(t){if(null==t)throw new Error("pathConstraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}}class Hc{__init(){this.color=new Al(1,1,1,1)}constructor(t,e,i){if(Hc.prototype.__init.call(this),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}class zc extends kc{__init(){this.bones=new Array}__init2(){this.rotateMix=0}__init3(){this.translateMix=0}__init4(){this.scaleMix=0}__init5(){this.shearMix=0}__init6(){this.offsetRotation=0}__init7(){this.offsetX=0}__init8(){this.offsetY=0}__init9(){this.offsetScaleX=0}__init10(){this.offsetScaleY=0}__init11(){this.offsetShearY=0}__init12(){this.relative=!1}__init13(){this.local=!1}constructor(t){super(t,0,!1),zc.prototype.__init.call(this),zc.prototype.__init2.call(this),zc.prototype.__init3.call(this),zc.prototype.__init4.call(this),zc.prototype.__init5.call(this),zc.prototype.__init6.call(this),zc.prototype.__init7.call(this),zc.prototype.__init8.call(this),zc.prototype.__init9.call(this),zc.prototype.__init10.call(this),zc.prototype.__init11.call(this),zc.prototype.__init12.call(this),zc.prototype.__init13.call(this)}}class qc{constructor(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i}}class Zc{__init(){this.attachments=new Array}__init2(){this.bones=Array()}__init3(){this.constraints=new Array}constructor(t){if(Zc.prototype.__init.call(this),Zc.prototype.__init2.call(this),Zc.prototype.__init3.call(this),null==t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(null==i)throw new Error("attachment cannot be null.");let n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],n=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){n=!0;break}n||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],n=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){n=!0;break}n||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],n=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){n=!0;break}n||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],n=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){n=!0;break}n||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];null!=i.attachment&&(i.attachment instanceof Hl?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&(i[e]=null)}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let n in i){let r=i[n];r&&t.push(new qc(e,n,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let n in i){let r=i[n];r&&e.push(new qc(t,n,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let n=0;n<t.slots.length;n++){let r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(s==t[e]){let t=this.getAttachment(i,e);null!=t&&r.setAttachment(t);break}}}i++}}}class Kc{static __initStatic(){this.AttachmentTypeValues=[0,1,2,3,4,5,6]}static __initStatic2(){this.TransformModeValues=[Sc.Normal,Sc.OnlyTranslation,Sc.NoRotationOrReflection,Sc.NoScale,Sc.NoScaleOrReflection]}static __initStatic3(){this.PositionModeValues=[Tc.Fixed,Tc.Percent]}static __initStatic4(){this.SpacingModeValues=[wc.Length,wc.Fixed,wc.Percent]}static __initStatic5(){this.RotateModeValues=[Ac.Tangent,Ac.Chain,Ac.ChainScale]}static __initStatic6(){this.BlendModeValues=[ft.NORMAL,ft.ADD,ft.MULTIPLY,ft.SCREEN]}static __initStatic7(){this.BONE_ROTATE=0}static __initStatic8(){this.BONE_TRANSLATE=1}static __initStatic9(){this.BONE_SCALE=2}static __initStatic10(){this.BONE_SHEAR=3}static __initStatic11(){this.SLOT_ATTACHMENT=0}static __initStatic12(){this.SLOT_COLOR=1}static __initStatic13(){this.SLOT_TWO_COLOR=2}static __initStatic14(){this.PATH_POSITION=0}static __initStatic15(){this.PATH_SPACING=1}static __initStatic16(){this.PATH_MIX=2}static __initStatic17(){this.CURVE_LINEAR=0}static __initStatic18(){this.CURVE_STEPPED=1}static __initStatic19(){this.CURVE_BEZIER=2}__init(){this.scale=1}__init2(){this.linkedMeshes=new Array}constructor(t){Kc.prototype.__init.call(this),Kc.prototype.__init2.call(this),this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new Wc;i.name="";let n=new pl(t);if(i.hash=n.readString(),i.version=n.readString(),"3.8.75"===i.version){let t="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(t)}i.x=n.readFloat(),i.y=n.readFloat(),i.width=n.readFloat(),i.height=n.readFloat();let r=n.readBoolean();r&&(i.fps=n.readFloat(),i.imagesPath=n.readString(),i.audioPath=n.readString());let s=0;s=n.readInt(!0);for(let t=0;t<s;t++)n.strings.push(n.readString());s=n.readInt(!0);for(let t=0;t<s;t++){let s=n.readString(),a=0==t?null:i.bones[n.readInt(!0)],o=new Dc(t,s,a);o.rotation=n.readFloat(),o.x=n.readFloat()*e,o.y=n.readFloat()*e,o.scaleX=n.readFloat(),o.scaleY=n.readFloat(),o.shearX=n.readFloat(),o.shearY=n.readFloat(),o.length=n.readFloat()*e,o.transformMode=Kc.TransformModeValues[n.readInt(!0)],o.skinRequired=n.readBoolean(),r&&Al.rgba8888ToColor(o.color,n.readInt32()),i.bones.push(o)}s=n.readInt(!0);for(let t=0;t<s;t++){let e=n.readString(),r=i.bones[n.readInt(!0)],s=new Hc(t,e,r);Al.rgba8888ToColor(s.color,n.readInt32());let a=n.readInt32();-1!=a&&Al.rgb888ToColor(s.darkColor=new Al,a),s.attachmentName=n.readStringRef(),s.blendMode=Kc.BlendModeValues[n.readInt(!0)],i.slots.push(s)}s=n.readInt(!0);for(let t,r=0;r<s;r++){let r=new Xc(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.bones[n.readInt(!0)],r.mix=n.readFloat(),r.softness=n.readFloat()*e,r.bendDirection=n.readByte(),r.compress=n.readBoolean(),r.stretch=n.readBoolean(),r.uniform=n.readBoolean(),i.ikConstraints.push(r)}s=n.readInt(!0);for(let t,r=0;r<s;r++){let r=new zc(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.bones[n.readInt(!0)],r.local=n.readBoolean(),r.relative=n.readBoolean(),r.offsetRotation=n.readFloat(),r.offsetX=n.readFloat()*e,r.offsetY=n.readFloat()*e,r.offsetScaleX=n.readFloat(),r.offsetScaleY=n.readFloat(),r.offsetShearY=n.readFloat(),r.rotateMix=n.readFloat(),r.translateMix=n.readFloat(),r.scaleMix=n.readFloat(),r.shearMix=n.readFloat(),i.transformConstraints.push(r)}s=n.readInt(!0);for(let t,r=0;r<s;r++){let r=new Uc(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.slots[n.readInt(!0)],r.positionMode=Kc.PositionModeValues[n.readInt(!0)],r.spacingMode=Kc.SpacingModeValues[n.readInt(!0)],r.rotateMode=Kc.RotateModeValues[n.readInt(!0)],r.offsetRotation=n.readFloat(),r.position=n.readFloat(),r.positionMode==Tc.Fixed&&(r.position*=e),r.spacing=n.readFloat(),r.spacingMode!=wc.Length&&r.spacingMode!=wc.Fixed||(r.spacing*=e),r.rotateMix=n.readFloat(),r.translateMix=n.readFloat(),i.pathConstraints.push(r)}let a=this.readSkin(n,i,!0,r);null!=a&&(i.defaultSkin=a,i.skins.push(a));{let t=i.skins.length;for(Ml.setArraySize(i.skins,s=t+n.readInt(!0));t<s;t++)i.skins[t]=this.readSkin(n,i,!1,r)}s=this.linkedMeshes.length;for(let t=0;t<s;t++){let e=this.linkedMeshes[t],n=null==e.skin?i.defaultSkin:i.findSkin(e.skin);if(null==n)throw new Error("Skin not found: "+e.skin);let r=n.getAttachment(e.slotIndex,e.parent);if(null==r)throw new Error("Parent mesh not found: "+e.parent);e.mesh.deformAttachment=e.inheritDeform?r:e.mesh,e.mesh.setParentMesh(r)}this.linkedMeshes.length=0,s=n.readInt(!0);for(let t=0;t<s;t++){let t=new Lc(n.readStringRef());t.intValue=n.readInt(!1),t.floatValue=n.readFloat(),t.stringValue=n.readString(),t.audioPath=n.readString(),null!=t.audioPath&&(t.volume=n.readFloat(),t.balance=n.readFloat()),i.events.push(t)}s=n.readInt(!0);for(let t=0;t<s;t++)i.animations.push(this.readAnimation(n,n.readString(),i));return i}readSkin(t,e,i,n){let r=null,s=0;if(i){if(s=t.readInt(!0),0==s)return null;r=new Zc("default")}else{r=new Zc(t.readStringRef()),r.bones.length=t.readInt(!0);for(let i=0,n=r.bones.length;i<n;i++)r.bones[i]=e.bones[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);s=t.readInt(!0)}for(let i=0;i<s;i++){let i=t.readInt(!0);for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readStringRef(),a=this.readAttachment(t,e,r,i,s,n);null!=a&&r.setAttachment(i,s,a)}}return r}readAttachment(t,e,i,n,r,s){let a=this.scale,o=t.readStringRef();null==o&&(o=r);let h=t.readByte();switch(Kc.AttachmentTypeValues[h]){case cl.Region:{let e=t.readStringRef(),n=t.readFloat(),r=t.readFloat(),s=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readInt32();null==e&&(e=o);let p=this.attachmentLoader.newRegionAttachment(i,o,e);return null==p?null:(p.path=e,p.x=r*a,p.y=s*a,p.scaleX=h,p.scaleY=l,p.rotation=n,p.width=c*a,p.height=u*a,Al.rgba8888ToColor(p.color,d),p)}case cl.BoundingBox:{let e=t.readInt(!0),n=this.readVertices(t,e),r=s?t.readInt32():0,a=this.attachmentLoader.newBoundingBoxAttachment(i,o);return null==a?null:(a.worldVerticesLength=e<<1,a.vertices=n.vertices,a.bones=n.bones,s&&Al.rgba8888ToColor(a.color,r),a)}case cl.Mesh:{let e=t.readStringRef(),n=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),l=this.readShortArray(t),c=this.readVertices(t,r),u=t.readInt(!0),d=null,p=0,f=0;s&&(d=this.readShortArray(t),p=t.readFloat(),f=t.readFloat()),null==e&&(e=o);let m=this.attachmentLoader.newMeshAttachment(i,o,e);return null==m?null:(m.path=e,Al.rgba8888ToColor(m.color,n),m.bones=c.bones,m.vertices=c.vertices,m.worldVerticesLength=r<<1,m.triangles=l,m.regionUVs=new Float32Array(h),m.hullLength=u<<1,s&&(m.edges=d,m.width=p*a,m.height=f*a),m)}case cl.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),l=t.readStringRef(),c=t.readBoolean(),u=0,d=0;s&&(u=t.readFloat(),d=t.readFloat()),null==e&&(e=o);let p=this.attachmentLoader.newMeshAttachment(i,o,e);return null==p?null:(p.path=e,Al.rgba8888ToColor(p.color,r),s&&(p.width=u*a,p.height=d*a),this.linkedMeshes.push(new Jc(p,h,n,l,c)),p)}case cl.Path:{let e=t.readBoolean(),n=t.readBoolean(),r=t.readInt(!0),h=this.readVertices(t,r),l=Ml.newArray(r/3,0);for(let e=0,i=l.length;e<i;e++)l[e]=t.readFloat()*a;let c=s?t.readInt32():0,u=this.attachmentLoader.newPathAttachment(i,o);return null==u?null:(u.closed=e,u.constantSpeed=n,u.worldVerticesLength=r<<1,u.vertices=h.vertices,u.bones=h.bones,u.lengths=l,s&&Al.rgba8888ToColor(u.color,c),u)}case cl.Point:{let e=t.readFloat(),n=t.readFloat(),r=t.readFloat(),h=s?t.readInt32():0,l=this.attachmentLoader.newPointAttachment(i,o);return null==l?null:(l.x=n*a,l.y=r*a,l.rotation=e,s&&Al.rgba8888ToColor(l.color,h),l)}case cl.Clipping:{let n=t.readInt(!0),r=t.readInt(!0),a=this.readVertices(t,r),h=s?t.readInt32():0,l=this.attachmentLoader.newClippingAttachment(i,o);return null==l?null:(l.endSlot=e.slots[n],l.worldVerticesLength=r<<1,l.vertices=a.vertices,l.bones=a.bones,s&&Al.rgba8888ToColor(l.color,h),l)}}return null}readVertices(t,e){let i=e<<1,n=new $c,r=this.scale;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,i,r),n;let s=new Array,a=new Array;for(let i=0;i<e;i++){let e=t.readInt(!0);a.push(e);for(let i=0;i<e;i++)a.push(t.readInt(!0)),s.push(t.readFloat()*r),s.push(t.readFloat()*r),s.push(t.readFloat())}return n.vertices=Ml.toFloatArray(s),n.bones=a,n}readFloatArray(t,e,i){let n=new Array(e);if(1==i)for(let i=0;i<e;i++)n[i]=t.readFloat();else for(let r=0;r<e;r++)n[r]=t.readFloat()*i;return n}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let n=0;n<e;n++)i[n]=t.readShort();return i}readAnimation(t,e,i){let n=new Array,r=this.scale,s=0,a=new Al,o=new Al;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0);switch(i){case Kc.SLOT_ATTACHMENT:{let i=new lc(r);i.slotIndex=e;for(let e=0;e<r;e++)i.setFrame(e,t.readFloat(),t.readStringRef());n.push(i),s=Math.max(s,i.frames[r-1]);break}case Kc.SLOT_COLOR:{let i=new oc(r);i.slotIndex=e;for(let e=0;e<r;e++){let n=t.readFloat();Al.rgba8888ToColor(a,t.readInt32()),i.setFrame(e,n,a.r,a.g,a.b,a.a),e<r-1&&this.readCurve(t,e,i)}n.push(i),s=Math.max(s,i.frames[(r-1)*oc.ENTRIES]);break}case Kc.SLOT_TWO_COLOR:{let i=new hc(r);i.slotIndex=e;for(let e=0;e<r;e++){let n=t.readFloat();Al.rgba8888ToColor(a,t.readInt32()),Al.rgb888ToColor(o,t.readInt32()),i.setFrame(e,n,a.r,a.g,a.b,a.a,o.r,o.g,o.b),e<r-1&&this.readCurve(t,e,i)}n.push(i),s=Math.max(s,i.frames[(r-1)*hc.ENTRIES]);break}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,a=t.readInt(!0);i<a;i++){let i=t.readByte(),a=t.readInt(!0);switch(i){case Kc.BONE_ROTATE:{let i=new nc(a);i.boneIndex=e;for(let e=0;e<a;e++)i.setFrame(e,t.readFloat(),t.readFloat()),e<a-1&&this.readCurve(t,e,i);n.push(i),s=Math.max(s,i.frames[(a-1)*nc.ENTRIES]);break}case Kc.BONE_TRANSLATE:case Kc.BONE_SCALE:case Kc.BONE_SHEAR:{let o,h=1;i==Kc.BONE_SCALE?o=new sc(a):i==Kc.BONE_SHEAR?o=new ac(a):(o=new rc(a),h=r),o.boneIndex=e;for(let e=0;e<a;e++)o.setFrame(e,t.readFloat(),t.readFloat()*h,t.readFloat()*h),e<a-1&&this.readCurve(t,e,o);n.push(o),s=Math.max(s,o.frames[(a-1)*rc.ENTRIES]);break}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),a=new fc(i);a.ikConstraintIndex=e;for(let e=0;e<i;e++)a.setFrame(e,t.readFloat(),t.readFloat(),t.readFloat()*r,t.readByte(),t.readBoolean(),t.readBoolean()),e<i-1&&this.readCurve(t,e,a);n.push(a),s=Math.max(s,a.frames[(i-1)*fc.ENTRIES])}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=new mc(i);r.transformConstraintIndex=e;for(let e=0;e<i;e++)r.setFrame(e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),e<i-1&&this.readCurve(t,e,r);n.push(r),s=Math.max(s,r.frames[(i-1)*mc.ENTRIES])}for(let e=0,a=t.readInt(!0);e<a;e++){let e=t.readInt(!0),a=i.pathConstraints[e];for(let i=0,o=t.readInt(!0);i<o;i++){let i=t.readByte(),o=t.readInt(!0);switch(i){case Kc.PATH_POSITION:case Kc.PATH_SPACING:{let h,l=1;i==Kc.PATH_SPACING?(h=new gc(o),a.spacingMode!=wc.Length&&a.spacingMode!=wc.Fixed||(l=r)):(h=new _c(o),a.positionMode==Tc.Fixed&&(l=r)),h.pathConstraintIndex=e;for(let e=0;e<o;e++)h.setFrame(e,t.readFloat(),t.readFloat()*l),e<o-1&&this.readCurve(t,e,h);n.push(h),s=Math.max(s,h.frames[(o-1)*_c.ENTRIES]);break}case Kc.PATH_MIX:{let i=new yc(o);i.pathConstraintIndex=e;for(let e=0;e<o;e++)i.setFrame(e,t.readFloat(),t.readFloat(),t.readFloat()),e<o-1&&this.readCurve(t,e,i);n.push(i),s=Math.max(s,i.frames[(o-1)*yc.ENTRIES]);break}}}}for(let e=0,a=t.readInt(!0);e<a;e++){let e=i.skins[t.readInt(!0)];for(let i=0,a=t.readInt(!0);i<a;i++){let i=t.readInt(!0);for(let a=0,o=t.readInt(!0);a<o;a++){let a=e.getAttachment(i,t.readStringRef()),o=null!=a.bones,h=a.vertices,l=o?h.length/3*2:h.length,c=t.readInt(!0),u=new uc(c);u.slotIndex=i,u.attachment=a;for(let e=0;e<c;e++){let i,n=t.readFloat(),s=t.readInt(!0);if(0==s)i=o?Ml.newFloatArray(l):h;else{i=Ml.newFloatArray(l);let e=t.readInt(!0);if(s+=e,1==r)for(let n=e;n<s;n++)i[n]=t.readFloat();else for(let n=e;n<s;n++)i[n]=t.readFloat()*r;if(!o)for(let t=0,e=i.length;t<e;t++)i[t]+=h[t]}u.setFrame(e,n,i),e<c-1&&this.readCurve(t,e,u)}n.push(u),s=Math.max(s,u.frames[c-1])}}}let h=t.readInt(!0);if(h>0){let e=new pc(h),r=i.slots.length;for(let i=0;i<h;i++){let n=t.readFloat(),s=t.readInt(!0),a=Ml.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=Ml.newArray(r-s,0),h=0,l=0;for(let e=0;e<s;e++){let e=t.readInt(!0);for(;h!=e;)o[l++]=h++;a[h+t.readInt(!0)]=h++}for(;h<r;)o[l++]=h++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--l]);e.setFrame(i,n,a)}n.push(e),s=Math.max(s,e.frames[h-1])}let l=t.readInt(!0);if(l>0){let e=new dc(l);for(let n=0;n<l;n++){let r=t.readFloat(),s=i.events[t.readInt(!0)],a=new Nc(r,s);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():s.stringValue,null!=a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(n,a)}n.push(e),s=Math.max(s,e.frames[l-1])}return new $l(e,n,s)}readCurve(t,e,i){switch(t.readByte()){case Kc.CURVE_STEPPED:i.setStepped(e);break;case Kc.CURVE_BEZIER:this.setCurve(i,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}}setCurve(t,e,i,n,r,s){t.setCurve(e,i,n,r,s)}}Kc.__initStatic(),Kc.__initStatic2(),Kc.__initStatic3(),Kc.__initStatic4(),Kc.__initStatic5(),Kc.__initStatic6(),Kc.__initStatic7(),Kc.__initStatic8(),Kc.__initStatic9(),Kc.__initStatic10(),Kc.__initStatic11(),Kc.__initStatic12(),Kc.__initStatic13(),Kc.__initStatic14(),Kc.__initStatic15(),Kc.__initStatic16(),Kc.__initStatic17(),Kc.__initStatic18(),Kc.__initStatic19();class Jc{constructor(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}class $c{constructor(t=null,e=null){this.bones=t,this.vertices=e}}class Qc{constructor(){Qc.prototype.__init.call(this),Qc.prototype.__init2.call(this),Qc.prototype.__init3.call(this),Qc.prototype.__init4.call(this),Qc.prototype.__init5.call(this),Qc.prototype.__init6.call(this),Qc.prototype.__init7.call(this)}__init(){this.minX=0}__init2(){this.minY=0}__init3(){this.maxX=0}__init4(){this.maxY=0}__init5(){this.boundingBoxes=new Array}__init6(){this.polygons=new Array}__init7(){this.polygonPool=new Pl(()=>Ml.newFloatArray(16))}update(t,e){if(null==t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,n=this.polygons,r=this.polygonPool,s=t.slots,a=s.length;i.length=0,r.freeAll(n),n.length=0;for(let t=0;t<a;t++){let e=s[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof jl){let t=a;i.push(t);let s=r.obtain();s.length!=t.worldVerticesLength&&(s=Ml.newFloatArray(t.worldVerticesLength)),n.push(s),t.computeWorldVertices(e,0,t.worldVerticesLength,s,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons;for(let s=0,a=r.length;s<a;s++){let a=r[s],o=a;for(let r=0,s=a.length;r<s;r+=2){let s=o[r],a=o[r+1];t=Math.min(t,s),e=Math.min(e,a),i=Math.max(i,s),n=Math.max(n,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,n){let r=this.minX,s=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||t>=a&&i>=a||e>=o&&n>=o)return!1;let h=(n-e)/(i-t),l=h*(r-t)+e;if(l>s&&l<o)return!0;if(l=h*(a-t)+e,l>s&&l<o)return!0;let c=(s-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null}containsPointPolygon(t,e,i){let n=t,r=t.length,s=r-2,a=!1;for(let t=0;t<r;t+=2){let r=n[t+1],o=n[s+1];if(r<i&&o>=i||o<i&&r>=i){let h=n[t];h+(i-r)/(o-r)*(n[s]-h)<e&&(a=!a)}s=t}return a}intersectsSegment(t,e,i,n){let r=this.polygons;for(let s=0,a=r.length;s<a;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null}intersectsSegmentPolygon(t,e,i,n,r){let s=t,a=t.length,o=e-n,h=i-r,l=e*r-i*n,c=s[a-2],u=s[a-1];for(let t=0;t<a;t+=2){let a=s[t],d=s[t+1],p=c*d-u*a,f=c-a,m=u-d,_=o*m-h*f,g=(l*f-o*p)/_;if((g>=c&&g<=a||g>=a&&g<=c)&&(g>=e&&g<=n||g>=n&&g<=e)){let t=(l*m-h*p)/_;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(null==t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class tu{__init(){this.scale=1}__init2(){this.linkedMeshes=new Array}constructor(t){tu.prototype.__init.call(this),tu.prototype.__init2.call(this),this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new Wc,n="string"==typeof t?JSON.parse(t):t,r=n.skeleton;if(null!=r){if(i.hash=r.hash,i.version=r.spine,"3.8"!==i.version.substr(0,3)){let t=`Spine 3.8 loader cant load version ${r.spine}. Please configure your pixi-spine bundle`;console.error(t)}if("3.8.75"===i.version){let t="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(t)}i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images}if(n.bones)for(let t=0;t<n.bones.length;t++){let r=n.bones[t],s=null,a=this.getValue(r,"parent",null);if(null!=a&&(s=i.findBone(a),null==s))throw new Error("Parent bone not found: "+a);let o=new Dc(i.bones.length,r.name,s);o.length=this.getValue(r,"length",0)*e,o.x=this.getValue(r,"x",0)*e,o.y=this.getValue(r,"y",0)*e,o.rotation=this.getValue(r,"rotation",0),o.scaleX=this.getValue(r,"scaleX",1),o.scaleY=this.getValue(r,"scaleY",1),o.shearX=this.getValue(r,"shearX",0),o.shearY=this.getValue(r,"shearY",0),o.transformMode=tu.transformModeFromString(this.getValue(r,"transform","normal")),o.skinRequired=this.getValue(r,"skin",!1),i.bones.push(o)}if(n.slots)for(let t=0;t<n.slots.length;t++){let e=n.slots[t],r=e.name,s=e.bone,a=i.findBone(s);if(null==a)throw new Error("Slot bone not found: "+s);let o=new Hc(i.slots.length,r,a),h=this.getValue(e,"color",null);null!=h&&o.color.setFromString(h);let l=this.getValue(e,"dark",null);null!=l&&(o.darkColor=new Al(1,1,1,1),o.darkColor.setFromString(l)),o.attachmentName=this.getValue(e,"attachment",null),o.blendMode=tu.blendModeFromString(this.getValue(e,"blend","normal")),i.slots.push(o)}if(n.ik)for(let t=0;t<n.ik.length;t++){let r=n.ik[t],s=new Xc(r.name);s.order=this.getValue(r,"order",0),s.skinRequired=this.getValue(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("IK bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findBone(a),null==s.target)throw new Error("IK target bone not found: "+a);s.mix=this.getValue(r,"mix",1),s.softness=this.getValue(r,"softness",0)*e,s.bendDirection=this.getValue(r,"bendPositive",!0)?1:-1,s.compress=this.getValue(r,"compress",!1),s.stretch=this.getValue(r,"stretch",!1),s.uniform=this.getValue(r,"uniform",!1),i.ikConstraints.push(s)}if(n.transform)for(let t=0;t<n.transform.length;t++){let r=n.transform[t],s=new zc(r.name);s.order=this.getValue(r,"order",0),s.skinRequired=this.getValue(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findBone(a),null==s.target)throw new Error("Transform constraint target bone not found: "+a);s.local=this.getValue(r,"local",!1),s.relative=this.getValue(r,"relative",!1),s.offsetRotation=this.getValue(r,"rotation",0),s.offsetX=this.getValue(r,"x",0)*e,s.offsetY=this.getValue(r,"y",0)*e,s.offsetScaleX=this.getValue(r,"scaleX",0),s.offsetScaleY=this.getValue(r,"scaleY",0),s.offsetShearY=this.getValue(r,"shearY",0),s.rotateMix=this.getValue(r,"rotateMix",1),s.translateMix=this.getValue(r,"translateMix",1),s.scaleMix=this.getValue(r,"scaleMix",1),s.shearMix=this.getValue(r,"shearMix",1),i.transformConstraints.push(s)}if(n.path)for(let t=0;t<n.path.length;t++){let r=n.path[t],s=new Uc(r.name);s.order=this.getValue(r,"order",0),s.skinRequired=this.getValue(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findSlot(a),null==s.target)throw new Error("Path target slot not found: "+a);s.positionMode=tu.positionModeFromString(this.getValue(r,"positionMode","percent")),s.spacingMode=tu.spacingModeFromString(this.getValue(r,"spacingMode","length")),s.rotateMode=tu.rotateModeFromString(this.getValue(r,"rotateMode","tangent")),s.offsetRotation=this.getValue(r,"rotation",0),s.position=this.getValue(r,"position",0),s.positionMode==Tc.Fixed&&(s.position*=e),s.spacing=this.getValue(r,"spacing",0),s.spacingMode!=wc.Length&&s.spacingMode!=wc.Fixed||(s.spacing*=e),s.rotateMix=this.getValue(r,"rotateMix",1),s.translateMix=this.getValue(r,"translateMix",1),i.pathConstraints.push(s)}if(n.skins)for(let t=0;t<n.skins.length;t++){let e=n.skins[t],r=new Zc(e.name);if(e.bones)for(let n=0;n<e.bones.length;n++){let s=i.findBone(e.bones[n]);if(null==s)throw new Error("Skin bone not found: "+e.bones[t]);r.bones.push(s)}if(e.ik)for(let n=0;n<e.ik.length;n++){let s=i.findIkConstraint(e.ik[n]);if(null==s)throw new Error("Skin IK constraint not found: "+e.ik[t]);r.constraints.push(s)}if(e.transform)for(let n=0;n<e.transform.length;n++){let s=i.findTransformConstraint(e.transform[n]);if(null==s)throw new Error("Skin transform constraint not found: "+e.transform[t]);r.constraints.push(s)}if(e.path)for(let n=0;n<e.path.length;n++){let s=i.findPathConstraint(e.path[n]);if(null==s)throw new Error("Skin path constraint not found: "+e.path[t]);r.constraints.push(s)}for(let t in e.attachments){let n=i.findSlot(t);if(null==n)throw new Error("Slot not found: "+t);let s=e.attachments[t];for(let t in s){let e=this.readAttachment(s[t],r,n.index,t,i);null!=e&&r.setAttachment(n.index,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],n=null==e.skin?i.defaultSkin:i.findSkin(e.skin);if(null==n)throw new Error("Skin not found: "+e.skin);let r=n.getAttachment(e.slotIndex,e.parent);if(null==r)throw new Error("Parent mesh not found: "+e.parent);e.mesh.deformAttachment=e.inheritDeform?r:e.mesh,e.mesh.setParentMesh(r)}if(this.linkedMeshes.length=0,n.events)for(let t in n.events){let e=n.events[t],r=new Lc(t);r.intValue=this.getValue(e,"int",0),r.floatValue=this.getValue(e,"float",0),r.stringValue=this.getValue(e,"string",""),r.audioPath=this.getValue(e,"audio",null),null!=r.audioPath&&(r.volume=this.getValue(e,"volume",1),r.balance=this.getValue(e,"balance",0)),i.events.push(r)}if(n.animations)for(let t in n.animations){let e=n.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,n,r){let s=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{let i=this.getValue(t,"path",n),r=this.attachmentLoader.newRegionAttachment(e,n,i);if(null==r)return null;r.path=i,r.x=this.getValue(t,"x",0)*s,r.y=this.getValue(t,"y",0)*s,r.scaleX=this.getValue(t,"scaleX",1),r.scaleY=this.getValue(t,"scaleY",1),r.rotation=this.getValue(t,"rotation",0),r.width=t.width*s,r.height=t.height*s;let a=this.getValue(t,"color",null);return null!=a&&r.color.setFromString(a),r}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(null==i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=this.getValue(t,"color",null);return null!=r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=this.getValue(t,"path",n),a=this.attachmentLoader.newMeshAttachment(e,n,r);if(null==a)return null;a.path=r;let o=this.getValue(t,"color",null);null!=o&&a.color.setFromString(o),a.width=this.getValue(t,"width",0)*s,a.height=this.getValue(t,"height",0)*s;let h=this.getValue(t,"parent",null);if(null!=h)return this.linkedMeshes.push(new eu(a,this.getValue(t,"skin",null),i,h,this.getValue(t,"deform",!0))),a;let l=t.uvs;return this.readVertices(t,a,l.length),a.triangles=t.triangles,a.regionUVs=new Float32Array(l),a.edges=this.getValue(t,"edges",null),a.hullLength=2*this.getValue(t,"hull",0),a}case"path":{let i=this.attachmentLoader.newPathAttachment(e,n);if(null==i)return null;i.closed=this.getValue(t,"closed",!1),i.constantSpeed=this.getValue(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=Ml.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*s;i.lengths=a;let o=this.getValue(t,"color",null);return null!=o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,n);if(null==i)return null;i.x=this.getValue(t,"x",0)*s,i.y=this.getValue(t,"y",0)*s,i.rotation=this.getValue(t,"rotation",0);let r=this.getValue(t,"color",null);return null!=r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,n);if(null==i)return null;let s=this.getValue(t,"end",null);if(null!=s){let t=r.findSlot(s);if(null==t)throw new Error("Clipping end slot not found: "+s);i.endSlot=t}let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=this.getValue(t,"color",null);return null!=o&&i.color.setFromString(o),i}}return null}readVertices(t,e,i){let n=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=Ml.toFloatArray(r);if(1!=n)for(let e=0,i=r.length;e<i;e++)t[e]*=n;return void(e.vertices=t)}let s=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),s.push(r[t+1]*n),s.push(r[t+2]*n),s.push(r[t+3])}e.bones=a,e.vertices=Ml.toFloatArray(s)}readAnimation(t,e,i){let n=this.scale,r=new Array,s=0;if(t.slots)for(let e in t.slots){let n=t.slots[e],a=i.findSlotIndex(e);if(-1==a)throw new Error("Slot not found: "+e);for(let t in n){let i=n[t];if("attachment"==t){let t=new lc(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n];t.setFrame(e++,this.getValue(r,"time",0),r.name)}r.push(t),s=Math.max(s,t.frames[t.getFrameCount()-1])}else if("color"==t){let t=new oc(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n],s=new Al;s.setFromString(r.color||"ffffffff"),t.setFrame(e,this.getValue(r,"time",0),s.r,s.g,s.b,s.a),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*oc.ENTRIES])}else{if("twoColor"!=t)throw new Error("Invalid timeline type for a slot: "+t+" ("+e+")");{let t=new hc(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n],s=new Al,a=new Al;s.setFromString(r.light),a.setFromString(r.dark),t.setFrame(e,this.getValue(r,"time",0),s.r,s.g,s.b,s.a,a.r,a.g,a.b),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*hc.ENTRIES])}}}}if(t.bones)for(let e in t.bones){let a=t.bones[e],o=i.findBoneIndex(e);if(-1==o)throw new Error("Bone not found: "+e);for(let t in a){let i=a[t];if("rotate"===t){let t=new nc(i.length);t.boneIndex=o;let e=0;for(let n=0;n<i.length;n++){let r=i[n];t.setFrame(e,this.getValue(r,"time",0),this.getValue(r,"angle",0)),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*nc.ENTRIES])}else{if("translate"!==t&&"scale"!==t&&"shear"!==t)throw new Error("Invalid timeline type for a bone: "+t+" ("+e+")");{let e=null,a=1,h=0;"scale"===t?(e=new sc(i.length),h=1):"shear"===t?e=new ac(i.length):(e=new rc(i.length),a=n),e.boneIndex=o;let l=0;for(let t=0;t<i.length;t++){let n=i[t],r=this.getValue(n,"x",h),s=this.getValue(n,"y",h);e.setFrame(l,this.getValue(n,"time",0),r*a,s*a),this.readCurve(n,e,l),l++}r.push(e),s=Math.max(s,e.frames[(e.getFrameCount()-1)*rc.ENTRIES])}}}}if(t.ik)for(let e in t.ik){let a=t.ik[e],o=i.findIkConstraint(e),h=new fc(a.length);h.ikConstraintIndex=i.ikConstraints.indexOf(o);let l=0;for(let t=0;t<a.length;t++){let e=a[t];h.setFrame(l,this.getValue(e,"time",0),this.getValue(e,"mix",1),this.getValue(e,"softness",0)*n,this.getValue(e,"bendPositive",!0)?1:-1,this.getValue(e,"compress",!1),this.getValue(e,"stretch",!1)),this.readCurve(e,h,l),l++}r.push(h),s=Math.max(s,h.frames[(h.getFrameCount()-1)*fc.ENTRIES])}if(t.transform)for(let e in t.transform){let n=t.transform[e],a=i.findTransformConstraint(e),o=new mc(n.length);o.transformConstraintIndex=i.transformConstraints.indexOf(a);let h=0;for(let t=0;t<n.length;t++){let e=n[t];o.setFrame(h,this.getValue(e,"time",0),this.getValue(e,"rotateMix",1),this.getValue(e,"translateMix",1),this.getValue(e,"scaleMix",1),this.getValue(e,"shearMix",1)),this.readCurve(e,o,h),h++}r.push(o),s=Math.max(s,o.frames[(o.getFrameCount()-1)*mc.ENTRIES])}if(t.path)for(let e in t.path){let a=t.path[e],o=i.findPathConstraintIndex(e);if(-1==o)throw new Error("Path constraint not found: "+e);let h=i.pathConstraints[o];for(let t in a){let e=a[t];if("position"===t||"spacing"===t){let i=null,a=1;"spacing"===t?(i=new gc(e.length),h.spacingMode!=wc.Length&&h.spacingMode!=wc.Fixed||(a=n)):(i=new _c(e.length),h.positionMode==Tc.Fixed&&(a=n)),i.pathConstraintIndex=o;let l=0;for(let n=0;n<e.length;n++){let r=e[n];i.setFrame(l,this.getValue(r,"time",0),this.getValue(r,t,0)*a),this.readCurve(r,i,l),l++}r.push(i),s=Math.max(s,i.frames[(i.getFrameCount()-1)*_c.ENTRIES])}else if("mix"===t){let t=new yc(e.length);t.pathConstraintIndex=o;let i=0;for(let n=0;n<e.length;n++){let r=e[n];t.setFrame(i,this.getValue(r,"time",0),this.getValue(r,"rotateMix",1),this.getValue(r,"translateMix",1)),this.readCurve(r,t,i),i++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*yc.ENTRIES])}}}if(t.deform)for(let e in t.deform){let a=t.deform[e],o=i.findSkin(e);if(null!=o)for(let t in a){let e=a[t],h=i.findSlotIndex(t);if(-1==h)throw new Error("Slot not found: "+e.name);for(let t in e){let i=e[t],a=o.getAttachment(h,t);if(null==a)throw new Error("Deform attachment not found: "+i.name);let l=null!=a.bones,c=a.vertices,u=l?c.length/3*2:c.length,d=new uc(i.length);d.slotIndex=h,d.attachment=a;let p=0;for(let t=0;t<i.length;t++){let e,r=i[t],s=this.getValue(r,"vertices",null);if(null==s)e=l?Ml.newFloatArray(u):c;else{e=Ml.newFloatArray(u);let t=this.getValue(r,"offset",0);if(Ml.arrayCopy(s,0,e,t,s.length),1!=n)for(let i=t,r=i+s.length;i<r;i++)e[i]*=n;if(!l)for(let t=0;t<u;t++)e[t]+=c[t]}d.setFrame(p,this.getValue(r,"time",0),e),this.readCurve(r,d,p),p++}r.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}}else if(Fl)throw new Error("Skin not found: "+e)}let a=t.drawOrder;if(null==a&&(a=t.draworder),null!=a){let t=new pc(a.length),e=i.slots.length,n=0;for(let r=0;r<a.length;r++){let s=a[r],o=null,h=this.getValue(s,"offsets",null);if(null!=h){o=Ml.newArray(e,-1);let t=Ml.newArray(e-h.length,0),n=0,r=0;for(let e=0;e<h.length;e++){let s=h[e],a=i.findSlotIndex(s.slot);if(-1==a)throw new Error("Slot not found: "+s.slot);for(;n!=a;)t[r++]=n++;o[n+s.offset]=n++}for(;n<e;)t[r++]=n++;for(let i=e-1;i>=0;i--)-1==o[i]&&(o[i]=t[--r])}t.setFrame(n++,this.getValue(s,"time",0),o)}r.push(t),s=Math.max(s,t.frames[t.getFrameCount()-1])}if(t.events){let e=new dc(t.events.length),n=0;for(let r=0;r<t.events.length;r++){let s=t.events[r],a=i.findEvent(s.name);if(null==a)throw new Error("Event not found: "+s.name);let o=new Nc(Ml.toSinglePrecision(this.getValue(s,"time",0)),a);o.intValue=this.getValue(s,"int",a.intValue),o.floatValue=this.getValue(s,"float",a.floatValue),o.stringValue=this.getValue(s,"string",a.stringValue),null!=o.data.audioPath&&(o.volume=this.getValue(s,"volume",1),o.balance=this.getValue(s,"balance",0)),e.setFrame(n++,o)}r.push(e),s=Math.max(s,e.frames[e.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new $l(e,r,s))}readCurve(t,e,i){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(i);else{let n=t.curve;e.setCurve(i,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}}getValue(t,e,i){return void 0!==t[e]?t[e]:i}static blendModeFromString(t){if("normal"==(t=t.toLowerCase()))return ft.NORMAL;if("additive"==t)return ft.ADD;if("multiply"==t)return ft.MULTIPLY;if("screen"==t)return ft.SCREEN;throw new Error("Unknown blend mode: "+t)}static positionModeFromString(t){if("fixed"==(t=t.toLowerCase()))return Tc.Fixed;if("percent"==t)return Tc.Percent;throw new Error("Unknown position mode: "+t)}static spacingModeFromString(t){if("length"==(t=t.toLowerCase()))return wc.Length;if("fixed"==t)return wc.Fixed;if("percent"==t)return wc.Percent;throw new Error("Unknown position mode: "+t)}static rotateModeFromString(t){if("tangent"==(t=t.toLowerCase()))return Ac.Tangent;if("chain"==t)return Ac.Chain;if("chainscale"==t)return Ac.ChainScale;throw new Error("Unknown rotate mode: "+t)}static transformModeFromString(t){if("normal"==(t=t.toLowerCase()))return Sc.Normal;if("onlytranslation"==t)return Sc.OnlyTranslation;if("norotationorreflection"==t)return Sc.NoRotationOrReflection;if("noscale"==t)return Sc.NoScale;if("noscaleorreflection"==t)return Sc.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)}}class eu{constructor(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}class iu extends Ul{createSkeleton(t){this.skeleton=new jc(t),this.skeleton.updateWorldTransform(),this.stateData=new Pc(t),this.state=new xc(this.stateData)}}
/*!
 * @pixi-spine/runtime-3.7 - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:22 UTC
 *
 * @pixi-spine/runtime-3.7 is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */class nu{constructor(t){if(null==t)throw new Error("name cannot be null.");this.name=t}}class ru extends nu{static __initStatic(){this.nextID=0}__init(){this.id=(65535&ru.nextID++)<<11}__init2(){this.worldVerticesLength=0}constructor(t){super(t),ru.prototype.__init.call(this),ru.prototype.__init2.call(this)}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,i,n,r,s){i=r+(i>>1)*s;let a=t.bone.skeleton,o=t.attachmentVertices,h=this.vertices,l=this.bones;if(null==l){o.length>0&&(h=o);let a=t.bone.matrix,l=a.tx,c=a.ty,u=a.a,d=a.c,p=a.b,f=a.d;for(let t=e,a=r;a<i;t+=2,a+=s){let e=h[t],i=h[t+1];n[a]=e*u+i*d+l,n[a+1]=e*p+i*f+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,e+=3){let t=d[l[c]].matrix,n=h[e],s=h[e+1],a=h[e+2];i+=(n*t.a+s*t.c+t.tx)*a,r+=(n*t.b+s*t.d+t.ty)*a}n[t]=i,n[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,a+=3,o+=2){let e=d[l[c]].matrix,n=h[a]+t[o],s=h[a+1]+t[o+1],u=h[a+2];i+=(n*e.a+s*e.c+e.tx)*u,r+=(n*e.b+s*e.d+e.ty)*u}n[e]=i,n[e+1]=r}}}applyDeform(t){return this==t}}ru.__initStatic();class su extends ru{__init(){this.type=cl.BoundingBox}__init2(){this.color=new Al(1,1,1,1)}constructor(t){super(t),su.prototype.__init.call(this),su.prototype.__init2.call(this)}}class au extends ru{__init(){this.type=cl.Clipping}__init2(){this.color=new Al(.2275,.2275,.8078,1)}constructor(t){super(t),au.prototype.__init.call(this),au.prototype.__init2.call(this)}}class ou extends ru{__init(){this.type=cl.Mesh}__init2(){this.color=new Al(1,1,1,1)}__init3(){this.inheritDeform=!1}__init4(){this.tempColor=new Al(0,0,0,0)}constructor(t){super(t),ou.prototype.__init.call(this),ou.prototype.__init2.call(this),ou.prototype.__init3.call(this),ou.prototype.__init4.call(this)}applyDeform(t){return this==t||this.inheritDeform&&this.parentMesh==t}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}}class hu extends ru{__init(){this.type=cl.Path}__init2(){this.closed=!1}__init3(){this.constantSpeed=!1}__init4(){this.color=new Al(1,1,1,1)}constructor(t){super(t),hu.prototype.__init.call(this),hu.prototype.__init2.call(this),hu.prototype.__init3.call(this),hu.prototype.__init4.call(this)}}class lu extends ru{__init(){this.type=cl.Point}__init2(){this.color=new Al(.38,.94,0,1)}constructor(t){super(t),lu.prototype.__init.call(this),lu.prototype.__init2.call(this)}computeWorldPosition(t,e){const i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix;let i=Rl.cosDeg(this.rotation),n=Rl.sinDeg(this.rotation),r=i*e.a+n*e.c,s=i*e.b+n*e.d;return Math.atan2(s,r)*Rl.radDeg}}class cu extends nu{__init(){this.type=cl.Region}static __initStatic(){this.OX1=0}static __initStatic2(){this.OY1=1}static __initStatic3(){this.OX2=2}static __initStatic4(){this.OY2=3}static __initStatic5(){this.OX3=4}static __initStatic6(){this.OY3=5}static __initStatic7(){this.OX4=6}static __initStatic8(){this.OY4=7}static __initStatic9(){this.X1=0}static __initStatic10(){this.Y1=1}static __initStatic11(){this.C1R=2}static __initStatic12(){this.C1G=3}static __initStatic13(){this.C1B=4}static __initStatic14(){this.C1A=5}static __initStatic15(){this.U1=6}static __initStatic16(){this.V1=7}static __initStatic17(){this.X2=8}static __initStatic18(){this.Y2=9}static __initStatic19(){this.C2R=10}static __initStatic20(){this.C2G=11}static __initStatic21(){this.C2B=12}static __initStatic22(){this.C2A=13}static __initStatic23(){this.U2=14}static __initStatic24(){this.V2=15}static __initStatic25(){this.X3=16}static __initStatic26(){this.Y3=17}static __initStatic27(){this.C3R=18}static __initStatic28(){this.C3G=19}static __initStatic29(){this.C3B=20}static __initStatic30(){this.C3A=21}static __initStatic31(){this.U3=22}static __initStatic32(){this.V3=23}static __initStatic33(){this.X4=24}static __initStatic34(){this.Y4=25}static __initStatic35(){this.C4R=26}static __initStatic36(){this.C4G=27}static __initStatic37(){this.C4B=28}static __initStatic38(){this.C4A=29}static __initStatic39(){this.U4=30}static __initStatic40(){this.V4=31}__init2(){this.x=0}__init3(){this.y=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.rotation=0}__init7(){this.width=0}__init8(){this.height=0}__init9(){this.color=new Al(1,1,1,1)}__init10(){this.offset=Ml.newFloatArray(8)}__init11(){this.uvs=Ml.newFloatArray(8)}__init12(){this.tempColor=new Al(1,1,1,1)}constructor(t){super(t),cu.prototype.__init.call(this),cu.prototype.__init2.call(this),cu.prototype.__init3.call(this),cu.prototype.__init4.call(this),cu.prototype.__init5.call(this),cu.prototype.__init6.call(this),cu.prototype.__init7.call(this),cu.prototype.__init8.call(this),cu.prototype.__init9.call(this),cu.prototype.__init10.call(this),cu.prototype.__init11.call(this),cu.prototype.__init12.call(this)}updateOffset(){let t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,r=i+this.region.width*t,s=n+this.region.height*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,c=i*h,u=n*o+this.y,d=n*h,p=r*o+this.x,f=r*h,m=s*o+this.y,_=s*h,g=this.offset;g[cu.OX1]=l-d,g[cu.OY1]=u+c,g[cu.OX2]=l-_,g[cu.OY2]=m+c,g[cu.OX3]=p-_,g[cu.OY3]=m+f,g[cu.OX4]=p-d,g[cu.OY4]=u+f}setRegion(t){this.region=t;let e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,n){let r=this.offset,s=t.matrix,a=s.tx,o=s.ty,h=s.a,l=s.c,c=s.b,u=s.d,d=0,p=0;d=r[cu.OX1],p=r[cu.OY1],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[cu.OX2],p=r[cu.OY2],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[cu.OX3],p=r[cu.OY3],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[cu.OX4],p=r[cu.OY4],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o}}cu.__initStatic(),cu.__initStatic2(),cu.__initStatic3(),cu.__initStatic4(),cu.__initStatic5(),cu.__initStatic6(),cu.__initStatic7(),cu.__initStatic8(),cu.__initStatic9(),cu.__initStatic10(),cu.__initStatic11(),cu.__initStatic12(),cu.__initStatic13(),cu.__initStatic14(),cu.__initStatic15(),cu.__initStatic16(),cu.__initStatic17(),cu.__initStatic18(),cu.__initStatic19(),cu.__initStatic20(),cu.__initStatic21(),cu.__initStatic22(),cu.__initStatic23(),cu.__initStatic24(),cu.__initStatic25(),cu.__initStatic26(),cu.__initStatic27(),cu.__initStatic28(),cu.__initStatic29(),cu.__initStatic30(),cu.__initStatic31(),cu.__initStatic32(),cu.__initStatic33(),cu.__initStatic34(),cu.__initStatic35(),cu.__initStatic36(),cu.__initStatic37(),cu.__initStatic38(),cu.__initStatic39(),cu.__initStatic40();class uu{__init(){this.jitterX=0}__init2(){this.jitterY=0}constructor(t,e){uu.prototype.__init.call(this),uu.prototype.__init2.call(this),this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,i,n){t.x+=Rl.randomTriangular(-this.jitterX,this.jitterY),t.y+=Rl.randomTriangular(-this.jitterX,this.jitterY)}end(){}}class du{static __initStatic(){this.interpolation=new Il(2)}__init(){this.centerX=0}__init2(){this.centerY=0}__init3(){this.radius=0}__init4(){this.angle=0}__init5(){this.worldX=0}__init6(){this.worldY=0}constructor(t){du.prototype.__init.call(this),du.prototype.__init2.call(this),du.prototype.__init3.call(this),du.prototype.__init4.call(this),du.prototype.__init5.call(this),du.prototype.__init6.call(this),this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,i,n){let r=this.angle*Rl.degreesToRadians,s=t.x-this.worldX,a=t.y-this.worldY,o=Math.sqrt(s*s+a*a);if(o<this.radius){let e=du.interpolation.apply(0,r,(this.radius-o)/this.radius),i=Math.cos(e),n=Math.sin(e);t.x=i*s-n*a+this.worldX,t.y=n*s+i*a+this.worldY}}end(){}}du.__initStatic();class pu{constructor(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}apply(t,e,i,n,r,s,a,o){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let n=0,l=h.length;n<l;n++)h[n].apply(t,e,i,r,s,a,o)}static binarySearch(t,e,i=1){let n=0,r=t.length/i-2;if(0==r)return i;let s=r>>>1;for(;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}}static linearSearch(t,e,i){for(let n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1}}!function(t){t[t.setup=0]="setup";t[t.first=1]="first";t[t.replace=2]="replace";t[t.add=3]="add"}(Rc||(Rc={})),function(t){t[t.in=0]="in";t[t.out=1]="out"}(Cc||(Cc={})),function(t){t[t.rotate=0]="rotate";t[t.translate=1]="translate";t[t.scale=2]="scale";t[t.shear=3]="shear";t[t.attachment=4]="attachment";t[t.color=5]="color";t[t.deform=6]="deform";t[t.event=7]="event";t[t.drawOrder=8]="drawOrder";t[t.ikConstraint=9]="ikConstraint";t[t.transformConstraint=10]="transformConstraint";t[t.pathConstraintPosition=11]="pathConstraintPosition";t[t.pathConstraintSpacing=12]="pathConstraintSpacing";t[t.pathConstraintMix=13]="pathConstraintMix";t[t.twoColor=14]="twoColor"}(Ic||(Ic={}));class fu{static __initStatic(){this.LINEAR=0}static __initStatic2(){this.STEPPED=1}static __initStatic3(){this.BEZIER=2}static __initStatic4(){this.BEZIER_SIZE=19}constructor(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=Ml.newFloatArray((t-1)*fu.BEZIER_SIZE)}getFrameCount(){return this.curves.length/fu.BEZIER_SIZE+1}setLinear(t){this.curves[t*fu.BEZIER_SIZE]=fu.LINEAR}setStepped(t){this.curves[t*fu.BEZIER_SIZE]=fu.STEPPED}getCurveType(t){let e=t*fu.BEZIER_SIZE;if(e==this.curves.length)return fu.LINEAR;let i=this.curves[e];return i==fu.LINEAR?fu.LINEAR:i==fu.STEPPED?fu.STEPPED:fu.BEZIER}setCurve(t,e,i,n,r){let s=.03*(2*-e+n),a=.03*(2*-i+r),o=.006*(3*(e-n)+1),h=.006*(3*(i-r)+1),l=2*s+o,c=2*a+h,u=.3*e+s+.16666667*o,d=.3*i+a+.16666667*h,p=t*fu.BEZIER_SIZE,f=this.curves;f[p++]=fu.BEZIER;let m=u,_=d;for(let t=p+fu.BEZIER_SIZE-1;p<t;p+=2)f[p]=m,f[p+1]=_,u+=l,d+=c,l+=o,c+=h,m+=u,_+=d}getCurvePercent(t,e){e=Rl.clamp(e,0,1);let i=this.curves,n=t*fu.BEZIER_SIZE,r=i[n];if(r==fu.LINEAR)return e;if(r==fu.STEPPED)return 0;n++;let s=0;for(let t=n,r=n+fu.BEZIER_SIZE-1;n<r;n+=2)if(s=i[n],s>=e){let r,a;return n==t?(r=0,a=0):(r=i[n-2],a=i[n-1]),a+(i[n+1]-a)*(e-r)/(s-r)}let a=i[n-1];return a+(1-a)*(e-s)/(1-s)}}fu.__initStatic(),fu.__initStatic2(),fu.__initStatic3(),fu.__initStatic4();class mu extends fu{static __initStatic5(){this.ENTRIES=2}static __initStatic6(){this.PREV_TIME=-2}static __initStatic7(){this.PREV_ROTATION=-1}static __initStatic8(){this.ROTATION=1}constructor(t){super(t),this.frames=Ml.newFloatArray(t<<1)}getPropertyId(){return(Ic.rotate<<24)+this.boneIndex}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+mu.ROTATION]=i}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(i<o[0]){switch(s){case Rc.setup:return void(h.rotation=h.data.rotation);case Rc.first:let t=h.data.rotation-h.rotation;h.rotation+=(t-360*(16384-(16384.499999999996-t/360|0)))*r}return}if(i>=o[o.length-mu.ENTRIES]){let t=o[o.length+mu.PREV_ROTATION];switch(s){case Rc.setup:h.rotation=h.data.rotation+t*r;break;case Rc.first:case Rc.replace:t+=h.data.rotation-h.rotation,t-=360*(16384-(16384.499999999996-t/360|0));case Rc.add:h.rotation+=t*r}return}let l=pu.binarySearch(o,i,mu.ENTRIES),c=o[l+mu.PREV_ROTATION],u=o[l],d=this.getCurvePercent((l>>1)-1,1-(i-u)/(o[l+mu.PREV_TIME]-u)),p=o[l+mu.ROTATION]-c;switch(p=c+(p-360*(16384-(16384.499999999996-p/360|0)))*d,s){case Rc.setup:h.rotation=h.data.rotation+(p-360*(16384-(16384.499999999996-p/360|0)))*r;break;case Rc.first:case Rc.replace:p+=h.data.rotation-h.rotation;case Rc.add:h.rotation+=(p-360*(16384-(16384.499999999996-p/360|0)))*r}}}mu.__initStatic5(),mu.__initStatic6(),mu.__initStatic7(),mu.__initStatic8();class _u extends fu{static __initStatic9(){this.ENTRIES=3}static __initStatic10(){this.PREV_TIME=-3}static __initStatic11(){this.PREV_X=-2}static __initStatic12(){this.PREV_Y=-1}static __initStatic13(){this.X=1}static __initStatic14(){this.Y=2}constructor(t){super(t),this.frames=Ml.newFloatArray(t*_u.ENTRIES)}getPropertyId(){return(Ic.translate<<24)+this.boneIndex}setFrame(t,e,i,n){t*=_u.ENTRIES,this.frames[t]=e,this.frames[t+_u.X]=i,this.frames[t+_u.Y]=n}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(i<o[0]){switch(s){case Rc.setup:return h.x=h.data.x,void(h.y=h.data.y);case Rc.first:h.x+=(h.data.x-h.x)*r,h.y+=(h.data.y-h.y)*r}return}let l=0,c=0;if(i>=o[o.length-_u.ENTRIES])l=o[o.length+_u.PREV_X],c=o[o.length+_u.PREV_Y];else{let t=pu.binarySearch(o,i,_u.ENTRIES);l=o[t+_u.PREV_X],c=o[t+_u.PREV_Y];let e=o[t],n=this.getCurvePercent(t/_u.ENTRIES-1,1-(i-e)/(o[t+_u.PREV_TIME]-e));l+=(o[t+_u.X]-l)*n,c+=(o[t+_u.Y]-c)*n}switch(s){case Rc.setup:h.x=h.data.x+l*r,h.y=h.data.y+c*r;break;case Rc.first:case Rc.replace:h.x+=(h.data.x+l-h.x)*r,h.y+=(h.data.y+c-h.y)*r;break;case Rc.add:h.x+=l*r,h.y+=c*r}}}_u.__initStatic9(),_u.__initStatic10(),_u.__initStatic11(),_u.__initStatic12(),_u.__initStatic13(),_u.__initStatic14();class gu extends _u{constructor(t){super(t)}getPropertyId(){return(Ic.scale<<24)+this.boneIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(i<o[0]){switch(s){case Rc.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case Rc.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let l=0,c=0;if(i>=o[o.length-gu.ENTRIES])l=o[o.length+gu.PREV_X]*h.data.scaleX,c=o[o.length+gu.PREV_Y]*h.data.scaleY;else{let t=pu.binarySearch(o,i,gu.ENTRIES);l=o[t+gu.PREV_X],c=o[t+gu.PREV_Y];let e=o[t],n=this.getCurvePercent(t/gu.ENTRIES-1,1-(i-e)/(o[t+gu.PREV_TIME]-e));l=(l+(o[t+gu.X]-l)*n)*h.data.scaleX,c=(c+(o[t+gu.Y]-c)*n)*h.data.scaleY}if(1==r)s==Rc.add?(h.scaleX+=l-h.data.scaleX,h.scaleY+=c-h.data.scaleY):(h.scaleX=l,h.scaleY=c);else{let t=0,e=0;if(a==Cc.out)switch(s){case Rc.setup:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-e)*r;break;case Rc.first:case Rc.replace:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-e)*r;break;case Rc.add:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*Rl.signum(t)-h.data.scaleX)*r,h.scaleY=e+(Math.abs(c)*Rl.signum(e)-h.data.scaleY)*r}else switch(s){case Rc.setup:t=Math.abs(h.data.scaleX)*Rl.signum(l),e=Math.abs(h.data.scaleY)*Rl.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case Rc.first:case Rc.replace:t=Math.abs(h.scaleX)*Rl.signum(l),e=Math.abs(h.scaleY)*Rl.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case Rc.add:t=Rl.signum(l),e=Rl.signum(c),h.scaleX=Math.abs(h.scaleX)*t+(l-Math.abs(h.data.scaleX)*t)*r,h.scaleY=Math.abs(h.scaleY)*e+(c-Math.abs(h.data.scaleY)*e)*r}}}}class yu extends _u{constructor(t){super(t)}getPropertyId(){return(Ic.shear<<24)+this.boneIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.bones[this.boneIndex];if(i<o[0]){switch(s){case Rc.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case Rc.first:h.shearX+=(h.data.shearX-h.shearX)*r,h.shearY+=(h.data.shearY-h.shearY)*r}return}let l=0,c=0;if(i>=o[o.length-yu.ENTRIES])l=o[o.length+yu.PREV_X],c=o[o.length+yu.PREV_Y];else{let t=pu.binarySearch(o,i,yu.ENTRIES);l=o[t+yu.PREV_X],c=o[t+yu.PREV_Y];let e=o[t],n=this.getCurvePercent(t/yu.ENTRIES-1,1-(i-e)/(o[t+yu.PREV_TIME]-e));l+=(o[t+yu.X]-l)*n,c+=(o[t+yu.Y]-c)*n}switch(s){case Rc.setup:h.shearX=h.data.shearX+l*r,h.shearY=h.data.shearY+c*r;break;case Rc.first:case Rc.replace:h.shearX+=(h.data.shearX+l-h.shearX)*r,h.shearY+=(h.data.shearY+c-h.shearY)*r;break;case Rc.add:h.shearX+=l*r,h.shearY+=c*r}}}class xu extends fu{static __initStatic15(){this.ENTRIES=5}static __initStatic16(){this.PREV_TIME=-5}static __initStatic17(){this.PREV_R=-4}static __initStatic18(){this.PREV_G=-3}static __initStatic19(){this.PREV_B=-2}static __initStatic20(){this.PREV_A=-1}static __initStatic21(){this.R=1}static __initStatic22(){this.G=2}static __initStatic23(){this.B=3}static __initStatic24(){this.A=4}constructor(t){super(t),this.frames=Ml.newFloatArray(t*xu.ENTRIES)}getPropertyId(){return(Ic.color<<24)+this.slotIndex}setFrame(t,e,i,n,r,s){t*=xu.ENTRIES,this.frames[t]=e,this.frames[t+xu.R]=i,this.frames[t+xu.G]=n,this.frames[t+xu.B]=r,this.frames[t+xu.A]=s}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex],h=this.frames;if(i<h[0]){switch(s){case Rc.setup:return void o.color.setFromColor(o.data.color);case Rc.first:let t=o.color,e=o.data.color;t.add((e.r-t.r)*r,(e.g-t.g)*r,(e.b-t.b)*r,(e.a-t.a)*r)}return}let l=0,c=0,u=0,d=0;if(i>=h[h.length-xu.ENTRIES]){let t=h.length;l=h[t+xu.PREV_R],c=h[t+xu.PREV_G],u=h[t+xu.PREV_B],d=h[t+xu.PREV_A]}else{let t=pu.binarySearch(h,i,xu.ENTRIES);l=h[t+xu.PREV_R],c=h[t+xu.PREV_G],u=h[t+xu.PREV_B],d=h[t+xu.PREV_A];let e=h[t],n=this.getCurvePercent(t/xu.ENTRIES-1,1-(i-e)/(h[t+xu.PREV_TIME]-e));l+=(h[t+xu.R]-l)*n,c+=(h[t+xu.G]-c)*n,u+=(h[t+xu.B]-u)*n,d+=(h[t+xu.A]-d)*n}if(1==r)o.color.set(l,c,u,d);else{let t=o.color;s==Rc.setup&&t.setFromColor(o.data.color),t.add((l-t.r)*r,(c-t.g)*r,(u-t.b)*r,(d-t.a)*r)}}}xu.__initStatic15(),xu.__initStatic16(),xu.__initStatic17(),xu.__initStatic18(),xu.__initStatic19(),xu.__initStatic20(),xu.__initStatic21(),xu.__initStatic22(),xu.__initStatic23(),xu.__initStatic24();class vu extends fu{static __initStatic25(){this.ENTRIES=8}static __initStatic26(){this.PREV_TIME=-8}static __initStatic27(){this.PREV_R=-7}static __initStatic28(){this.PREV_G=-6}static __initStatic29(){this.PREV_B=-5}static __initStatic30(){this.PREV_A=-4}static __initStatic31(){this.PREV_R2=-3}static __initStatic32(){this.PREV_G2=-2}static __initStatic33(){this.PREV_B2=-1}static __initStatic34(){this.R=1}static __initStatic35(){this.G=2}static __initStatic36(){this.B=3}static __initStatic37(){this.A=4}static __initStatic38(){this.R2=5}static __initStatic39(){this.G2=6}static __initStatic40(){this.B2=7}constructor(t){super(t),this.frames=Ml.newFloatArray(t*vu.ENTRIES)}getPropertyId(){return(Ic.twoColor<<24)+this.slotIndex}setFrame(t,e,i,n,r,s,a,o,h){t*=vu.ENTRIES,this.frames[t]=e,this.frames[t+vu.R]=i,this.frames[t+vu.G]=n,this.frames[t+vu.B]=r,this.frames[t+vu.A]=s,this.frames[t+vu.R2]=a,this.frames[t+vu.G2]=o,this.frames[t+vu.B2]=h}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex],h=this.frames;if(i<h[0]){switch(s){case Rc.setup:return o.color.setFromColor(o.data.color),void o.darkColor.setFromColor(o.data.darkColor);case Rc.first:let t=o.color,e=o.darkColor,i=o.data.color,n=o.data.darkColor;t.add((i.r-t.r)*r,(i.g-t.g)*r,(i.b-t.b)*r,(i.a-t.a)*r),e.add((n.r-e.r)*r,(n.g-e.g)*r,(n.b-e.b)*r,0)}return}let l=0,c=0,u=0,d=0,p=0,f=0,m=0;if(i>=h[h.length-vu.ENTRIES]){let t=h.length;l=h[t+vu.PREV_R],c=h[t+vu.PREV_G],u=h[t+vu.PREV_B],d=h[t+vu.PREV_A],p=h[t+vu.PREV_R2],f=h[t+vu.PREV_G2],m=h[t+vu.PREV_B2]}else{let t=pu.binarySearch(h,i,vu.ENTRIES);l=h[t+vu.PREV_R],c=h[t+vu.PREV_G],u=h[t+vu.PREV_B],d=h[t+vu.PREV_A],p=h[t+vu.PREV_R2],f=h[t+vu.PREV_G2],m=h[t+vu.PREV_B2];let e=h[t],n=this.getCurvePercent(t/vu.ENTRIES-1,1-(i-e)/(h[t+vu.PREV_TIME]-e));l+=(h[t+vu.R]-l)*n,c+=(h[t+vu.G]-c)*n,u+=(h[t+vu.B]-u)*n,d+=(h[t+vu.A]-d)*n,p+=(h[t+vu.R2]-p)*n,f+=(h[t+vu.G2]-f)*n,m+=(h[t+vu.B2]-m)*n}if(1==r)o.color.set(l,c,u,d),o.darkColor.set(p,f,m,1);else{let t=o.color,e=o.darkColor;s==Rc.setup&&(t.setFromColor(o.data.color),e.setFromColor(o.data.darkColor)),t.add((l-t.r)*r,(c-t.g)*r,(u-t.b)*r,(d-t.a)*r),e.add((p-e.r)*r,(f-e.g)*r,(m-e.b)*r,0)}}}vu.__initStatic25(),vu.__initStatic26(),vu.__initStatic27(),vu.__initStatic28(),vu.__initStatic29(),vu.__initStatic30(),vu.__initStatic31(),vu.__initStatic32(),vu.__initStatic33(),vu.__initStatic34(),vu.__initStatic35(),vu.__initStatic36(),vu.__initStatic37(),vu.__initStatic38(),vu.__initStatic39(),vu.__initStatic40();class bu{constructor(t){this.frames=Ml.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(Ic.attachment<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(a==Cc.out&&s==Rc.setup){let e=o.data.attachmentName;return void o.setAttachment(null==e?null:t.getAttachment(this.slotIndex,e))}let h=this.frames;if(i<h[0]){if(s==Rc.setup||s==Rc.first){let e=o.data.attachmentName;o.setAttachment(null==e?null:t.getAttachment(this.slotIndex,e))}return}let l=0;l=i>=h[h.length-1]?h.length-1:pu.binarySearch(h,i,1)-1;let c=this.attachmentNames[l];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}let Eu=null;class Su extends fu{constructor(t){super(t),this.frames=Ml.newFloatArray(t),this.frameVertices=new Array(t),null==Eu&&(Eu=Ml.newFloatArray(64))}getPropertyId(){return(Ic.deform<<27)+ +this.attachment.id+this.slotIndex}setFrame(t,e,i){this.frames[t]=e,this.frameVertices[t]=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex],h=o.getAttachment();if(!(h instanceof ru&&h.applyDeform(this.attachment)))return;let l=o.attachmentVertices;0==l.length&&(s=Rc.setup);let c=this.frameVertices,u=c[0].length,d=this.frames;if(i<d[0]){let t=h;switch(s){case Rc.setup:return void(l.length=0);case Rc.first:if(1==r){l.length=0;break}let e=Ml.setArraySize(l,u);if(null==t.bones){let i=t.vertices;for(let t=0;t<u;t++)e[t]+=(i[t]-e[t])*r}else{r=1-r;for(let t=0;t<u;t++)e[t]*=r}}return}let p=Ml.setArraySize(l,u);if(i>=d[d.length-1]){let t=c[d.length-1];if(1==r)if(s==Rc.add){let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++)p[e]+=t[e]-i[e]}else for(let e=0;e<u;e++)p[e]+=t[e]}else Ml.arrayCopy(t,0,p,0,u);else switch(s){case Rc.setup:{let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++){let n=i[e];p[e]=n+(t[e]-n)*r}}else for(let e=0;e<u;e++)p[e]=t[e]*r;break}case Rc.first:case Rc.replace:for(let e=0;e<u;e++)p[e]+=(t[e]-p[e])*r;case Rc.add:let e=h;if(null==e.bones){let i=e.vertices;for(let e=0;e<u;e++)p[e]+=(t[e]-i[e])*r}else for(let e=0;e<u;e++)p[e]+=t[e]*r}return}let f=pu.binarySearch(d,i),m=c[f-1],_=c[f],g=d[f],y=this.getCurvePercent(f-1,1-(i-g)/(d[f-1]-g));if(1==r)if(s==Rc.add){let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=m[t];p[t]+=i+(_[t]-i)*y-e[t]}}else for(let t=0;t<u;t++){let e=m[t];p[t]+=e+(_[t]-e)*y}}else for(let t=0;t<u;t++){let e=m[t];p[t]=e+(_[t]-e)*y}else switch(s){case Rc.setup:{let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=m[t],n=e[t];p[t]=n+(i+(_[t]-i)*y-n)*r}}else for(let t=0;t<u;t++){let e=m[t];p[t]=(e+(_[t]-e)*y)*r}break}case Rc.first:case Rc.replace:for(let t=0;t<u;t++){let e=m[t];p[t]+=(e+(_[t]-e)*y-p[t])*r}break;case Rc.add:let t=h;if(null==t.bones){let e=t.vertices;for(let t=0;t<u;t++){let i=m[t];p[t]+=(i+(_[t]-i)*y-e[t])*r}}else for(let t=0;t<u;t++){let e=m[t];p[t]+=(e+(_[t]-e)*y)*r}}}}class Tu{constructor(t){this.frames=Ml.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return Ic.event<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,n,r,s,a){if(null==n)return;let o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,r,s,a),e=-1;else if(e>=o[h-1])return;if(i<o[0])return;let l=0;if(e<o[0])l=0;else{l=pu.binarySearch(o,e);let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&i>=o[l];l++)n.push(this.events[l])}}class wu{constructor(t){this.frames=Ml.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return Ic.drawOrder<<24}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,n,r,s,a){let o=t.drawOrder,h=t.slots;if(a==Cc.out&&s==Rc.setup)return void Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);let l=this.frames;if(i<l[0])return void(s!=Rc.setup&&s!=Rc.first||Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let c=0;c=i>=l[l.length-1]?l.length-1:pu.binarySearch(l,i)-1;let u=this.drawOrders[c];if(null==u)Ml.arrayCopy(h,0,o,0,h.length);else for(let t=0,e=u.length;t<e;t++)o[t]=h[u[t]]}}class Au extends fu{static __initStatic41(){this.ENTRIES=5}static __initStatic42(){this.PREV_TIME=-5}static __initStatic43(){this.PREV_MIX=-4}static __initStatic44(){this.PREV_BEND_DIRECTION=-3}static __initStatic45(){this.PREV_COMPRESS=-2}static __initStatic46(){this.PREV_STRETCH=-1}static __initStatic47(){this.MIX=1}static __initStatic48(){this.BEND_DIRECTION=2}static __initStatic49(){this.COMPRESS=3}static __initStatic50(){this.STRETCH=4}constructor(t){super(t),this.frames=Ml.newFloatArray(t*Au.ENTRIES)}getPropertyId(){return(Ic.ikConstraint<<24)+this.ikConstraintIndex}setFrame(t,e,i,n,r,s){t*=Au.ENTRIES,this.frames[t]=e,this.frames[t+Au.MIX]=i,this.frames[t+Au.BEND_DIRECTION]=n,this.frames[t+Au.COMPRESS]=r?1:0,this.frames[t+Au.STRETCH]=s?1:0}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(i<o[0]){switch(s){case Rc.setup:return h.mix=h.data.mix,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,void(h.stretch=h.data.stretch);case Rc.first:h.mix+=(h.data.mix-h.mix)*r,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}return}if(i>=o[o.length-Au.ENTRIES])return void(s==Rc.setup?(h.mix=h.data.mix+(o[o.length+Au.PREV_MIX]-h.data.mix)*r,a==Cc.out?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[o.length+Au.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+Au.PREV_COMPRESS],h.stretch=0!=o[o.length+Au.PREV_STRETCH])):(h.mix+=(o[o.length+Au.PREV_MIX]-h.mix)*r,a==Cc.in&&(h.bendDirection=o[o.length+Au.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+Au.PREV_COMPRESS],h.stretch=0!=o[o.length+Au.PREV_STRETCH])));let l=pu.binarySearch(o,i,Au.ENTRIES),c=o[l+Au.PREV_MIX],u=o[l],d=this.getCurvePercent(l/Au.ENTRIES-1,1-(i-u)/(o[l+Au.PREV_TIME]-u));s==Rc.setup?(h.mix=h.data.mix+(c+(o[l+Au.MIX]-c)*d-h.data.mix)*r,a==Cc.out?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[l+Au.PREV_BEND_DIRECTION],h.compress=0!=o[l+Au.PREV_COMPRESS],h.stretch=0!=o[l+Au.PREV_STRETCH])):(h.mix+=(c+(o[l+Au.MIX]-c)*d-h.mix)*r,a==Cc.in&&(h.bendDirection=o[l+Au.PREV_BEND_DIRECTION],h.compress=0!=o[l+Au.PREV_COMPRESS],h.stretch=0!=o[l+Au.PREV_STRETCH]))}}Au.__initStatic41(),Au.__initStatic42(),Au.__initStatic43(),Au.__initStatic44(),Au.__initStatic45(),Au.__initStatic46(),Au.__initStatic47(),Au.__initStatic48(),Au.__initStatic49(),Au.__initStatic50();class Ru extends fu{static __initStatic51(){this.ENTRIES=5}static __initStatic52(){this.PREV_TIME=-5}static __initStatic53(){this.PREV_ROTATE=-4}static __initStatic54(){this.PREV_TRANSLATE=-3}static __initStatic55(){this.PREV_SCALE=-2}static __initStatic56(){this.PREV_SHEAR=-1}static __initStatic57(){this.ROTATE=1}static __initStatic58(){this.TRANSLATE=2}static __initStatic59(){this.SCALE=3}static __initStatic60(){this.SHEAR=4}constructor(t){super(t),this.frames=Ml.newFloatArray(t*Ru.ENTRIES)}getPropertyId(){return(Ic.transformConstraint<<24)+this.transformConstraintIndex}setFrame(t,e,i,n,r,s){t*=Ru.ENTRIES,this.frames[t]=e,this.frames[t+Ru.ROTATE]=i,this.frames[t+Ru.TRANSLATE]=n,this.frames[t+Ru.SCALE]=r,this.frames[t+Ru.SHEAR]=s}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(i<o[0]){let t=h.data;switch(s){case Rc.setup:return h.rotateMix=t.rotateMix,h.translateMix=t.translateMix,h.scaleMix=t.scaleMix,void(h.shearMix=t.shearMix);case Rc.first:h.rotateMix+=(t.rotateMix-h.rotateMix)*r,h.translateMix+=(t.translateMix-h.translateMix)*r,h.scaleMix+=(t.scaleMix-h.scaleMix)*r,h.shearMix+=(t.shearMix-h.shearMix)*r}return}let l=0,c=0,u=0,d=0;if(i>=o[o.length-Ru.ENTRIES]){let t=o.length;l=o[t+Ru.PREV_ROTATE],c=o[t+Ru.PREV_TRANSLATE],u=o[t+Ru.PREV_SCALE],d=o[t+Ru.PREV_SHEAR]}else{let t=pu.binarySearch(o,i,Ru.ENTRIES);l=o[t+Ru.PREV_ROTATE],c=o[t+Ru.PREV_TRANSLATE],u=o[t+Ru.PREV_SCALE],d=o[t+Ru.PREV_SHEAR];let e=o[t],n=this.getCurvePercent(t/Ru.ENTRIES-1,1-(i-e)/(o[t+Ru.PREV_TIME]-e));l+=(o[t+Ru.ROTATE]-l)*n,c+=(o[t+Ru.TRANSLATE]-c)*n,u+=(o[t+Ru.SCALE]-u)*n,d+=(o[t+Ru.SHEAR]-d)*n}if(s==Rc.setup){let t=h.data;h.rotateMix=t.rotateMix+(l-t.rotateMix)*r,h.translateMix=t.translateMix+(c-t.translateMix)*r,h.scaleMix=t.scaleMix+(u-t.scaleMix)*r,h.shearMix=t.shearMix+(d-t.shearMix)*r}else h.rotateMix+=(l-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r,h.scaleMix+=(u-h.scaleMix)*r,h.shearMix+=(d-h.shearMix)*r}}Ru.__initStatic51(),Ru.__initStatic52(),Ru.__initStatic53(),Ru.__initStatic54(),Ru.__initStatic55(),Ru.__initStatic56(),Ru.__initStatic57(),Ru.__initStatic58(),Ru.__initStatic59(),Ru.__initStatic60();class Cu extends fu{static __initStatic61(){this.ENTRIES=2}static __initStatic62(){this.PREV_TIME=-2}static __initStatic63(){this.PREV_VALUE=-1}static __initStatic64(){this.VALUE=1}constructor(t){super(t),this.frames=Ml.newFloatArray(t*Cu.ENTRIES)}getPropertyId(){return(Ic.pathConstraintPosition<<24)+this.pathConstraintIndex}setFrame(t,e,i){t*=Cu.ENTRIES,this.frames[t]=e,this.frames[t+Cu.VALUE]=i}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(i<o[0]){switch(s){case Rc.setup:return void(h.position=h.data.position);case Rc.first:h.position+=(h.data.position-h.position)*r}return}let l=0;if(i>=o[o.length-Cu.ENTRIES])l=o[o.length+Cu.PREV_VALUE];else{let t=pu.binarySearch(o,i,Cu.ENTRIES);l=o[t+Cu.PREV_VALUE];let e=o[t],n=this.getCurvePercent(t/Cu.ENTRIES-1,1-(i-e)/(o[t+Cu.PREV_TIME]-e));l+=(o[t+Cu.VALUE]-l)*n}s==Rc.setup?h.position=h.data.position+(l-h.data.position)*r:h.position+=(l-h.position)*r}}Cu.__initStatic61(),Cu.__initStatic62(),Cu.__initStatic63(),Cu.__initStatic64();class Iu extends Cu{constructor(t){super(t)}getPropertyId(){return(Ic.pathConstraintSpacing<<24)+this.pathConstraintIndex}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(i<o[0]){switch(s){case Rc.setup:return void(h.spacing=h.data.spacing);case Rc.first:h.spacing+=(h.data.spacing-h.spacing)*r}return}let l=0;if(i>=o[o.length-Iu.ENTRIES])l=o[o.length+Iu.PREV_VALUE];else{let t=pu.binarySearch(o,i,Iu.ENTRIES);l=o[t+Iu.PREV_VALUE];let e=o[t],n=this.getCurvePercent(t/Iu.ENTRIES-1,1-(i-e)/(o[t+Iu.PREV_TIME]-e));l+=(o[t+Iu.VALUE]-l)*n}s==Rc.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*r:h.spacing+=(l-h.spacing)*r}}class Mu extends fu{static __initStatic65(){this.ENTRIES=3}static __initStatic66(){this.PREV_TIME=-3}static __initStatic67(){this.PREV_ROTATE=-2}static __initStatic68(){this.PREV_TRANSLATE=-1}static __initStatic69(){this.ROTATE=1}static __initStatic70(){this.TRANSLATE=2}constructor(t){super(t),this.frames=Ml.newFloatArray(t*Mu.ENTRIES)}getPropertyId(){return(Ic.pathConstraintMix<<24)+this.pathConstraintIndex}setFrame(t,e,i,n){t*=Mu.ENTRIES,this.frames[t]=e,this.frames[t+Mu.ROTATE]=i,this.frames[t+Mu.TRANSLATE]=n}apply(t,e,i,n,r,s,a){let o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(i<o[0]){switch(s){case Rc.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case Rc.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*r,h.translateMix+=(h.data.translateMix-h.translateMix)*r}return}let l=0,c=0;if(i>=o[o.length-Mu.ENTRIES])l=o[o.length+Mu.PREV_ROTATE],c=o[o.length+Mu.PREV_TRANSLATE];else{let t=pu.binarySearch(o,i,Mu.ENTRIES);l=o[t+Mu.PREV_ROTATE],c=o[t+Mu.PREV_TRANSLATE];let e=o[t],n=this.getCurvePercent(t/Mu.ENTRIES-1,1-(i-e)/(o[t+Mu.PREV_TIME]-e));l+=(o[t+Mu.ROTATE]-l)*n,c+=(o[t+Mu.TRANSLATE]-c)*n}s==Rc.setup?(h.rotateMix=h.data.rotateMix+(l-h.data.rotateMix)*r,h.translateMix=h.data.translateMix+(c-h.data.translateMix)*r):(h.rotateMix+=(l-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r)}}Mu.__initStatic65(),Mu.__initStatic66(),Mu.__initStatic67(),Mu.__initStatic68(),Mu.__initStatic69(),Mu.__initStatic70();class Pu{static __initStatic(){this.emptyAnimation=new pu("<empty>",[],0)}static __initStatic2(){this.SUBSEQUENT=0}static __initStatic3(){this.FIRST=1}static __initStatic4(){this.HOLD=2}static __initStatic5(){this.HOLD_MIX=3}__init(){this.tracks=new Array}__init2(){this.events=new Array}__init3(){this.listeners=new Array}__init4(){this.queue=new Du(this)}__init5(){this.propertyIDs=new Tl}__init6(){this.animationsChanged=!1}__init7(){this.timeScale=1}__init8(){this.trackEntryPool=new Pl(()=>new Ou)}constructor(t){Pu.prototype.__init.call(this),Pu.prototype.__init2.call(this),Pu.prototype.__init3.call(this),Pu.prototype.__init4.call(this),Pu.prototype.__init5.call(this),Pu.prototype.__init6.call(this),Pu.prototype.__init7.call(this),Pu.prototype.__init8.call(this),this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(null==n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let r=t*n.timeScale;if(n.delay>0){if(n.delay-=r,n.delay>0)continue;r=-n.delay,n.delay=0}let s=n.next;if(null!=s){let e=n.trackLast-s.delay;if(e>=0){for(s.delay=0,s.trackTime=0==n.timeScale?0:(e/n.timeScale+t)*s.timeScale,n.trackTime+=r,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){let t=n.mixingFrom;for(n.mixingFrom=null,null!=t&&(t.mixingTo=null);null!=t;)this.queue.end(t),t=t.mixingFrom}n.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(null==i)return!0;let n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,n=!1;for(let r=0,s=i.length;r<s;r++){let s=i[r];if(null==s||s.delay>0)continue;n=!0;let a=0==r?Rc.first:s.mixBlend,o=s.alpha;null!=s.mixingFrom?o*=this.applyMixingFrom(s,t,a):s.trackTime>=s.trackEnd&&null==s.next&&(o=0);let h=s.animationLast,l=s.getAnimationTime(),c=s.animation.timelines.length,u=s.animation.timelines;if(0==r&&1==o||a==Rc.add)for(let i=0;i<c;i++)Ml.webkit602BugfixHelper(o,a),u[i].apply(t,h,l,e,o,a,Cc.in);else{let i=s.timelineMode,n=0==s.timelinesRotation.length;n&&Ml.setArraySize(s.timelinesRotation,c<<1,null);let r=s.timelinesRotation;for(let s=0;s<c;s++){let c=u[s],d=i[s]==Pu.SUBSEQUENT?a:Rc.setup;c instanceof mu?this.applyRotateTimeline(c,t,l,o,d,r,s<<1,n):(Ml.webkit602BugfixHelper(o,a),c.apply(t,h,l,e,o,d,Cc.in))}}this.queueEvents(s,l),e.length=0,s.nextAnimationLast=l,s.nextTrackLast=s.trackTime}return this.queue.drain(),n}applyMixingFrom(t,e,i){let n=t.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,e,i);let r=0;0==t.mixDuration?(r=1,i==Rc.first&&(i=Rc.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),i!=Rc.first&&(i=n.mixBlend));let s=r<n.eventThreshold?this.events:null,a=r<n.attachmentThreshold,o=r<n.drawOrderThreshold,h=n.animationLast,l=n.getAnimationTime(),c=n.animation.timelines.length,u=n.animation.timelines,d=n.alpha*t.interruptAlpha,p=d*(1-r);if(i==Rc.add)for(let t=0;t<c;t++)u[t].apply(e,h,l,s,p,i,Cc.out);else{let t=n.timelineMode,r=n.timelineHoldMix,f=0==n.timelinesRotation.length;f&&Ml.setArraySize(n.timelinesRotation,c<<1,null);let m=n.timelinesRotation;n.totalAlpha=0;for(let _=0;_<c;_++){let c,g=u[_],y=Cc.out,x=0;switch(t[_]){case Pu.SUBSEQUENT:if(!a&&g instanceof bu)continue;if(!o&&g instanceof wu)continue;c=i,x=p;break;case Pu.FIRST:c=Rc.setup,x=p;break;case Pu.HOLD:c=Rc.setup,x=d;break;default:c=Rc.setup;let t=r[_];x=d*Math.max(0,1-t.mixTime/t.mixDuration)}n.totalAlpha+=x,g instanceof mu?this.applyRotateTimeline(g,e,l,x,c,m,_<<1,f):(Ml.webkit602BugfixHelper(x,i),c==Rc.setup&&(g instanceof bu?a&&(y=Cc.out):g instanceof wu&&o&&(y=Cc.out)),g.apply(e,h,l,s,x,c,y))}}return t.mixDuration>0&&this.queueEvents(n,l),this.events.length=0,n.nextAnimationLast=l,n.nextTrackLast=n.trackTime,r}applyRotateTimeline(t,e,i,n,r,s,a,o){if(o&&(s[a]=0),1==n)return void t.apply(e,0,i,null,1,r,Cc.in);let h=t,l=h.frames,c=e.bones[h.boneIndex],u=0,d=0;if(i<l[0])switch(r){case Rc.setup:c.rotation=c.data.rotation;default:return;case Rc.first:u=c.rotation,d=c.data.rotation}else if(u=r==Rc.setup?c.data.rotation:c.rotation,i>=l[l.length-mu.ENTRIES])d=c.data.rotation+l[l.length+mu.PREV_ROTATION];else{let t=pu.binarySearch(l,i,mu.ENTRIES),e=l[t+mu.PREV_ROTATION],n=l[t],r=h.getCurvePercent((t>>1)-1,1-(i-n)/(l[t+mu.PREV_TIME]-n));d=l[t+mu.ROTATION]-e,d-=360*(16384-(16384.499999999996-d/360|0)),d=e+d*r+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}let p=0,f=d-u;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)p=s[a];else{let t=0,e=0;o?(t=0,e=f):(t=s[a],e=s[a+1]);let i=f>0,n=t>=0;Rl.signum(e)!=Rl.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*Rl.signum(t)),n=i),p=f+t-t%360,n!=i&&(p+=360*Rl.signum(t)),s[a]=p}s[a+1]=f,u+=p*n,c.rotation=u-360*(16384-(16384.499999999996-u/360|0))}queueEvents(t,e){let i=t.animationStart,n=t.animationEnd,r=n-i,s=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<s)break;e.time>n||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||s>t.trackTime%r:e>=n&&t.animationLast<n,l&&this.queue.complete(t);o<h;o++){a[o].time<i||this.queue.event(t,a[o])}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(null==e)return;this.queue.end(e),this.disposeNext(e);let i=e;for(;;){let t=i.mixingFrom;if(null==t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i){let n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)}setAnimationWith(t,e,i){if(null==e)throw new Error("animation cannot be null.");let n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));let s=this.trackEntry(t,e,i,r);return this.setCurrent(t,s,n),this.queue.drain(),s}addAnimation(t,e,i,n){let r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)}addAnimationWith(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;let s=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,s,!0),this.queue.drain();else if(r.next=s,n<=0){let t=r.animationEnd-r.animationStart;0!=t?(r.loop?n+=t*(1+(r.trackTime/t|0)):n+=Math.max(t,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime}return s.delay=n,s}setEmptyAnimation(t,e){let i=this.setAnimationWith(t,Pu.emptyAnimation,!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e,i){i<=0&&(i-=e);let n=this.addAnimationWith(t,Pu.emptyAnimation,!1,i);return n.mixDuration=e,n.trackEnd=e,n}setEmptyAnimations(t){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Ml.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,n){let r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,e),r}disposeNext(t){let e=t.next;for(;null!=e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let e=this.tracks[t];if(null!=e){for(;null!=e.mixingFrom;)e=e.mixingFrom;do{null!=e.mixingFrom&&e.mixBlend==Rc.add||this.setTimelineModes(e),e=e.mixingTo}while(null!=e)}}}setTimelineModes(t){let e=t.mixingTo,i=t.animation.timelines,n=t.animation.timelines.length,r=Ml.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;let s=Ml.setArraySize(t.timelineHoldMix,n),a=this.propertyIDs;if(null!=e&&e.holdPrevious)for(let t=0;t<n;t++)a.add(i[t].getPropertyId()),r[t]=Pu.HOLD;else t:for(let o=0;o<n;o++){let n=i[o].getPropertyId();if(a.add(n))if(null!=e&&this.hasTimeline(e,n)){for(let i=e.mixingTo;null!=i;i=i.mixingTo)if(!this.hasTimeline(i,n)){if(t.mixDuration>0){r[o]=Pu.HOLD_MIX,s[o]=i;continue t}break}r[o]=Pu.HOLD}else r[o]=Pu.FIRST;else r[o]=Pu.SUBSEQUENT}}hasTimeline(t,e){let i=t.animation.timelines;for(let t=0,n=i.length;t<n;t++)if(i[t].getPropertyId()==e)return!0;return!1}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}static __initStatic6(){this.deprecatedWarning1=!1}setAnimationByName(t,e,i){Pu.deprecatedWarning1||(Pu.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,i)}static __initStatic7(){this.deprecatedWarning2=!1}addAnimationByName(t,e,i,n){Pu.deprecatedWarning2||(Pu.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,i,n)}static __initStatic8(){this.deprecatedWarning3=!1}hasAnimation(t){return null!==this.data.skeletonData.findAnimation(t)}hasAnimationByName(t){return Pu.deprecatedWarning3||(Pu.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}}Pu.__initStatic(),Pu.__initStatic2(),Pu.__initStatic3(),Pu.__initStatic4(),Pu.__initStatic5(),Pu.__initStatic6(),Pu.__initStatic7(),Pu.__initStatic8();class Ou{constructor(){Ou.prototype.__init9.call(this),Ou.prototype.__init10.call(this),Ou.prototype.__init11.call(this),Ou.prototype.__init12.call(this)}__init9(){this.mixBlend=Rc.replace}__init10(){this.timelineMode=new Array}__init11(){this.timelineHoldMix=new Array}__init12(){this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}static __initStatic9(){this.deprecatedWarning1=!1}static __initStatic10(){this.deprecatedWarning2=!1}get time(){return Ou.deprecatedWarning1||(Ou.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){Ou.deprecatedWarning1||(Ou.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return Ou.deprecatedWarning2||(Ou.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){Ou.deprecatedWarning2||(Ou.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}}Ou.__initStatic9(),Ou.__initStatic10();class Du{__init13(){this.objects=[]}__init14(){this.drainDisabled=!1}constructor(t){Du.prototype.__init13.call(this),Du.prototype.__init14.call(this),this.animState=t}start(t){this.objects.push(Fu.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Fu.interrupt),this.objects.push(t)}end(t){this.objects.push(Fu.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Fu.dispose),this.objects.push(t)}complete(t){this.objects.push(Fu.complete),this.objects.push(t)}event(t,e){this.objects.push(Fu.event),this.objects.push(t),this.objects.push(e)}static __initStatic11(){this.deprecatedWarning1=!1}deprecateStuff(){return Du.deprecatedWarning1||(Du.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let n=t[i],r=t[i+1];switch(n){case Fu.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++)e[t].start&&e[t].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case Fu.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++)e[t].interrupt&&e[t].interrupt(r);break;case Fu.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++)e[t].end&&e[t].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case Fu.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++)e[t].dispose&&e[t].dispose(r);this.animState.trackEntryPool.free(r);break;case Fu.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++)e[t].complete&&e[t].complete(r);let n=Rl.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,n),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,n);break;case Fu.event:let s=t[2+i++];null!=r.listener&&r.listener.event&&r.listener.event(r,s);for(let t=0;t<e.length;t++)e[t].event&&e[t].event(r,s);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,s)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var Fu,ku,Nu,Lu,Bu,Xu,Uu;Du.__initStatic11(),function(t){t[t.start=0]="start";t[t.interrupt=1]="interrupt";t[t.end=2]="end";t[t.dispose=3]="dispose";t[t.complete=4]="complete";t[t.event=5]="event"}(Fu||(Fu={}));class Yu{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}class Vu{__init(){this.animationToMixTime={}}__init2(){this.defaultMix=0}constructor(t){if(Vu.prototype.__init.call(this),Vu.prototype.__init2.call(this),null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)}static __initStatic(){this.deprecatedWarning1=!1}setMixByName(t,e,i){Vu.deprecatedWarning1||(Vu.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,i)}setMixWith(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");let n=t.name+"."+e.name;this.animationToMixTime[n]=i}getMix(t,e){let i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n}}Vu.__initStatic();class Gu{constructor(t){this.atlas=t}newRegionAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");let r=new cu(e);return r.region=n,r}newMeshAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");let r=new ou(e);return r.region=n,r}newBoundingBoxAttachment(t,e){return new su(e)}newPathAttachment(t,e){return new hu(e)}newPointAttachment(t,e){return new lu(e)}newClippingAttachment(t,e){return new au(e)}}class ju{__init(){this.x=0}__init2(){this.y=0}__init3(){this.rotation=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.shearX=0}__init7(){this.shearY=0}__init8(){this.transformMode=ku.Normal}constructor(t,e,i){if(ju.prototype.__init.call(this),ju.prototype.__init2.call(this),ju.prototype.__init3.call(this),ju.prototype.__init4.call(this),ju.prototype.__init5.call(this),ju.prototype.__init6.call(this),ju.prototype.__init7.call(this),ju.prototype.__init8.call(this),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}!function(t){t[t.Normal=0]="Normal";t[t.OnlyTranslation=1]="OnlyTranslation";t[t.NoRotationOrReflection=2]="NoRotationOrReflection";t[t.NoScale=3]="NoScale";t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(ku||(ku={}));class Wu{__init(){this.matrix=new De}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}__init2(){this.children=new Array}__init3(){this.x=0}__init4(){this.y=0}__init5(){this.rotation=0}__init6(){this.scaleX=0}__init7(){this.scaleY=0}__init8(){this.shearX=0}__init9(){this.shearY=0}__init10(){this.ax=0}__init11(){this.ay=0}__init12(){this.arotation=0}__init13(){this.ascaleX=0}__init14(){this.ascaleY=0}__init15(){this.ashearX=0}__init16(){this.ashearY=0}__init17(){this.appliedValid=!1}__init18(){this.sorted=!1}constructor(t,e,i){if(Wu.prototype.__init.call(this),Wu.prototype.__init2.call(this),Wu.prototype.__init3.call(this),Wu.prototype.__init4.call(this),Wu.prototype.__init5.call(this),Wu.prototype.__init6.call(this),Wu.prototype.__init7.call(this),Wu.prototype.__init8.call(this),Wu.prototype.__init9.call(this),Wu.prototype.__init10.call(this),Wu.prototype.__init11.call(this),Wu.prototype.__init12.call(this),Wu.prototype.__init13.call(this),Wu.prototype.__init14.call(this),Wu.prototype.__init15.call(this),Wu.prototype.__init16.call(this),Wu.prototype.__init17.call(this),Wu.prototype.__init18.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,n,r,s,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=n,this.ascaleY=r,this.ashearX=s,this.ashearY=a,this.appliedValid=!0;let o=this.parent,h=this.matrix,l=this.skeleton.scaleX,c=Dl?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==o){let o=this.skeleton,u=i+90+a;return h.a=Rl.cosDeg(i+s)*n*l,h.c=Rl.cosDeg(u)*r*l,h.b=Rl.sinDeg(i+s)*n*c,h.d=Rl.sinDeg(u)*r*c,h.tx=t*l+o.x,void(h.ty=e*c+o.y)}let u=o.matrix.a,d=o.matrix.c,p=o.matrix.b,f=o.matrix.d;switch(h.tx=u*t+d*e+o.matrix.tx,h.ty=p*t+f*e+o.matrix.ty,this.data.transformMode){case ku.Normal:{let t=i+90+a,e=Rl.cosDeg(i+s)*n,o=Rl.cosDeg(t)*r,l=Rl.sinDeg(i+s)*n,c=Rl.sinDeg(t)*r;return h.a=u*e+d*l,h.c=u*o+d*c,h.b=p*e+f*l,void(h.d=p*o+f*c)}case ku.OnlyTranslation:{let t=i+90+a;h.a=Rl.cosDeg(i+s)*n,h.c=Rl.cosDeg(t)*r,h.b=Rl.sinDeg(i+s)*n,h.d=Rl.sinDeg(t)*r;break}case ku.NoRotationOrReflection:{let t=u*u+p*p,e=0;t>1e-4?(t=Math.abs(u*f-d*p)/t,d=p*t,f=u*t,e=Math.atan2(p,u)*Rl.radDeg):(u=0,p=0,e=90-Math.atan2(f,d)*Rl.radDeg);let o=i+s-e,l=i+a-e+90,c=Rl.cosDeg(o)*n,m=Rl.cosDeg(l)*r,_=Rl.sinDeg(o)*n,g=Rl.sinDeg(l)*r;h.a=u*c-d*_,h.c=u*m-d*g,h.b=p*c+f*_,h.d=p*m+f*g;break}case ku.NoScale:case ku.NoScaleOrReflection:{let t=Rl.cosDeg(i),e=Rl.sinDeg(i),o=(u*t+d*e)/l,m=(p*t+f*e)/c,_=Math.sqrt(o*o+m*m);_>1e-5&&(_=1/_),o*=_,m*=_,_=Math.sqrt(o*o+m*m),this.data.transformMode==ku.NoScale&&u*f-d*p<0!=(Dl?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let g=Math.PI/2+Math.atan2(m,o),y=Math.cos(g)*_,x=Math.sin(g)*_,v=Rl.cosDeg(s)*n,b=Rl.cosDeg(90+a)*r,E=Rl.sinDeg(s)*n,S=Rl.sinDeg(90+a)*r;h.a=o*v+y*E,h.c=o*b+y*S,h.b=m*v+x*E,h.d=m*b+x*S;break}}h.a*=l,h.c*=l,h.b*=c,h.d*=c}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*Rl.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*Rl.radDeg}getWorldScaleX(){let t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){let t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;let t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*Rl.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*Rl.radDeg);let i=t.matrix,n=1/(i.a*i.d-i.b*i.c),r=e.tx-i.tx,s=e.ty-i.ty;this.ax=r*i.d*n-s*i.c*n,this.ay=s*i.a*n-r*i.b*n;let a=n*i.d,o=n*i.a,h=n*i.c,l=n*i.b,c=a*e.a-h*e.b,u=a*e.c-h*e.d,d=o*e.b-l*e.a,p=o*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){let t=c*p-u*d;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(c*u+d*p,t)*Rl.radDeg,this.arotation=Math.atan2(d,c)*Rl.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,u)*Rl.radDeg}worldToLocal(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=1/(i*s-n*r),o=t.x-e.tx,h=t.y-e.ty;return t.x=o*s*a-h*n*a,t.y=h*i*a-o*r*a,t}localToWorld(t){let e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*i,n.d*i-n.c*e)*Rl.radDeg}localToWorldRotation(t){let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(i*n.b+e*n.d,i*n.a+e*n.c)*Rl.radDeg}rotateWorld(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=Rl.cosDeg(t),o=Rl.sinDeg(t);e.a=a*i-o*r,e.c=a*n-o*s,e.b=o*i+a*r,e.d=o*n+a*s,this.appliedValid=!1}}class Hu{constructor(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class zu{constructor(t){this.name=t}}class qu{__init(){this.bendDirection=0}__init2(){this.compress=!1}__init3(){this.stretch=!1}__init4(){this.mix=1}constructor(t,e){if(qu.prototype.__init.call(this),qu.prototype.__init2.call(this),qu.prototype.__init3.call(this),qu.prototype.__init4.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}getOrder(){return this.data.order}apply(){this.update()}update(){let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix)}}apply1(t,e,i,n,r,s,a){t.appliedValid||t.updateAppliedTransform();let o=t.parent.matrix,h=1/(o.a*o.d-o.b*o.c),l=e-o.tx,c=i-o.ty,u=(l*o.d-c*o.c)*h-t.ax,d=(c*o.a-l*o.b)*h-t.ay,p=Math.atan2(d,u)*Rl.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let f=t.ascaleX,m=t.ascaleY;if(n||r){let e=t.data.length*f,i=Math.sqrt(u*u+d*d);if(n&&i<e||r&&i>e&&e>1e-4){let t=(i/e-1)*a+1;f*=t,s&&(m*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*a,f,m,t.ashearX,t.ashearY)}apply2(t,e,i,n,r,s,a){if(0==a)return void e.updateWorldTransform();t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();let o=t.ax,h=t.ay,l=t.ascaleX,c=l,u=t.ascaleY,d=e.ascaleX,p=t.matrix,f=0,m=0,_=0;l<0?(l=-l,f=180,_=-1):(f=0,_=1),u<0&&(u=-u,_=-_),d<0?(d=-d,m=180):m=0;let g=e.ax,y=0,x=0,v=0,b=p.a,E=p.c,S=p.b,T=p.d,w=Math.abs(l-u)<=1e-4;w?(y=e.ay,x=b*g+E*y+p.tx,v=S*g+T*y+p.ty):(y=0,x=b*g+p.tx,v=S*g+p.ty);let A=t.parent.matrix;b=A.a,E=A.c,S=A.b,T=A.d;let R=1/(b*T-E*S),C=i-A.tx,I=n-A.ty,M=(C*T-I*E)*R-o,P=(I*b-C*S)*R-h,O=M*M+P*P;C=x-A.tx,I=v-A.ty;let D=(C*T-I*E)*R-o,F=(I*b-C*S)*R-h,k=Math.sqrt(D*D+F*F),N=e.data.length*d,L=0,B=0;t:if(w){N*=l;let t=(O-k*k-N*N)/(2*k*N);t<-1?t=-1:t>1&&(t=1,s&&k+N>1e-4&&(c*=(Math.sqrt(O)/(k+N)-1)*a+1)),B=Math.acos(t)*r,b=k+N*t,E=N*Math.sin(B),L=Math.atan2(P*b-M*E,M*b+P*E)}else{b=l*N,E=u*N;let t=b*b,e=E*E,i=Math.atan2(P,M);S=e*k*k+t*O-t*e;let n=-2*e*k,s=e-t;if(T=n*n-4*s*S,T>=0){let t=Math.sqrt(T);n<0&&(t=-t),t=-(n+t)/2;let e=t/s,a=S/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=O){I=Math.sqrt(O-o*o)*r,L=i-Math.atan2(I,o),B=Math.atan2(I/u,(o-k)/l);break t}}let a=Rl.PI,o=k-b,h=o*o,c=0,d=0,p=k+b,f=p*p,m=0;S=-b*k/(t-e),S>=-1&&S<=1&&(S=Math.acos(S),C=b*Math.cos(S)+k,I=E*Math.sin(S),T=C*C+I*I,T<h&&(a=S,h=T,o=C,c=I),T>f&&(d=S,f=T,p=C,m=I)),O<=(h+f)/2?(L=i-Math.atan2(c*r,o),B=a*r):(L=i-Math.atan2(m*r,p),B=d*r)}let X=Math.atan2(y,g)*_,U=t.arotation;L=(L-X)*Rl.radDeg+f-U,L>180?L-=360:L<-180&&(L+=360),t.updateWorldTransformWith(o,h,U+L*a,c,t.ascaleY,0,0),U=e.arotation,B=((B+X)*Rl.radDeg-e.ashearX)*_+m-U,B>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(g,y,U+B*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Zu{__init(){this.order=0}__init2(){this.bones=new Array}__init3(){this.bendDirection=1}__init4(){this.compress=!1}__init5(){this.stretch=!1}__init6(){this.uniform=!1}__init7(){this.mix=1}constructor(t){Zu.prototype.__init.call(this),Zu.prototype.__init2.call(this),Zu.prototype.__init3.call(this),Zu.prototype.__init4.call(this),Zu.prototype.__init5.call(this),Zu.prototype.__init6.call(this),Zu.prototype.__init7.call(this),this.name=t}}class Ku{__init(){this.order=0}__init2(){this.bones=new Array}constructor(t){Ku.prototype.__init.call(this),Ku.prototype.__init2.call(this),this.name=t}}!function(t){t[t.Fixed=0]="Fixed";t[t.Percent=1]="Percent"}(Nu||(Nu={})),function(t){t[t.Length=0]="Length";t[t.Fixed=1]="Fixed";t[t.Percent=2]="Percent"}(Lu||(Lu={})),function(t){t[t.Tangent=0]="Tangent";t[t.Chain=1]="Chain";t[t.ChainScale=2]="ChainScale"}(Bu||(Bu={}));class Ju{static __initStatic(){this.NONE=-1}static __initStatic2(){this.BEFORE=-2}static __initStatic3(){this.AFTER=-3}static __initStatic4(){this.epsilon=1e-5}__init(){this.position=0}__init2(){this.spacing=0}__init3(){this.rotateMix=0}__init4(){this.translateMix=0}__init5(){this.spaces=new Array}__init6(){this.positions=new Array}__init7(){this.world=new Array}__init8(){this.curves=new Array}__init9(){this.lengths=new Array}__init10(){this.segments=new Array}constructor(t,e){if(Ju.prototype.__init.call(this),Ju.prototype.__init2.call(this),Ju.prototype.__init3.call(this),Ju.prototype.__init4.call(this),Ju.prototype.__init5.call(this),Ju.prototype.__init6.call(this),Ju.prototype.__init7.call(this),Ju.prototype.__init8.call(this),Ju.prototype.__init9.call(this),Ju.prototype.__init10.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}apply(){this.update()}update(){let t=this.target.getAttachment();if(!(t instanceof hu))return;let e=this.rotateMix,i=this.translateMix,n=e>0;if(!(i>0)&&!n)return;let r=this.data,s=r.spacingMode,a=s==Lu.Length,o=r.rotateMode,h=o==Bu.Tangent,l=o==Bu.ChainScale,c=this.bones.length,u=h?c:c+1,d=this.bones,p=Ml.setArraySize(this.spaces,u),f=null,m=this.spacing;if(l||a){l&&(f=Ml.setArraySize(this.lengths,c));for(let t=0,e=u-1;t<e;){let e=d[t],i=e.data.length;if(i<Ju.epsilon)l&&(f[t]=0),p[++t]=0;else{let n=i*e.matrix.a,r=i*e.matrix.b,s=Math.sqrt(n*n+r*r);l&&(f[t]=s),p[++t]=(a?i+m:m)*s/i}}}else for(let t=1;t<u;t++)p[t]=m;let _=this.computeWorldPositions(t,u,h,r.positionMode==Nu.Percent,s==Lu.Percent),g=_[0],y=_[1],x=r.offsetRotation,v=!1;if(0==x)v=o==Bu.Chain;else{v=!1;let t=this.target.bone.matrix;x*=t.a*t.d-t.b*t.c>0?Rl.degRad:-Rl.degRad}for(let t=0,r=3;t<c;t++,r+=3){let s=d[t],a=s.matrix;a.tx+=(g-a.tx)*i,a.ty+=(y-a.ty)*i;let o=_[r],c=_[r+1],u=o-g,m=c-y;if(l){let i=f[t];if(0!=i){let t=(Math.sqrt(u*u+m*m)/i-1)*e+1;a.a*=t,a.b*=t}}if(g=o,y=c,n){let i=a.a,n=a.c,o=a.b,l=a.d,c=0,d=0,f=0;if(c=h?_[r-1]:0==p[t+1]?_[r+2]:Math.atan2(m,u),c-=Math.atan2(o,i),v){d=Math.cos(c),f=Math.sin(c);let t=s.data.length;g+=(t*(d*i-f*o)-u)*e,y+=(t*(f*i+d*o)-m)*e}else c+=x;c>Rl.PI?c-=Rl.PI2:c<-Rl.PI&&(c+=Rl.PI2),c*=e,d=Math.cos(c),f=Math.sin(c),a.a=d*i-f*o,a.c=d*n-f*l,a.b=f*i+d*o,a.d=f*n+d*l}s.appliedValid=!1}}computeWorldPositions(t,e,i,n,r){let s=this.target,a=this.position,o=this.spaces,h=Ml.setArraySize(this.positions,3*e+2),l=null,c=t.closed,u=t.worldVerticesLength,d=u/6,p=Ju.NONE;if(!t.constantSpeed){let f=t.lengths;d-=c?1:2;let m=f[d];if(n&&(a*=m),r)for(let t=0;t<e;t++)o[t]*=m;l=Ml.setArraySize(this.world,8);for(let n=0,r=0,_=0;n<e;n++,r+=3){let e=o[n];a+=e;let g=a;if(c)g%=m,g<0&&(g+=m),_=0;else{if(g<0){p!=Ju.BEFORE&&(p=Ju.BEFORE,t.computeWorldVertices(s,2,4,l,0,2)),this.addBeforePosition(g,l,0,h,r);continue}if(g>m){p!=Ju.AFTER&&(p=Ju.AFTER,t.computeWorldVertices(s,u-6,4,l,0,2)),this.addAfterPosition(g-m,l,0,h,r);continue}}for(;;_++){let t=f[_];if(!(g>t)){if(0==_)g/=t;else{let e=f[_-1];g=(g-e)/(t-e)}break}}_!=p&&(p=_,c&&_==d?(t.computeWorldVertices(s,u-4,4,l,0,2),t.computeWorldVertices(s,0,4,l,4,2)):t.computeWorldVertices(s,6*_+2,8,l,0,2)),this.addCurvePosition(g,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,r,i||n>0&&0==e)}return h}c?(u+=2,l=Ml.setArraySize(this.world,u),t.computeWorldVertices(s,2,u-4,l,0,2),t.computeWorldVertices(s,0,2,l,u-4,2),l[u-2]=l[0],l[u-1]=l[1]):(d--,u-=4,l=Ml.setArraySize(this.world,u),t.computeWorldVertices(s,2,u,l,0,2));let f=Ml.setArraySize(this.curves,d),m=0,_=l[0],g=l[1],y=0,x=0,v=0,b=0,E=0,S=0,T=0,w=0,A=0,R=0,C=0,I=0,M=0,P=0;for(let t=0,e=2;t<d;t++,e+=6)y=l[e],x=l[e+1],v=l[e+2],b=l[e+3],E=l[e+4],S=l[e+5],T=.1875*(_-2*y+v),w=.1875*(g-2*x+b),A=.09375*(3*(y-v)-_+E),R=.09375*(3*(x-b)-g+S),C=2*T+A,I=2*w+R,M=.75*(y-_)+T+.16666667*A,P=.75*(x-g)+w+.16666667*R,m+=Math.sqrt(M*M+P*P),M+=C,P+=I,C+=A,I+=R,m+=Math.sqrt(M*M+P*P),M+=C,P+=I,m+=Math.sqrt(M*M+P*P),M+=C+A,P+=I+R,m+=Math.sqrt(M*M+P*P),f[t]=m,_=E,g=S;if(n&&(a*=m),r)for(let t=0;t<e;t++)o[t]*=m;let O=this.segments,D=0;for(let t=0,n=0,r=0,s=0;t<e;t++,n+=3){let e=o[t];a+=e;let d=a;if(c)d%=m,d<0&&(d+=m),r=0;else{if(d<0){this.addBeforePosition(d,l,0,h,n);continue}if(d>m){this.addAfterPosition(d-m,l,u-4,h,n);continue}}for(;;r++){let t=f[r];if(!(d>t)){if(0==r)d/=t;else{let e=f[r-1];d=(d-e)/(t-e)}break}}if(r!=p){p=r;let t=6*r;for(_=l[t],g=l[t+1],y=l[t+2],x=l[t+3],v=l[t+4],b=l[t+5],E=l[t+6],S=l[t+7],T=.03*(_-2*y+v),w=.03*(g-2*x+b),A=.006*(3*(y-v)-_+E),R=.006*(3*(x-b)-g+S),C=2*T+A,I=2*w+R,M=.3*(y-_)+T+.16666667*A,P=.3*(x-g)+w+.16666667*R,D=Math.sqrt(M*M+P*P),O[0]=D,t=1;t<8;t++)M+=C,P+=I,C+=A,I+=R,D+=Math.sqrt(M*M+P*P),O[t]=D;M+=C,P+=I,D+=Math.sqrt(M*M+P*P),O[8]=D,M+=C+A,P+=I+R,D+=Math.sqrt(M*M+P*P),O[9]=D,s=0}for(d*=D;;s++){let t=O[s];if(!(d>t)){if(0==s)d/=t;else{let e=O[s-1];d=s+(d-e)/(t-e)}break}}this.addCurvePosition(.1*d,_,g,y,x,v,b,E,S,h,n,i||t>0&&0==e)}return h}addBeforePosition(t,e,i,n,r){let s=e[i],a=e[i+1],o=e[i+2]-s,h=e[i+3]-a,l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addAfterPosition(t,e,i,n,r){let s=e[i+2],a=e[i+3],o=s-e[i],h=a-e[i+1],l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addCurvePosition(t,e,i,n,r,s,a,o,h,l,c,u){(0==t||isNaN(t))&&(t=1e-4);let d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,y=3*g,x=f*y,v=y*t,b=e*_+n*x+s*v+o*p,E=i*_+r*x+a*v+h*p;l[c]=b,l[c+1]=E,u&&(l[c+2]=Math.atan2(E-(i*m+r*g*2+a*d),b-(e*m+n*g*2+s*d)))}getOrder(){return this.data.order}}Ju.__initStatic(),Ju.__initStatic2(),Ju.__initStatic3(),Ju.__initStatic4();class $u{__init(){this.attachmentVertices=new Array}constructor(t,e){if($u.prototype.__init.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new Al,this.darkColor=null==t.darkColor?null:new Al,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}class Qu{__init(){this.rotateMix=0}__init2(){this.translateMix=0}__init3(){this.scaleMix=0}__init4(){this.shearMix=0}__init5(){this.temp=new Ol}constructor(t,e){if(Qu.prototype.__init.call(this),Qu.prototype.__init2.call(this),Qu.prototype.__init3.call(this),Qu.prototype.__init4.call(this),Qu.prototype.__init5.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,a=s.a,o=s.c,h=s.b,l=s.d,c=a*l-o*h>0?Rl.degRad:-Rl.degRad,u=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones;for(let s=0,c=p.length;s<c;s++){let c=p[s],f=!1,m=c.matrix;if(0!=t){let e=m.a,i=m.c,n=m.b,r=m.d,s=Math.atan2(h,a)-Math.atan2(n,e)+u;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let o=Math.cos(s),l=Math.sin(s);m.a=o*e-l*n,m.c=o*i-l*r,m.b=l*e+o*n,m.d=l*i+o*r,f=!0}if(0!=e){let t=this.temp;r.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),m.tx+=(t.x-m.tx)*e,m.ty+=(t.y-m.ty)*e,f=!0}if(i>0){let t=Math.sqrt(m.a*m.a+m.b*m.b),e=Math.sqrt(a*a+h*h);t>1e-5&&(t=(t+(e-t+this.data.offsetScaleX)*i)/t),m.a*=t,m.b*=t,t=Math.sqrt(m.c*m.c+m.d*m.d),e=Math.sqrt(o*o+l*l),t>1e-5&&(t=(t+(e-t+this.data.offsetScaleY)*i)/t),m.c*=t,m.d*=t,f=!0}if(n>0){let t=m.c,e=m.d,i=Math.atan2(e,t),r=Math.atan2(l,o)-Math.atan2(h,a)-(i-Math.atan2(m.b,m.a));r>Rl.PI?r-=Rl.PI2:r<-Rl.PI&&(r+=Rl.PI2),r=i+(r+d)*n;let s=Math.sqrt(t*t+e*e);m.c=Math.cos(r)*s,m.d=Math.sin(r)*s,f=!0}f&&(c.appliedValid=!1)}}applyRelativeWorld(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,a=s.a,o=s.c,h=s.b,l=s.d,c=a*l-o*h>0?Rl.degRad:-Rl.degRad,u=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones;for(let s=0,c=p.length;s<c;s++){let c=p[s],f=!1,m=c.matrix;if(0!=t){let e=m.a,i=m.c,n=m.b,r=m.d,s=Math.atan2(h,a)+u;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let o=Math.cos(s),l=Math.sin(s);m.a=o*e-l*n,m.c=o*i-l*r,m.b=l*e+o*n,m.d=l*i+o*r,f=!0}if(0!=e){let t=this.temp;r.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),m.tx+=t.x*e,m.ty+=t.y*e,f=!0}if(i>0){let t=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleX)*i+1;m.a*=t,m.b*=t,t=(Math.sqrt(o*o+l*l)-1+this.data.offsetScaleY)*i+1,m.c*=t,m.d*=t,f=!0}if(n>0){let t=Math.atan2(l,o)-Math.atan2(h,a);t>Rl.PI?t-=Rl.PI2:t<-Rl.PI&&(t+=Rl.PI2);let e=m.c,i=m.d;t=Math.atan2(i,e)+(t-Rl.PI/2+d)*n;let r=Math.sqrt(e*e+i*i);m.c=Math.cos(t)*r,m.d=Math.sin(t)*r,f=!0}f&&(c.appliedValid=!1)}}applyAbsoluteLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();let s=this.bones;for(let a=0,o=s.length;a<o;a++){let o=s[a];o.appliedValid||o.updateAppliedTransform();let h=o.arotation;if(0!=t){let e=r.arotation-h+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),h+=e*t}let l=o.ax,c=o.ay;0!=e&&(l+=(r.ax-l+this.data.offsetX)*e,c+=(r.ay-c+this.data.offsetY)*e);let u=o.ascaleX,d=o.ascaleY;i>0&&(u>1e-5&&(u=(u+(r.ascaleX-u+this.data.offsetScaleX)*i)/u),d>1e-5&&(d=(d+(r.ascaleY-d+this.data.offsetScaleY)*i)/d));let p=o.ashearY;if(n>0){let t=r.ashearY-p+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),o.shearY+=t*n}o.updateWorldTransformWith(l,c,h,u,d,o.ashearX,p)}}applyRelativeLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();let s=this.bones;for(let a=0,o=s.length;a<o;a++){let o=s[a];o.appliedValid||o.updateAppliedTransform();let h=o.arotation;0!=t&&(h+=(r.arotation+this.data.offsetRotation)*t);let l=o.ax,c=o.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);let u=o.ascaleX,d=o.ascaleY;i>0&&(u>1e-5&&(u*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),d>1e-5&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));let p=o.ashearY;n>0&&(p+=(r.ashearY+this.data.offsetShearY)*n),o.updateWorldTransformWith(l,c,h,u,d,o.ashearX,p)}}getOrder(){return this.data.order}}class td{__init(){this._updateCache=new Array}__init2(){this.updateCacheReset=new Array}__init3(){this.time=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.x=0}__init7(){this.y=0}constructor(t){if(td.prototype.__init.call(this),td.prototype.__init2.call(this),td.prototype.__init3.call(this),td.prototype.__init4.call(this),td.prototype.__init5.call(this),td.prototype.__init6.call(this),td.prototype.__init7.call(this),null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,n=t.bones[e];if(null==n.parent)i=new Wu(n,this,null);else{let t=this.bones[n.parent.index];i=new Wu(n,this,t),t.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],n=this.bones[i.boneData.index],r=new $u(i,n);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new qu(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new Qu(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Ju(i,this))}this.color=new Al(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0,this.updateCacheReset.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].sorted=!1;let e=this.ikConstraints,i=this.transformConstraints,n=this.pathConstraints,r=e.length,s=i.length,a=n.length,o=r+s+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let n=e[i];if(n.data.order==t){this.sortIkConstraint(n);continue t}}for(let e=0;e<s;e++){let n=i[e];if(n.data.order==t){this.sortTransformConstraint(n);continue t}}for(let e=0;e<a;e++){let i=n[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){let e=t.target;this.sortBone(e);let i=t.bones,n=i[0];if(this.sortBone(n),i.length>1){let t=i[i.length-1];this._updateCache.indexOf(t)>-1||this.updateCacheReset.push(t)}this._updateCache.push(t),this.sortReset(n.children),i[i.length-1].sorted=!0}sortPathConstraint(t){let e=t.target,i=e.data.index,n=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,n);let r=e.getAttachment();r instanceof hu&&this.sortPathConstraintAttachmentWith(r,n);let s=t.bones,a=s.length;for(let t=0;t<a;t++)this.sortBone(s[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(s[t].children);for(let t=0;t<a;t++)s[t].sorted=!0}sortTransformConstraint(t){this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let n=t.attachments[e];if(n)for(let t in n)this.sortPathConstraintAttachmentWith(n[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof hu))return;let i=t.bones;if(null==i)this.sortBone(e);else{let t=this.bones,e=0;for(;e<i.length;){let n=i[e++];for(let r=e+n;e<r;e++){let n=i[e];this.sortBone(t[n])}}}}sortBone(t){if(t.sorted)return;let e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted&&this.sortReset(i.children),i.sorted=!1}}updateWorldTransform(){let t=this.updateCacheReset;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],n=e.data;e.rotateMix=n.rotateMix,e.translateMix=n.translateMix,e.scaleMix=n.scaleMix,e.shearMix=n.shearMix}let n=this.pathConstraints;for(let t=0,e=n.length;t<e;t++){let e=n[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.rotateMix=i.rotateMix,e.translateMix=i.translateMix}}setSlotsToSetupPose(){let t=this.slots;Ml.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findBoneIndex(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}findSlot(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findSlotIndex(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}setSkinByName(t){let e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i],r=n.data.attachmentName;if(null!=r){let e=t.getAttachment(i,r);null!=e&&n.setAttachment(e)}}}this.skin=t}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){let i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(null==t)throw new Error("slotName cannot be null.");let i=this.slots;for(let n=0,r=i.length;n<r;n++){let r=i[n];if(r.data.name==t){let i=null;if(null!=e&&(i=this.getAttachment(n,e),null==i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findTransformConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findPathConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}getBounds(t,e,i){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");let n=this.drawOrder,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=n.length;t<e;t++){let e=n[t],h=0,l=null,c=e.getAttachment();if(c instanceof cu)h=8,l=Ml.setArraySize(i,h,0),c.computeWorldVertices(e.bone,l,0,2);else if(c instanceof ou){let t=c;h=t.worldVerticesLength,l=Ml.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(null!=l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],i=l[t+1];r=Math.min(r,e),s=Math.min(s,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,s),e.set(a-r,o-s)}update(t){this.time+=t}get flipX(){return-1==this.scaleX}set flipX(t){td.deprecatedWarning1||(td.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return-1==this.scaleY}set flipY(t){td.deprecatedWarning1||(td.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}static __initStatic(){this.deprecatedWarning1=!1}}td.__initStatic();class ed{constructor(){ed.prototype.__init.call(this),ed.prototype.__init2.call(this),ed.prototype.__init3.call(this),ed.prototype.__init4.call(this),ed.prototype.__init5.call(this),ed.prototype.__init6.call(this),ed.prototype.__init7.call(this)}__init(){this.minX=0}__init2(){this.minY=0}__init3(){this.maxX=0}__init4(){this.maxY=0}__init5(){this.boundingBoxes=new Array}__init6(){this.polygons=new Array}__init7(){this.polygonPool=new Pl(()=>Ml.newFloatArray(16))}update(t,e){if(null==t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,n=this.polygons,r=this.polygonPool,s=t.slots,a=s.length;i.length=0,r.freeAll(n),n.length=0;for(let t=0;t<a;t++){let e=s[t],a=e.getAttachment();if(a instanceof su){let t=a;i.push(t);let s=r.obtain();s.length!=t.worldVerticesLength&&(s=Ml.newFloatArray(t.worldVerticesLength)),n.push(s),t.computeWorldVertices(e,0,t.worldVerticesLength,s,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons;for(let s=0,a=r.length;s<a;s++){let a=r[s],o=a;for(let r=0,s=a.length;r<s;r+=2){let s=o[r],a=o[r+1];t=Math.min(t,s),e=Math.min(e,a),i=Math.max(i,s),n=Math.max(n,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,n){let r=this.minX,s=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||t>=a&&i>=a||e>=o&&n>=o)return!1;let h=(n-e)/(i-t),l=h*(r-t)+e;if(l>s&&l<o)return!0;if(l=h*(a-t)+e,l>s&&l<o)return!0;let c=(s-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null}containsPointPolygon(t,e,i){let n=t,r=t.length,s=r-2,a=!1;for(let t=0;t<r;t+=2){let r=n[t+1],o=n[s+1];if(r<i&&o>=i||o<i&&r>=i){let h=n[t];h+(i-r)/(o-r)*(n[s]-h)<e&&(a=!a)}s=t}return a}intersectsSegment(t,e,i,n){let r=this.polygons;for(let s=0,a=r.length;s<a;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null}intersectsSegmentPolygon(t,e,i,n,r){let s=t,a=t.length,o=e-n,h=i-r,l=e*r-i*n,c=s[a-2],u=s[a-1];for(let t=0;t<a;t+=2){let a=s[t],d=s[t+1],p=c*d-u*a,f=c-a,m=u-d,_=o*m-h*f,g=(l*f-o*p)/_;if((g>=c&&g<=a||g>=a&&g<=c)&&(g>=e&&g<=n||g>=n&&g<=e)){let t=(l*m-h*p)/_;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(null==t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class id{constructor(){id.prototype.__init.call(this),id.prototype.__init2.call(this),id.prototype.__init3.call(this),id.prototype.__init4.call(this),id.prototype.__init5.call(this),id.prototype.__init6.call(this),id.prototype.__init7.call(this),id.prototype.__init8.call(this),id.prototype.__init9.call(this)}__init(){this.bones=new Array}__init2(){this.slots=new Array}__init3(){this.skins=new Array}__init4(){this.events=new Array}__init5(){this.animations=new Array}__init6(){this.ikConstraints=new Array}__init7(){this.transformConstraints=new Array}__init8(){this.pathConstraints=new Array}__init9(){this.fps=0}findBone(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findBoneIndex(t){if(null==t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSlot(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findSlotIndex(t){if(null==t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSkin(t){if(null==t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findEvent(t){if(null==t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findAnimation(t){if(null==t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findIkConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findTransformConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraintIndex(t){if(null==t)throw new Error("pathConstraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}}class nd{__init(){this.color=new Al(1,1,1,1)}constructor(t,e,i){if(nd.prototype.__init.call(this),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}class rd{__init(){this.order=0}__init2(){this.bones=new Array}__init3(){this.rotateMix=0}__init4(){this.translateMix=0}__init5(){this.scaleMix=0}__init6(){this.shearMix=0}__init7(){this.offsetRotation=0}__init8(){this.offsetX=0}__init9(){this.offsetY=0}__init10(){this.offsetScaleX=0}__init11(){this.offsetScaleY=0}__init12(){this.offsetShearY=0}__init13(){this.relative=!1}__init14(){this.local=!1}constructor(t){if(rd.prototype.__init.call(this),rd.prototype.__init2.call(this),rd.prototype.__init3.call(this),rd.prototype.__init4.call(this),rd.prototype.__init5.call(this),rd.prototype.__init6.call(this),rd.prototype.__init7.call(this),rd.prototype.__init8.call(this),rd.prototype.__init9.call(this),rd.prototype.__init10.call(this),rd.prototype.__init11.call(this),rd.prototype.__init12.call(this),rd.prototype.__init13.call(this),rd.prototype.__init14.call(this),null==t)throw new Error("name cannot be null.");this.name=t}}class sd{__init(){this.attachments=new Array}constructor(t){if(sd.prototype.__init.call(this),null==t)throw new Error("name cannot be null.");this.name=t}addAttachment(t,e,i){if(null==i)throw new Error("attachment cannot be null.");let n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}attachAll(t,e){let i=0;for(let n=0;n<t.slots.length;n++){let r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(s==t[e]){let t=this.getAttachment(i,e);null!=t&&r.setAttachment(t);break}}}i++}}}class ad{__init(){this.scale=1}__init2(){this.linkedMeshes=new Array}constructor(t){ad.prototype.__init.call(this),ad.prototype.__init2.call(this),this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new id,n="string"==typeof t?JSON.parse(t):t,r=n.skeleton;if(null!=r&&(i.hash=r.hash,i.version=r.spine,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images),n.bones)for(let t=0;t<n.bones.length;t++){let r=n.bones[t],s=null,a=this.getValue(r,"parent",null);if(null!=a&&(s=i.findBone(a),null==s))throw new Error("Parent bone not found: "+a);let o=new ju(i.bones.length,r.name,s);o.length=this.getValue(r,"length",0)*e,o.x=this.getValue(r,"x",0)*e,o.y=this.getValue(r,"y",0)*e,o.rotation=this.getValue(r,"rotation",0),o.scaleX=this.getValue(r,"scaleX",1),o.scaleY=this.getValue(r,"scaleY",1),o.shearX=this.getValue(r,"shearX",0),o.shearY=this.getValue(r,"shearY",0),o.transformMode=ad.transformModeFromString(this.getValue(r,"transform","normal")),i.bones.push(o)}if(n.slots)for(let t=0;t<n.slots.length;t++){let e=n.slots[t],r=e.name,s=e.bone,a=i.findBone(s);if(null==a)throw new Error("Slot bone not found: "+s);let o=new nd(i.slots.length,r,a),h=this.getValue(e,"color",null);null!=h&&o.color.setFromString(h);let l=this.getValue(e,"dark",null);null!=l&&(o.darkColor=new Al(1,1,1,1),o.darkColor.setFromString(l)),o.attachmentName=this.getValue(e,"attachment",null),o.blendMode=ad.blendModeFromString(this.getValue(e,"blend","normal")),i.slots.push(o)}if(n.ik)for(let t=0;t<n.ik.length;t++){let e=n.ik[t],r=new Zu(e.name);r.order=this.getValue(e,"order",0);for(let t=0;t<e.bones.length;t++){let n=e.bones[t],s=i.findBone(n);if(null==s)throw new Error("IK bone not found: "+n);r.bones.push(s)}let s=e.target;if(r.target=i.findBone(s),null==r.target)throw new Error("IK target bone not found: "+s);r.bendDirection=this.getValue(e,"bendPositive",!0)?1:-1,r.mix=this.getValue(e,"mix",1),i.ikConstraints.push(r)}if(n.transform)for(let t=0;t<n.transform.length;t++){let r=n.transform[t],s=new rd(r.name);s.order=this.getValue(r,"order",0);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findBone(a),null==s.target)throw new Error("Transform constraint target bone not found: "+a);s.local=this.getValue(r,"local",!1),s.relative=this.getValue(r,"relative",!1),s.offsetRotation=this.getValue(r,"rotation",0),s.offsetX=this.getValue(r,"x",0)*e,s.offsetY=this.getValue(r,"y",0)*e,s.offsetScaleX=this.getValue(r,"scaleX",0),s.offsetScaleY=this.getValue(r,"scaleY",0),s.offsetShearY=this.getValue(r,"shearY",0),s.rotateMix=this.getValue(r,"rotateMix",1),s.translateMix=this.getValue(r,"translateMix",1),s.scaleMix=this.getValue(r,"scaleMix",1),s.shearMix=this.getValue(r,"shearMix",1),i.transformConstraints.push(s)}if(n.path)for(let t=0;t<n.path.length;t++){let r=n.path[t],s=new Ku(r.name);s.order=this.getValue(r,"order",0);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findSlot(a),null==s.target)throw new Error("Path target slot not found: "+a);s.positionMode=ad.positionModeFromString(this.getValue(r,"positionMode","percent")),s.spacingMode=ad.spacingModeFromString(this.getValue(r,"spacingMode","length")),s.rotateMode=ad.rotateModeFromString(this.getValue(r,"rotateMode","tangent")),s.offsetRotation=this.getValue(r,"rotation",0),s.position=this.getValue(r,"position",0),s.positionMode==Nu.Fixed&&(s.position*=e),s.spacing=this.getValue(r,"spacing",0),s.spacingMode!=Lu.Length&&s.spacingMode!=Lu.Fixed||(s.spacing*=e),s.rotateMix=this.getValue(r,"rotateMix",1),s.translateMix=this.getValue(r,"translateMix",1),i.pathConstraints.push(s)}if(n.skins)for(let t in n.skins){let e=n.skins[t],r=new sd(t);for(let t in e){let n=i.findSlotIndex(t);if(-1==n)throw new Error("Slot not found: "+t);let s=e[t];for(let t in s){let e=this.readAttachment(s[t],r,n,t,i);null!=e&&r.addAttachment(n,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],n=null==e.skin?i.defaultSkin:i.findSkin(e.skin);if(null==n)throw new Error("Skin not found: "+e.skin);let r=n.getAttachment(e.slotIndex,e.parent);if(null==r)throw new Error("Parent mesh not found: "+e.parent);e.mesh.setParentMesh(r)}if(this.linkedMeshes.length=0,n.events)for(let t in n.events){let e=n.events[t],r=new zu(t);r.intValue=this.getValue(e,"int",0),r.floatValue=this.getValue(e,"float",0),r.stringValue=this.getValue(e,"string",""),r.audioPath=this.getValue(e,"audio",null),null!=r.audioPath&&(r.volume=this.getValue(e,"volume",1),r.balance=this.getValue(e,"balance",0)),i.events.push(r)}if(n.animations)for(let t in n.animations){let e=n.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,n,r){let s=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{let i=this.getValue(t,"path",n),r=this.attachmentLoader.newRegionAttachment(e,n,i);if(null==r)return null;r.path=i,r.x=this.getValue(t,"x",0)*s,r.y=this.getValue(t,"y",0)*s,r.scaleX=this.getValue(t,"scaleX",1),r.scaleY=this.getValue(t,"scaleY",1),r.rotation=this.getValue(t,"rotation",0),r.width=t.width*s,r.height=t.height*s;let a=this.getValue(t,"color",null);return null!=a&&r.color.setFromString(a),r}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(null==i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=this.getValue(t,"color",null);return null!=r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=this.getValue(t,"path",n),s=this.attachmentLoader.newMeshAttachment(e,n,r);if(null==s)return null;s.path=r;let a=this.getValue(t,"color",null);null!=a&&s.color.setFromString(a);let o=this.getValue(t,"parent",null);if(null!=o)return s.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new od(s,this.getValue(t,"skin",null),i,o)),s;let h=t.uvs;return this.readVertices(t,s,h.length),s.triangles=t.triangles,s.regionUVs=new Float32Array(h),s.hullLength=2*this.getValue(t,"hull",0),s}case"path":{let i=this.attachmentLoader.newPathAttachment(e,n);if(null==i)return null;i.closed=this.getValue(t,"closed",!1),i.constantSpeed=this.getValue(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=Ml.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*s;i.lengths=a;let o=this.getValue(t,"color",null);return null!=o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,n);if(null==i)return null;i.x=this.getValue(t,"x",0)*s,i.y=this.getValue(t,"y",0)*s,i.rotation=this.getValue(t,"rotation",0);let r=this.getValue(t,"color",null);return null!=r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,n);if(null==i)return null;let s=this.getValue(t,"end",null);if(null!=s){let t=r.findSlot(s);if(null==t)throw new Error("Clipping end slot not found: "+s);i.endSlot=t}let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=this.getValue(t,"color",null);return null!=o&&i.color.setFromString(o),i}}return null}readVertices(t,e,i){let n=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=Ml.toFloatArray(r);if(1!=n)for(let e=0,i=r.length;e<i;e++)t[e]*=n;return void(e.vertices=t)}let s=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),s.push(r[t+1]*n),s.push(r[t+2]*n),s.push(r[t+3])}e.bones=a,e.vertices=Ml.toFloatArray(s)}readAnimation(t,e,i){let n=this.scale,r=new Array,s=0;if(t.slots)for(let e in t.slots){let n=t.slots[e],a=i.findSlotIndex(e);if(-1==a)throw new Error("Slot not found: "+e);for(let t in n){let i=n[t];if("attachment"==t){let t=new bu(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n];t.setFrame(e++,r.time,r.name)}r.push(t),s=Math.max(s,t.frames[t.getFrameCount()-1])}else if("color"==t){let t=new xu(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n],s=new Al;s.setFromString(r.color||"ffffffff"),t.setFrame(e,r.time,s.r,s.g,s.b,s.a),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*xu.ENTRIES])}else{if("twoColor"!=t)throw new Error("Invalid timeline type for a slot: "+t+" ("+e+")");{let t=new vu(i.length);t.slotIndex=a;let e=0;for(let n=0;n<i.length;n++){let r=i[n],s=new Al,a=new Al;s.setFromString(r.light),a.setFromString(r.dark),t.setFrame(e,r.time,s.r,s.g,s.b,s.a,a.r,a.g,a.b),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*vu.ENTRIES])}}}}if(t.bones)for(let e in t.bones){let a=t.bones[e],o=i.findBoneIndex(e);if(-1==o)throw new Error("Bone not found: "+e);for(let t in a){let i=a[t];if("rotate"===t){let t=new mu(i.length);t.boneIndex=o;let e=0;for(let n=0;n<i.length;n++){let r=i[n];t.setFrame(e,r.time,r.angle),this.readCurve(r,t,e),e++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*mu.ENTRIES])}else{if("translate"!==t&&"scale"!==t&&"shear"!==t)throw new Error("Invalid timeline type for a bone: "+t+" ("+e+")");{let e=null,a=1;"scale"===t?e=new gu(i.length):"shear"===t?e=new yu(i.length):(e=new _u(i.length),a=n),e.boneIndex=o;let h=0;for(let t=0;t<i.length;t++){let n=i[t],r=this.getValue(n,"x",0),s=this.getValue(n,"y",0);e.setFrame(h,n.time,r*a,s*a),this.readCurve(n,e,h),h++}r.push(e),s=Math.max(s,e.frames[(e.getFrameCount()-1)*_u.ENTRIES])}}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=i.findIkConstraint(e),o=new Au(n.length);o.ikConstraintIndex=i.ikConstraints.indexOf(a);let h=0;for(let t=0;t<n.length;t++){let e=n[t];o.setFrame(h,e.time,this.getValue(e,"mix",1),this.getValue(e,"bendPositive",!0)?1:-1,this.getValue(e,"compress",!1),this.getValue(e,"stretch",!1)),this.readCurve(e,o,h),h++}r.push(o),s=Math.max(s,o.frames[(o.getFrameCount()-1)*Au.ENTRIES])}if(t.transform)for(let e in t.transform){let n=t.transform[e],a=i.findTransformConstraint(e),o=new Ru(n.length);o.transformConstraintIndex=i.transformConstraints.indexOf(a);let h=0;for(let t=0;t<n.length;t++){let e=n[t];o.setFrame(h,e.time,this.getValue(e,"rotateMix",1),this.getValue(e,"translateMix",1),this.getValue(e,"scaleMix",1),this.getValue(e,"shearMix",1)),this.readCurve(e,o,h),h++}r.push(o),s=Math.max(s,o.frames[(o.getFrameCount()-1)*Ru.ENTRIES])}if(t.paths)for(let e in t.paths){let a=t.paths[e],o=i.findPathConstraintIndex(e);if(-1==o)throw new Error("Path constraint not found: "+e);let h=i.pathConstraints[o];for(let t in a){let e=a[t];if("position"===t||"spacing"===t){let i=null,a=1;"spacing"===t?(i=new Iu(e.length),h.spacingMode!=Lu.Length&&h.spacingMode!=Lu.Fixed||(a=n)):(i=new Cu(e.length),h.positionMode==Nu.Fixed&&(a=n)),i.pathConstraintIndex=o;let l=0;for(let n=0;n<e.length;n++){let r=e[n];i.setFrame(l,r.time,this.getValue(r,t,0)*a),this.readCurve(r,i,l),l++}r.push(i),s=Math.max(s,i.frames[(i.getFrameCount()-1)*Cu.ENTRIES])}else if("mix"===t){let t=new Mu(e.length);t.pathConstraintIndex=o;let i=0;for(let n=0;n<e.length;n++){let r=e[n];t.setFrame(i,r.time,this.getValue(r,"rotateMix",1),this.getValue(r,"translateMix",1)),this.readCurve(r,t,i),i++}r.push(t),s=Math.max(s,t.frames[(t.getFrameCount()-1)*Mu.ENTRIES])}}}if(t.deform)for(let e in t.deform){let a=t.deform[e],o=i.findSkin(e);if(null!=o)for(let t in a){let e=a[t],h=i.findSlotIndex(t);if(-1==h)throw new Error("Slot not found: "+e.name);for(let t in e){let i=e[t],a=o.getAttachment(h,t);if(null==a)throw new Error("Deform attachment not found: "+i.name);let l=null!=a.bones,c=a.vertices,u=l?c.length/3*2:c.length,d=new Su(i.length);d.slotIndex=h,d.attachment=a;let p=0;for(let t=0;t<i.length;t++){let e,r=i[t],s=this.getValue(r,"vertices",null);if(null==s)e=l?Ml.newFloatArray(u):c;else{e=Ml.newFloatArray(u);let t=this.getValue(r,"offset",0);if(Ml.arrayCopy(s,0,e,t,s.length),1!=n)for(let i=t,r=i+s.length;i<r;i++)e[i]*=n;if(!l)for(let t=0;t<u;t++)e[t]+=c[t]}d.setFrame(p,r.time,e),this.readCurve(r,d,p),p++}r.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}}else if(Fl)throw new Error("Skin not found: "+e)}let a=t.drawOrder;if(null==a&&(a=t.draworder),null!=a){let t=new wu(a.length),e=i.slots.length,n=0;for(let r=0;r<a.length;r++){let s=a[r],o=null,h=this.getValue(s,"offsets",null);if(null!=h){o=Ml.newArray(e,-1);let t=Ml.newArray(e-h.length,0),n=0,r=0;for(let e=0;e<h.length;e++){let s=h[e],a=i.findSlotIndex(s.slot);if(-1==a)throw new Error("Slot not found: "+s.slot);for(;n!=a;)t[r++]=n++;o[n+s.offset]=n++}for(;n<e;)t[r++]=n++;for(let i=e-1;i>=0;i--)-1==o[i]&&(o[i]=t[--r])}t.setFrame(n++,s.time,o)}r.push(t),s=Math.max(s,t.frames[t.getFrameCount()-1])}if(t.events){let e=new Tu(t.events.length),n=0;for(let r=0;r<t.events.length;r++){let s=t.events[r],a=i.findEvent(s.name);if(null==a)throw new Error("Event not found: "+s.name);let o=new Hu(Ml.toSinglePrecision(s.time),a);o.intValue=this.getValue(s,"int",a.intValue),o.floatValue=this.getValue(s,"float",a.floatValue),o.stringValue=this.getValue(s,"string",a.stringValue),null!=o.data.audioPath&&(o.volume=this.getValue(s,"volume",1),o.balance=this.getValue(s,"balance",0)),e.setFrame(n++,o)}r.push(e),s=Math.max(s,e.frames[e.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new pu(e,r,s))}readCurve(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){let n=t.curve;e.setCurve(i,n[0],n[1],n[2],n[3])}}getValue(t,e,i){return void 0!==t[e]?t[e]:i}static blendModeFromString(t){if("normal"==(t=t.toLowerCase()))return ft.NORMAL;if("additive"==t)return ft.ADD;if("multiply"==t)return ft.MULTIPLY;if("screen"==t)return ft.SCREEN;throw new Error("Unknown blend mode: "+t)}static positionModeFromString(t){if("fixed"==(t=t.toLowerCase()))return Nu.Fixed;if("percent"==t)return Nu.Percent;throw new Error("Unknown position mode: "+t)}static spacingModeFromString(t){if("length"==(t=t.toLowerCase()))return Lu.Length;if("fixed"==t)return Lu.Fixed;if("percent"==t)return Lu.Percent;throw new Error("Unknown position mode: "+t)}static rotateModeFromString(t){if("tangent"==(t=t.toLowerCase()))return Bu.Tangent;if("chain"==t)return Bu.Chain;if("chainscale"==t)return Bu.ChainScale;throw new Error("Unknown rotate mode: "+t)}static transformModeFromString(t){if("normal"==(t=t.toLowerCase()))return ku.Normal;if("onlytranslation"==t)return ku.OnlyTranslation;if("norotationorreflection"==t)return ku.NoRotationOrReflection;if("noscale"==t)return ku.NoScale;if("noscaleorreflection"==t)return ku.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)}}class od{constructor(t,e,i,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n}}class hd extends Ul{createSkeleton(t){this.skeleton=new td(t),this.skeleton.updateWorldTransform(),this.stateData=new Vu(t),this.state=new Pu(this.stateData)}}
/*!
 * @pixi-spine/runtime-4.0 - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:22 UTC
 *
 * @pixi-spine/runtime-4.0 is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */class ld{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class cd extends ld{static __initStatic(){this.nextID=0}__init(){this.id=cd.nextID++}__init2(){this.worldVerticesLength=0}__init3(){this.deformAttachment=this}constructor(t){super(t),cd.prototype.__init.call(this),cd.prototype.__init2.call(this),cd.prototype.__init3.call(this)}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,i,n,r,s){i=r+(i>>1)*s;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);let a=t.bone.matrix,l=a.tx,c=a.ty,u=a.a,d=a.c,p=a.b,f=a.d;for(let t=e,a=r;a<i;t+=2,a+=s){let e=h[t],i=h[t+1];n[a]=e*u+i*d+l,n[a+1]=e*p+i*f+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,e+=3){let t=d[l[c]].matrix,n=h[e],s=h[e+1],a=h[e+2];i+=(n*t.a+s*t.c+t.tx)*a,r+=(n*t.b+s*t.d+t.ty)*a}n[t]=i,n[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=s){let i=0,r=0,s=l[c++];for(s+=c;c<s;c++,a+=3,o+=2){let e=d[l[c]].matrix,n=h[a]+t[o],s=h[a+1]+t[o+1],u=h[a+2];i+=(n*e.a+s*e.c+e.tx)*u,r+=(n*e.b+s*e.d+e.ty)*u}n[e]=i,n[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),Ml.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=Ml.newFloatArray(this.vertices.length),Ml.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}}cd.__initStatic();class ud extends cd{__init(){this.type=cl.BoundingBox}__init2(){this.color=new Al(1,1,1,1)}constructor(t){super(t),ud.prototype.__init.call(this),ud.prototype.__init2.call(this)}copy(){let t=new ud(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class dd extends cd{__init(){this.type=cl.Clipping}__init2(){this.color=new Al(.2275,.2275,.8078,1)}constructor(t){super(t),dd.prototype.__init.call(this),dd.prototype.__init2.call(this)}copy(){let t=new dd(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class pd extends cd{__init(){this.type=cl.Mesh}__init2(){this.color=new Al(1,1,1,1)}__init3(){this.tempColor=new Al(0,0,0,0)}constructor(t){super(t),pd.prototype.__init.call(this),pd.prototype.__init2.call(this),pd.prototype.__init3.call(this)}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new pd(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Ml.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Ml.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),Ml.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new pd(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t}}class fd extends cd{__init(){this.type=cl.Path}__init2(){this.closed=!1}__init3(){this.constantSpeed=!1}__init4(){this.color=new Al(1,1,1,1)}constructor(t){super(t),fd.prototype.__init.call(this),fd.prototype.__init2.call(this),fd.prototype.__init3.call(this),fd.prototype.__init4.call(this)}copy(){let t=new fd(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Ml.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class md extends cd{__init(){this.type=cl.Point}__init2(){this.color=new Al(.38,.94,0,1)}constructor(t){super(t),md.prototype.__init.call(this),md.prototype.__init2.call(this)}computeWorldPosition(t,e){const i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix;let i=Rl.cosDeg(this.rotation),n=Rl.sinDeg(this.rotation),r=i*e.a+n*e.c,s=i*e.b+n*e.d;return Math.atan2(s,r)*Rl.radDeg}copy(){let t=new md(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class _d extends ld{__init(){this.type=cl.Region}static __initStatic(){this.OX1=0}static __initStatic2(){this.OY1=1}static __initStatic3(){this.OX2=2}static __initStatic4(){this.OY2=3}static __initStatic5(){this.OX3=4}static __initStatic6(){this.OY3=5}static __initStatic7(){this.OX4=6}static __initStatic8(){this.OY4=7}static __initStatic9(){this.X1=0}static __initStatic10(){this.Y1=1}static __initStatic11(){this.C1R=2}static __initStatic12(){this.C1G=3}static __initStatic13(){this.C1B=4}static __initStatic14(){this.C1A=5}static __initStatic15(){this.U1=6}static __initStatic16(){this.V1=7}static __initStatic17(){this.X2=8}static __initStatic18(){this.Y2=9}static __initStatic19(){this.C2R=10}static __initStatic20(){this.C2G=11}static __initStatic21(){this.C2B=12}static __initStatic22(){this.C2A=13}static __initStatic23(){this.U2=14}static __initStatic24(){this.V2=15}static __initStatic25(){this.X3=16}static __initStatic26(){this.Y3=17}static __initStatic27(){this.C3R=18}static __initStatic28(){this.C3G=19}static __initStatic29(){this.C3B=20}static __initStatic30(){this.C3A=21}static __initStatic31(){this.U3=22}static __initStatic32(){this.V3=23}static __initStatic33(){this.X4=24}static __initStatic34(){this.Y4=25}static __initStatic35(){this.C4R=26}static __initStatic36(){this.C4G=27}static __initStatic37(){this.C4B=28}static __initStatic38(){this.C4A=29}static __initStatic39(){this.U4=30}static __initStatic40(){this.V4=31}__init2(){this.x=0}__init3(){this.y=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.rotation=0}__init7(){this.width=0}__init8(){this.height=0}__init9(){this.color=new Al(1,1,1,1)}__init10(){this.offset=Ml.newFloatArray(8)}__init11(){this.uvs=Ml.newFloatArray(8)}__init12(){this.tempColor=new Al(1,1,1,1)}constructor(t){super(t),_d.prototype.__init.call(this),_d.prototype.__init2.call(this),_d.prototype.__init3.call(this),_d.prototype.__init4.call(this),_d.prototype.__init5.call(this),_d.prototype.__init6.call(this),_d.prototype.__init7.call(this),_d.prototype.__init8.call(this),_d.prototype.__init9.call(this),_d.prototype.__init10.call(this),_d.prototype.__init11.call(this),_d.prototype.__init12.call(this)}updateOffset(){let t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,r=i+this.region.width*t,s=n+this.region.height*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,c=i*h,u=n*o+this.y,d=n*h,p=r*o+this.x,f=r*h,m=s*o+this.y,_=s*h,g=this.offset;g[_d.OX1]=l-d,g[_d.OY1]=u+c,g[_d.OX2]=l-_,g[_d.OY2]=m+c,g[_d.OX3]=p-_,g[_d.OY3]=m+f,g[_d.OX4]=p-d,g[_d.OY4]=u+f}setRegion(t){this.region=t;let e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,n){let r=this.offset,s=t.matrix,a=s.tx,o=s.ty,h=s.a,l=s.c,c=s.b,u=s.d,d=0,p=0;d=r[_d.OX1],p=r[_d.OY1],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[_d.OX2],p=r[_d.OY2],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[_d.OX3],p=r[_d.OY3],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o,i+=n,d=r[_d.OX4],p=r[_d.OY4],e[i]=d*h+p*l+a,e[i+1]=d*c+p*u+o}copy(){let t=new _d(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Ml.arrayCopy(this.uvs,0,t.uvs,0,8),Ml.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}}_d.__initStatic(),_d.__initStatic2(),_d.__initStatic3(),_d.__initStatic4(),_d.__initStatic5(),_d.__initStatic6(),_d.__initStatic7(),_d.__initStatic8(),_d.__initStatic9(),_d.__initStatic10(),_d.__initStatic11(),_d.__initStatic12(),_d.__initStatic13(),_d.__initStatic14(),_d.__initStatic15(),_d.__initStatic16(),_d.__initStatic17(),_d.__initStatic18(),_d.__initStatic19(),_d.__initStatic20(),_d.__initStatic21(),_d.__initStatic22(),_d.__initStatic23(),_d.__initStatic24(),_d.__initStatic25(),_d.__initStatic26(),_d.__initStatic27(),_d.__initStatic28(),_d.__initStatic29(),_d.__initStatic30(),_d.__initStatic31(),_d.__initStatic32(),_d.__initStatic33(),_d.__initStatic34(),_d.__initStatic35(),_d.__initStatic36(),_d.__initStatic37(),_d.__initStatic38(),_d.__initStatic39(),_d.__initStatic40();class gd{__init(){this.jitterX=0}__init2(){this.jitterY=0}constructor(t,e){gd.prototype.__init.call(this),gd.prototype.__init2.call(this),this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,i,n){t.x+=Rl.randomTriangular(-this.jitterX,this.jitterY),t.y+=Rl.randomTriangular(-this.jitterX,this.jitterY)}end(){}}class yd{static __initStatic(){this.interpolation=new Il(2)}__init(){this.centerX=0}__init2(){this.centerY=0}__init3(){this.radius=0}__init4(){this.angle=0}__init5(){this.worldX=0}__init6(){this.worldY=0}constructor(t){yd.prototype.__init.call(this),yd.prototype.__init2.call(this),yd.prototype.__init3.call(this),yd.prototype.__init4.call(this),yd.prototype.__init5.call(this),yd.prototype.__init6.call(this),this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,i,n){let r=this.angle*Rl.degreesToRadians,s=t.x-this.worldX,a=t.y-this.worldY,o=Math.sqrt(s*s+a*a);if(o<this.radius){let e=yd.interpolation.apply(0,r,(this.radius-o)/this.radius),i=Math.cos(e),n=Math.sin(e);t.x=i*s-n*a+this.worldX,t.y=n*s+i*a+this.worldY}}end(){}}yd.__initStatic();class xd{constructor(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new wl;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,n,r,s,a,o){if(!t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let n=0,l=h.length;n<l;n++)h[n].apply(t,e,i,r,s,a,o)}}!function(t){t[t.setup=0]="setup";t[t.first=1]="first";t[t.replace=2]="replace";t[t.add=3]="add"}(Xu||(Xu={})),function(t){t[t.mixIn=0]="mixIn";t[t.mixOut=1]="mixOut"}(Uu||(Uu={}));const vd=0,bd=1,Ed=2,Sd=3,Td=4,wd=5,Ad=6,Rd=7,Cd=8,Id=9,Md=10,Pd=11,Od=12,Dd=13,Fd=14,kd=15,Nd=16,Ld=17,Bd=18;class Xd{constructor(t,e){this.propertyIds=e,this.frames=Ml.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let n=1;n<i;n++)if(t[n]>e)return n-1;return i-1}static search(t,e,i){let n=t.length;for(let r=i;r<n;r+=i)if(t[r]>e)return r-i;return n-i}}class Ud extends Xd{constructor(t,e,i){super(t,i),this.curves=Ml.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=Ml.newFloatArray(e);Ml.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,n,r,s,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let p=.03*(n-2*s+o),f=.03*(r-2*a+h),m=.006*(3*(s-o)-n+l),_=.006*(3*(a-h)-r+c),g=2*p+m,y=2*f+_,x=.3*(s-n)+p+.16666667*m,v=.3*(a-r)+f+.16666667*_,b=n+x,E=r+v;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=E,x+=g,v+=y,g+=m,y+=_,b+=x,E+=v}getBezierValue(t,e,i,n){let r=this.curves;if(r[n]>t){let s=this.frames[e],a=this.frames[e+i];return a+(t-s)/(r[n]-s)*(r[n+1]-a)}let s=n+18;for(n+=2;n<s;n+=2)if(r[n]>=t){let e=r[n-2],i=r[n-1];return i+(t-e)/(r[n]-e)*(r[n+1]-i)}e+=this.getFrameEntries();let a=r[s-2],o=r[s-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}}class Yd extends Ud{constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let n=2;n<=i;n+=2)if(e[n]>t){i=n-2;break}let n=this.curves[i>>1];switch(n){case 0:let n=e[i],r=e[i+1];return r+(t-n)/(e[i+2]-n)*(e[i+2+1]-r);case 1:return e[i+1]}return this.getBezierValue(t,i,1,n-2)}}class Vd extends Ud{constructor(t,e,i,n){super(t,e,[i,n])}getFrameEntries(){return 3}setFrame(t,e,i,n){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n}}class Gd extends Yd{__init(){this.boneIndex=0}constructor(t,e,i){super(t,e,vd+"|"+i),Gd.prototype.__init.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.rotation=o.data.rotation);case Xu.first:o.rotation+=(o.data.rotation-o.rotation)*r}return}let h=this.getCurveValue(i);switch(s){case Xu.setup:o.rotation=o.data.rotation+h*r;break;case Xu.first:case Xu.replace:h+=o.data.rotation-o.rotation;case Xu.add:o.rotation+=h*r}}}class jd extends Vd{__init2(){this.boneIndex=0}constructor(t,e,i){super(t,e,bd+"|"+i,Ed+"|"+i),jd.prototype.__init2.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(s){case Xu.setup:return o.x=o.data.x,void(o.y=o.data.y);case Xu.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let l=0,c=0,u=Xd.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(s){case Xu.setup:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case Xu.first:case Xu.replace:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case Xu.add:o.x+=l*r,o.y+=c*r}}}class Wd extends Yd{__init3(){this.boneIndex=0}constructor(t,e,i){super(t,e,bd+"|"+i),Wd.prototype.__init3.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.x=o.data.x);case Xu.first:o.x+=(o.data.x-o.x)*r}return}let h=this.getCurveValue(i);switch(s){case Xu.setup:o.x=o.data.x+h*r;break;case Xu.first:case Xu.replace:o.x+=(o.data.x+h-o.x)*r;break;case Xu.add:o.x+=h*r}}}class Hd extends Yd{__init4(){this.boneIndex=0}constructor(t,e,i){super(t,e,Ed+"|"+i),Hd.prototype.__init4.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.y=o.data.y);case Xu.first:o.y+=(o.data.y-o.y)*r}return}let h=this.getCurveValue(i);switch(s){case Xu.setup:o.y=o.data.y+h*r;break;case Xu.first:case Xu.replace:o.y+=(o.data.y+h-o.y)*r;break;case Xu.add:o.y+=h*r}}}class zd extends Vd{__init5(){this.boneIndex=0}constructor(t,e,i){super(t,e,Sd+"|"+i,Td+"|"+i),zd.prototype.__init5.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h,l,c=this.frames;if(i<c[0]){switch(s){case Xu.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case Xu.first:o.scaleX+=(o.data.scaleX-o.scaleX)*r,o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let u=Xd.search(c,i,3),d=this.curves[u/3];switch(d){case 0:let t=c[u];h=c[u+1],l=c[u+2];let e=(i-t)/(c[u+3]-t);h+=(c[u+3+1]-h)*e,l+=(c[u+3+2]-l)*e;break;case 1:h=c[u+1],l=c[u+2];break;default:h=this.getBezierValue(i,u,1,d-2),l=this.getBezierValue(i,u,2,d+18-2)}if(h*=o.data.scaleX,l*=o.data.scaleY,1==r)s==Xu.add?(o.scaleX+=h-o.data.scaleX,o.scaleY+=l-o.data.scaleY):(o.scaleX=h,o.scaleY=l);else{let t=0,e=0;if(a==Uu.mixOut)switch(s){case Xu.setup:t=o.data.scaleX,e=o.data.scaleY,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*Rl.signum(e)-e)*r;break;case Xu.first:case Xu.replace:t=o.scaleX,e=o.scaleY,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*Rl.signum(e)-e)*r;break;case Xu.add:t=o.scaleX,e=o.scaleY,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-o.data.scaleX)*r,o.scaleY=e+(Math.abs(l)*Rl.signum(e)-o.data.scaleY)*r}else switch(s){case Xu.setup:t=Math.abs(o.data.scaleX)*Rl.signum(h),e=Math.abs(o.data.scaleY)*Rl.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case Xu.first:case Xu.replace:t=Math.abs(o.scaleX)*Rl.signum(h),e=Math.abs(o.scaleY)*Rl.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case Xu.add:t=Rl.signum(h),e=Rl.signum(l),o.scaleX=Math.abs(o.scaleX)*t+(h-Math.abs(o.data.scaleX)*t)*r,o.scaleY=Math.abs(o.scaleY)*e+(l-Math.abs(o.data.scaleY)*e)*r}}}}class qd extends Yd{__init6(){this.boneIndex=0}constructor(t,e,i){super(t,e,Sd+"|"+i),qd.prototype.__init6.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.scaleX=o.data.scaleX);case Xu.first:o.scaleX+=(o.data.scaleX-o.scaleX)*r}return}let h=this.getCurveValue(i)*o.data.scaleX;if(1==r)s==Xu.add?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{let t=0;if(a==Uu.mixOut)switch(s){case Xu.setup:t=o.data.scaleX,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-t)*r;break;case Xu.first:case Xu.replace:t=o.scaleX,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-t)*r;break;case Xu.add:t=o.scaleX,o.scaleX=t+(Math.abs(h)*Rl.signum(t)-o.data.scaleX)*r}else switch(s){case Xu.setup:t=Math.abs(o.data.scaleX)*Rl.signum(h),o.scaleX=t+(h-t)*r;break;case Xu.first:case Xu.replace:t=Math.abs(o.scaleX)*Rl.signum(h),o.scaleX=t+(h-t)*r;break;case Xu.add:t=Rl.signum(h),o.scaleX=Math.abs(o.scaleX)*t+(h-Math.abs(o.data.scaleX)*t)*r}}}}class Zd extends Yd{__init7(){this.boneIndex=0}constructor(t,e,i){super(t,e,Td+"|"+i),Zd.prototype.__init7.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.scaleY=o.data.scaleY);case Xu.first:o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let h=this.getCurveValue(i)*o.data.scaleY;if(1==r)s==Xu.add?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{let t=0;if(a==Uu.mixOut)switch(s){case Xu.setup:t=o.data.scaleY,o.scaleY=t+(Math.abs(h)*Rl.signum(t)-t)*r;break;case Xu.first:case Xu.replace:t=o.scaleY,o.scaleY=t+(Math.abs(h)*Rl.signum(t)-t)*r;break;case Xu.add:t=o.scaleY,o.scaleY=t+(Math.abs(h)*Rl.signum(t)-o.data.scaleY)*r}else switch(s){case Xu.setup:t=Math.abs(o.data.scaleY)*Rl.signum(h),o.scaleY=t+(h-t)*r;break;case Xu.first:case Xu.replace:t=Math.abs(o.scaleY)*Rl.signum(h),o.scaleY=t+(h-t)*r;break;case Xu.add:t=Rl.signum(h),o.scaleY=Math.abs(o.scaleY)*t+(h-Math.abs(o.data.scaleY)*t)*r}}}}class Kd extends Vd{__init8(){this.boneIndex=0}constructor(t,e,i){super(t,e,wd+"|"+i,Ad+"|"+i),Kd.prototype.__init8.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(s){case Xu.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case Xu.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=0,c=0,u=Xd.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(s){case Xu.setup:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case Xu.first:case Xu.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case Xu.add:o.shearX+=l*r,o.shearY+=c*r}}}class Jd extends Yd{__init9(){this.boneIndex=0}constructor(t,e,i){super(t,e,wd+"|"+i),Jd.prototype.__init9.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.shearX=o.data.shearX);case Xu.first:o.shearX+=(o.data.shearX-o.shearX)*r}return}let h=this.getCurveValue(i);switch(s){case Xu.setup:o.shearX=o.data.shearX+h*r;break;case Xu.first:case Xu.replace:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case Xu.add:o.shearX+=h*r}}}class $d extends Yd{__init10(){this.boneIndex=0}constructor(t,e,i){super(t,e,Ad+"|"+i),$d.prototype.__init10.call(this),this.boneIndex=i}apply(t,e,i,n,r,s,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.shearY=o.data.shearY);case Xu.first:o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=this.getCurveValue(i);switch(s){case Xu.setup:o.shearY=o.data.shearY+h*r;break;case Xu.first:case Xu.replace:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case Xu.add:o.shearY+=h*r}}}class Qd extends Ud{__init11(){this.slotIndex=0}constructor(t,e,i){super(t,e,[Rd+"|"+i,Cd+"|"+i]),Qd.prototype.__init11.call(this),this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,n,r,s){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=s}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(s){case Xu.setup:return void l.setFromColor(t);case Xu.first:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r)}return}let c=0,u=0,d=0,p=0,f=Xd.search(h,i,5),m=this.curves[f/5];switch(m){case 0:let t=h[f];c=h[f+1],u=h[f+2],d=h[f+3],p=h[f+4];let e=(i-t)/(h[f+5]-t);c+=(h[f+5+1]-c)*e,u+=(h[f+5+2]-u)*e,d+=(h[f+5+3]-d)*e,p+=(h[f+5+4]-p)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3],p=h[f+4];break;default:c=this.getBezierValue(i,f,1,m-2),u=this.getBezierValue(i,f,2,m+18-2),d=this.getBezierValue(i,f,3,m+36-2),p=this.getBezierValue(i,f,4,m+54-2)}1==r?l.set(c,u,d,p):(s==Xu.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(u-l.g)*r,(d-l.b)*r,(p-l.a)*r))}}class tp extends Ud{__init12(){this.slotIndex=0}constructor(t,e,i){super(t,e,[Rd+"|"+i]),tp.prototype.__init12.call(this),this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,n,r){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(s){case Xu.setup:return l.r=t.r,l.g=t.g,void(l.b=t.b);case Xu.first:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r}return}let c=0,u=0,d=0,p=Xd.search(h,i,4),f=this.curves[p>>2];switch(f){case 0:let t=h[p];c=h[p+1],u=h[p+2],d=h[p+3];let e=(i-t)/(h[p+4]-t);c+=(h[p+4+1]-c)*e,u+=(h[p+4+2]-u)*e,d+=(h[p+4+3]-d)*e;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3];break;default:c=this.getBezierValue(i,p,1,f-2),u=this.getBezierValue(i,p,2,f+18-2),d=this.getBezierValue(i,p,3,f+36-2)}if(1==r)l.r=c,l.g=u,l.b=d;else{if(s==Xu.setup){let t=o.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*r,l.g+=(u-l.g)*r,l.b+=(d-l.b)*r}}}class ep extends Yd{__init13(){this.slotIndex=0}constructor(t,e,i){super(t,e,Cd+"|"+i),ep.prototype.__init13.call(this),this.slotIndex=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.color;if(i<this.frames[0]){let t=o.data.color;switch(s){case Xu.setup:return void(h.a=t.a);case Xu.first:h.a+=(t.a-h.a)*r}return}let l=this.getCurveValue(i);1==r?h.a=l:(s==Xu.setup&&(h.a=o.data.color.a),h.a+=(l-h.a)*r)}}class ip extends Ud{__init14(){this.slotIndex=0}constructor(t,e,i){super(t,e,[Rd+"|"+i,Cd+"|"+i,Id+"|"+i]),ip.prototype.__init14.call(this),this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,n,r,s,a,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=s,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=h}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(s){case Xu.setup:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case Xu.first:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,p=0,f=0,m=0,_=0,g=0,y=Xd.search(h,i,8),x=this.curves[y>>3];switch(x){case 0:let t=h[y];u=h[y+1],d=h[y+2],p=h[y+3],f=h[y+4],m=h[y+5],_=h[y+6],g=h[y+7];let e=(i-t)/(h[y+8]-t);u+=(h[y+8+1]-u)*e,d+=(h[y+8+2]-d)*e,p+=(h[y+8+3]-p)*e,f+=(h[y+8+4]-f)*e,m+=(h[y+8+5]-m)*e,_+=(h[y+8+6]-_)*e,g+=(h[y+8+7]-g)*e;break;case 1:u=h[y+1],d=h[y+2],p=h[y+3],f=h[y+4],m=h[y+5],_=h[y+6],g=h[y+7];break;default:u=this.getBezierValue(i,y,1,x-2),d=this.getBezierValue(i,y,2,x+18-2),p=this.getBezierValue(i,y,3,x+36-2),f=this.getBezierValue(i,y,4,x+54-2),m=this.getBezierValue(i,y,5,x+72-2),_=this.getBezierValue(i,y,6,x+90-2),g=this.getBezierValue(i,y,7,x+108-2)}if(1==r)l.set(u,d,p,f),c.r=m,c.g=_,c.b=g;else{if(s==Xu.setup){l.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*r,(d-l.g)*r,(p-l.b)*r,(f-l.a)*r),c.r+=(m-c.r)*r,c.g+=(_-c.g)*r,c.b+=(g-c.b)*r}}}class np extends Ud{__init15(){this.slotIndex=0}constructor(t,e,i){super(t,e,[Rd+"|"+i,Id+"|"+i]),np.prototype.__init15.call(this),this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,n,r,s,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=s,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(s){case Xu.setup:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case Xu.first:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,p=0,f=0,m=0,_=0,g=Xd.search(h,i,7),y=this.curves[g/7];switch(y){case 0:let t=h[g];u=h[g+1],d=h[g+2],p=h[g+3],f=h[g+4],m=h[g+5],_=h[g+6];let e=(i-t)/(h[g+7]-t);u+=(h[g+7+1]-u)*e,d+=(h[g+7+2]-d)*e,p+=(h[g+7+3]-p)*e,f+=(h[g+7+4]-f)*e,m+=(h[g+7+5]-m)*e,_+=(h[g+7+6]-_)*e;break;case 1:u=h[g+1],d=h[g+2],p=h[g+3],f=h[g+4],m=h[g+5],_=h[g+6];break;default:u=this.getBezierValue(i,g,1,y-2),d=this.getBezierValue(i,g,2,y+18-2),p=this.getBezierValue(i,g,3,y+36-2),f=this.getBezierValue(i,g,4,y+54-2),m=this.getBezierValue(i,g,5,y+72-2),_=this.getBezierValue(i,g,6,y+90-2)}if(1==r)l.r=u,l.g=d,l.b=p,c.r=f,c.g=m,c.b=_;else{if(s==Xu.setup){let t=o.data.color,e=o.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*r,l.g+=(d-l.g)*r,l.b+=(p-l.b)*r,c.r+=(f-c.r)*r,c.g+=(m-c.g)*r,c.b+=(_-c.b)*r}}}class rp extends Xd{__init16(){this.slotIndex=0}constructor(t,e){super(t,[Md+"|"+e]),rp.prototype.__init16.call(this),this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];o.bone.active&&(a!=Uu.mixOut?i<this.frames[0]?s!=Xu.setup&&s!=Xu.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[Xd.search1(this.frames,i)]):s==Xu.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class sp extends Ud{__init17(){this.slotIndex=0}constructor(t,e,i,n){super(t,e,[Pd+"|"+i+"|"+n.id]),sp.prototype.__init17.call(this),this.slotIndex=i,this.attachment=n,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,n,r,s,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let p=.03*(n-2*s+o),f=.03*h-.06*a,m=.006*(3*(s-o)-n+l),_=.018*(a-h+.33333333),g=2*p+m,y=2*f+_,x=.3*(s-n)+p+.16666667*m,v=.3*a+f+.16666667*_,b=n+x,E=v;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=E,x+=g,v+=y,g+=m,y+=_,b+=x,E+=v}getCurvePercent(t,e){let i=this.curves,n=i[e];switch(n){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(n-=2,i[n]>t){let r=this.frames[e];return i[n+1]*(t-r)/(i[n]-r)}let r=n+18;for(n+=2;n<r;n+=2)if(i[n]>=t){let e=i[n-2],r=i[n-1];return r+(t-e)/(i[n]-e)*(i[n+1]-r)}let s=i[r-2],a=i[r-1];return a+(1-a)*(t-s)/(this.frames[e+this.getFrameEntries()]-s)}apply(t,e,i,n,r,s,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.getAttachment();if(!(h instanceof cd)||h.deformAttachment!=this.attachment)return;let l=o.deform;0==l.length&&(s=Xu.setup);let c=this.vertices,u=c[0].length,d=this.frames;if(i<d[0]){let t=h;switch(s){case Xu.setup:return void(l.length=0);case Xu.first:if(1==r)return void(l.length=0);if(l.length=u,t.bones){r=1-r;for(p=0;p<u;p++)l[p]*=r}else{let e=t.vertices;for(var p=0;p<u;p++)l[p]+=(e[p]-l[p])*r}}return}if(l.length=u,i>=d[d.length-1]){let t=c[d.length-1];if(1==r)if(s==Xu.add){let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e];else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=t[e]-i[e]}}else Ml.arrayCopy(t,0,l,0,u);else switch(s){case Xu.setup:{let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++){let n=i[e];l[e]=n+(t[e]-n)*r}}break}case Xu.first:case Xu.replace:for(let e=0;e<u;e++)l[e]+=(t[e]-l[e])*r;break;case Xu.add:let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=(t[e]-i[e])*r}}return}let f=Xd.search1(d,i),m=this.getCurvePercent(i,f),_=c[f],g=c[f+1];if(1==r)if(s==Xu.add){let t=h;if(t.bones)for(let t=0;t<u;t++){let e=_[t];l[t]+=e+(g[t]-e)*m}else{let e=t.vertices;for(let t=0;t<u;t++){let i=_[t];l[t]+=i+(g[t]-i)*m-e[t]}}}else for(let t=0;t<u;t++){let e=_[t];l[t]=e+(g[t]-e)*m}else switch(s){case Xu.setup:{let t=h;if(t.bones)for(let t=0;t<u;t++){let e=_[t];l[t]=(e+(g[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=_[t],n=e[t];l[t]=n+(i+(g[t]-i)*m-n)*r}}break}case Xu.first:case Xu.replace:for(let t=0;t<u;t++){let e=_[t];l[t]+=(e+(g[t]-e)*m-l[t])*r}break;case Xu.add:let t=h;if(t.bones)for(let t=0;t<u;t++){let e=_[t];l[t]+=(e+(g[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=_[t];l[t]+=(i+(g[t]-i)*m-e[t])*r}}}}}class ap extends Xd{static __initStatic(){this.propertyIds=[""+Od]}constructor(t){super(t,ap.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,n,r,s,a){if(!n)return;let o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,r,s,a),e=-1;else if(e>=o[h-1])return;if(i<o[0])return;let l=0;if(e<o[0])l=0;else{l=Xd.search1(o,e)+1;let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&i>=o[l];l++)n.push(this.events[l])}}ap.__initStatic();class op extends Xd{static __initStatic2(){this.propertyIds=[""+Dd]}constructor(t){super(t,op.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,n,r,s,a){if(a==Uu.mixOut)return void(s==Xu.setup&&Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(s!=Xu.setup&&s!=Xu.first||Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=this.drawOrders[Xd.search1(this.frames,i)];if(o){let e=t.drawOrder,i=t.slots;for(let t=0,n=o.length;t<n;t++)e[t]=i[o[t]]}else Ml.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}op.__initStatic2();class hp extends Ud{constructor(t,e,i){super(t,e,[Fd+"|"+i]),this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,n,r,s,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=s?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,n,r,s,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(s){case Xu.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case Xu.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let l=0,c=0,u=Xd.search(h,i,6),d=this.curves[u/6];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}s==Xu.setup?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,a==Uu.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,a==Uu.mixIn&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}}class lp extends Ud{constructor(t,e,i){super(t,e,[kd+"|"+i]),this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,n,r,s,a,o){let h=this.frames;h[t*=7]=e,h[t+1]=i,h[t+2]=n,h[t+3]=r,h[t+4]=s,h[t+5]=a,h[t+6]=o}apply(t,e,i,n,r,s,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let h,l,c,u,d,p,f=this.frames;if(i<f[0]){let t=o.data;switch(s){case Xu.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case Xu.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let m=Xd.search(f,i,7),_=this.curves[m/7];switch(_){case 0:let t=f[m];h=f[m+1],l=f[m+2],c=f[m+3],u=f[m+4],d=f[m+5],p=f[m+6];let e=(i-t)/(f[m+7]-t);h+=(f[m+7+1]-h)*e,l+=(f[m+7+2]-l)*e,c+=(f[m+7+3]-c)*e,u+=(f[m+7+4]-u)*e,d+=(f[m+7+5]-d)*e,p+=(f[m+7+6]-p)*e;break;case 1:h=f[m+1],l=f[m+2],c=f[m+3],u=f[m+4],d=f[m+5],p=f[m+6];break;default:h=this.getBezierValue(i,m,1,_-2),l=this.getBezierValue(i,m,2,_+18-2),c=this.getBezierValue(i,m,3,_+36-2),u=this.getBezierValue(i,m,4,_+54-2),d=this.getBezierValue(i,m,5,_+72-2),p=this.getBezierValue(i,m,6,_+90-2)}if(s==Xu.setup){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(p-t.mixShearY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(u-o.mixScaleX)*r,o.mixScaleY+=(d-o.mixScaleY)*r,o.mixShearY+=(p-o.mixShearY)*r}}class cp extends Yd{constructor(t,e,i){super(t,e,Nd+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,n,r,s,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.position=o.data.position);case Xu.first:o.position+=(o.data.position-o.position)*r}return}let h=this.getCurveValue(i);s==Xu.setup?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}}class up extends Yd{__init18(){this.pathConstraintIndex=0}constructor(t,e,i){super(t,e,Ld+"|"+i),up.prototype.__init18.call(this),this.pathConstraintIndex=i}apply(t,e,i,n,r,s,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(s){case Xu.setup:return void(o.spacing=o.data.spacing);case Xu.first:o.spacing+=(o.data.spacing-o.spacing)*r}return}let h=this.getCurveValue(i);s==Xu.setup?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}}class dp extends Ud{__init19(){this.pathConstraintIndex=0}constructor(t,e,i){super(t,e,[Bd+"|"+i]),dp.prototype.__init19.call(this),this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,n,r){let s=this.frames;s[t<<=2]=e,s[t+1]=i,s[t+2]=n,s[t+3]=r}apply(t,e,i,n,r,s,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let h,l,c,u=this.frames;if(i<u[0]){switch(s){case Xu.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case Xu.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let d=Xd.search(u,i,4),p=this.curves[d>>2];switch(p){case 0:let t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];let e=(i-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(i,d,1,p-2),l=this.getBezierValue(i,d,2,p+18-2),c=this.getBezierValue(i,d,3,p+36-2)}if(s==Xu.setup){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r}}class pp{static emptyAnimation(){return wp||(wp=new xd("<empty>",[],0)),wp}__init(){this.tracks=new Array}__init2(){this.timeScale=1}__init3(){this.unkeyedState=0}__init4(){this.events=new Array}__init5(){this.listeners=new Array}__init6(){this.queue=new mp(this)}__init7(){this.propertyIDs=new wl}__init8(){this.animationsChanged=!1}__init9(){this.trackEntryPool=new Pl(()=>new fp)}constructor(t){pp.prototype.__init.call(this),pp.prototype.__init2.call(this),pp.prototype.__init3.call(this),pp.prototype.__init4.call(this),pp.prototype.__init5.call(this),pp.prototype.__init6.call(this),pp.prototype.__init7.call(this),pp.prototype.__init8.call(this),pp.prototype.__init9.call(this),this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let r=t*n.timeScale;if(n.delay>0){if(n.delay-=r,n.delay>0)continue;r=-n.delay,n.delay=0}let s=n.next;if(s){let e=n.trackLast-s.delay;if(e>=0){for(s.delay=0,s.trackTime+=0==n.timeScale?0:(e/n.timeScale+t)*s.timeScale,n.trackTime+=r,this.setCurrent(i,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){e[i]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,t)){let t=n.mixingFrom;for(n.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}n.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,n=!1;for(let s=0,a=i.length;s<a;s++){let a=i[s];if(!a||a.delay>0)continue;n=!0;let o=0==s?Xu.first:a.mixBlend,h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),u=c,d=e;a.reverse&&(u=a.animation.duration-u,d=null);let p=a.animation.timelines,f=p.length;if(0==s&&1==h||o==Xu.add)for(let e=0;e<f;e++){Ml.webkit602BugfixHelper(h,o);var r=p[e];r instanceof rp?this.applyAttachmentTimeline(r,t,u,o,!0):r.apply(t,l,u,d,h,o,Uu.mixIn)}else{let e=a.timelineMode,i=a.timelinesRotation.length!=f<<1;i&&(a.timelinesRotation.length=f<<1);for(let n=0;n<f;n++){let r=p[n],s=e[n]==yp?o:Xu.setup;r instanceof Gd?this.applyRotateTimeline(r,t,u,h,s,a.timelinesRotation,n<<1,i):r instanceof rp?this.applyAttachmentTimeline(r,t,u,o,!0):(Ml.webkit602BugfixHelper(h,o),r.apply(t,l,u,d,h,s,Uu.mixIn))}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var s=this.unkeyedState+Sp,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==s){var c=l.data.attachmentName;l.setAttachment(c?t.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),n}applyMixingFrom(t,e,i){let n=t.mixingFrom;n.mixingFrom&&this.applyMixingFrom(n,e,i);let r=0;0==t.mixDuration?(r=1,i==Xu.first&&(i=Xu.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),i!=Xu.first&&(i=n.mixBlend));let s=r<n.attachmentThreshold,a=r<n.drawOrderThreshold,o=n.animation.timelines,h=o.length,l=n.alpha*t.interruptAlpha,c=l*(1-r),u=n.animationLast,d=n.getAnimationTime(),p=d,f=null;if(n.reverse?p=n.animation.duration-p:r<n.eventThreshold&&(f=this.events),i==Xu.add)for(let t=0;t<h;t++)o[t].apply(e,u,p,f,c,i,Uu.mixOut);else{let t=n.timelineMode,r=n.timelineHoldMix,d=n.timelinesRotation.length!=h<<1;d&&(n.timelinesRotation.length=h<<1),n.totalAlpha=0;for(let m=0;m<h;m++){let h,_=o[m],g=Uu.mixOut,y=0;switch(t[m]){case yp:if(!a&&_ instanceof op)continue;h=i,y=c;break;case xp:h=Xu.setup,y=c;break;case vp:h=i,y=l;break;case bp:h=Xu.setup,y=l;break;default:h=Xu.setup;let t=r[m];y=l*Math.max(0,1-t.mixTime/t.mixDuration)}n.totalAlpha+=y,_ instanceof Gd?this.applyRotateTimeline(_,e,p,y,h,n.timelinesRotation,m<<1,d):_ instanceof rp?this.applyAttachmentTimeline(_,e,p,h,s):(Ml.webkit602BugfixHelper(y,i),a&&_ instanceof op&&h==Xu.setup&&(g=Uu.mixIn),_.apply(e,u,p,f,y,h,g))}}return t.mixDuration>0&&this.queueEvents(n,d),this.events.length=0,n.nextAnimationLast=d,n.nextTrackLast=n.trackTime,r}applyAttachmentTimeline(t,e,i,n,r){var s=e.slots[t.slotIndex];s.bone.active&&(i<t.frames[0]?n!=Xu.setup&&n!=Xu.first||this.setAttachment(e,s,s.data.attachmentName,r):this.setAttachment(e,s,t.attachmentNames[Xd.search1(t.frames,i)],r),s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+Sp))}setAttachment(t,e,i,n){e.setAttachment(i?t.getAttachment(e.data.index,i):null),n&&(e.attachmentState=this.unkeyedState+Tp)}applyRotateTimeline(t,e,i,n,r,s,a,o){if(o&&(s[a]=0),1==n)return void t.apply(e,0,i,null,1,r,Uu.mixIn);let h=e.bones[t.boneIndex];if(!h.active)return;let l=0,c=0;if(i<t.frames[0])switch(r){case Xu.setup:h.rotation=h.data.rotation;default:return;case Xu.first:l=h.rotation,c=h.data.rotation}else l=r==Xu.setup?h.data.rotation:h.rotation,c=h.data.rotation+t.getCurveValue(i);let u=0,d=c-l;if(d-=360*(16384-(16384.499999999996-d/360|0)),0==d)u=s[a];else{let t=0,e=0;o?(t=0,e=d):(t=s[a],e=s[a+1]);let i=d>0,n=t>=0;Rl.signum(e)!=Rl.signum(d)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*Rl.signum(t)),n=i),u=d+t-t%360,n!=i&&(u+=360*Rl.signum(t)),s[a]=u}s[a+1]=d,h.rotation=l+u*n}queueEvents(t,e){let i=t.animationStart,n=t.animationEnd,r=n-i,s=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<s)break;e.time>n||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||s>t.trackTime%r:e>=n&&t.animationLast<n,l&&this.queue.complete(t);o<h;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let n=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let n=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,n=!1):this.clearNext(r));let s=this.trackEntry(t,e,i,r);return this.setCurrent(t,s,n),this.queue.drain(),s}addAnimation(t,e,i=!1,n=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)}addAnimationWith(t,e,i=!1,n=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let s=this.trackEntry(t,e,i,r);return r?(r.next=s,s.previous=r,n<=0&&(n+=r.getTrackComplete()-s.mixDuration)):(this.setCurrent(t,s,!0),this.queue.drain()),s.delay=n,s}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,pp.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let n=this.addAnimationWith(t,pp.emptyAnimation(),!1,i<=0?1:i);return n.mixDuration=e,n.trackEnd=e,i<=0&&n.previous&&(n.delay=n.previous.getTrackComplete()-n.mixDuration+i),n}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Ml.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,n){let r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=n?this.data.getMix(n.animation,e):0,r.mixBlend=Xu.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&i.mixBlend==Xu.add||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,n=t.animation.timelines.length,r=t.timelineMode;r.length=n;let s=t.timelineHoldMix;s.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<n;t++)r[t]=a.addAll(i[t].getPropertyIds())?bp:vp;else t:for(let o=0;o<n;o++){let n=i[o],h=n.getPropertyIds();if(a.addAll(h))if(!e||n instanceof rp||n instanceof op||n instanceof ap||!e.animation.hasTimeline(h))r[o]=xp;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=Ep,s[o]=i;continue t}break}r[o]=bp}else r[o]=yp}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}static __initStatic(){this.deprecatedWarning1=!1}setAnimationByName(t,e,i){pp.deprecatedWarning1||(pp.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,i)}static __initStatic2(){this.deprecatedWarning2=!1}addAnimationByName(t,e,i,n){pp.deprecatedWarning2||(pp.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,i,n)}static __initStatic3(){this.deprecatedWarning3=!1}hasAnimation(t){return null!==this.data.skeletonData.findAnimation(t)}hasAnimationByName(t){return pp.deprecatedWarning3||(pp.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}}pp.__initStatic(),pp.__initStatic2(),pp.__initStatic3();class fp{constructor(){fp.prototype.__init10.call(this),fp.prototype.__init11.call(this),fp.prototype.__init12.call(this),fp.prototype.__init13.call(this)}__init10(){this.mixBlend=Xu.replace}__init11(){this.timelineMode=new Array}__init12(){this.timelineHoldMix=new Array}__init13(){this.timelinesRotation=new Array}reset(){this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}static __initStatic4(){this.deprecatedWarning1=!1}static __initStatic5(){this.deprecatedWarning2=!1}get time(){return fp.deprecatedWarning1||(fp.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){fp.deprecatedWarning1||(fp.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return fp.deprecatedWarning2||(fp.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){fp.deprecatedWarning2||(fp.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}}fp.__initStatic4(),fp.__initStatic5();class mp{__init14(){this.objects=[]}__init15(){this.drainDisabled=!1}constructor(t){mp.prototype.__init14.call(this),mp.prototype.__init15.call(this),this.animState=t}start(t){this.objects.push(_p.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(_p.interrupt),this.objects.push(t)}end(t){this.objects.push(_p.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(_p.dispose),this.objects.push(t)}complete(t){this.objects.push(_p.complete),this.objects.push(t)}event(t,e){this.objects.push(_p.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let n=t[i],r=t[i+1];switch(n){case _p.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++)e[t].start&&e[t].start(r);break;case _p.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++)e[t].interrupt&&e[t].interrupt(r);break;case _p.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++)e[t].end&&e[t].end(r);case _p.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++)e[t].dispose&&e[t].dispose(r);this.animState.trackEntryPool.free(r);break;case _p.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++)e[t].complete&&e[t].complete(r);break;case _p.event:let n=t[2+i++];null!=r.listener&&r.listener.event&&r.listener.event(r,n);for(let t=0;t<e.length;t++)e[t].event&&e[t].event(r,n)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var _p;!function(t){t[t.start=0]="start";t[t.interrupt=1]="interrupt";t[t.end=2]="end";t[t.dispose=3]="dispose";t[t.complete=4]="complete";t[t.event=5]="event"}(_p||(_p={}));class gp{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const yp=0,xp=1,vp=2,bp=3,Ep=4,Sp=1,Tp=2;let wp=null;class Ap{__init(){this.animationToMixTime={}}__init2(){this.defaultMix=0}constructor(t){if(Ap.prototype.__init.call(this),Ap.prototype.__init2.call(this),null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)}setMixWith(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");let n=t.name+"."+e.name;this.animationToMixTime[n]=i}getMix(t,e){let i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n}}class Rp{constructor(t){this.atlas=t}newRegionAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");let r=new _d(e);return r.region=n,r}newMeshAttachment(t,e,i){let n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");let r=new pd(e);return r.region=n,r}newBoundingBoxAttachment(t,e){return new ud(e)}newPathAttachment(t,e){return new fd(e)}newPointAttachment(t,e){return new md(e)}newClippingAttachment(t,e){return new dd(e)}}class Cp{__init(){this.x=0}__init2(){this.y=0}__init3(){this.rotation=0}__init4(){this.scaleX=1}__init5(){this.scaleY=1}__init6(){this.shearX=0}__init7(){this.shearY=0}__init8(){this.transformMode=Ip.Normal}__init9(){this.skinRequired=!1}__init10(){this.color=new Al}constructor(t,e,i){if(Cp.prototype.__init.call(this),Cp.prototype.__init2.call(this),Cp.prototype.__init3.call(this),Cp.prototype.__init4.call(this),Cp.prototype.__init5.call(this),Cp.prototype.__init6.call(this),Cp.prototype.__init7.call(this),Cp.prototype.__init8.call(this),Cp.prototype.__init9.call(this),Cp.prototype.__init10.call(this),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}var Ip,Mp,Pp,Op;!function(t){t[t.Normal=0]="Normal";t[t.OnlyTranslation=1]="OnlyTranslation";t[t.NoRotationOrReflection=2]="NoRotationOrReflection";t[t.NoScale=3]="NoScale";t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Ip||(Ip={}));class Dp{__init(){this.matrix=new De}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}__init2(){this.children=new Array}__init3(){this.x=0}__init4(){this.y=0}__init5(){this.rotation=0}__init6(){this.scaleX=0}__init7(){this.scaleY=0}__init8(){this.shearX=0}__init9(){this.shearY=0}__init10(){this.ax=0}__init11(){this.ay=0}__init12(){this.arotation=0}__init13(){this.ascaleX=0}__init14(){this.ascaleY=0}__init15(){this.ashearX=0}__init16(){this.ashearY=0}__init17(){this.sorted=!1}__init18(){this.active=!1}constructor(t,e,i){if(Dp.prototype.__init.call(this),Dp.prototype.__init2.call(this),Dp.prototype.__init3.call(this),Dp.prototype.__init4.call(this),Dp.prototype.__init5.call(this),Dp.prototype.__init6.call(this),Dp.prototype.__init7.call(this),Dp.prototype.__init8.call(this),Dp.prototype.__init9.call(this),Dp.prototype.__init10.call(this),Dp.prototype.__init11.call(this),Dp.prototype.__init12.call(this),Dp.prototype.__init13.call(this),Dp.prototype.__init14.call(this),Dp.prototype.__init15.call(this),Dp.prototype.__init16.call(this),Dp.prototype.__init17.call(this),Dp.prototype.__init18.call(this),!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,n,r,s,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=n,this.ascaleY=r,this.ashearX=s,this.ashearY=a;let o=this.parent,h=this.matrix,l=this.skeleton.scaleX,c=Dl?-this.skeleton.scaleY:this.skeleton.scaleY;if(!o){let o=this.skeleton,u=i+90+a;return h.a=Rl.cosDeg(i+s)*n*l,h.c=Rl.cosDeg(u)*r*l,h.b=Rl.sinDeg(i+s)*n*c,h.d=Rl.sinDeg(u)*r*c,h.tx=t*l+o.x,void(h.ty=e*c+o.y)}let u=o.matrix.a,d=o.matrix.c,p=o.matrix.b,f=o.matrix.d;switch(h.tx=u*t+d*e+o.matrix.tx,h.ty=p*t+f*e+o.matrix.ty,this.data.transformMode){case Ip.Normal:{let t=i+90+a,e=Rl.cosDeg(i+s)*n,o=Rl.cosDeg(t)*r,l=Rl.sinDeg(i+s)*n,c=Rl.sinDeg(t)*r;return h.a=u*e+d*l,h.c=u*o+d*c,h.b=p*e+f*l,void(h.d=p*o+f*c)}case Ip.OnlyTranslation:{let t=i+90+a;h.a=Rl.cosDeg(i+s)*n,h.c=Rl.cosDeg(t)*r,h.b=Rl.sinDeg(i+s)*n,h.d=Rl.sinDeg(t)*r;break}case Ip.NoRotationOrReflection:{let t=u*u+p*p,e=0;t>1e-4?(t=Math.abs(u*f-d*p)/t,u/=this.skeleton.scaleX,p/=this.skeleton.scaleY,d=p*t,f=u*t,e=Math.atan2(p,u)*Rl.radDeg):(u=0,p=0,e=90-Math.atan2(f,d)*Rl.radDeg);let o=i+s-e,l=i+a-e+90,c=Rl.cosDeg(o)*n,m=Rl.cosDeg(l)*r,_=Rl.sinDeg(o)*n,g=Rl.sinDeg(l)*r;h.a=u*c-d*_,h.c=u*m-d*g,h.b=p*c+f*_,h.d=p*m+f*g;break}case Ip.NoScale:case Ip.NoScaleOrReflection:{let t=Rl.cosDeg(i),e=Rl.sinDeg(i),o=(u*t+d*e)/l,m=(p*t+f*e)/c,_=Math.sqrt(o*o+m*m);_>1e-5&&(_=1/_),o*=_,m*=_,_=Math.sqrt(o*o+m*m),this.data.transformMode==Ip.NoScale&&u*f-d*p<0!=(Dl?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let g=Math.PI/2+Math.atan2(m,o),y=Math.cos(g)*_,x=Math.sin(g)*_,v=Rl.cosDeg(s)*n,b=Rl.cosDeg(90+a)*r,E=Rl.sinDeg(s)*n,S=Rl.sinDeg(90+a)*r;h.a=o*v+y*E,h.c=o*b+y*S,h.b=m*v+x*E,h.d=m*b+x*S;break}}h.a*=l,h.c*=l,h.b*=c,h.d*=c}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*Rl.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*Rl.radDeg}getWorldScaleX(){let t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)}getWorldScaleY(){let t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)}updateAppliedTransform(){let t=this.parent,e=this.matrix;if(!t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*Rl.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*Rl.radDeg);let i=t.matrix,n=1/(i.a*i.d-i.b*i.c),r=e.tx-i.tx,s=e.ty-i.ty;this.ax=r*i.d*n-s*i.c*n,this.ay=s*i.a*n-r*i.b*n;let a=n*i.d,o=n*i.a,h=n*i.c,l=n*i.b,c=a*e.a-h*e.b,u=a*e.c-h*e.d,d=o*e.b-l*e.a,p=o*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){let t=c*p-u*d;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(c*u+d*p,t)*Rl.radDeg,this.arotation=Math.atan2(d,c)*Rl.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,u)*Rl.radDeg}worldToLocal(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=1/(i*s-n*r),o=t.x-e.tx,h=t.y-e.ty;return t.x=o*s*a-h*n*a,t.y=h*i*a-o*r*a,t}localToWorld(t){let e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t}worldToLocalRotation(t){let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*i,n.d*i-n.c*e)*Rl.radDeg}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=Rl.sinDeg(t),i=Rl.cosDeg(t),n=this.matrix;return Math.atan2(i*n.b+e*n.d,i*n.a+e*n.c)*Rl.radDeg}rotateWorld(t){let e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,a=Rl.cosDeg(t),o=Rl.sinDeg(t);e.a=a*i-o*r,e.c=a*n-o*s,e.b=o*i+a*r,e.d=o*n+a*s}}class Fp{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}}class kp{constructor(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class Np{constructor(t){this.name=t}}class Lp{__init(){this.bendDirection=0}__init2(){this.compress=!1}__init3(){this.stretch=!1}__init4(){this.mix=1}__init5(){this.softness=0}__init6(){this.active=!1}constructor(t,e){if(Lp.prototype.__init.call(this),Lp.prototype.__init2.call(this),Lp.prototype.__init3.call(this),Lp.prototype.__init4.call(this),Lp.prototype.__init5.call(this),Lp.prototype.__init6.call(this),!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,n,r,s,a){let o=t.parent.matrix,h=o.a,l=o.c,c=o.b,u=o.d,d=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case Ip.OnlyTranslation:p=e-t.worldX,f=i-t.worldY;break;case Ip.NoRotationOrReflection:let n=Math.abs(h*u-l*c)/(h*h+c*c),r=h/t.skeleton.scaleX,s=c/t.skeleton.scaleY;l=-s*n*t.skeleton.scaleX,u=r*n*t.skeleton.scaleY,d+=Math.atan2(s,r)*Rl.radDeg;default:let a=e-o.tx,m=i-o.ty,_=h*u-l*c;p=(a*u-m*l)/_-t.ax,f=(m*h-a*c)/_-t.ay}d+=Math.atan2(f,p)*Rl.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);let m=t.ascaleX,_=t.ascaleY;if(n||r){switch(t.data.transformMode){case Ip.NoScale:case Ip.NoScaleOrReflection:p=e-t.worldX,f=i-t.worldY}let o=t.data.length*m,h=Math.sqrt(p*p+f*f);if(n&&h<o||r&&h>o&&o>1e-4){let t=(h/o-1)*a+1;m*=t,s&&(_*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*a,m,_,t.ashearX,t.ashearY)}apply2(t,e,i,n,r,s,a,o,h){let l=t.ax,c=t.ay,u=t.ascaleX,d=t.ascaleY,p=u,f=d,m=e.ascaleX,_=t.matrix,g=0,y=0,x=0;u<0?(u=-u,g=180,x=-1):(g=0,x=1),d<0&&(d=-d,x=-x),m<0?(m=-m,y=180):y=0;let v=e.ax,b=0,E=0,S=0,T=_.a,w=_.c,A=_.b,R=_.d,C=Math.abs(u-d)<=1e-4;!C||s?(b=0,E=T*v+_.tx,S=A*v+_.ty):(b=e.ay,E=T*v+w*b+_.tx,S=A*v+R*b+_.ty);let I=t.parent.matrix;T=I.a,w=I.c,A=I.b,R=I.d;let M,P,O=1/(T*R-w*A),D=E-I.tx,F=S-I.ty,k=(D*R-F*w)*O-l,N=(F*T-D*A)*O-c,L=Math.sqrt(k*k+N*N),B=e.data.length*m;if(L<1e-4)return this.apply1(t,i,n,!1,s,!1,h),void e.updateWorldTransformWith(v,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);D=i-I.tx,F=n-I.ty;let X=(D*R-F*w)*O-l,U=(F*T-D*A)*O-c,Y=X*X+U*U;if(0!=o){o*=u*(m+1)*.5;let t=Math.sqrt(Y),e=t-L-B*u+o;if(e>0){let i=Math.min(1,e/(2*o))-1;i=(e-o*(1-i*i))/t,X-=i*X,U-=i*U,Y=X*X+U*U}}t:if(C){B*=u;let t=(Y-L*L-B*B)/(2*L*B);t<-1?(t=-1,P=Math.PI*r):t>1?(t=1,P=0,s&&(T=(Math.sqrt(Y)/(L+B)-1)*h+1,p*=T,a&&(f*=T))):P=Math.acos(t)*r,T=L+B*t,w=B*Math.sin(P),M=Math.atan2(U*T-X*w,X*T+U*w)}else{T=u*B,w=d*B;let t=T*T,e=w*w,i=Math.atan2(U,X);A=e*L*L+t*Y-t*e;let n=-2*e*L,s=e-t;if(R=n*n-4*s*A,R>=0){let t=Math.sqrt(R);n<0&&(t=-t),t=.5*-(n+t);let e=t/s,a=A/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=Y){F=Math.sqrt(Y-o*o)*r,M=i-Math.atan2(F,o),P=Math.atan2(F/d,(o-L)/u);break t}}let a=Rl.PI,o=L-T,h=o*o,l=0,c=0,p=L+T,f=p*p,m=0;A=-T*L/(t-e),A>=-1&&A<=1&&(A=Math.acos(A),D=T*Math.cos(A)+L,F=w*Math.sin(A),R=D*D+F*F,R<h&&(a=A,h=R,o=D,l=F),R>f&&(c=A,f=R,p=D,m=F)),Y<=.5*(h+f)?(M=i-Math.atan2(l*r,o),P=a*r):(M=i-Math.atan2(m*r,p),P=c*r)}let V=Math.atan2(b,v)*x,G=t.arotation;M=(M-V)*Rl.radDeg+g-G,M>180?M-=360:M<-180&&(M+=360),t.updateWorldTransformWith(l,c,G+M*h,p,f,0,0),G=e.arotation,P=((P+V)*Rl.radDeg-e.ashearX)*x+y-G,P>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(v,b,G+P*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Bp extends Fp{__init(){this.bones=new Array}__init2(){this.bendDirection=1}__init3(){this.compress=!1}__init4(){this.stretch=!1}__init5(){this.uniform=!1}__init6(){this.mix=1}__init7(){this.softness=0}constructor(t){super(t,0,!1),Bp.prototype.__init.call(this),Bp.prototype.__init2.call(this),Bp.prototype.__init3.call(this),Bp.prototype.__init4.call(this),Bp.prototype.__init5.call(this),Bp.prototype.__init6.call(this),Bp.prototype.__init7.call(this)}}class Xp extends Fp{__init(){this.bones=new Array}__init2(){this.mixRotate=0}__init3(){this.mixX=0}__init4(){this.mixY=0}constructor(t){super(t,0,!1),Xp.prototype.__init.call(this),Xp.prototype.__init2.call(this),Xp.prototype.__init3.call(this),Xp.prototype.__init4.call(this)}}!function(t){t[t.Fixed=0]="Fixed";t[t.Percent=1]="Percent"}(Mp||(Mp={})),function(t){t[t.Length=0]="Length";t[t.Fixed=1]="Fixed";t[t.Percent=2]="Percent";t[t.Proportional=3]="Proportional"}(Pp||(Pp={})),function(t){t[t.Tangent=0]="Tangent";t[t.Chain=1]="Chain";t[t.ChainScale=2]="ChainScale"}(Op||(Op={}));class Up{static __initStatic(){this.NONE=-1}static __initStatic2(){this.BEFORE=-2}static __initStatic3(){this.AFTER=-3}static __initStatic4(){this.epsilon=1e-5}__init(){this.position=0}__init2(){this.spacing=0}__init3(){this.mixRotate=0}__init4(){this.mixX=0}__init5(){this.mixY=0}__init6(){this.spaces=new Array}__init7(){this.positions=new Array}__init8(){this.world=new Array}__init9(){this.curves=new Array}__init10(){this.lengths=new Array}__init11(){this.segments=new Array}__init12(){this.active=!1}constructor(t,e){if(Up.prototype.__init.call(this),Up.prototype.__init2.call(this),Up.prototype.__init3.call(this),Up.prototype.__init4.call(this),Up.prototype.__init5.call(this),Up.prototype.__init6.call(this),Up.prototype.__init7.call(this),Up.prototype.__init8.call(this),Up.prototype.__init9.call(this),Up.prototype.__init10.call(this),Up.prototype.__init11.call(this),Up.prototype.__init12.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof fd))return;let e=this.mixRotate,i=this.mixX,n=this.mixY;if(0==e&&0==i&&0==n)return;let r=this.data,s=r.rotateMode==Op.Tangent,a=r.rotateMode==Op.ChainScale,o=this.bones.length,h=s?o:o+1,l=this.bones,c=Ml.setArraySize(this.spaces,h),u=a?this.lengths=Ml.setArraySize(this.lengths,o):null,d=this.spacing;switch(r.spacingMode){case Pp.Percent:if(a)for(let t=0,e=h-1;t<e;t++){let e=l[t],i=e.data.length;if(i<Up.epsilon)u[t]=0;else{let n=i*e.matrix.a,r=i*e.matrix.b;u[t]=Math.sqrt(n*n+r*r)}}Ml.arrayFill(c,1,h,d);break;case Pp.Proportional:let t=0;for(let e=0,i=h-1;e<i;){let i=l[e],n=i.data.length;if(n<Up.epsilon)a&&(u[e]=0),c[++e]=d;else{let r=n*i.matrix.a,s=n*i.matrix.b,o=Math.sqrt(r*r+s*s);a&&(u[e]=o),c[++e]=o,t+=o}}if(t>0){t=h/t*d;for(let e=1;e<h;e++)c[e]*=t}break;default:let e=r.spacingMode==Pp.Length;for(let t=0,i=h-1;t<i;){let i=l[t],n=i.data.length;if(n<Up.epsilon)a&&(u[t]=0),c[++t]=d;else{let r=n*i.matrix.a,s=n*i.matrix.b,o=Math.sqrt(r*r+s*s);a&&(u[t]=o),c[++t]=(e?n+d:d)*o/n}}}let p=this.computeWorldPositions(t,h,s),f=p[0],m=p[1],_=r.offsetRotation,g=!1;if(0==_)g=r.rotateMode==Op.Chain;else{g=!1;let t=this.target.bone.matrix;_*=t.a*t.d-t.b*t.c>0?Rl.degRad:-Rl.degRad}for(let t=0,r=3;t<o;t++,r+=3){let o=l[t],h=o.matrix;h.tx+=(f-h.tx)*i,h.ty+=(m-h.ty)*n;let d=p[r],y=p[r+1],x=d-f,v=y-m;if(a){let i=u[t];if(0!=i){let t=(Math.sqrt(x*x+v*v)/i-1)*e+1;h.a*=t,h.b*=t}}if(f=d,m=y,e>0){let i=h.a,n=h.c,a=h.b,l=h.d,u=0,d=0,y=0;if(u=s?p[r-1]:0==c[t+1]?p[r+2]:Math.atan2(v,x),u-=Math.atan2(a,i),g){d=Math.cos(u),y=Math.sin(u);let t=o.data.length;f+=(t*(d*i-y*a)-x)*e,m+=(t*(y*i+d*a)-v)*e}else u+=_;u>Rl.PI?u-=Rl.PI2:u<-Rl.PI&&(u+=Rl.PI2),u*=e,d=Math.cos(u),y=Math.sin(u),h.a=d*i-y*a,h.c=d*n-y*l,h.b=y*i+d*a,h.d=y*n+d*l}o.updateAppliedTransform()}}computeWorldPositions(t,e,i){let n=this.target,r=this.position,s=this.spaces,a=Ml.setArraySize(this.positions,3*e+2),o=null,h=t.closed,l=t.worldVerticesLength,c=l/6,u=Up.NONE;if(!t.constantSpeed){let d=t.lengths;c-=h?1:2;let p,f=d[c];switch(this.data.positionMode==Mp.Percent&&(r*=f),this.data.spacingMode){case Pp.Percent:p=f;break;case Pp.Proportional:p=f/e;break;default:p=1}o=Ml.setArraySize(this.world,8);for(let m=0,_=0,g=0;m<e;m++,_+=3){let e=s[m]*p;r+=e;let y=r;if(h)y%=f,y<0&&(y+=f),g=0;else{if(y<0){u!=Up.BEFORE&&(u=Up.BEFORE,t.computeWorldVertices(n,2,4,o,0,2)),this.addBeforePosition(y,o,0,a,_);continue}if(y>f){u!=Up.AFTER&&(u=Up.AFTER,t.computeWorldVertices(n,l-6,4,o,0,2)),this.addAfterPosition(y-f,o,0,a,_);continue}}for(;;g++){let t=d[g];if(!(y>t)){if(0==g)y/=t;else{let e=d[g-1];y=(y-e)/(t-e)}break}}g!=u&&(u=g,h&&g==c?(t.computeWorldVertices(n,l-4,4,o,0,2),t.computeWorldVertices(n,0,4,o,4,2)):t.computeWorldVertices(n,6*g+2,8,o,0,2)),this.addCurvePosition(y,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,_,i||m>0&&0==e)}return a}h?(l+=2,o=Ml.setArraySize(this.world,l),t.computeWorldVertices(n,2,l-4,o,0,2),t.computeWorldVertices(n,0,2,o,l-4,2),o[l-2]=o[0],o[l-1]=o[1]):(c--,l-=4,o=Ml.setArraySize(this.world,l),t.computeWorldVertices(n,2,l,o,0,2));let d=Ml.setArraySize(this.curves,c),p=0,f=o[0],m=o[1],_=0,g=0,y=0,x=0,v=0,b=0,E=0,S=0,T=0,w=0,A=0,R=0,C=0,I=0;for(let t=0,e=2;t<c;t++,e+=6)_=o[e],g=o[e+1],y=o[e+2],x=o[e+3],v=o[e+4],b=o[e+5],E=.1875*(f-2*_+y),S=.1875*(m-2*g+x),T=.09375*(3*(_-y)-f+v),w=.09375*(3*(g-x)-m+b),A=2*E+T,R=2*S+w,C=.75*(_-f)+E+.16666667*T,I=.75*(g-m)+S+.16666667*w,p+=Math.sqrt(C*C+I*I),C+=A,I+=R,A+=T,R+=w,p+=Math.sqrt(C*C+I*I),C+=A,I+=R,p+=Math.sqrt(C*C+I*I),C+=A+T,I+=R+w,p+=Math.sqrt(C*C+I*I),d[t]=p,f=v,m=b;this.data.positionMode==Mp.Percent&&(r*=p);let M=0;switch(this.data.spacingMode){case Pp.Percent:M=p;break;case Pp.Proportional:M=p/e;break;default:M=1}let P=this.segments,O=0;for(let t=0,n=0,c=0,D=0;t<e;t++,n+=3){let e=s[t]*M;r+=e;let F=r;if(h)F%=p,F<0&&(F+=p),c=0;else{if(F<0){this.addBeforePosition(F,o,0,a,n);continue}if(F>p){this.addAfterPosition(F-p,o,l-4,a,n);continue}}for(;;c++){let t=d[c];if(!(F>t)){if(0==c)F/=t;else{let e=d[c-1];F=(F-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(f=o[t],m=o[t+1],_=o[t+2],g=o[t+3],y=o[t+4],x=o[t+5],v=o[t+6],b=o[t+7],E=.03*(f-2*_+y),S=.03*(m-2*g+x),T=.006*(3*(_-y)-f+v),w=.006*(3*(g-x)-m+b),A=2*E+T,R=2*S+w,C=.3*(_-f)+E+.16666667*T,I=.3*(g-m)+S+.16666667*w,O=Math.sqrt(C*C+I*I),P[0]=O,t=1;t<8;t++)C+=A,I+=R,A+=T,R+=w,O+=Math.sqrt(C*C+I*I),P[t]=O;C+=A,I+=R,O+=Math.sqrt(C*C+I*I),P[8]=O,C+=A+T,I+=R+w,O+=Math.sqrt(C*C+I*I),P[9]=O,D=0}for(F*=O;;D++){let t=P[D];if(!(F>t)){if(0==D)F/=t;else{let e=P[D-1];F=D+(F-e)/(t-e)}break}}this.addCurvePosition(.1*F,f,m,_,g,y,x,v,b,a,n,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,n,r){let s=e[i],a=e[i+1],o=e[i+2]-s,h=e[i+3]-a,l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addAfterPosition(t,e,i,n,r){let s=e[i+2],a=e[i+3],o=s-e[i],h=a-e[i+1],l=Math.atan2(h,o);n[r]=s+t*Math.cos(l),n[r+1]=a+t*Math.sin(l),n[r+2]=l}addCurvePosition(t,e,i,n,r,s,a,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=i,void(l[c+2]=Math.atan2(r-i,n-e));let d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,y=3*g,x=f*y,v=y*t,b=e*_+n*x+s*v+o*p,E=i*_+r*x+a*v+h*p;l[c]=b,l[c+1]=E,u&&(l[c+2]=t<.001?Math.atan2(r-i,n-e):Math.atan2(E-(i*m+r*g*2+a*d),b-(e*m+n*g*2+s*d)))}}Up.__initStatic(),Up.__initStatic2(),Up.__initStatic3(),Up.__initStatic4();class Yp{__init(){this.deform=new Array}constructor(t,e){if(Yp.prototype.__init.call(this),null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new Al,this.darkColor=null==t.darkColor?null:new Al,this.setToSetupPose(),this.blendMode=this.data.blendMode}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}class Vp{__init(){this.mixRotate=0}__init2(){this.mixX=0}__init3(){this.mixY=0}__init4(){this.mixScaleX=0}__init5(){this.mixScaleY=0}__init6(){this.mixShearY=0}__init7(){this.temp=new Ol}__init8(){this.active=!1}constructor(t,e){if(Vp.prototype.__init.call(this),Vp.prototype.__init2.call(this),Vp.prototype.__init3.call(this),Vp.prototype.__init4.call(this),Vp.prototype.__init5.call(this),Vp.prototype.__init6.call(this),Vp.prototype.__init7.call(this),Vp.prototype.__init8.call(this),!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,n=this.mixScaleX,r=this.mixScaleY,s=this.mixShearY,a=0!=e||0!=i,o=this.target;const h=o.matrix;let l=h.a,c=h.c,u=h.b,d=h.d,p=l*d-c*u>0?Rl.degRad:-Rl.degRad,f=this.data.offsetRotation*p,m=this.data.offsetShearY*p,_=this.bones;for(let h=0,p=_.length;h<p;h++){let p=_[h];const g=p.matrix;if(0!=t){let e=g.a,i=g.c,n=g.b,r=g.d,s=Math.atan2(u,l)-Math.atan2(n,e)+f;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let a=Math.cos(s),o=Math.sin(s);g.a=a*e-o*n,g.c=a*i-o*r,g.b=o*e+a*n,g.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),g.tx+=(t.x-g.tx)*e,g.ty+=(t.y-g.ty)*i}if(0!=n){let t=Math.sqrt(g.a*g.a+g.b*g.b);0!=t&&(t=(t+(Math.sqrt(l*l+u*u)-t+this.data.offsetScaleX)*n)/t),g.a*=t,g.b*=t}if(0!=r){let t=Math.sqrt(g.c*g.c+g.d*g.d);0!=t&&(t=(t+(Math.sqrt(c*c+d*d)-t+this.data.offsetScaleY)*r)/t),g.c*=t,g.d*=t}if(s>0){let t=g.c,e=g.d,i=Math.atan2(e,t),n=Math.atan2(d,c)-Math.atan2(u,l)-(i-Math.atan2(g.b,g.a));n>Rl.PI?n-=Rl.PI2:n<-Rl.PI&&(n+=Rl.PI2),n=i+(n+m)*s;let r=Math.sqrt(t*t+e*e);g.c=Math.cos(n)*r,g.d=Math.sin(n)*r}p.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,n=this.mixScaleX,r=this.mixScaleY,s=this.mixShearY,a=0!=e||0!=i,o=this.target,h=o.matrix,l=h.a,c=h.c,u=h.b,d=h.d,p=l*d-c*u>0?Rl.degRad:-Rl.degRad,f=this.data.offsetRotation*p,m=this.data.offsetShearY*p,_=this.bones;for(let h=0,p=_.length;h<p;h++){let p=_[h];const g=p.matrix;if(0!=t){let e=g.a,i=g.c,n=g.b,r=g.d,s=Math.atan2(u,l)+f;s>Rl.PI?s-=Rl.PI2:s<-Rl.PI&&(s+=Rl.PI2),s*=t;let a=Math.cos(s),o=Math.sin(s);g.a=a*e-o*n,g.c=a*i-o*r,g.b=o*e+a*n,g.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),g.tx+=t.x*e,g.ty+=t.y*i}if(0!=n){let t=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleX)*n+1;g.a*=t,g.b*=t}if(0!=r){let t=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleY)*r+1;g.c*=t,g.d*=t}if(s>0){let t=Math.atan2(d,c)-Math.atan2(u,l);t>Rl.PI?t-=Rl.PI2:t<-Rl.PI&&(t+=Rl.PI2);let e=g.c,i=g.d;t=Math.atan2(i,e)+(t-Rl.PI/2+m)*s;let n=Math.sqrt(e*e+i*i);g.c=Math.cos(t)*n,g.d=Math.sin(t)*n}p.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,n=this.mixScaleX,r=this.mixScaleY,s=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*i;let p=l.ascaleX,f=l.ascaleY;0!=n&&0!=p&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),0!=r&&0!=f&&(f=(f+(a.ascaleY-f+this.data.offsetScaleY)*r)/f);let m=l.ashearY;if(0!=s){let t=a.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*s}l.updateWorldTransformWith(u,d,c,p,f,l.ashearX,m)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,n=this.mixScaleX,r=this.mixScaleY,s=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation+(a.arotation+this.data.offsetRotation)*t,u=l.ax+(a.ax+this.data.offsetX)*e,d=l.ay+(a.ay+this.data.offsetY)*i,p=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*n)+1,f=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r)+1,m=l.ashearY+(a.ashearY+this.data.offsetShearY)*s;l.updateWorldTransformWith(u,d,c,p,f,l.ashearX,m)}}}class Gp{__init(){this._updateCache=new Array}__init2(){this.time=0}__init3(){this.scaleX=1}__init4(){this.scaleY=1}__init5(){this.x=0}__init6(){this.y=0}constructor(t){if(Gp.prototype.__init.call(this),Gp.prototype.__init2.call(this),Gp.prototype.__init3.call(this),Gp.prototype.__init4.call(this),Gp.prototype.__init5.call(this),Gp.prototype.__init6.call(this),!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,n=t.bones[e];if(n.parent){let t=this.bones[n.parent.index];i=new Dp(n,this,t),t.children.push(i)}else i=new Dp(n,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],n=this.bones[i.boneData.index],r=new Yp(i,n);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new Lp(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new Vp(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Up(i,this))}this.color=new Al(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,n=this.pathConstraints,r=e.length,s=i.length,a=n.length,o=r+s+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let n=e[i];if(n.data.order==t){this.sortIkConstraint(n);continue t}}for(let e=0;e<s;e++){let n=i[e];if(n.data.order==t){this.sortTransformConstraint(n);continue t}}for(let e=0;e<a;e++){let i=n[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,n=i[0];if(this.sortBone(n),1==i.length)this._updateCache.push(t),this.sortReset(n.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(n.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,n=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,n);let r=e.getAttachment();r instanceof fd&&this.sortPathConstraintAttachmentWith(r,n);let s=t.bones,a=s.length;for(let t=0;t<a;t++)this.sortBone(s[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(s[t].children);for(let t=0;t<a;t++)s[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Ml.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let n=t.attachments[e];if(n)for(let t in n)this.sortPathConstraintAttachmentWith(n[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof fd))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,n=i.length;e<n;){let n=i[e++];for(n+=e;e<n;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortBone(t){if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone(),i=t.matrix.a,n=t.matrix.c,r=t.matrix.b,s=t.matrix.d;e.matrix.tx=i*this.x+n*this.y+t.worldX,e.matrix.ty=r*this.x+s*this.y+t.worldY;let a=e.rotation+90+e.shearY,o=Rl.cosDeg(e.rotation+e.shearX)*e.scaleX,h=Rl.cosDeg(a)*e.scaleY,l=Rl.sinDeg(e.rotation+e.shearX)*e.scaleX,c=Rl.sinDeg(a)*e.scaleY;const u=this.scaleX,d=Dl?-this.scaleY:this.scaleY;e.matrix.a=(i*o+n*l)*u,e.matrix.c=(i*h+n*c)*u,e.matrix.b=(r*o+s*l)*d,e.matrix.d=(r*h+s*c)*d;let p=this._updateCache;for(let t=0,i=p.length;t<i;t++){let i=p[t];i!=e&&i.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],n=e.data;e.mixRotate=n.mixRotate,e.mixX=n.mixX,e.mixY=n.mixY,e.mixScaleX=n.mixScaleX,e.mixScaleY=n.mixScaleY,e.mixShearY=n.mixShearY}let n=this.pathConstraints;for(let t=0,e=n.length;t<e;t++){let e=n[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY}}setSlotsToSetupPose(){let t=this.slots;Ml.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findBoneIndex(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findSlotIndex(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i],r=n.data.attachmentName;if(r){let e=t.getAttachment(i,r);e&&n.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let n=0,r=i.length;n<r;n++){let r=i[n];if(r.data.name==t){let i=null;if(e&&(i=this.getAttachment(n,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.data.name==t)return n}return null}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let n=this.drawOrder,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=n.length;t<e;t++){let e=n[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof _d)h=8,l=Ml.setArraySize(i,h,0),c.computeWorldVertices(e.bone,l,0,2);else if(c instanceof pd){let t=c;h=t.worldVerticesLength,l=Ml.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],i=l[t+1];r=Math.min(r,e),s=Math.min(s,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,s),e.set(a-r,o-s)}update(t){this.time+=t}get flipX(){return-1==this.scaleX}set flipX(t){Gp.deprecatedWarning1||(Gp.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return-1==this.scaleY}set flipY(t){Gp.deprecatedWarning1||(Gp.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}static __initStatic(){this.deprecatedWarning1=!1}}Gp.__initStatic();class jp{constructor(){jp.prototype.__init.call(this),jp.prototype.__init2.call(this),jp.prototype.__init3.call(this),jp.prototype.__init4.call(this),jp.prototype.__init5.call(this),jp.prototype.__init6.call(this),jp.prototype.__init7.call(this),jp.prototype.__init8.call(this),jp.prototype.__init9.call(this)}__init(){this.bones=new Array}__init2(){this.slots=new Array}__init3(){this.skins=new Array}__init4(){this.events=new Array}__init5(){this.animations=new Array}__init6(){this.ikConstraints=new Array}__init7(){this.transformConstraints=new Array}__init8(){this.pathConstraints=new Array}__init9(){this.fps=0}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findBoneIndex(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findSlotIndex(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.name==t)return n}return null}findPathConstraintIndex(t){if(null==t)throw new Error("pathConstraintName cannot be null.");let e=this.pathConstraints;for(let i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1}}class Wp{__init(){this.color=new Al(1,1,1,1)}constructor(t,e,i){if(Wp.prototype.__init.call(this),t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}class Hp extends Fp{__init(){this.bones=new Array}__init2(){this.mixRotate=0}__init3(){this.mixX=0}__init4(){this.mixY=0}__init5(){this.mixScaleX=0}__init6(){this.mixScaleY=0}__init7(){this.mixShearY=0}__init8(){this.offsetRotation=0}__init9(){this.offsetX=0}__init10(){this.offsetY=0}__init11(){this.offsetScaleX=0}__init12(){this.offsetScaleY=0}__init13(){this.offsetShearY=0}__init14(){this.relative=!1}__init15(){this.local=!1}constructor(t){super(t,0,!1),Hp.prototype.__init.call(this),Hp.prototype.__init2.call(this),Hp.prototype.__init3.call(this),Hp.prototype.__init4.call(this),Hp.prototype.__init5.call(this),Hp.prototype.__init6.call(this),Hp.prototype.__init7.call(this),Hp.prototype.__init8.call(this),Hp.prototype.__init9.call(this),Hp.prototype.__init10.call(this),Hp.prototype.__init11.call(this),Hp.prototype.__init12.call(this),Hp.prototype.__init13.call(this),Hp.prototype.__init14.call(this),Hp.prototype.__init15.call(this)}}class zp{constructor(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i}}class qp{__init(){this.attachments=new Array}__init2(){this.bones=Array()}__init3(){this.constraints=new Array}constructor(t){if(qp.prototype.__init.call(this),qp.prototype.__init2.call(this),qp.prototype.__init3.call(this),!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],n=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){n=!0;break}n||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],n=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){n=!0;break}n||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],n=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){n=!0;break}n||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],n=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){n=!0;break}n||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof pd?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&(i[e]=null)}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let n in i){let r=i[n];r&&t.push(new zp(e,n,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let n in i){let r=i[n];r&&e.push(new zp(t,n,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let n=0;n<t.slots.length;n++){let r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(s==t[e]){let t=this.getAttachment(i,e);t&&r.setAttachment(t);break}}}i++}}}class Zp{static __initStatic(){this.BlendModeValues=[ft.NORMAL,ft.ADD,ft.MULTIPLY,ft.SCREEN]}__init(){this.scale=1}__init2(){this.linkedMeshes=new Array}constructor(t){Zp.prototype.__init.call(this),Zp.prototype.__init2.call(this),this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new jp;i.name="";let n=new pl(t),r=n.readInt32(),s=n.readInt32();if(i.hash=0==s&&0==r?null:s.toString(16)+r.toString(16),i.version=n.readString(),"4.0"!==i.version.substr(0,3)){let t=`Spine 4.0 loader cant load version ${i.version}. Please configure your pixi-spine bundle`;console.error(t)}i.x=n.readFloat(),i.y=n.readFloat(),i.width=n.readFloat(),i.height=n.readFloat();let a=n.readBoolean();a&&(i.fps=n.readFloat(),i.imagesPath=n.readString(),i.audioPath=n.readString());let o=0;o=n.readInt(!0);for(let t=0;t<o;t++)n.strings.push(n.readString());o=n.readInt(!0);for(let t=0;t<o;t++){let r=n.readString(),s=0==t?null:i.bones[n.readInt(!0)],o=new Cp(t,r,s);o.rotation=n.readFloat(),o.x=n.readFloat()*e,o.y=n.readFloat()*e,o.scaleX=n.readFloat(),o.scaleY=n.readFloat(),o.shearX=n.readFloat(),o.shearY=n.readFloat(),o.length=n.readFloat()*e,o.transformMode=n.readInt(!0),o.skinRequired=n.readBoolean(),a&&Al.rgba8888ToColor(o.color,n.readInt32()),i.bones.push(o)}o=n.readInt(!0);for(let t=0;t<o;t++){let e=n.readString(),r=i.bones[n.readInt(!0)],s=new Wp(t,e,r);Al.rgba8888ToColor(s.color,n.readInt32());let a=n.readInt32();-1!=a&&Al.rgb888ToColor(s.darkColor=new Al,a),s.attachmentName=n.readStringRef(),s.blendMode=Zp.BlendModeValues[n.readInt(!0)],i.slots.push(s)}o=n.readInt(!0);for(let t,r=0;r<o;r++){let r=new Bp(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.bones[n.readInt(!0)],r.mix=n.readFloat(),r.softness=n.readFloat()*e,r.bendDirection=n.readByte(),r.compress=n.readBoolean(),r.stretch=n.readBoolean(),r.uniform=n.readBoolean(),i.ikConstraints.push(r)}o=n.readInt(!0);for(let t,r=0;r<o;r++){let r=new Hp(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.bones[n.readInt(!0)],r.local=n.readBoolean(),r.relative=n.readBoolean(),r.offsetRotation=n.readFloat(),r.offsetX=n.readFloat()*e,r.offsetY=n.readFloat()*e,r.offsetScaleX=n.readFloat(),r.offsetScaleY=n.readFloat(),r.offsetShearY=n.readFloat(),r.mixRotate=n.readFloat(),r.mixX=n.readFloat(),r.mixY=n.readFloat(),r.mixScaleX=n.readFloat(),r.mixScaleY=n.readFloat(),r.mixShearY=n.readFloat(),i.transformConstraints.push(r)}o=n.readInt(!0);for(let t,r=0;r<o;r++){let r=new Xp(n.readString());r.order=n.readInt(!0),r.skinRequired=n.readBoolean(),t=n.readInt(!0);for(let e=0;e<t;e++)r.bones.push(i.bones[n.readInt(!0)]);r.target=i.slots[n.readInt(!0)],r.positionMode=n.readInt(!0),r.spacingMode=n.readInt(!0),r.rotateMode=n.readInt(!0),r.offsetRotation=n.readFloat(),r.position=n.readFloat(),r.positionMode==Mp.Fixed&&(r.position*=e),r.spacing=n.readFloat(),r.spacingMode!=Pp.Length&&r.spacingMode!=Pp.Fixed||(r.spacing*=e),r.mixRotate=n.readFloat(),r.mixX=n.readFloat(),r.mixY=n.readFloat(),i.pathConstraints.push(r)}let h=this.readSkin(n,i,!0,a);h&&(i.defaultSkin=h,i.skins.push(h));{let t=i.skins.length;for(Ml.setArraySize(i.skins,o=t+n.readInt(!0));t<o;t++)i.skins[t]=this.readSkin(n,i,!1,a)}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t],n=(e.skin?i.findSkin(e.skin):i.defaultSkin).getAttachment(e.slotIndex,e.parent);e.mesh.deformAttachment=e.inheritDeform?n:e.mesh,e.mesh.setParentMesh(n)}this.linkedMeshes.length=0,o=n.readInt(!0);for(let t=0;t<o;t++){let t=new Np(n.readStringRef());t.intValue=n.readInt(!1),t.floatValue=n.readFloat(),t.stringValue=n.readString(),t.audioPath=n.readString(),t.audioPath&&(t.volume=n.readFloat(),t.balance=n.readFloat()),i.events.push(t)}o=n.readInt(!0);for(let t=0;t<o;t++)i.animations.push(this.readAnimation(n,n.readString(),i));return i}readSkin(t,e,i,n){let r=null,s=0;if(i){if(s=t.readInt(!0),0==s)return null;r=new qp("default")}else{r=new qp(t.readStringRef()),r.bones.length=t.readInt(!0);for(let i=0,n=r.bones.length;i<n;i++)r.bones[i]=e.bones[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,n=t.readInt(!0);i<n;i++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);s=t.readInt(!0)}for(let i=0;i<s;i++){let i=t.readInt(!0);for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readStringRef(),a=this.readAttachment(t,e,r,i,s,n);a&&r.setAttachment(i,s,a)}}return r}readAttachment(t,e,i,n,r,s){let a=this.scale,o=t.readStringRef();switch(o||(o=r),t.readByte()){case cl.Region:{let e=t.readStringRef(),n=t.readFloat(),r=t.readFloat(),s=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readInt32();e||(e=o);let p=this.attachmentLoader.newRegionAttachment(i,o,e);return p?(p.path=e,p.x=r*a,p.y=s*a,p.scaleX=h,p.scaleY=l,p.rotation=n,p.width=c*a,p.height=u*a,Al.rgba8888ToColor(p.color,d),p):null}case cl.BoundingBox:{let e=t.readInt(!0),n=this.readVertices(t,e),r=s?t.readInt32():0,a=this.attachmentLoader.newBoundingBoxAttachment(i,o);return a?(a.worldVerticesLength=e<<1,a.vertices=n.vertices,a.bones=n.bones,s&&Al.rgba8888ToColor(a.color,r),a):null}case cl.Mesh:{let e=t.readStringRef(),n=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),l=this.readShortArray(t),c=this.readVertices(t,r),u=t.readInt(!0),d=null,p=0,f=0;s&&(d=this.readShortArray(t),p=t.readFloat(),f=t.readFloat()),e||(e=o);let m=this.attachmentLoader.newMeshAttachment(i,o,e);return m?(m.path=e,Al.rgba8888ToColor(m.color,n),m.bones=c.bones,m.vertices=c.vertices,m.worldVerticesLength=r<<1,m.triangles=l,m.regionUVs=new Float32Array(h),m.hullLength=u<<1,s&&(m.edges=d,m.width=p*a,m.height=f*a),m):null}case cl.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),l=t.readStringRef(),c=t.readBoolean(),u=0,d=0;s&&(u=t.readFloat(),d=t.readFloat()),e||(e=o);let p=this.attachmentLoader.newMeshAttachment(i,o,e);return p?(p.path=e,Al.rgba8888ToColor(p.color,r),s&&(p.width=u*a,p.height=d*a),this.linkedMeshes.push(new Kp(p,h,n,l,c)),p):null}case cl.Path:{let e=t.readBoolean(),n=t.readBoolean(),r=t.readInt(!0),h=this.readVertices(t,r),l=Ml.newArray(r/3,0);for(let e=0,i=l.length;e<i;e++)l[e]=t.readFloat()*a;let c=s?t.readInt32():0,u=this.attachmentLoader.newPathAttachment(i,o);return u?(u.closed=e,u.constantSpeed=n,u.worldVerticesLength=r<<1,u.vertices=h.vertices,u.bones=h.bones,u.lengths=l,s&&Al.rgba8888ToColor(u.color,c),u):null}case cl.Point:{let e=t.readFloat(),n=t.readFloat(),r=t.readFloat(),h=s?t.readInt32():0,l=this.attachmentLoader.newPointAttachment(i,o);return l?(l.x=n*a,l.y=r*a,l.rotation=e,s&&Al.rgba8888ToColor(l.color,h),l):null}case cl.Clipping:{let n=t.readInt(!0),r=t.readInt(!0),a=this.readVertices(t,r),h=s?t.readInt32():0,l=this.attachmentLoader.newClippingAttachment(i,o);return l?(l.endSlot=e.slots[n],l.worldVerticesLength=r<<1,l.vertices=a.vertices,l.bones=a.bones,s&&Al.rgba8888ToColor(l.color,h),l):null}}return null}readVertices(t,e){let i=this.scale,n=e<<1,r=new Jp;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n,i),r;let s=new Array,a=new Array;for(let n=0;n<e;n++){let e=t.readInt(!0);a.push(e);for(let n=0;n<e;n++)a.push(t.readInt(!0)),s.push(t.readFloat()*i),s.push(t.readFloat()*i),s.push(t.readFloat())}return r.vertices=Ml.toFloatArray(s),r.bones=a,r}readFloatArray(t,e,i){let n=new Array(e);if(1==i)for(let i=0;i<e;i++)n[i]=t.readFloat();else for(let r=0;r<e;r++)n[r]=t.readFloat()*i;return n}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let n=0;n<e;n++)i[n]=t.readShort();return i}readAnimation(t,e,i){t.readInt(!0);let n=new Array,r=this.scale;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0),s=r-1;switch(i){case df:{let i=new rp(r,e);for(let e=0;e<r;e++)i.setFrame(e,t.readFloat(),t.readStringRef());n.push(i);break}case pf:{let i=t.readInt(!0),a=new Qd(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u),e!=s;e++){let n=t.readFloat(),r=t.readUnsignedByte()/255,s=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;switch(t.readByte()){case bf:a.setStepped(e);break;case Ef:tf(t,a,i++,e,0,o,n,h,r,1),tf(t,a,i++,e,1,o,n,l,s,1),tf(t,a,i++,e,2,o,n,c,d,1),tf(t,a,i++,e,3,o,n,u,p,1)}o=n,h=r,l=s,c=d,u=p}n.push(a);break}case ff:{let i=t.readInt(!0),a=new tp(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c),e!=s;e++){let n=t.readFloat(),r=t.readUnsignedByte()/255,s=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case bf:a.setStepped(e);break;case Ef:tf(t,a,i++,e,0,o,n,h,r,1),tf(t,a,i++,e,1,o,n,l,s,1),tf(t,a,i++,e,2,o,n,c,u,1)}o=n,h=r,l=s,c=u}n.push(a);break}case mf:{let i=t.readInt(!0),a=new ip(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,p,f),e!=s;e++){let n=t.readFloat(),r=t.readUnsignedByte()/255,s=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case bf:a.setStepped(e);break;case Ef:tf(t,a,i++,e,0,o,n,h,r,1),tf(t,a,i++,e,1,o,n,l,s,1),tf(t,a,i++,e,2,o,n,c,m,1),tf(t,a,i++,e,3,o,n,u,_,1),tf(t,a,i++,e,4,o,n,d,g,1),tf(t,a,i++,e,5,o,n,p,y,1),tf(t,a,i++,e,6,o,n,f,x,1)}o=n,h=r,l=s,c=m,u=_,d=g,p=y,f=x}n.push(a);break}case _f:{let i=t.readInt(!0),a=new np(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,p),e!=s;e++){let n=t.readFloat(),r=t.readUnsignedByte()/255,s=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255;switch(t.readByte()){case bf:a.setStepped(e);break;case Ef:tf(t,a,i++,e,0,o,n,h,r,1),tf(t,a,i++,e,1,o,n,l,s,1),tf(t,a,i++,e,2,o,n,c,f,1),tf(t,a,i++,e,3,o,n,u,m,1),tf(t,a,i++,e,4,o,n,d,_,1),tf(t,a,i++,e,5,o,n,p,g,1)}o=n,h=r,l=s,c=f,u=m,d=_,p=g}n.push(a);break}case gf:{let i=new ep(r,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,n=0;i.setFrame(e,a,o),e!=s;e++){let r=t.readFloat(),s=t.readUnsignedByte()/255;switch(t.readByte()){case bf:i.setStepped(e);break;case Ef:tf(t,i,n++,e,0,a,r,o,s,1)}a=r,o=s}n.push(i);break}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,s=t.readInt(!0);i<s;i++){let i=t.readByte(),s=t.readInt(!0),a=t.readInt(!0);switch(i){case ef:n.push($p(t,new Gd(s,a,e),1));break;case nf:n.push(Qp(t,new jd(s,a,e),r));break;case rf:n.push($p(t,new Wd(s,a,e),r));break;case sf:n.push($p(t,new Hd(s,a,e),r));break;case af:n.push(Qp(t,new zd(s,a,e),1));break;case of:n.push($p(t,new qd(s,a,e),1));break;case hf:n.push($p(t,new Zd(s,a,e),1));break;case lf:n.push(Qp(t,new Kd(s,a,e),1));break;case cf:n.push($p(t,new Jd(s,a,e),1));break;case uf:n.push($p(t,new $d(s,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),s=i-1,a=new hp(i,t.readInt(!0),e),o=t.readFloat(),h=t.readFloat(),l=t.readFloat()*r;for(let e=0,i=0;a.setFrame(e,o,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=s;e++){let n=t.readFloat(),s=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case bf:a.setStepped(e);break;case Ef:tf(t,a,i++,e,0,o,n,h,s,1),tf(t,a,i++,e,1,o,n,l,c,r)}o=n,h=s,l=c}n.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=i-1,s=new lp(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,i=0;s.setFrame(e,a,o,h,l,c,u,d),e!=r;e++){let n=t.readFloat(),r=t.readFloat(),p=t.readFloat(),f=t.readFloat(),m=t.readFloat(),_=t.readFloat(),g=t.readFloat();switch(t.readByte()){case bf:s.setStepped(e);break;case Ef:tf(t,s,i++,e,0,a,n,o,r,1),tf(t,s,i++,e,1,a,n,h,p,1),tf(t,s,i++,e,2,a,n,l,f,1),tf(t,s,i++,e,3,a,n,c,m,1),tf(t,s,i++,e,4,a,n,u,_,1),tf(t,s,i++,e,5,a,n,d,g,1)}a=n,o=r,h=p,l=f,c=m,u=_,d=g}n.push(s)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++)switch(t.readByte()){case yf:n.push($p(t,new cp(t.readInt(!0),t.readInt(!0),e),s.positionMode==Mp.Fixed?r:1));break;case xf:n.push($p(t,new up(t.readInt(!0),t.readInt(!0),e),s.spacingMode==Pp.Length||s.spacingMode==Pp.Fixed?r:1));break;case vf:let i=new dp(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,n=0,r=i.getFrameCount()-1;i.setFrame(e,a,o,h,l),e!=r;e++){let r=t.readFloat(),s=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case bf:i.setStepped(e);break;case Ef:tf(t,i,n++,e,0,a,r,o,s,1),tf(t,i,n++,e,1,a,r,h,c,1),tf(t,i,n++,e,2,a,r,l,u,1)}a=r,o=s,h=c,l=u}n.push(i)}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=i.skins[t.readInt(!0)];for(let i=0,s=t.readInt(!0);i<s;i++){let i=t.readInt(!0);for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readStringRef(),a=e.getAttachment(i,s),o=a.bones,h=a.vertices,l=o?h.length/3*2:h.length,c=t.readInt(!0),u=c-1,d=t.readInt(!0),p=new sp(c,d,i,a),f=t.readFloat();for(let e=0,i=0;;e++){let n,s=t.readInt(!0);if(0==s)n=o?Ml.newFloatArray(l):h;else{n=Ml.newFloatArray(l);let e=t.readInt(!0);if(s+=e,1==r)for(let i=e;i<s;i++)n[i]=t.readFloat();else for(let i=e;i<s;i++)n[i]=t.readFloat()*r;if(!o)for(let t=0,e=n.length;t<e;t++)n[t]+=h[t]}if(p.setFrame(e,f,n),e==u)break;let a=t.readFloat();switch(t.readByte()){case bf:p.setStepped(e);break;case Ef:tf(t,p,i++,e,0,f,a,0,1,1)}f=a}n.push(p)}}}let s=t.readInt(!0);if(s>0){let e=new op(s),r=i.slots.length;for(let i=0;i<s;i++){let n=t.readFloat(),s=t.readInt(!0),a=Ml.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=Ml.newArray(r-s,0),h=0,l=0;for(let e=0;e<s;e++){let e=t.readInt(!0);for(;h!=e;)o[l++]=h++;a[h+t.readInt(!0)]=h++}for(;h<r;)o[l++]=h++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--l]);e.setFrame(i,n,a)}n.push(e)}let a=t.readInt(!0);if(a>0){let e=new ap(a);for(let n=0;n<a;n++){let r=t.readFloat(),s=i.events[t.readInt(!0)],a=new kp(r,s);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():s.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(n,a)}n.push(e)}let o=0;for(let t=0,e=n.length;t<e;t++)o=Math.max(o,n[t].getDuration());return new xd(e,n,o)}}Zp.__initStatic();class Kp{constructor(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}class Jp{constructor(t=null,e=null){this.bones=t,this.vertices=e}}function $p(t,e,i){let n=t.readFloat(),r=t.readFloat()*i;for(let s=0,a=0,o=e.getFrameCount()-1;e.setFrame(s,n,r),s!=o;s++){let o=t.readFloat(),h=t.readFloat()*i;switch(t.readByte()){case bf:e.setStepped(s);break;case Ef:tf(t,e,a++,s,0,n,o,r,h,1)}n=o,r=h}return e}function Qp(t,e,i){let n=t.readFloat(),r=t.readFloat()*i,s=t.readFloat()*i;for(let a=0,o=0,h=e.getFrameCount()-1;e.setFrame(a,n,r,s),a!=h;a++){let h=t.readFloat(),l=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case bf:e.setStepped(a);break;case Ef:tf(t,e,o++,a,0,n,h,r,l,i),tf(t,e,o++,a,1,n,h,s,c,i)}n=h,r=l,s=c}return e}function tf(t,e,i,n,r,s,a,o,h,l){e.setBezier(i,n,r,s,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,a,h)}const ef=0,nf=1,rf=2,sf=3,af=4,of=5,hf=6,lf=7,cf=8,uf=9,df=0,pf=1,ff=2,mf=3,_f=4,gf=5,yf=0,xf=1,vf=2,bf=1,Ef=2;class Sf{constructor(){Sf.prototype.__init.call(this),Sf.prototype.__init2.call(this),Sf.prototype.__init3.call(this),Sf.prototype.__init4.call(this),Sf.prototype.__init5.call(this),Sf.prototype.__init6.call(this),Sf.prototype.__init7.call(this)}__init(){this.minX=0}__init2(){this.minY=0}__init3(){this.maxX=0}__init4(){this.maxY=0}__init5(){this.boundingBoxes=new Array}__init6(){this.polygons=new Array}__init7(){this.polygonPool=new Pl(()=>Ml.newFloatArray(16))}update(t,e){if(null==t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,n=this.polygons,r=this.polygonPool,s=t.slots,a=s.length;i.length=0,r.freeAll(n),n.length=0;for(let t=0;t<a;t++){let e=s[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof ud){let t=a;i.push(t);let s=r.obtain();s.length!=t.worldVerticesLength&&(s=Ml.newFloatArray(t.worldVerticesLength)),n.push(s),t.computeWorldVertices(e,0,t.worldVerticesLength,s,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons;for(let s=0,a=r.length;s<a;s++){let a=r[s],o=a;for(let r=0,s=a.length;r<s;r+=2){let s=o[r],a=o[r+1];t=Math.min(t,s),e=Math.min(e,a),i=Math.max(i,s),n=Math.max(n,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,n){let r=this.minX,s=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||t>=a&&i>=a||e>=o&&n>=o)return!1;let h=(n-e)/(i-t),l=h*(r-t)+e;if(l>s&&l<o)return!0;if(l=h*(a-t)+e,l>s&&l<o)return!0;let c=(s-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null}containsPointPolygon(t,e,i){let n=t,r=t.length,s=r-2,a=!1;for(let t=0;t<r;t+=2){let r=n[t+1],o=n[s+1];if(r<i&&o>=i||o<i&&r>=i){let h=n[t];h+(i-r)/(o-r)*(n[s]-h)<e&&(a=!a)}s=t}return a}intersectsSegment(t,e,i,n){let r=this.polygons;for(let s=0,a=r.length;s<a;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null}intersectsSegmentPolygon(t,e,i,n,r){let s=t,a=t.length,o=e-n,h=i-r,l=e*r-i*n,c=s[a-2],u=s[a-1];for(let t=0;t<a;t+=2){let a=s[t],d=s[t+1],p=c*d-u*a,f=c-a,m=u-d,_=o*m-h*f,g=(l*f-o*p)/_;if((g>=c&&g<=a||g>=a&&g<=c)&&(g>=e&&g<=n||g>=n&&g<=e)){let t=(l*m-h*p)/_;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(null==t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Tf{__init(){this.scale=1}__init2(){this.linkedMeshes=new Array}constructor(t){Tf.prototype.__init.call(this),Tf.prototype.__init2.call(this),this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new jp,n="string"==typeof t?JSON.parse(t):t,r=n.skeleton;if(r){if(i.hash=r.hash,i.version=r.spine,"4.0"!==i.version.substr(0,3)){let t=`Spine 4.0 loader cant load version ${r.spine}. Please configure your pixi-spine bundle`;console.error(t)}i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images}if(n.bones)for(let t=0;t<n.bones.length;t++){let r=n.bones[t],s=null,a=If(r,"parent",null);if(null!=a&&(s=i.findBone(a),null==s))throw new Error("Parent bone not found: "+a);let o=new Cp(i.bones.length,r.name,s);o.length=If(r,"length",0)*e,o.x=If(r,"x",0)*e,o.y=If(r,"y",0)*e,o.rotation=If(r,"rotation",0),o.scaleX=If(r,"scaleX",1),o.scaleY=If(r,"scaleY",1),o.shearX=If(r,"shearX",0),o.shearY=If(r,"shearY",0),o.transformMode=Ml.enumValue(Ip,If(r,"transform","Normal")),o.skinRequired=If(r,"skin",!1);let h=If(r,"color",null);h&&o.color.setFromString(h),i.bones.push(o)}if(n.slots)for(let t=0;t<n.slots.length;t++){let e=n.slots[t],r=e.name,s=e.bone,a=i.findBone(s);if(null==a)throw new Error("Slot bone not found: "+s);let o=new Wp(i.slots.length,r,a),h=If(e,"color",null);h&&o.color.setFromString(h);let l=If(e,"dark",null);l&&(o.darkColor=Al.fromString(l)),o.attachmentName=If(e,"attachment",null),o.blendMode=Tf.blendModeFromString(If(e,"blend","normal")),i.slots.push(o)}if(n.ik)for(let t=0;t<n.ik.length;t++){let r=n.ik[t],s=new Bp(r.name);s.order=If(r,"order",0),s.skinRequired=If(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("IK bone not found: "+e);s.bones.push(n)}s.target=i.findBone(r.target),s.mix=If(r,"mix",1),s.softness=If(r,"softness",0)*e,s.bendDirection=If(r,"bendPositive",!0)?1:-1,s.compress=If(r,"compress",!1),s.stretch=If(r,"stretch",!1),s.uniform=If(r,"uniform",!1),i.ikConstraints.push(s)}if(n.transform)for(let t=0;t<n.transform.length;t++){let r=n.transform[t],s=new Hp(r.name);s.order=If(r,"order",0),s.skinRequired=If(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findBone(a),null==s.target)throw new Error("Transform constraint target bone not found: "+a);s.local=If(r,"local",!1),s.relative=If(r,"relative",!1),s.offsetRotation=If(r,"rotation",0),s.offsetX=If(r,"x",0)*e,s.offsetY=If(r,"y",0)*e,s.offsetScaleX=If(r,"scaleX",0),s.offsetScaleY=If(r,"scaleY",0),s.offsetShearY=If(r,"shearY",0),s.mixRotate=If(r,"mixRotate",1),s.mixX=If(r,"mixX",1),s.mixY=If(r,"mixY",s.mixX),s.mixScaleX=If(r,"mixScaleX",1),s.mixScaleY=If(r,"mixScaleY",s.mixScaleX),s.mixShearY=If(r,"mixShearY",1),i.transformConstraints.push(s)}if(n.path)for(let t=0;t<n.path.length;t++){let r=n.path[t],s=new Xp(r.name);s.order=If(r,"order",0),s.skinRequired=If(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],n=i.findBone(e);if(null==n)throw new Error("Transform constraint bone not found: "+e);s.bones.push(n)}let a=r.target;if(s.target=i.findSlot(a),null==s.target)throw new Error("Path target slot not found: "+a);s.positionMode=Ml.enumValue(Mp,If(r,"positionMode","Percent")),s.spacingMode=Ml.enumValue(Pp,If(r,"spacingMode","Length")),s.rotateMode=Ml.enumValue(Op,If(r,"rotateMode","Tangent")),s.offsetRotation=If(r,"rotation",0),s.position=If(r,"position",0),s.positionMode==Mp.Fixed&&(s.position*=e),s.spacing=If(r,"spacing",0),s.spacingMode!=Pp.Length&&s.spacingMode!=Pp.Fixed||(s.spacing*=e),s.mixRotate=If(r,"mixRotate",1),s.mixX=If(r,"mixX",1),s.mixY=If(r,"mixY",s.mixX),i.pathConstraints.push(s)}if(n.skins)for(let t=0;t<n.skins.length;t++){let e=n.skins[t],r=new qp(e.name);if(e.bones)for(let n=0;n<e.bones.length;n++){let s=i.findBone(e.bones[n]);if(null==s)throw new Error("Skin bone not found: "+e.bones[t]);r.bones.push(s)}if(e.ik)for(let n=0;n<e.ik.length;n++){let s=i.findIkConstraint(e.ik[n]);if(null==s)throw new Error("Skin IK constraint not found: "+e.ik[t]);r.constraints.push(s)}if(e.transform)for(let n=0;n<e.transform.length;n++){let s=i.findTransformConstraint(e.transform[n]);if(null==s)throw new Error("Skin transform constraint not found: "+e.transform[t]);r.constraints.push(s)}if(e.path)for(let n=0;n<e.path.length;n++){let s=i.findPathConstraint(e.path[n]);if(null==s)throw new Error("Skin path constraint not found: "+e.path[t]);r.constraints.push(s)}for(let t in e.attachments){let n=i.findSlot(t);if(null==n)throw new Error("Slot not found: "+t);let s=e.attachments[t];for(let t in s){let e=this.readAttachment(s[t],r,n.index,t,i);e&&r.setAttachment(n.index,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],n=(e.skin?i.findSkin(e.skin):i.defaultSkin).getAttachment(e.slotIndex,e.parent);e.mesh.deformAttachment=e.inheritDeform?n:e.mesh,e.mesh.setParentMesh(n)}if(this.linkedMeshes.length=0,n.events)for(let t in n.events){let e=n.events[t],r=new Np(t);r.intValue=If(e,"int",0),r.floatValue=If(e,"float",0),r.stringValue=If(e,"string",""),r.audioPath=If(e,"audio",null),r.audioPath&&(r.volume=If(e,"volume",1),r.balance=If(e,"balance",0)),i.events.push(r)}if(n.animations)for(let t in n.animations){let e=n.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,n,r){let s=this.scale;switch(n=If(t,"name",n),If(t,"type","region")){case"region":{let i=If(t,"path",n),r=this.attachmentLoader.newRegionAttachment(e,n,i);if(!r)return null;r.path=i,r.x=If(t,"x",0)*s,r.y=If(t,"y",0)*s,r.scaleX=If(t,"scaleX",1),r.scaleY=If(t,"scaleY",1),r.rotation=If(t,"rotation",0),r.width=t.width*s,r.height=t.height*s;let a=If(t,"color",null);return a&&r.color.setFromString(a),r}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=If(t,"color",null);return r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=If(t,"path",n),a=this.attachmentLoader.newMeshAttachment(e,n,r);if(!a)return null;a.path=r;let o=If(t,"color",null);o&&a.color.setFromString(o),a.width=If(t,"width",0)*s,a.height=If(t,"height",0)*s;let h=If(t,"parent",null);if(h)return this.linkedMeshes.push(new wf(a,If(t,"skin",null),i,h,If(t,"deform",!0))),a;let l=t.uvs;return this.readVertices(t,a,l.length),a.triangles=t.triangles,a.regionUVs=new Float32Array(l),a.edges=If(t,"edges",null),a.hullLength=2*If(t,"hull",0),a}case"path":{let i=this.attachmentLoader.newPathAttachment(e,n);if(!i)return null;i.closed=If(t,"closed",!1),i.constantSpeed=If(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=Ml.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*s;i.lengths=a;let o=If(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,n);if(!i)return null;i.x=If(t,"x",0)*s,i.y=If(t,"y",0)*s,i.rotation=If(t,"rotation",0);let r=If(t,"color",null);return r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,n);if(!i)return null;let s=If(t,"end",null);if(null!=s){let t=r.findSlot(s);if(null==t)throw new Error("Clipping end slot not found: "+s);i.endSlot=t}let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=If(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readVertices(t,e,i){let n=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=Ml.toFloatArray(r);if(1!=n)for(let e=0,i=r.length;e<i;e++)t[e]*=n;return void(e.vertices=t)}let s=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),s.push(r[t+1]*n),s.push(r[t+2]*n),s.push(r[t+3])}e.bones=a,e.vertices=Ml.toFloatArray(s)}readAnimation(t,e,i){let n=this.scale,r=new Array;if(t.slots)for(let e in t.slots){let n=t.slots[e],s=i.findSlotIndex(e);if(-1==s)throw new Error("Slot not found: "+e);for(let t in n){let i=n[t];if(i)if("attachment"==t){let t=new rp(i.length,s);for(let e=0;e<i.length;e++){let n=i[e];t.setFrame(e,If(n,"time",0),n.name)}r.push(t)}else if("rgba"==t){let t=new Qd(i.length,i.length<<2,s),e=i[0],n=If(e,"time",0),a=Al.fromString(e.color);for(let r=0,s=0;;r++){t.setFrame(r,n,a.r,a.g,a.b,a.a);let o=i[r+1];if(!o){t.shrink(s);break}let h=If(o,"time",0),l=Al.fromString(o.color),c=e.curve;c&&(s=Cf(c,t,s,r,0,n,h,a.r,l.r,1),s=Cf(c,t,s,r,1,n,h,a.g,l.g,1),s=Cf(c,t,s,r,2,n,h,a.b,l.b,1),s=Cf(c,t,s,r,3,n,h,a.a,l.a,1)),n=h,a=l,e=o}r.push(t)}else if("rgb"==t){let t=new tp(i.length,3*i.length,s),e=i[0],n=If(e,"time",0),a=Al.fromString(e.color);for(let r=0,s=0;;r++){t.setFrame(r,n,a.r,a.g,a.b);let o=i[r+1];if(!o){t.shrink(s);break}let h=If(o,"time",0),l=Al.fromString(o.color),c=e.curve;c&&(s=Cf(c,t,s,r,0,n,h,a.r,l.r,1),s=Cf(c,t,s,r,1,n,h,a.g,l.g,1),s=Cf(c,t,s,r,2,n,h,a.b,l.b,1)),n=h,a=l,e=o}r.push(t)}else if("alpha"==t)r.push(Af(i,new ep(i.length,i.length,s),0,1));else if("rgba2"==t){let t=new ip(i.length,7*i.length,s),e=i[0],n=If(e,"time",0),a=Al.fromString(e.light),o=Al.fromString(e.dark);for(let r=0,s=0;;r++){t.setFrame(r,n,a.r,a.g,a.b,a.a,o.r,o.g,o.b);let h=i[r+1];if(!h){t.shrink(s);break}let l=If(h,"time",0),c=Al.fromString(h.light),u=Al.fromString(h.dark),d=e.curve;d&&(s=Cf(d,t,s,r,0,n,l,a.r,c.r,1),s=Cf(d,t,s,r,1,n,l,a.g,c.g,1),s=Cf(d,t,s,r,2,n,l,a.b,c.b,1),s=Cf(d,t,s,r,3,n,l,a.a,c.a,1),s=Cf(d,t,s,r,4,n,l,o.r,u.r,1),s=Cf(d,t,s,r,5,n,l,o.g,u.g,1),s=Cf(d,t,s,r,6,n,l,o.b,u.b,1)),n=l,a=c,o=u,e=h}r.push(t)}else{if("rgb2"!=t)throw new Error("Invalid timeline type for a slot: "+t+" ("+e+")");{let t=new np(i.length,6*i.length,s),e=i[0],n=If(e,"time",0),a=Al.fromString(e.light),o=Al.fromString(e.dark);for(let r=0,s=0;;r++){t.setFrame(r,n,a.r,a.g,a.b,o.r,o.g,o.b);let h=i[r+1];if(!h){t.shrink(s);break}let l=If(h,"time",0),c=Al.fromString(h.light),u=Al.fromString(h.dark),d=e.curve;d&&(s=Cf(d,t,s,r,0,n,l,a.r,c.r,1),s=Cf(d,t,s,r,1,n,l,a.g,c.g,1),s=Cf(d,t,s,r,2,n,l,a.b,c.b,1),s=Cf(d,t,s,r,3,n,l,o.r,u.r,1),s=Cf(d,t,s,r,4,n,l,o.g,u.g,1),s=Cf(d,t,s,r,5,n,l,o.b,u.b,1)),n=l,a=c,o=u,e=h}r.push(t)}}}}if(t.bones)for(let e in t.bones){let s=t.bones[e],a=i.findBoneIndex(e);if(-1==a)throw new Error("Bone not found: "+e);for(let t in s){let e=s[t];if(0!=e.length)if("rotate"===t)r.push(Af(e,new Gd(e.length,e.length,a),0,1));else if("translate"===t){let t=new jd(e.length,e.length<<1,a);r.push(Rf(e,t,"x","y",0,n))}else if("translatex"===t){let t=new Wd(e.length,e.length,a);r.push(Af(e,t,0,n))}else if("translatey"===t){let t=new Hd(e.length,e.length,a);r.push(Af(e,t,0,n))}else if("scale"===t){let t=new zd(e.length,e.length<<1,a);r.push(Rf(e,t,"x","y",1,1))}else if("scalex"===t){let t=new qd(e.length,e.length,a);r.push(Af(e,t,1,1))}else if("scaley"===t){let t=new Zd(e.length,e.length,a);r.push(Af(e,t,1,1))}else if("shear"===t){let t=new Kd(e.length,e.length<<1,a);r.push(Rf(e,t,"x","y",0,1))}else if("shearx"===t){let t=new Jd(e.length,e.length,a);r.push(Af(e,t,0,1))}else if("sheary"===t){let t=new $d(e.length,e.length,a);r.push(Af(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let s=t.ik[e],a=s[0];if(!a)continue;let o=i.findIkConstraint(e),h=i.ikConstraints.indexOf(o),l=new hp(s.length,s.length<<1,h),c=If(a,"time",0),u=If(a,"mix",1),d=If(a,"softness",0)*n;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,If(a,"bendPositive",!0)?1:-1,If(a,"compress",!1),If(a,"stretch",!1));let i=s[t+1];if(!i){l.shrink(e);break}let r=If(i,"time",0),o=If(i,"mix",1),h=If(i,"softness",0)*n,p=a.curve;p&&(e=Cf(p,l,e,t,0,c,r,u,o,1),e=Cf(p,l,e,t,1,c,r,d,h,n)),c=r,u=o,d=h,a=i}r.push(l)}if(t.transform)for(let e in t.transform){let n=t.transform[e],s=n[0];if(!s)continue;let a=i.findTransformConstraint(e),o=i.transformConstraints.indexOf(a),h=new lp(n.length,n.length<<2,o),l=If(s,"time",0),c=If(s,"mixRotate",1),u=If(s,"mixX",1),d=If(s,"mixY",u),p=If(s,"mixScaleX",1),f=If(s,"mixScaleY",p),m=If(s,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,p,f,m);let i=n[t+1];if(!i){h.shrink(e);break}let r=If(i,"time",0),a=If(i,"mixRotate",1),o=If(i,"mixX",1),_=If(i,"mixY",o),g=If(i,"mixScaleX",1),y=If(i,"mixScaleY",g),x=If(i,"mixShearY",1),v=s.curve;v&&(e=Cf(v,h,e,t,0,l,r,c,a,1),e=Cf(v,h,e,t,1,l,r,u,o,1),e=Cf(v,h,e,t,2,l,r,d,_,1),e=Cf(v,h,e,t,3,l,r,p,g,1),e=Cf(v,h,e,t,4,l,r,f,y,1),e=Cf(v,h,e,t,5,l,r,m,x,1)),l=r,c=a,u=o,d=_,p=g,f=y,p=g,s=i}r.push(h)}if(t.path)for(let e in t.path){let s=t.path[e],a=i.findPathConstraintIndex(e);if(-1==a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints[a];for(let t in s){let e=s[t],i=e[0];if(i)if("position"===t){let t=new cp(e.length,e.length,a);r.push(Af(e,t,0,o.positionMode==Mp.Fixed?n:1))}else if("spacing"===t){let t=new up(e.length,e.length,a);r.push(Af(e,t,0,o.spacingMode==Pp.Length||o.spacingMode==Pp.Fixed?n:1))}else if("mix"===t){let t=new dp(e.size,3*e.size,a),n=If(i,"time",0),s=If(i,"mixRotate",1),o=If(i,"mixX",1),h=If(i,"mixY",o);for(let r=0,a=0;;r++){t.setFrame(r,n,s,o,h);let l=e[r+1];if(!l){t.shrink(a);break}let c=If(l,"time",0),u=If(l,"mixRotate",1),d=If(l,"mixX",1),p=If(l,"mixY",d),f=i.curve;f&&(a=Cf(f,t,a,r,0,n,c,s,u,1),a=Cf(f,t,a,r,1,n,c,o,d,1),a=Cf(f,t,a,r,2,n,c,h,p,1)),n=c,s=u,o=d,h=p,i=l}r.push(t)}}}if(t.deform)for(let e in t.deform){let s=t.deform[e],a=i.findSkin(e);if(null!=a)for(let t in s){let e=s[t],o=i.findSlotIndex(t);if(-1==o)throw new Error("Slot not found: "+e.name);for(let t in e){let i=e[t],s=i[0];if(!s)continue;let h=a.getAttachment(o,t);if(null==h)throw new Error("Deform attachment not found: "+i.name);let l=null!=h.bones,c=h.vertices,u=l?c.length/3*2:c.length,d=new sp(i.length,i.length,o,h),p=If(s,"time",0);for(let t=0,e=0;;t++){let r,a=If(s,"vertices",null);if(a){r=Ml.newFloatArray(u);let t=If(s,"offset",0);if(Ml.arrayCopy(a,0,r,t,a.length),1!=n)for(let e=t,i=e+a.length;e<i;e++)r[e]*=n;if(!l)for(let t=0;t<u;t++)r[t]+=c[t]}else r=l?Ml.newFloatArray(u):c;d.setFrame(t,p,r);let o=i[t+1];if(!o){d.shrink(e);break}let h=If(o,"time",0),f=s.curve;f&&(e=Cf(f,d,e,t,0,p,h,0,1,1)),p=h,s=o}r.push(d)}}else if(Fl)throw new Error("Skin not found: "+e)}if(t.drawOrder){let e=new op(t.drawOrder.length),n=i.slots.length,s=0;for(let r=0;r<t.drawOrder.length;r++,s++){let a=t.drawOrder[r],o=null,h=If(a,"offsets",null);if(h){o=Ml.newArray(n,-1);let t=Ml.newArray(n-h.length,0),e=0,r=0;for(let n=0;n<h.length;n++){let s=h[n],a=i.findSlotIndex(s.slot);for(;e!=a;)t[r++]=e++;o[e+s.offset]=e++}for(;e<n;)t[r++]=e++;for(let e=n-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(s,If(a,"time",0),o)}r.push(e)}if(t.events){let e=new ap(t.events.length),n=0;for(let r=0;r<t.events.length;r++,n++){let s=t.events[r],a=i.findEvent(s.name),o=new kp(Ml.toSinglePrecision(If(s,"time",0)),a);o.intValue=If(s,"int",a.intValue),o.floatValue=If(s,"float",a.floatValue),o.stringValue=If(s,"string",a.stringValue),o.data.audioPath&&(o.volume=If(s,"volume",1),o.balance=If(s,"balance",0)),e.setFrame(n,o)}r.push(e)}let s=0;for(let t=0,e=r.length;t<e;t++)s=Math.max(s,r[t].getDuration());if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new xd(e,r,s))}static blendModeFromString(t){if("normal"==(t=t.toLowerCase()))return ft.NORMAL;if("additive"==t)return ft.ADD;if("multiply"==t)return ft.MULTIPLY;if("screen"==t)return ft.SCREEN;throw new Error("Unknown blend mode: "+t)}}class wf{constructor(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}function Af(t,e,i,n){let r=t[0],s=If(r,"time",0),a=If(r,"value",i)*n,o=0;for(let h=0;;h++){e.setFrame(h,s,a);let l=t[h+1];if(!l)return e.shrink(o),e;let c=If(l,"time",0),u=If(l,"value",i)*n;r.curve&&(o=Cf(r.curve,e,o,h,0,s,c,a,u,n)),s=c,a=u,r=l}}function Rf(t,e,i,n,r,s){let a=t[0],o=If(a,"time",0),h=If(a,i,r)*s,l=If(a,n,r)*s,c=0;for(let u=0;;u++){e.setFrame(u,o,h,l);let d=t[u+1];if(!d)return e.shrink(c),e;let p=If(d,"time",0),f=If(d,i,r)*s,m=If(d,n,r)*s,_=a.curve;_&&(c=Cf(_,e,c,u,0,o,p,h,f,s),c=Cf(_,e,c,u,1,o,p,l,m,s)),o=p,h=f,l=m,a=d}}function Cf(t,e,i,n,r,s,a,o,h,l){if("stepped"==t)return e.setStepped(n),i;let c=r<<2,u=t[c],d=t[c+1]*l,p=t[c+2],f=t[c+3]*l;return e.setBezier(i,n,r,s,o,u,d,p,f,a,h),i+1}function If(t,e,i){return void 0!==t[e]?t[e]:i}class Mf extends Ul{createSkeleton(t){this.skeleton=new Gp(t),this.skeleton.updateWorldTransform(),this.stateData=new Ap(t),this.state=new pp(this.stateData)}}
/*!
 * @pixi-spine/loader-uni - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:24 UTC
 *
 * @pixi-spine/loader-uni is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Mat Groves, All Rights Reserved
 */var Pf;function Of(t){const e=t.substr(0,3),i=Math.floor(10*+e+.001);return"3.7"===e?Pf.VER37:"3.8"===e?Pf.VER38:"4.0"===e?Pf.VER40:i<Pf.VER37?Pf.VER37:Pf.UNKNOWN}!function(t){t[t.UNKNOWN=0]="UNKNOWN";t[t.VER37=37]="VER37";t[t.VER38=38]="VER38";t[t.VER40=40]="VER40"}(Pf||(Pf={}));class Df{constructor(){Df.prototype.__init.call(this)}__init(){this.scale=1}readSkeletonData(t,e){let i=new pl(e);i.readString();let n=i.readString(),r=Of(n),s=null;if(r===Pf.VER38&&(s=new Kc(new Oc(t))),i=new pl(e),i.readInt32(),i.readInt32(),n=i.readString(),r=Of(n),r===Pf.VER40&&(s=new Zp(new Rp(t))),!s){let t=`Unsupported version of spine model ${n}, please update pixi-spine`;console.error(t)}return s.scale=this.scale,s.readSkeletonData(e)}}class Ff{constructor(){Ff.prototype.__init2.call(this)}__init2(){this.scale=1}readSkeletonData(t,e){const i=e.skeleton.spine,n=Of(i);let r=null;if(n===Pf.VER37&&(r=new ad(new Gu(t))),n===Pf.VER38&&(r=new tu(new Oc(t))),n===Pf.VER40&&(r=new Tf(new Rp(t))),!r){let t=`Unsupported version of spine model ${i}, please update pixi-spine`;console.error(t)}return r.scale=this.scale,r.readSkeletonData(e)}}class kf extends class{genMiddleware(){const t=this;return{use(e,i){if(!e.data)return i();const n=
/*!
 * @pixi-spine/loader-base - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:22 UTC
 *
 * @pixi-spine/loader-base is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */
function(t){return t.type===as.TYPE.JSON}(e)&&e.data.bones,r=function(t){return t.xhrType===as.XHR_RESPONSE_TYPE.BUFFER}(e)&&("skel"===e.extension||e.metadata&&e.metadata.spineMetadata);if(!n&&!r)return i();let s=null,a=e.data;n?s=t.createJsonParser():(s=t.createBinaryParser(),e.data instanceof ArrayBuffer&&(a=new Uint8Array(e.data)));const o=e.metadata||{},h=o?o.spineSkeletonScale:null;h&&(s.scale=h);const l=o.spineAtlas;if(!1===l)return i();if(l&&l.pages)return t.parseData(e,s,l,a),i();const c=o.spineAtlasSuffix||".atlas";let u=e.url,d=u.indexOf("?");d>0&&(u=u.substr(0,d)),u=u.substr(0,u.lastIndexOf("."))+c,o.spineAtlasFile&&(u=o.spineAtlasFile),u=u.replace(this.baseUrl,"");const p={crossOrigin:e.crossOrigin,xhrType:as.XHR_RESPONSE_TYPE.TEXT,metadata:o.spineMetadata||null,parentResource:e},f={crossOrigin:e.crossOrigin,metadata:o.imageMetadata||null,parentResource:e};let m=e.url.substr(0,e.url.lastIndexOf("/")+1);m=m.replace(this.baseUrl,"");const _=o.imageNamePrefix||e.name+"_atlas_page_",g=o.images?Yl(o.images):o.image?Yl({default:o.image}):o.imageLoader?o.imageLoader(this,_,m,f):function(t,e,i,n){i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");return function(r,s){const a=e+r,o=i+r,h=t.resources[a];if(h){const t=()=>{s(h.texture.baseTexture)};h.texture?t():h.onAfterMiddleware.add(t)}else t.add(a,o,n,t=>{t.error?s(null):(r.indexOf("-pma.")>=0&&(t.texture.baseTexture.alphaMode=St.PMA),s(t.texture.baseTexture))})}}(this,_,m,f);function y(n){new gl(n,g,(function(n){n&&t.parseData(e,s,n,a),i()}))}o.atlasRawData?y(o.atlasRawData):this.add(e.name+"_atlas",u,p,(function(t){t.error?i():y(t.data)}))}}}}{createBinaryParser(){return new Df}createJsonParser(){return new Ff}parseData(t,e,i,n){const r=e;t.spineData=r.readSkeletonData(i,n),t.spineAtlas=i}static __initStatic(){this.use=(new kf).genMiddleware().use}static registerLoaderPlugin(){is.registerPlugin(kf)}}kf.__initStatic();
/*!
 * pixi-spine - v3.0.5
 * Compiled Wed, 14 Jul 2021 08:35:24 UTC
 *
 * pixi-spine is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */
kf.registerLoaderPlugin();var Nf=new Ir({backgroundAlpha:1});document.body.appendChild(Nf.view);var Lf=new Ze;Nf.stage.addChild(Lf);var Bf=new Ze;Lf.addChild(Bf);var Xf=new Ze;Lf.addChild(Xf);var Uf=new Ze;Lf.addChild(Uf);var Yf=new Ze;Xf.addChild(Yf);var Vf=new Ze;Xf.addChild(Vf);var Gf=new Ze;Xf.addChild(Gf),Nf.loader.add("role",d),Nf.loader.add("arrow",c),Nf.loader.add("bullet",u),Nf.loader.add("circle01",p),Nf.loader.onProgress.add((function(t){console.log(t.progress,"loading")})),Nf.loader.load((function(t,e){e.emitter01={data:f},e.dragon_1_json={data:m},jf(e)}));var jf=function(t){Wf(t)},Wf=function(t){console.log(t.dragon_1_json.data);var e={},i=[],n=function(i){if(i){var n=i.id,r=new Xh(n);r.createGraph(t),r.setPos.apply(r,l()(i.pos)),r.setTargetPos.apply(r,l()(i.targetPos)),r.updateGraph(),Yf.addChild(r.graph.root),e[n]=r}},r=function(e){if(e){var n=e.id,r=new Uh(n,e.playerID);r.createGraph(t),r.setPos.apply(r,l()(e.pos)),r.setAngle(e.angle),r.updateGraph(),Vf.addChild(r.graph.root),i[n]=r}},s=Vh()(void 0);s.on("init",(function(a){var o={players:{},bullets:{}},h={},c=[0,0],u=null,d=function(){var t=function(){var t=65 in h,e=68 in h;t^e?t?c[0]=-1:e&&(c[0]=1):c[0]=0;var i=87 in h,n=83 in h;i^n?i?c[1]=-1:n&&(c[1]=1):c[1]=0,s.emit("input","move",{x:c[0],y:c[1]}),c[0]||c[1]||(clearInterval(u),u=null)};u=setInterval(t,1e3/60),t()},p=null;for(var f in addEventListener("keydown",(function(t){h[t.keyCode]=!0,u||d()}),!1),addEventListener("keyup",(function(t){delete h[t.keyCode],u||d()}),!1),Nf.view.addEventListener("mousedown",(function(t){var e;p||(e=function(){s.emit("input","fire")},p=setInterval(e,100),e())})),Nf.view.addEventListener("mouseup",(function(t){clearInterval(p),p=null})),Nf.view.addEventListener("mousemove",(function(t){s.emit("input","mousePos",{x:t.clientX,y:t.clientY})})),a.players)n(a.players[f]);for(var m in a.bullets)r(a.bullets[m]);s.on("addPlayer",(function(t){n(t)})),s.on("leave",(function(t){!function(t){var i=e[t];i&&(Yf.removeChild(i.graph.root),delete e[t])}(t)})),s.on("update",(function(t){o.players=t.players,o.bullets=t.bullets})),s.on("addBullet",(function(t){r(t)})),s.on("removeBullet",(function(t){!function(t){var e=i[t];e&&(Vf.removeChild(e.graph.root),delete i[t])}(t)})),s.on("hit",(function(t){var e;(e=_.ownerPos).set.apply(e,l()(t.pos)),_.emit=!0}));var _=new al(Yf,[t.circle01.texture],t.emitter01.data);_.emit=!1,Nf.ticker.add((function(t){for(var n in _.update(.001*Nf.ticker.deltaMS),o.players){var r=o.players[n],s=e[n];s&&(s.setPos.apply(s,l()(r.pos)),s.setTargetPos.apply(s,l()(r.targetPos)),s.updateGraph(.5))}for(var a in o.bullets){var h=o.bullets[a],c=i[a];c&&(c.setPos.apply(c,l()(h.pos)),c.setAngle(h.angle),c.updateGraph(.5))}}))}))}}]);